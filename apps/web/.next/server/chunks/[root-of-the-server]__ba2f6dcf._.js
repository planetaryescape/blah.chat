module.exports=[569783,(e,t,n)=>{(function(){"use strict";var r={function:!0,object:!0},i=r.undefined&&window||this,a=r.object&&n,s=r.object&&t&&!t.nodeType&&t,o=a&&s&&e.g;o&&(o.global===o||o.window===o||o.self===o)&&(i=o);var l=/\bOpera/,u=Object.prototype,c=u.hasOwnProperty,d=u.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function h(e,t){for(var n in e)c.call(e,n)&&t(e[n],n,e)}function m(e){return null==e?f(e):d.call(e).slice(8,-1)}function p(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function b(e,t){var n=null,r=function(r,i){n=t(n,r,i,e)},i=-1,a=e?e.length:0;if("number"==typeof a&&a>-1&&a<=0x1fffffffffffff)for(;++i<a;)r(e[i],i,e);else h(e,r);return n}function y(e){return String(e).replace(/^ +| +$/g,"")}function v(e){var t,n,r,a,s,o=i,u=e&&"object"==typeof e&&"String"!=m(e);u&&(o=e,e=null);var c=o.navigator||{},f=c.userAgent||"";e||(e=f);var E=u?!!c.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),w="Object",A=u&&o.java?"JavaPackage":m(o.java),N=/\bJava/.test(A)&&o.java,T=N&&m(o.environment)==(u?w:"Environment"),I=N?"a":"α",S=N?"b":"β",R=o.document||{},O=o.operamini||o.opera,x=l.test(x=u&&O?O["[[Class]]"]:m(O))?x:O=null,k=e,C=[],_=null,V=e==f,D=V&&O&&"function"==typeof O.version&&O.version(),F=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)}),U=b(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)}),P=M([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),L=b({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(t,n,r){return t||(n[P]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(P)]||RegExp("\\b"+p(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}),B=b(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(t,n){var r,i,a,s=n.pattern||p(n);return!t&&(t=RegExp("\\b"+s+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(r=t,i=n.label||n,a={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},s&&i&&/^Win/i.test(r)&&!/^Windows Phone /i.test(r)&&(a=a[/[\d.]+$/.exec(r)])&&(r="Windows "+a),r=String(r),s&&i&&(r=r.replace(RegExp(s,"i"),i)),t=r=g(r.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),t});function M(t){return b(t,function(t,n){var r=n.pattern||p(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=g(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function j(t){return b(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}if(F&&(F=[F]),/\bAndroid\b/.test(B)&&!P&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(P=y(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),L&&!P?P=M([L]):L&&P&&(P=P.replace(RegExp("^("+p(L)+")[-_.\\s]","i"),L+" ").replace(RegExp("^("+p(L)+")[-_.]?(\\w)","i"),L+" $2")),(a=/\bGoogle TV\b/.exec(P))&&(P=a[0]),/\bSimulator\b/i.test(e)&&(P=(P?P+" ":"")+"Simulator"),"Opera Mini"==U&&/\bOPiOS\b/.test(e)&&C.push("running in Turbo/Uncompressed mode"),"IE"==U&&/\blike iPhone OS\b/.test(e)?(L=(a=v(e.replace(/like iPhone OS/,""))).manufacturer,P=a.product):/^iP/.test(P)?(U||(U="Safari"),B="iOS"+((a=/ OS ([\d_]+)/i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==U&&/^Linux\b/i.test(B)?B="Kubuntu":L&&"Google"!=L&&(/Chrome/.test(U)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(P))||/\bAndroid\b/.test(B)&&/^Chrome/.test(U)&&/\bVersion\//i.test(e)?(U="Android Browser",B=/\bAndroid\b/.test(B)?B:"Android"):"Silk"==U?(/\bMobi/i.test(e)||(B="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&C.unshift("accelerated")):"UC Browser"==U&&/\bUCWEB\b/.test(e)?C.push("speed mode"):"PaleMoon"==U&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?C.push("identifying as Firefox "+a[1]):"Firefox"==U&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(B||(B="Firefox OS"),P||(P=a[1])):!U||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(U))?(U&&!P&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(U=null),(a=P||L||B)&&(P||L||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(B))&&(U=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(B)?B:a)+" Browser")):"Electron"==U&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&C.push("Chromium "+a),D||(D=j(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",p(U),"(?:Firefox|Minefield|NetFront)"])),(a="iCab"==F&&parseFloat(D)>3&&"WebKit"||/\bOpera\b/.test(U)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(F)&&"WebKit"||!F&&/\bMSIE\b/i.test(e)&&("Mac OS"==B?"Tasman":"Trident")||"WebKit"==F&&/\bPlayStation\b(?! Vita\b)/i.test(U)&&"NetFront")&&(F=[a]),"IE"==U&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(U+=" Mobile",B="Windows Phone "+(/\+$/.test(a)?a:a+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(U="IE Mobile",B="Windows Phone 8.x",C.unshift("desktop mode"),D||(D=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=U&&"Trident"==F&&(a=/\brv:([\d.]+)/.exec(e))&&(U&&C.push("identifying as "+U+(D?" "+D:"")),U="IE",D=a[1]),V){if(n="global",r=null!=(t=o)?typeof t[n]:"number",/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!t[n])m(a=o.runtime)==(u?w:"ScriptBridgingProxyObject")?(U="Adobe AIR",B=a.flash.system.Capabilities.os):m(a=o.phantom)==(u?w:"RuntimeObject")?(U="PhantomJS",D=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof R.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(D=[D,R.documentMode],(a=+a[1]+4)!=D[1]&&(C.push("IE "+D[1]+" mode"),F&&(F[1]=""),D[1]=a),D="IE"==U?String(D[1].toFixed(1)):D[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(U)&&(C.push("masking as "+U+" "+D),U="IE",D="11.0",F=["Trident"],B="Windows");else if(N&&(k=(a=N.lang.System).getProperty("os.arch"),B=B||a.getProperty("os.name")+" "+a.getProperty("os.version")),T){try{D=o.require("ringo/engine").version.join("."),U="RingoJS"}catch(e){(a=o.system)&&a.global.system==o.system&&(U="Narwhal",B||(B=a[0].os||null))}U||(U="Rhino")}else"object"==typeof o.process&&!o.process.browser&&(a=o.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(C.push("Node "+a.versions.node),U="Electron",D=a.versions.electron):"string"==typeof a.versions.nw&&(C.push("Chromium "+D,"Node "+a.versions.node),U="NW.js",D=a.versions.nw)),U||(U="Node.js",k=a.arch,B=a.platform,D=(D=/[\d.]+/.exec(a.version))?D[0]:null));B=B&&g(B)}if(D&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(D)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(V&&c.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(_=/b/i.test(a)?"beta":"alpha",D=D.replace(RegExp(a+"\\+?$"),"")+("beta"==_?S:I)+(/\d+\+?/.exec(a)||"")),"Fennec"==U||"Firefox"==U&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(B))U="Firefox Mobile";else if("Maxthon"==U&&D)D=D.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(P))"Xbox 360"==P&&(B=null),"Xbox 360"==P&&/\bIEMobile\b/.test(e)&&C.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(U)||U&&!P&&!/Browser|Mobi/.test(U))&&("Windows CE"==B||/Mobi/i.test(e)))U+=" Mobile";else if("IE"==U&&V)try{null===o.external&&C.unshift("platform preview")}catch(e){C.unshift("embedded")}else(/\bBlackBerry\b/.test(P)||/\bBB10\b/.test(e))&&(a=(RegExp(P.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||D)?(B=((a=[a,/BB10/.test(e)])[1]?(P=null,L="BlackBerry"):"Device Software")+" "+a[0],D=null):this!=h&&"Wii"!=P&&(V&&O||/Opera/.test(U)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==U&&/\bOS X (?:\d+\.){2,}/.test(B)||"IE"==U&&(B&&!/^Win/.test(B)&&D>5.5||/\bWindows XP\b/.test(B)&&D>8||8==D&&!/\bTrident\b/.test(e)))&&!l.test(a=v.call(h,e.replace(l,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),l.test(U)?(/\bIE\b/.test(a)&&"Mac OS"==B&&(B=null),a="identify"+a):(a="mask"+a,U=x?g(x.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(B=null),V||(D=null)),F=["Presto"],C.push(a));(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==U&&"+"==a[1].slice(-1)?(U="WebKit Nightly",_="alpha",D=a[1].slice(0,-1)):(D==a[1]||D==(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))&&(D=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==F&&(F=["Blink"]),V&&(E||a[1])?(F&&(F[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=F?"27":"28")):(F&&(F[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),F&&(F[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==U&&(!D||parseInt(D)>45)?D=a:"Chrome"==U&&/\bHeadlessChrome/i.test(e)&&C.unshift("headless")),"Opera"==U&&(a=/\bzbov|zvav$/.exec(B))?(U+=" ",C.unshift("desktop mode"),"zvav"==a?(U+="Mini",D=null):U+="Mobile",B=B.replace(RegExp(" *"+a+"$"),"")):"Safari"==U&&/\bChrome\b/.exec(F&&F[1])?(C.unshift("desktop mode"),U="Chrome Mobile",D=null,/\bOS X\b/.test(B)?(L="Apple",B="iOS 4.3+"):B=null):/\bSRWare Iron\b/.test(U)&&!D&&(D=j("Chrome")),D&&0==D.indexOf(a=/[\d.]+$/.exec(B))&&e.indexOf("/"+a+"-")>-1&&(B=y(B.replace(a,""))),B&&-1!=B.indexOf(U)&&!RegExp(U+" OS").test(B)&&(B=B.replace(RegExp(" *"+p(U)+" *"),"")),F&&!/\b(?:Avant|Nook)\b/.test(U)&&(/Browser|Lunascape|Maxthon/.test(U)||"Safari"!=U&&/^iOS/.test(B)&&/\bSafari\b/.test(F[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(U)&&F[1])&&(a=F[F.length-1])&&C.push(a),C.length&&(C=["("+C.join("; ")+")"]),L&&P&&0>P.indexOf(L)&&C.push("on "+L),P&&C.push((/^on /.test(C[C.length-1])?"":"on ")+P),B&&(s=(a=/ ([\d.+]+)$/.exec(B))&&"/"==B.charAt(B.length-a[0].length-1),B={architecture:32,family:a&&!s?B.replace(a[0],""):B,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!s?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(k))&&!/\bi686\b/i.test(k)?(B&&(B.architecture=64,B.family=B.family.replace(RegExp(" *"+a),"")),U&&(/\bWOW64\b/i.test(e)||V&&/\w(?:86|32)$/.test(c.cpuClass||c.platform)&&!/\bWin64; x64\b/i.test(e))&&C.unshift("32-bit")):B&&/^OS X/.test(B.family)&&"Chrome"==U&&parseFloat(D)>=39&&(B.architecture=64),e||(e=null);var G={};return G.description=e,G.layout=F&&F[0],G.manufacturer=L,G.name=U,G.prerelease=_,G.product=P,G.ua=e,G.version=U&&D,G.os=B||{architecture:null,family:null,version:null,toString:function(){return"null"}},G.parse=v,G.toString=function(){return this.description||""},G.version&&C.unshift(D),G.name&&C.unshift(U),B&&U&&!(B==String(B).split(" ")[0]&&(B==U.split(" ")[0]||P))&&C.push(P?"("+B+")":"on "+B),C.length&&(G.description=C.join(" ")),G}var E=v();if("function"==typeof define&&"object"==typeof define.amd&&define.amd)i.platform=E,e.r,void 0!==E&&e.v(E);else a&&s?h(E,function(e,t){a[t]=e}):i.platform=E}).call(e.e)},660526,(e,t,n)=>{t.exports=e.x("node:os",()=>require("node:os"))},509656,(e,t,n)=>{t.exports=e.x("node:tty",()=>require("node:tty"))},613399,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Argument=void 0,n.Argument=class{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},678283,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JSONArgument=void 0;let r=e.r(613399);class i extends r.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e.substring(1,e.length-1)}}n.JSONArgument=i},890923,(e,t,n)=>{var r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0,(ea||(t.DocumentUri=ea={})).is=function(e){return"string"==typeof e},(es||(t.URI=es={})).is=function(e){return"string"==typeof e},(U=eo||(t.integer=eo={})).MIN_VALUE=-0x80000000,U.MAX_VALUE=0x7fffffff,U.is=function(e){return"number"==typeof e&&U.MIN_VALUE<=e&&e<=U.MAX_VALUE},(P=el||(t.uinteger=el={})).MIN_VALUE=0,P.MAX_VALUE=0x7fffffff,P.is=function(e){return"number"==typeof e&&P.MIN_VALUE<=e&&e<=P.MAX_VALUE},(L=eu||(t.Position=eu={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=el.MAX_VALUE),t===Number.MAX_VALUE&&(t=el.MAX_VALUE),{line:e,character:t}},L.is=function(e){return tE.objectLiteral(e)&&tE.uinteger(e.line)&&tE.uinteger(e.character)},(B=ec||(t.Range=ec={})).create=function(e,t,n,r){if(tE.uinteger(e)&&tE.uinteger(t)&&tE.uinteger(n)&&tE.uinteger(r))return{start:eu.create(e,t),end:eu.create(n,r)};if(eu.is(e)&&eu.is(t))return{start:e,end:t};throw Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,"]"))},B.is=function(e){return tE.objectLiteral(e)&&eu.is(e.start)&&eu.is(e.end)},(M=ed||(t.Location=ed={})).create=function(e,t){return{uri:e,range:t}},M.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&(tE.string(e.uri)||tE.undefined(e.uri))},(j=ef||(t.LocationLink=ef={})).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},j.is=function(e){return tE.objectLiteral(e)&&ec.is(e.targetRange)&&tE.string(e.targetUri)&&ec.is(e.targetSelectionRange)&&(ec.is(e.originSelectionRange)||tE.undefined(e.originSelectionRange))},(G=eg||(t.Color=eg={})).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},G.is=function(e){return tE.objectLiteral(e)&&tE.numberRange(e.red,0,1)&&tE.numberRange(e.green,0,1)&&tE.numberRange(e.blue,0,1)&&tE.numberRange(e.alpha,0,1)},($=eh||(t.ColorInformation=eh={})).create=function(e,t){return{range:e,color:t}},$.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&eg.is(e.color)},(W=em||(t.ColorPresentation=em={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},W.is=function(e){return tE.objectLiteral(e)&&tE.string(e.label)&&(tE.undefined(e.textEdit)||eT.is(e))&&(tE.undefined(e.additionalTextEdits)||tE.typedArray(e.additionalTextEdits,eT.is))},(K=ep||(t.FoldingRangeKind=ep={})).Comment="comment",K.Imports="imports",K.Region="region",(Y=eb||(t.FoldingRange=eb={})).create=function(e,t,n,r,i,a){var s={startLine:e,endLine:t};return tE.defined(n)&&(s.startCharacter=n),tE.defined(r)&&(s.endCharacter=r),tE.defined(i)&&(s.kind=i),tE.defined(a)&&(s.collapsedText=a),s},Y.is=function(e){return tE.objectLiteral(e)&&tE.uinteger(e.startLine)&&tE.uinteger(e.startLine)&&(tE.undefined(e.startCharacter)||tE.uinteger(e.startCharacter))&&(tE.undefined(e.endCharacter)||tE.uinteger(e.endCharacter))&&(tE.undefined(e.kind)||tE.string(e.kind))},(X=ey||(t.DiagnosticRelatedInformation=ey={})).create=function(e,t){return{location:e,message:t}},X.is=function(e){return tE.defined(e)&&ed.is(e.location)&&tE.string(e.message)},(Z=ev||(t.DiagnosticSeverity=ev={})).Error=1,Z.Warning=2,Z.Information=3,Z.Hint=4,(J=eE||(t.DiagnosticTag=eE={})).Unnecessary=1,J.Deprecated=2,(ew||(t.CodeDescription=ew={})).is=function(e){return tE.objectLiteral(e)&&tE.string(e.href)},(H=eA||(t.Diagnostic=eA={})).create=function(e,t,n,r,i,a){var s={range:e,message:t};return tE.defined(n)&&(s.severity=n),tE.defined(r)&&(s.code=r),tE.defined(i)&&(s.source=i),tE.defined(a)&&(s.relatedInformation=a),s},H.is=function(e){var t;return tE.defined(e)&&ec.is(e.range)&&tE.string(e.message)&&(tE.number(e.severity)||tE.undefined(e.severity))&&(tE.integer(e.code)||tE.string(e.code)||tE.undefined(e.code))&&(tE.undefined(e.codeDescription)||tE.string(null==(t=e.codeDescription)?void 0:t.href))&&(tE.string(e.source)||tE.undefined(e.source))&&(tE.undefined(e.relatedInformation)||tE.typedArray(e.relatedInformation,ey.is))},(z=eN||(t.Command=eN={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return tE.defined(n)&&n.length>0&&(i.arguments=n),i},z.is=function(e){return tE.defined(e)&&tE.string(e.title)&&tE.string(e.command)},(q=eT||(t.TextEdit=eT={})).replace=function(e,t){return{range:e,newText:t}},q.insert=function(e,t){return{range:{start:e,end:e},newText:t}},q.del=function(e){return{range:e,newText:""}},q.is=function(e){return tE.objectLiteral(e)&&tE.string(e.newText)&&ec.is(e.range)},(Q=eI||(t.ChangeAnnotation=eI={})).create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},Q.is=function(e){return tE.objectLiteral(e)&&tE.string(e.label)&&(tE.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(tE.string(e.description)||void 0===e.description)},(eS||(t.ChangeAnnotationIdentifier=eS={})).is=function(e){return tE.string(e)},(ee=eR||(t.AnnotatedTextEdit=eR={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},ee.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},ee.del=function(e,t){return{range:e,newText:"",annotationId:t}},ee.is=function(e){return eT.is(e)&&(eI.is(e.annotationId)||eS.is(e.annotationId))},(et=eO||(t.TextDocumentEdit=eO={})).create=function(e,t){return{textDocument:e,edits:t}},et.is=function(e){return tE.defined(e)&&eF.is(e.textDocument)&&Array.isArray(e.edits)},(en=ex||(t.CreateFile=ex={})).create=function(e,t,n){var r={kind:"create",uri:e};return void 0!==t&&(void 0!==t.overwrite||void 0!==t.ignoreIfExists)&&(r.options=t),void 0!==n&&(r.annotationId=n),r},en.is=function(e){return e&&"create"===e.kind&&tE.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||tE.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tE.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eS.is(e.annotationId))},(er=ek||(t.RenameFile=ek={})).create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0!==n&&(void 0!==n.overwrite||void 0!==n.ignoreIfExists)&&(i.options=n),void 0!==r&&(i.annotationId=r),i},er.is=function(e){return e&&"rename"===e.kind&&tE.string(e.oldUri)&&tE.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||tE.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tE.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eS.is(e.annotationId))},(ei=eC||(t.DeleteFile=eC={})).create=function(e,t,n){var r={kind:"delete",uri:e};return void 0!==t&&(void 0!==t.recursive||void 0!==t.ignoreIfNotExists)&&(r.options=t),void 0!==n&&(r.annotationId=n),r},ei.is=function(e){return e&&"delete"===e.kind&&tE.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||tE.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||tE.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||eS.is(e.annotationId))},(e_||(t.WorkspaceEdit=e_={})).is=function(e){return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every(function(e){return tE.string(e.kind)?ex.is(e)||ek.is(e)||eC.is(e):eO.is(e)}))};var n,r,i,a,s,o,l,u,c,d,f,g,h,m,p,b,y,v,E,w,A,N,T,I,S,R,O,x,k,C,_,V,D,F,U,P,L,B,M,j,G,$,W,K,Y,X,Z,J,H,z,q,Q,ee,et,en,er,ei,ea,es,eo,el,eu,ec,ed,ef,eg,eh,em,ep,eb,ey,ev,eE,ew,eA,eN,eT,eI,eS,eR,eO,ex,ek,eC,e_,eV,eD,eF,eU,eP,eL,eB,eM,ej,eG,e$,eW,eK,eY,eX,eZ,eJ,eH,ez,eq,eQ,e0,e1,e2,e3,e9,e4,e5,e6,e8,e7,te,tt,tn,tr,ti,ta,ts,to,tl,tu,tc,td,tf,tg,th,tm,tp,tb,ty,tv,tE,tw=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=eT.insert(e,t):eS.is(n)?(i=n,r=eR.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=eR.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=eT.replace(e,t):eS.is(n)?(i=n,r=eR.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=eR.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=eT.del(e):eS.is(t)?(r=t,n=eR.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=eR.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw Error("Text edit change is not configured to manage change annotations.")},e}(),tA=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(eS.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw Error("Id ".concat(n," is already in use."));if(void 0===t)throw Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}();t.WorkspaceChange=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new tA(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(e){if(eO.is(e)){var n=new tw(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new tw(e.changes[n]);t._textEditChanges[n]=r})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(eF.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){var r=[],i={textDocument:t,edits:r};this._workspaceEdit.documentChanges.push(i),n=new tw(r,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var r=[];this._workspaceEdit.changes[e]=r,n=new tw(r),this._textEditChanges[e]=n}return n},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new tA,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){var r,i,a;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eI.is(t)||eS.is(t)?r=t:n=t,void 0===r?i=ex.create(e,n):(a=eS.is(r)?r:this._changeAnnotations.manage(r),i=ex.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),void 0!==a)return a},e.prototype.renameFile=function(e,t,n,r){var i,a,s;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eI.is(n)||eS.is(n)?i=n:r=n,void 0===i?a=ek.create(e,t,r):(s=eS.is(i)?i:this._changeAnnotations.manage(i),a=ek.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(a),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){var r,i,a;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eI.is(t)||eS.is(t)?r=t:n=t,void 0===r?i=eC.create(e,n):(a=eS.is(r)?r:this._changeAnnotations.manage(r),i=eC.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),void 0!==a)return a},e}(),(n=eV||(t.TextDocumentIdentifier=eV={})).create=function(e){return{uri:e}},n.is=function(e){return tE.defined(e)&&tE.string(e.uri)},(r=eD||(t.VersionedTextDocumentIdentifier=eD={})).create=function(e,t){return{uri:e,version:t}},r.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&tE.integer(e.version)},(i=eF||(t.OptionalVersionedTextDocumentIdentifier=eF={})).create=function(e,t){return{uri:e,version:t}},i.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&(null===e.version||tE.integer(e.version))},(a=eU||(t.TextDocumentItem=eU={})).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},a.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&tE.string(e.languageId)&&tE.integer(e.version)&&tE.string(e.text)},(s=eP||(t.MarkupKind=eP={})).PlainText="plaintext",s.Markdown="markdown",s.is=function(e){return e===s.PlainText||e===s.Markdown},(eL||(t.MarkupContent=eL={})).is=function(e){return tE.objectLiteral(e)&&eP.is(e.kind)&&tE.string(e.value)},(o=eB||(t.CompletionItemKind=eB={})).Text=1,o.Method=2,o.Function=3,o.Constructor=4,o.Field=5,o.Variable=6,o.Class=7,o.Interface=8,o.Module=9,o.Property=10,o.Unit=11,o.Value=12,o.Enum=13,o.Keyword=14,o.Snippet=15,o.Color=16,o.File=17,o.Reference=18,o.Folder=19,o.EnumMember=20,o.Constant=21,o.Struct=22,o.Event=23,o.Operator=24,o.TypeParameter=25,(l=eM||(t.InsertTextFormat=eM={})).PlainText=1,l.Snippet=2,(ej||(t.CompletionItemTag=ej={})).Deprecated=1,(u=eG||(t.InsertReplaceEdit=eG={})).create=function(e,t,n){return{newText:e,insert:t,replace:n}},u.is=function(e){return e&&tE.string(e.newText)&&ec.is(e.insert)&&ec.is(e.replace)},(c=e$||(t.InsertTextMode=e$={})).asIs=1,c.adjustIndentation=2,(eW||(t.CompletionItemLabelDetails=eW={})).is=function(e){return e&&(tE.string(e.detail)||void 0===e.detail)&&(tE.string(e.description)||void 0===e.description)},(eK||(t.CompletionItem=eK={})).create=function(e){return{label:e}},(eY||(t.CompletionList=eY={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(d=eX||(t.MarkedString=eX={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},d.is=function(e){return tE.string(e)||tE.objectLiteral(e)&&tE.string(e.language)&&tE.string(e.value)},(eZ||(t.Hover=eZ={})).is=function(e){return!!e&&tE.objectLiteral(e)&&(eL.is(e.contents)||eX.is(e.contents)||tE.typedArray(e.contents,eX.is))&&(void 0===e.range||ec.is(e.range))},(eJ||(t.ParameterInformation=eJ={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(eH||(t.SignatureInformation=eH={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return tE.defined(t)&&(i.documentation=t),tE.defined(n)?i.parameters=n:i.parameters=[],i},(f=ez||(t.DocumentHighlightKind=ez={})).Text=1,f.Read=2,f.Write=3,(eq||(t.DocumentHighlight=eq={})).create=function(e,t){var n={range:e};return tE.number(t)&&(n.kind=t),n},(g=eQ||(t.SymbolKind=eQ={})).File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26,(e0||(t.SymbolTag=e0={})).Deprecated=1,(e1||(t.SymbolInformation=e1={})).create=function(e,t,n,r,i){var a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a},(e2||(t.WorkspaceSymbol=e2={})).create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}},(h=e3||(t.DocumentSymbol=e3={})).create=function(e,t,n,r,i,a){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==a&&(s.children=a),s},h.is=function(e){return e&&tE.string(e.name)&&tE.number(e.kind)&&ec.is(e.range)&&ec.is(e.selectionRange)&&(void 0===e.detail||tE.string(e.detail))&&(void 0===e.deprecated||tE.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags))},(m=e9||(t.CodeActionKind=e9={})).Empty="",m.QuickFix="quickfix",m.Refactor="refactor",m.RefactorExtract="refactor.extract",m.RefactorInline="refactor.inline",m.RefactorRewrite="refactor.rewrite",m.Source="source",m.SourceOrganizeImports="source.organizeImports",m.SourceFixAll="source.fixAll",(p=e4||(t.CodeActionTriggerKind=e4={})).Invoked=1,p.Automatic=2,(b=e5||(t.CodeActionContext=e5={})).create=function(e,t,n){var r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},b.is=function(e){return tE.defined(e)&&tE.typedArray(e.diagnostics,eA.is)&&(void 0===e.only||tE.typedArray(e.only,tE.string))&&(void 0===e.triggerKind||e.triggerKind===e4.Invoked||e.triggerKind===e4.Automatic)},(y=e6||(t.CodeAction=e6={})).create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):eN.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},y.is=function(e){return e&&tE.string(e.title)&&(void 0===e.diagnostics||tE.typedArray(e.diagnostics,eA.is))&&(void 0===e.kind||tE.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||eN.is(e.command))&&(void 0===e.isPreferred||tE.boolean(e.isPreferred))&&(void 0===e.edit||e_.is(e.edit))},(v=e8||(t.CodeLens=e8={})).create=function(e,t){var n={range:e};return tE.defined(t)&&(n.data=t),n},v.is=function(e){return tE.defined(e)&&ec.is(e.range)&&(tE.undefined(e.command)||eN.is(e.command))},(E=e7||(t.FormattingOptions=e7={})).create=function(e,t){return{tabSize:e,insertSpaces:t}},E.is=function(e){return tE.defined(e)&&tE.uinteger(e.tabSize)&&tE.boolean(e.insertSpaces)},(w=te||(t.DocumentLink=te={})).create=function(e,t,n){return{range:e,target:t,data:n}},w.is=function(e){return tE.defined(e)&&ec.is(e.range)&&(tE.undefined(e.target)||tE.string(e.target))},(A=tt||(t.SelectionRange=tt={})).create=function(e,t){return{range:e,parent:t}},A.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&(void 0===e.parent||A.is(e.parent))},(N=tn||(t.SemanticTokenTypes=tn={})).namespace="namespace",N.type="type",N.class="class",N.enum="enum",N.interface="interface",N.struct="struct",N.typeParameter="typeParameter",N.parameter="parameter",N.variable="variable",N.property="property",N.enumMember="enumMember",N.event="event",N.function="function",N.method="method",N.macro="macro",N.keyword="keyword",N.modifier="modifier",N.comment="comment",N.string="string",N.number="number",N.regexp="regexp",N.operator="operator",N.decorator="decorator",(T=tr||(t.SemanticTokenModifiers=tr={})).declaration="declaration",T.definition="definition",T.readonly="readonly",T.static="static",T.deprecated="deprecated",T.abstract="abstract",T.async="async",T.modification="modification",T.documentation="documentation",T.defaultLibrary="defaultLibrary",(ti||(t.SemanticTokens=ti={})).is=function(e){return tE.objectLiteral(e)&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0])},(I=ta||(t.InlineValueText=ta={})).create=function(e,t){return{range:e,text:t}},I.is=function(e){return null!=e&&ec.is(e.range)&&tE.string(e.text)},(S=ts||(t.InlineValueVariableLookup=ts={})).create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},S.is=function(e){return null!=e&&ec.is(e.range)&&tE.boolean(e.caseSensitiveLookup)&&(tE.string(e.variableName)||void 0===e.variableName)},(R=to||(t.InlineValueEvaluatableExpression=to={})).create=function(e,t){return{range:e,expression:t}},R.is=function(e){return null!=e&&ec.is(e.range)&&(tE.string(e.expression)||void 0===e.expression)},(O=tl||(t.InlineValueContext=tl={})).create=function(e,t){return{frameId:e,stoppedLocation:t}},O.is=function(e){return tE.defined(e)&&ec.is(e.stoppedLocation)},(x=tu||(t.InlayHintKind=tu={})).Type=1,x.Parameter=2,x.is=function(e){return 1===e||2===e},(k=tc||(t.InlayHintLabelPart=tc={})).create=function(e){return{value:e}},k.is=function(e){return tE.objectLiteral(e)&&(void 0===e.tooltip||tE.string(e.tooltip)||eL.is(e.tooltip))&&(void 0===e.location||ed.is(e.location))&&(void 0===e.command||eN.is(e.command))},(C=td||(t.InlayHint=td={})).create=function(e,t,n){var r={position:e,label:t};return void 0!==n&&(r.kind=n),r},C.is=function(e){return tE.objectLiteral(e)&&eu.is(e.position)&&(tE.string(e.label)||tE.typedArray(e.label,tc.is))&&(void 0===e.kind||tu.is(e.kind))&&void 0===e.textEdits||tE.typedArray(e.textEdits,eT.is)&&(void 0===e.tooltip||tE.string(e.tooltip)||eL.is(e.tooltip))&&(void 0===e.paddingLeft||tE.boolean(e.paddingLeft))&&(void 0===e.paddingRight||tE.boolean(e.paddingRight))},(tf||(t.StringValue=tf={})).createSnippet=function(e){return{kind:"snippet",value:e}},(tg||(t.InlineCompletionItem=tg={})).create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}},(th||(t.InlineCompletionList=th={})).create=function(e){return{items:e}},(_=tm||(t.InlineCompletionTriggerKind=tm={})).Invoked=0,_.Automatic=1,(tp||(t.SelectedCompletionInfo=tp={})).create=function(e,t){return{range:e,text:t}},(tb||(t.InlineCompletionContext=tb={})).create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}},(ty||(t.WorkspaceFolder=ty={})).is=function(e){return tE.objectLiteral(e)&&es.is(e.uri)&&tE.string(e.name)},t.EOL=["\n","\r\n","\r"],(V=tv||(t.TextDocument=tv={})).create=function(e,t,n,r){return new tN(e,t,n,r)},V.is=function(e){return!!(tE.defined(e)&&tE.string(e.uri)&&(tE.undefined(e.languageId)||tE.string(e.languageId))&&tE.uinteger(e.lineCount)&&tE.func(e.getText)&&tE.func(e.positionAt)&&tE.func(e.offsetAt))},V.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);e(i,n),e(a,n);for(var s=0,o=0,l=0;s<i.length&&o<a.length;)0>=n(i[s],a[o])?t[l++]=i[s++]:t[l++]=a[o++];for(;s<i.length;)t[l++]=i[s++];for(;o<a.length;)t[l++]=a[o++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,a=r.length-1;a>=0;a--){var s=r[a],o=e.offsetAt(s.range.start),l=e.offsetAt(s.range.end);if(l<=i)n=n.substring(0,o)+s.newText+n.substring(l,n.length);else throw Error("Overlapping edit");i=o}return n};var tN=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return eu.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var a=n-1;return eu.create(a,e-t[a])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();D=tE||(tE={}),F=Object.prototype.toString,D.defined=function(e){return void 0!==e},D.undefined=function(e){return void 0===e},D.boolean=function(e){return!0===e||!1===e},D.string=function(e){return"[object String]"===F.call(e)},D.number=function(e){return"[object Number]"===F.call(e)},D.numberRange=function(e,t,n){return"[object Number]"===F.call(e)&&t<=e&&e<=n},D.integer=function(e){return"[object Number]"===F.call(e)&&-0x80000000<=e&&e<=0x7fffffff},D.uinteger=function(e){return"[object Number]"===F.call(e)&&0<=e&&e<=0x7fffffff},D.func=function(e){return"[object Function]"===F.call(e)},D.objectLiteral=function(e){return null!==e&&"object"==typeof e},D.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}};if("object"==typeof t.exports)r(e.t,n);else{let t;"function"==typeof define&&define.amd&&void 0!==(t=r(e.r,n))&&e.v(t)}},193466,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Line=void 0,n.Line=class{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},46319,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Util=void 0;class r{static isUTF8BOM(e){let t=Uint8Array.from(Buffer.from(e,"UTF-8"));return 239===t[0]&&187==t[1]&&191==t[2]}static isWhitespace(e){return" "===e||"	"===e||r.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"	":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"	":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return -1;default:return n}return -1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}static parseHeredocName(e){if("-"===(e=e.substring(2)).charAt(0)&&(e=e.substring(1)),'"'===e.charAt(0)){if('"'!==e.charAt(e.length-1))return null;e=e.substring(1,e.length-1)}if("'"===e.charAt(0)){if("'"!==e.charAt(e.length-1))return null;e=e.substring(1,e.length-1)}return"<"===e.charAt(0)?null:e}}n.Util=r},160056,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Comment=void 0;let r=e.r(890923),i=e.r(193466),a=e.r(46319);class s extends i.Line{constructor(e,t){super(e,t)}toString(){let e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange(),t=this.document.offsetAt(e.start),n=this.document.getText().substring(t,this.document.offsetAt(e.end)),i=-1,s=-1;for(let e=1;e<n.length;e++)if(!a.Util.isWhitespace(n.charAt(e))){i=e;break}if(-1===i)return null;for(let e=n.length-1;e>=1;e--)if(!a.Util.isWhitespace(n.charAt(e))){s=e+1;break}return r.Range.create(this.document.positionAt(t+i),this.document.positionAt(t+s))}}n.Comment=s},516214,e=>{"use strict";var t,n;class r{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){for(let t of e)if(r.isIncremental(t)){let e=s(t.range),n=this.offsetAt(e.start),r=this.offsetAt(e.end);this._content=this._content.substring(0,n)+t.text+this._content.substring(r,this._content.length);let a=Math.max(e.start.line,0),o=Math.max(e.end.line,0),l=this._lineOffsets,u=i(t.text,!1,n);if(o-a===u.length)for(let e=0,t=u.length;e<t;e++)l[e+a+1]=u[e];else u.length<1e4?l.splice(a+1,o-a,...u):this._lineOffsets=l=l.slice(0,a+1).concat(u,l.slice(o+1));let c=t.text.length-(r-n);if(0!==c)for(let e=a+1+u.length,t=l.length;e<t;e++)l[e]=l[e]+c}else if(r.isFull(t))this._content=t.text,this._lineOffsets=void 0;else throw Error("Unknown change event received");this._version=t}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=i(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return e=this.ensureBeforeEOL(e,t[i]),{line:i,character:e-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line];if(e.character<=0)return n;let r=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(n+e.character,r);return this.ensureBeforeEOL(i,n)}ensureBeforeEOL(e,t){for(;e>t&&a(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)}static isFull(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength}}function i(e,t,n=0){let r=t?[n]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);a(i)&&(13===i&&t+1<e.length&&10===e.charCodeAt(t+1)&&t++,r.push(n+t+1))}return r}function a(e){return 13===e||10===e}function s(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function o(e){let t=s(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(n=t||(t={})).create=function(e,t,n,i){return new r(e,t,n,i)},n.update=function(e,t,n){if(e instanceof r)return e.update(t,n),e;throw Error("TextDocument.update: document must be created by TextDocument.create")},n.applyEdits=function(e,t){let n=e.getText(),r=function e(t,n){if(t.length<=1)return t;let r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);e(i,n),e(a,n);let s=0,o=0,l=0;for(;s<i.length&&o<a.length;)0>=n(i[s],a[o])?t[l++]=i[s++]:t[l++]=a[o++];for(;s<i.length;)t[l++]=i[s++];for(;o<a.length;)t[l++]=a[o++];return t}(t.map(o),(e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=0,a=[];for(let t of r){let r=e.offsetAt(t.range.start);if(r<i)throw Error("Overlapping edit");r>i&&a.push(n.substring(i,r)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(n.substr(i)),a.join("")},e.s(["TextDocument",()=>t])},698374,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParserDirective=void 0;let r=e.r(242619),i=e.r(193466);class a extends i.Line{constructor(e,t,n,r){super(e,t),this.nameRange=n,this.valueRange=r}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){let e=r.Directive[this.getName().toLowerCase()];return void 0===e?null:e}}n.ParserDirective=a},117008,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Heredoc=void 0,n.Heredoc=class{constructor(e,t,n,r,i){this.startRange=e,this.name=t,this.nameRange=n,this.contentRange=r,this.endRange=i}getName(){return this.name}getStartRange(){return this.startRange}getNameRange(){return this.nameRange}getContentRange(){return this.contentRange}getDelimiterRange(){return this.endRange}}},931882,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Variable=void 0,n.Variable=class{constructor(e,t,n,r,i,a,s,o,l,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=r,this.modifierRange=i,this.substitutionParameter=a,this.substitutionRange=s,this.defined=o,this.buildVariable=l,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return this.defined}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},137920,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Instruction=void 0;let r=e.r(890923),i=e.r(46319),a=e.r(193466),s=e.r(613399),o=e.r(117008),l=e.r(931882),u=e.r(242619);class c extends a.Line{constructor(e,t,n,r,i,a){super(e,t),this.dockerfile=n,this.escapeChar=r,this.instruction=i,this.instructionRange=a}toString(){let e=this.getKeyword();for(let t of this.getRawArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,a=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(a)-this.document.offsetAt(s.start),l=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,c=!1;for(let e=0;e<l.length;e++){let s=l.charAt(e);if(s===this.escapeChar){let i=l.charAt(e+1);if(" "===i||"	"===i)e:for(let i=e+2;i<l.length;i++)switch(l.charAt(i)){case" ":case"	":continue;case"\r":i++;case"\n":null!==a&&t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,c=!1,e=i;break e;default:break e}else"\r"===i?(null!==a&&(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null),c=!1,e+=2):("\n"===i&&(null!==a&&t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,c=!1),e++)}else if(i.Util.isNewline(s))c&&(a=null,c=!1);else if(!c){if(null===a){if("#"===s){c=!0;continue}let t=this.document.positionAt(u+e);0!==t.character&&(a=r.Position.create(t.line,0))}n=e}}return null===a?t.push(r.Range.create(this.document.positionAt(u+n),this.document.positionAt(u+n+1))):t.push(r.Range.create(a,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let r of t)e+=n.substring(this.document.offsetAt(r.start),this.document.offsetAt(r.end));return e}getArguments(){return this.getRawArguments()}getRawArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),a=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,l=!1,u=!1,c=-1,d=!1,f=!1,g=-1,h="";for(let t=0;t<a.length;t++){let n=a.charAt(t);if(i.Util.isWhitespace(n))if(f){d=!0,i.Util.isNewline(n)&&(d=!1,u&&(u=!1,l=!0));continue}else -1!==c&&(-1===g?e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+t)))):e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),g=-1,h="",c=-1);else if(n===this.escapeChar){let i=a.charAt(t+1);if(" "===i||"	"===i)e:for(let e=t+2;e<a.length;e++)switch(a.charAt(e)){case" ":case"	":continue;case"\r":e++;case"\n":u=!1,f=!0,l=!0,-1!==c&&(g=t),t=e;break e;default:g=t,-1===c&&(t=e-1);break e}else if("\r"===i)u=!1,f=!0,l=!0,-1!==c&&-1===g&&(g=t),t+=2;else if("\n"===i)u=!1,f=!0,l=!0,-1!==c&&-1===g&&(g=t),t++;else{if(d&&-1!==g&&(e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),h="",c=-1),g=-1,d=!1,f=!1,"$"===i)h=h+n+i;else if(""===i)break;else h+=i;-1===c&&(c=t),t++}}else u||(l&&"#"===n?u=!0:(d&&-1!==g&&(e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),h="",c=-1),d=!1,f=!1,g=-1,h+=n,-1===c&&(c=t)),l=!1)}return -1!==c&&(-1===g?e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+a.length)))):e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){let n=e[t].getRange(),r=this.document.offsetAt(n.start),i=this.parseVariables(r,e[t].getValue()),a=[],o=!1;for(let e of i){let t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);a.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<a.length;e++){let t=i[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);a[e]?(o+=this.document.getText().substring(r,n),o+=a[e]):o+=this.document.getText().substring(r,s),r=s}let l=this.document.offsetAt(n.end);l!==r&&(o+=this.document.getText().substring(r,l)),e[t]=new s.Argument(o,n)}}return e}getVariables(){let e=[];for(let t of this.getRawArguments()){let n=t.getRange(),r=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end));for(let n of this.parseVariables(this.document.offsetAt(t.getRange().start),r))e.push(n)}return e}parseVariables(e,t){let n=[];n:for(let a=0;a<t.length;a++)switch(t.charAt(a)){case this.escapeChar:"$"===t.charAt(a+1)&&a++;break;case"$":if("{"===t.charAt(a+1)){let i="${",s="",o=-1,u="",c=-1,d=-1,f=-1;r:for(let g=a+2;g<t.length;g++){let h=t.charAt(g);switch(h){case this.escapeChar:for(let e=g+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"	":case"\r":continue;case"\n":g=e;continue r}break;case"}":i+="}";let m=null,p=null,b=-1!==f?u:null,y=null;-1===o?o=g:o+1===g?(m="",p=r.Range.create(this.document.positionAt(e+o+1),this.document.positionAt(e+o+1))):(-1===c?(c=f+1,d=f+1):d+=1,m=t.substring(f,f+1),p=r.Range.create(this.document.positionAt(e+f),this.document.positionAt(e+f+1)),y=r.Range.create(this.document.positionAt(e+c),this.document.positionAt(e+d)));let v=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+2),this.document.positionAt(e+o)),r.Range.create(v,this.document.positionAt(e+g+1)),m,p,b,y,void 0!==this.dockerfile.resolveVariable(s,v.line),this.isBuildVariable(s,v.line),i)),a=g;continue n;case":":-1===o?o=g:-1!==f?(-1===c&&(c=g),d=g,u+=":"):f=g,i+=":";break;case"\n":case"\r":case" ":case"	":break;default:-1===o?s+=h:-1!==f?(-1===c&&(c=g),d=g,u+=h):f=g,i+=h}}}else{if(i.Util.isWhitespace(t.charAt(a+1))||a===t.length-1)continue;let s="";r:for(let i=a+1;i<t.length;i++){let o=t.charAt(i);switch(o){case"\r":case"\n":case" ":case"	":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(u,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,u.line),this.isBuildVariable(s,u.line),"$"+s)),a=i-1;continue n;case this.escapeChar:for(let e=i+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"	":case"\r":continue;case"\n":i=e;continue r}let c=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(c,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,c.line),this.isBuildVariable(s,c.line),"$"+s));break n}if(null===o.match(/^[a-z0-9_]+$/i)){let t=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(t,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,t.line),this.isBuildVariable(s,t.line),"$"+s)),a=i-1;continue n}s+=o}let o=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+t.length)),r.Range.create(o,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,o.line),this.isBuildVariable(s,o.line),"$"+s))}break n}return n}isBuildVariable(e,t){if(this.getKeyword()===u.Keyword.FROM){for(let t of this.dockerfile.getInitialARGs()){let n=t.getProperty();if(n&&e===n.getName())return!0}return}let n=this.dockerfile.getContainingImage(r.Position.create(t,0)),i=n.getENVs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t)){for(let t of i[n].getProperties())if(t.getName()===e)return!1}let a=n.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return!0}}createSingleLineHeredocs(e){let t=[];for(let n of e){let e=n.getValue();if(e.startsWith("<<")&&null!==i.Util.parseHeredocName(e)){let e=n.getRange(),r=this.getNameRange(e),i=this.getName(r);t.push(new o.Heredoc(e,i,r,null,null))}}return t}getName(e){let t=this.document.getText(e),n=!1,r="";r:for(let e=0;e<t.length;e++){let i=t.charAt(e);switch(i){case this.escapeChar:n=!0;for(let n=e+1;n<t.length;n++)switch(t.charAt(n)){case" ":case"	":break;case"\r":e=n+1;continue r;case"\n":e=n;continue r;default:r+=t.charAt(n),e=n;continue r}break;case"#":if(n){for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){e=n;continue r}}case" ":case"	":case"\r":case"\n":if(n)break;default:r+=i}}return r}getNameRange(e){let t=this.document.getText(e),n=!1,i=!1,a=-1,s=-1,o=!1,l=null;i:for(let e=0;e<t.length;e++){let r=t.charAt(e);switch(r){case'"':case"'":if(l===r)break i;l=r;continue;case this.escapeChar:for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){o=!0,n=e;continue i}break;case" ":case"	":case"\r":case"\n":break;case"<":n?i=!0:n=!0;break;case"-":if(i){i=!1;break}case"#":if(o){for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){e=n;continue i}}default:if(-1===a&&(a=e),null!==l){s=e+1;break}break i}}if(-1===a)return r.Range.create(e.end,e.end);let u=this.document.positionAt(this.document.offsetAt(e.start)+a),c=null!==l?this.document.positionAt(this.document.offsetAt(e.start)+s):e.end;return r.Range.create(u,c)}getHeredocs(){let e=this.getArguments();if(0===e.length)return[];let t=[],n=this.getRange();if(n.start.line===n.end.line)return this.createSingleLineHeredocs(e);let i=[],a=!1,s=!1,l=-1,u=-1,c=-1,d=0,f=this.document.offsetAt(e[0].getRange().start),g=this.getRangeContent(r.Range.create(e[0].getRange().start,this.getRange().end));i:for(let n=0;n<g.length;n++)switch(g.charAt(n)){case this.escapeChar:s=!0;for(let e=n+1;e<g.length;e++)switch(g.charAt(e)){case" ":case"	":break;case"\r":e++;default:n=e;continue i}break;case"\r":break;case"\n":if(s)break;if(a){-1===l&&(l=n),u=n;let e=i[d],a=e.getRange(),s=this.getNameRange(a),g=this.getName(s),h=this.getDelimiterRange(e,g,r.Range.create(this.document.positionAt(f+c),this.document.positionAt(f+n)));if(null!==h){let e=r.Range.create(this.document.positionAt(f+l),this.document.positionAt(f+c-1));t.push(new o.Heredoc(a,g,s,e,h)),l=-1,d++}c=-1}else{let t=f+n;for(let n of e)if(this.document.offsetAt(n.getRange().start)<t)n.getValue().startsWith("<<")&&i.push(n);else break;a=!0,c=-1;continue}break;case" ":case"	":if(s)break;case"#":if(s){for(let e=n+1;e<g.length;e++)if("\n"===g.charAt(e)){n=e;continue i}}default:s&&(s=!1),a&&(-1===l&&(l=n),-1===c&&(c=n))}if(!a)return this.createSingleLineHeredocs(e);{let e=i[d],a=e.getRange(),s=this.getNameRange(a),g=this.getName(s),h=null,m=this.getDelimiterRange(e,g,r.Range.create(this.document.positionAt(f+c),n.end));null===m?h=r.Range.create(this.document.positionAt(f+l),n.end):-1!==u&&(h=r.Range.create(this.document.positionAt(f+l),this.document.positionAt(f+u))),t.push(new o.Heredoc(a,g,s,h,m)),d++;for(let e=d;e<i.length;e++){let e=i[d].getRange(),n=this.getNameRange(e),r=this.getName(n);t.push(new o.Heredoc(e,r,n,null,null)),d++}}return t}getDelimiterRange(e,t,n){let i=this.document.getText(n);if(e.getValue().startsWith("<<-")){let e=0;for(;"	"===i.charAt(e);)e++;return i.substring(e)===t?r.Range.create(r.Position.create(n.start.line,e),n.end):null}return i===t?n:null}}n.Instruction=c},11201,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FlagOption=void 0,n.FlagOption=class{constructor(e,t,n,r,i){this.range=e,this.name=t,this.nameRange=n,this.value=r,this.valueRange=i}toString(){return null!==this.valueRange?this.name+"="+this.value:this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},43866,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Flag=void 0;let r=e.r(890923),i=e.r(11201);n.Flag=class{constructor(e,t,n,r,i,a){if(this.options=[],this.range=t,this.name=n,this.nameRange=r,this.value=i,this.valueRange=a,null!==this.value){let t=e.offsetAt(a.start),n=-1,r=-1,s=!1;for(let a=0;a<i.length;a++)switch(i.charAt(a)){case"=":s=!0,-1===r&&(r=a+1);break;case",":this.options.push(this.createFlagOption(e,i,t,n,r,a)),n=-1,r=-1;break;default:-1===n&&(n=a)}s&&-1!==n&&this.options.push(this.createFlagOption(e,i,t,n,r,i.length))}}createFlagOption(e,t,n,a,s,o){let l=r.Range.create(e.positionAt(n+a),e.positionAt(n+o));return -1===s?new i.FlagOption(l,t.substring(a,o),l,null,null):new i.FlagOption(l,t.substring(a,s-1),r.Range.create(e.positionAt(n+a),e.positionAt(n+s-1)),t.substring(s,o),r.Range.create(e.positionAt(n+s),e.positionAt(n+o)))}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getOption(e){for(let t of this.options)if(t.getName()===e)return t;return null}getOptions(){return this.options}hasOptions(){return this.options.length>0}}},127234,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModifiableInstruction=void 0;let r=e.r(890923),i=e.r(43866),a=e.r(137920);class s extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getFlags(){if(!this.flags)for(let e of(this.flags=[],this.getArguments())){let t=e.getValue();if(this.stopSearchingForFlags(t))break;if(0===t.indexOf("--")){let n=e.getRange(),a=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=a.indexOf("="),l=!1,u=!1,c=-1;a:for(let e=0;e<a.length;e++)switch(a.charAt(e)){case"\\":case" ":case"	":case"\r":case"\n":break;case"-":if(u){c=e;break a}l?u=!0:l=!0;break;default:c=e;break a}let d=this.document.positionAt(this.document.offsetAt(n.start)+c);if(-1===o)this.flags.push(new i.Flag(this.document,n,t.substring(2),r.Range.create(d,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(this.document,n,t.substring(2,o),r.Range.create(d,e),"",r.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(this.document,n,t.substring(2,s),r.Range.create(d,e),t.substring(s+1),r.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}return this.flags}getArguments(){let e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}n.ModifiableInstruction=s},79181,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JSONInstruction=void 0;let r=e.r(890923),i=e.r(613399),a=e.r(678283),s=e.r(127234);class o extends s.ModifiableInstruction{constructor(e,t,n,s,o,l){super(e,t,n,s,o,l),this.openingBracket=null,this.closingBracket=null,this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const c=this.getArguments();if(1===c.length&&"[]"===c[0].getValue()){let e=c[0].getRange();this.openingBracket=new i.Argument("[",r.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),this.closingBracket=new i.Argument("]",r.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character));return}if(2===c.length&&"["===c[0].getValue()&&"]"===c[1].getValue()){this.openingBracket=c[0],this.closingBracket=c[1];return}const d=e.offsetAt(this.getArgumentsRange().start);let f=-1,g="",h=!1,m="";s:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===g)this.openingBracket=new i.Argument("[",r.Range.create(e.positionAt(d+t),e.positionAt(d+t+1))),g="[";else if(h)m+=n;else break s;break;case'"':if("["===g||","===g){f=t,h=!0,g='"',m+=n;continue}if('"'===g)if(h)m+=n,h=!1,this.jsonStrings.push(new a.JSONArgument(m,r.Range.create(e.positionAt(d+f),e.positionAt(d+t+1)),r.Range.create(e.positionAt(d+f+1),e.positionAt(d+t)))),m="";else break s;else break s;break;case",":if(h)m+=n;else if('"'===g)g=",";else break s;break;case"]":if(h)m+=n;else if(""!==g){this.closingBracket=new i.Argument("]",r.Range.create(e.positionAt(d+t),e.positionAt(d+t+1)));break s}break;case" ":case"	":break;case"\\":if(h)switch(u.charAt(t+1)){case'"':case"\\":m+=u.charAt(t+1),t++;continue;case" ":case"	":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue s;case" ":case"	":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue s;case" ":case"	":break;default:break t}break s;default:if(!h)break s;m+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}n.JSONInstruction=o},468406,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Add=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}}n.Add=i},677437,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Property=void 0;let r=e.r(890923),i=e.r(46319);class a{constructor(e,t,n,i){this.assignmentOperatorRange=null,this.assignmentOperator=null,this.valueRange=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=a.getNameRange(e,n);let s=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=a.getValue(s,t),i)this.valueRange=i.getRange(),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.range=r.Range.create(this.nameRange.start,this.valueRange.end);else{let i=n.getRange();this.nameRange.start.line===i.start.line&&this.nameRange.start.character===i.start.character&&this.nameRange.end.line===i.end.line&&this.nameRange.end.character===i.end.character||(this.valueRange=a.getValueRange(e,n),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.assignmentOperatorRange=r.Range.create(this.nameRange.end,this.valueRange.start),this.assignmentOperator="="),this.range=i}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getAssignmentOperator(){return this.assignmentOperator}getAssignmentOperatorRange(){return this.assignmentOperatorRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));o:for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case this.escapeChar:for(let a=r+1;a<n.length;a++)switch(n.charAt(a)){case"\r":a++;case"\n":e=!0,r=a;continue o;case" ":case"	":break;default:t+=i;continue o}t+=i;break;case"\r":case"\n":break;case" ":case"	":e||(t+=i);break;case"#":if(e)for(let e=r+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":r=e;continue o}else t+=i;break;default:t+=i,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),i=n.indexOf("=");if(-1!==i){let a=n.charAt(0),s=n.charAt(i-1);if('"'===a&&'"'===s||"'"===a&&"'"===s||'"'!==a&&"'"!==a)return r.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+i))}return t.getRange()}static getValueRange(e,t){return r.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1,r=i.Util.findLeadingNonWhitespace(e,t);0!==r&&"#"===e.charAt(r)&&(n=!0);let a=(e=e.substring(r)).charAt(0),s=e.charAt(e.length-1),o="'"===a||'"'===a,l="'"===a&&"'"===s,u=!1;if('"'===a)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(l||u)&&(e=e.substring(1,e.length-1));let c=-1,d="";l:for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case t:if(r+1===e.length){d+=t;break l}if(" "===(i=e.charAt(r+1))||"	"===i)e:for(let a=r+2;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"	":break;case"\r":a++;case"\n":n=!0,r=a;continue l;default:if(!u&&!l&&!o){s===t?(d+=i,r+=1):(d=d+i+s,r=a);continue l}break e}}if(u){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):'"'!==i&&(i===t&&r++,d+=t);continue}if(l||o){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):d+=t;continue}i===t?(d+=t,r++):"\r"===i?(n=!0,r+=2):("\n"===i?n=!0:d+=i,r++);break;case" ":case"	":n&&-1===c&&(c=r),d+=i;break;case"\r":r++;case"\n":n&&-1!==c&&(d=d.substring(0,d.length-(r-c-1)),c=-1);break;case"#":if(n){-1!==c&&(d=d.substring(0,d.length-(r-c)),c=-1);u:for(let t=r+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":r=t;break u}continue}default:n&&(n=!1,c=-1),d+=i}}return d}}n.Property=a},532972,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PropertyInstruction=void 0;let r=e.r(890923),i=e.r(137920),a=e.r(677437),s=e.r(613399),o=e.r(46319);class l extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new a.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new a.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new a.Property(this.document,this.escapeChar,e[0]),new a.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,i=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(i)),this.properties=[new a.Property(this.document,this.escapeChar,e[0],new s.Argument(t,r.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new a.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"	":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":u:for(let r=n-1;r>=0;r--)switch(e.charAt(r)){case" ":case"	":case"\r":case"\n":case this.escapeChar:continue;default:t=r;break u}break e;default:t=n;break e}return t}getPropertyArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end),i=n-this.document.offsetAt(t.start),a=this.getTextContent(),l=a.substring(i),u=o.Util.findLeadingNonWhitespace(l,this.escapeChar);if(-1===u)return[];let c=this.document.positionAt(n+u),d=t.start.line!==c.line,f=!1,g=-1,h=this.findTrailingNonWhitespace(l);a=l.substring(u,h+1);let m=d?-1:0,p=!1;c:for(let t=0;t<a.length;t++){let i=a.charAt(t);switch(i){case this.escapeChar:if(t+1===a.length){f=!0;break c}switch(!d&&(g=t),a.charAt(t+1)){case" ":case"	":if(!o.Util.isWhitespace(a.charAt(t+2))){t+=1;continue}e:for(let i=t+2;i<a.length;i++)switch(a.charAt(i)){case"\r":i++;case"\n":d=!0,t=i;continue c;case" ":case"	":break;default:e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=i;break e}t=m-1;continue;case"\r":t++;case"\n":d=!0,t+=1;continue;case this.escapeChar:-1===m&&(m=t),t+=1;continue;default:-1===m&&(m=t);continue}case"'":case'"':p&&(this.createSpacedArgument(m,e,a,g,n,u),m=t,p=!1),-1===m&&(m=t);for(let o=t+1;o<a.length;o++)switch(a.charAt(o)){case i:if(" "!==a.charAt(o+1)&&""!==a.charAt(o+1)){t=o;continue c}e.push(new s.Argument(a.substring(m,o+1),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue c;case this.escapeChar:o++}break c;case" ":case"	":d?-1!==m&&(p=!0):-1!==m&&(e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":p=!1;break;case"#":if(d){for(let e=t+1;e<a.length;e++)switch(a.charAt(e)){case"\r":e++;case"\n":t=e,p=!1;continue c}if(-1!==m){let t=a.substring(m,g);e.push(new s.Argument(t,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+g)))),m=-1}break c}-1===m&&(m=t);break;default:if(p&&(this.createSpacedArgument(m,e,a,g,n,u),m=t,p=!1),d=!1,-1===m&&(m=t),"$"===i&&"{"===a.charAt(t+1)){let e=!1,n=!1,r=!1;for(let i=t+1;i<a.length;i++)switch(a.charAt(i)){case this.escapeChar:r=!0;break;case"\r":case"\n":break;case"'":e=!e,r=!1;break;case'"':n=!n,r=!1;break;case" ":case"	":if(r||e||n)break;t=i-1;continue c;case"}":t=i;continue c;default:r=!1}break c}}}if(-1!==m&&m!==a.length){let t=f?a.length-1:a.length,i=a.substring(m,t);e.push(new s.Argument(i,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}createSpacedArgument(e,t,n,i,a,o){-1!==e&&t.push(new s.Argument(n.substring(e,i),r.Range.create(this.document.positionAt(a+o+e),this.document.positionAt(a+o+i))))}}n.PropertyInstruction=l},48572,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Arg=void 0;let r=e.r(677437),i=e.r(532972);class a extends i.PropertyInstruction{constructor(e,t,n,i,a,s){super(e,t,n,i,a,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new r.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}n.Arg=a},854239,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cmd=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Cmd=i},248264,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Copy=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}getHeredocs(){return super.getHeredocs()}}n.Copy=i},232084,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Env=void 0;let r=e.r(532972);class i extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getProperties(){return super.getProperties()}}n.Env=i},304063,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Entrypoint=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Entrypoint=i},614508,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.From=void 0;let r=e.r(890923),i=e.r(127234);class a extends i.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getImage(){let e=this.getArguments();return e.length>0?e[0].getValue():null}getImageName(){let e=this.getRangeContent(this.getImageNameRange());if(null===e)return null;let t=!1,n=!1,r="";for(let i=0;i<e.length;i++){let a=e.charAt(i);switch(a){case this.escapeChar:n=!0;break;case"\r":continue;case"\n":t=!1;break;case" ":case"	":break;case"#":n?t=!0:(r+=a,n=!1);break;default:t||(r+=a,n=!1)}}return r}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),r=this.getImageDigestRange();return null===n?null!==r&&(e.end=this.document.positionAt(this.document.offsetAt(r.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){let e=this.getImageRange();if(e){let t=this.document.offsetAt(e.start),n=this.getRangeContent(e),i=this.indexOf(t,n,"@"),a=n.indexOf("/");if(-1===i){let i=this.lastIndexOf(t,n,":");if(i>a)return r.Range.create(this.document.positionAt(t+i+1),e.end)}let s=n.substring(0,i),o=s.indexOf(":");return -1===o?null:-1===a?r.Range.create(this.document.positionAt(t+o+1),this.document.positionAt(t+i)):o<a?null:r.Range.create(this.document.positionAt(t+o+1),this.document.positionAt(t+s.length))}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let r=t.indexOf(n),i=this.getVariables();for(let a=0;a<i.length;a++){let s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){let i=this.document.offsetAt(o.end)-e,s=t.substring(i).indexOf(n);if(-1===s)return -1;r=s+i,a=-1;continue}}return r}lastIndexOf(e,t,n){let r=t.lastIndexOf(n),i=this.getVariables();for(let a=0;a<i.length;a++){let s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(r=t.substring(0,r).lastIndexOf(n)))return -1;a=-1;continue}}return r}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){let e=this.getImageRange();if(e){let t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);let i=this.getRangeContent(e),a=this.document.offsetAt(e.start),s=this.indexOf(a,i,"/");if(-1===s)return null;let o=this.indexOf(a,i,":"),l=this.indexOf(a,i,".");if(-1!==o||-1!==l||"localhost"===i.substring(0,s))return r.Range.create(e.start,this.document.positionAt(a+s))}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return e.length>2&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}getPlatformFlag(){let e=super.getFlags();return 1===e.length&&"platform"===e[0].getName()?e[0]:null}}n.From=a},372510,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Healthcheck=void 0;let r=e.r(127234);class i extends r.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}n.Healthcheck=i},123702,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Label=void 0;let r=e.r(532972),i=e.r(46319);class a extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getVariables(){let e=super.getVariables();for(let t of this.getProperties()){let n=t.getUnescapedValue();if(null!==n&&n.length>2&&"'"===n.charAt(0)&&"'"===n.charAt(n.length-1)){let n=t.getValueRange();for(let t=0;t<e.length;t++)i.Util.isInsideRange(e[t].getRange().start,n)&&(e.splice(t,1),t--)}}return e}getProperties(){return super.getProperties()}}n.Label=a},376561,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Onbuild=void 0;let r=e.r(890923),i=e.r(100665),a=e.r(137920);class s extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return i.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,r.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}n.Onbuild=s},661688,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Run=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getHeredocs(){return super.getHeredocs()}}n.Run=i},307056,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Shell=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Shell=i},677737,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Stopsignal=void 0;let r=e.r(137920);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Stopsignal=i},235187,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Workdir=void 0;let r=e.r(137920);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getPath(){return this.getArgumentsContent()}getAbsolutePath(){let e=this.getPath();if(null===e||e.startsWith("/"))return e;let t=this.getRange().start.line,n=this.dockerfile.getStageHierarchy(t);for(let r=n.length-1;r>=0;r--){let i=n[r].getWORKDIRs();for(let n=i.length-1;n>=0;n--)if(i[n].getRange().start.line<t){let t=i[n].getAbsolutePath();if(null==t)return;return t.endsWith("/")?t+e:t+"/"+e}}}}n.Workdir=i},489496,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;let r=e.r(137920);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.User=i},453540,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Volume=void 0;let r=e.r(79181);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Volume=i},887595,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageTemplate=void 0;let r=e.r(890923),i=e.r(48572),a=e.r(854239),s=e.r(248264),o=e.r(232084),l=e.r(304063),u=e.r(614508),c=e.r(372510),d=e.r(376561),f=e.r(46319),g=e.r(235187);n.ImageTemplate=class{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(f.Util.isInsideRange(r.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof i.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof a.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof l.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROM(){for(let e of this.instructions)if(e instanceof u.From)return e;return null}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof c.Healthcheck&&e.push(t);return e}getWORKDIRs(){let e=[];for(let t of this.instructions)t instanceof g.Workdir&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof d.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){let t=[];for(let n of this.getARGs())if(n.isBefore(e)){let e=n.getProperty();if(e){let n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(let n of this.getENVs())if(n.isBefore(e))for(let e of n.getProperties()){let n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let r=n.length-1;r>=0;r--)if(n[r].isBefore(t)){for(let t of n[r].getProperties())if(t.getName()===e)return t.getValue()}let r=this.getARGs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t)){let t=r[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}getRange(){let e=this.getInstructions();if(0===e.length)return r.Range.create(0,0,0,0);let t=e[0].getRange().start,n=e[e.length-1].getRange().end;return r.Range.create(t,n)}contains(e){let t=this.getRange();return null!==t&&f.Util.isInsideRange(e,t)}}},960938,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Dockerfile=void 0;let r=e.r(890923),i=e.r(242619),a=e.r(887595),s=e.r(614508),o=e.r(46319),l=e.r(242619);class u extends a.ImageTemplate{constructor(e){super(),this.initialInstructions=new a.ImageTemplate,this.buildStages=[],this.directives=[],this.foundFrom=!1,this.document=e}getEscapeCharacter(){for(let e of this.directives)if(e.getDirective()===i.Directive.escape){let t=e.getValue();if("\\"===t||"`"===t)return t}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=r.Range.create(r.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!o.Util.isInsideRange(e,t))return null;if((this.initialInstructions.getComments().length>0||this.initialInstructions.getInstructions().length>0)&&o.Util.isInsideRange(e,this.initialInstructions.getRange()))return this.initialInstructions;for(let t of this.buildStages)if(o.Util.isInsideRange(e,t.getRange()))return t;return this}addInstruction(e){e.getKeyword()===l.Keyword.FROM?(this.currentBuildStage=new a.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirectives(e){this.directives=e}getDirective(){return 0===this.directives.length?null:this.directives[0]}getDirectives(){return this.directives}resolveVariable(e,t){for(let n of this.getFROMs()){let r=n.getRange();if(r.start.line<=t&&t<=r.end.line){let n=new a.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(r.Position.create(t,0));if(null===n)return;let i=n.resolveVariable(e,t);if(null===i){let n=new a.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return i}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof s.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(r.Position.create(e,0));return t?t.getAvailableVariables(e):[]}getParentStage(e){let t=e.getFROM(),n=null===t?null:t.getImageName();if(null===n)return null;for(let e of this.getFROMs())if(e.getBuildStage()===n){let n=e.getRange();if(n.start.line===t.getRange().start.line)return null;return this.getContainingImage(n.start)}return null}getStageHierarchy(e){let t=this.getContainingImage(r.Position.create(e,0));if(null===t)return[];let n=[t],i=this.getParentStage(t);for(;null!==i;)n.splice(0,0,i),i=this.getParentStage(i);return n}getAvailableWorkingDirectories(e){let t=new Set;for(let n of this.getStageHierarchy(e))for(let r of n.getWORKDIRs())if(r.getRange().end.line<e){let e=r.getAbsolutePath();null!=e&&(e.endsWith("/")||(e+="/"),t.add(e))}return Array.from(t)}organizeComments(){let e=this.getComments();for(let t=0;t<e.length;t++)if(o.Util.isInsideRange(e[t].getRange().end,this.initialInstructions.getRange()))this.initialInstructions.addComment(e[t]);else for(let n of this.buildStages)o.Util.isInsideRange(e[t].getRange().start,n.getRange())&&n.addComment(e[t])}getRange(){let e=this.getComments(),t=this.getInstructions(),n=null;if(0===e.length)t.length>0&&(n=r.Range.create(t[0].getRange().start,t[t.length-1].getRange().end));else if(0===t.length)n=r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end);else{let i=e[0].getRange().start,a=e[e.length-1].getRange().end,s=t[0].getRange().start,o=t[t.length-1].getRange().end;i.line<s.line?(a.line<o.line&&(n=r.Range.create(i,o)),n=r.Range.create(i,a)):n=a.line<o.line?r.Range.create(s,o):r.Range.create(s,a)}return null===n?0===this.directives.length?null:this.directives[0].getRange():0===this.directives.length?n:r.Range.create(this.directives[0].getRange().start,n.end)}}n.Dockerfile=u},100665,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0;let r=e.r(516214),i=e.r(890923),a=e.r(160056),s=e.r(698374),o=e.r(137920),l=e.r(468406),u=e.r(48572),c=e.r(854239),d=e.r(248264),f=e.r(232084),g=e.r(304063),h=e.r(614508),m=e.r(372510),p=e.r(123702),b=e.r(376561),y=e.r(661688),v=e.r(307056),E=e.r(677737),w=e.r(235187),A=e.r(489496),N=e.r(453540),T=e.r(960938),I=e.r(46319),S=e.r(242619);class R{constructor(){this.escapeChar=null}static createInstruction(e,t,n,r,i,a){switch(i.toUpperCase()){case"ADD":return new l.Add(e,r,t,n,i,a);case"ARG":return new u.Arg(e,r,t,n,i,a);case"CMD":return new c.Cmd(e,r,t,n,i,a);case"COPY":return new d.Copy(e,r,t,n,i,a);case"ENTRYPOINT":return new g.Entrypoint(e,r,t,n,i,a);case"ENV":return new f.Env(e,r,t,n,i,a);case"FROM":return new h.From(e,r,t,n,i,a);case"HEALTHCHECK":return new m.Healthcheck(e,r,t,n,i,a);case"LABEL":return new p.Label(e,r,t,n,i,a);case"ONBUILD":return new b.Onbuild(e,r,t,n,i,a);case"RUN":return new y.Run(e,r,t,n,i,a);case"SHELL":return new v.Shell(e,r,t,n,i,a);case"STOPSIGNAL":return new E.Stopsignal(e,r,t,n,i,a);case"WORKDIR":return new w.Workdir(e,r,t,n,i,a);case"USER":return new A.User(e,r,t,n,i,a);case"VOLUME":return new N.Volume(e,r,t,n,i,a)}return new o.Instruction(e,r,t,n,i,a)}getParserDirectives(e,t){let n=[];this.escapeChar="";let r=+!!I.Util.isUTF8BOM(t.substring(0,1));d:for(let a=r;a<t.length;a++)switch(t.charAt(a)){case" ":case"	":break;case"\r":case"\n":default:break d;case"#":let r=-1,o=-1;for(let l=a+1;l<t.length;l++){let u=t.charAt(l);switch(u){case" ":case"	":-1!==r&&-1===o&&(o=l);break;case"\r":case"\n":break d;case"=":let c=-1,d=-1;-1===o&&(o=l);let f=t.length;f:for(let e=l+1;e<t.length;e++)switch(u=t.charAt(e)){case"\r":case"\n":-1!==c&&-1===d&&(d=e),f=e;break f;case"	":case" ":-1!==c&&-1===d&&(d=e);continue;default:-1===c&&(c=e)}if(-1===r)break d;-1===c?(c=l+1,d=f):-1===d&&(d=t.length);let g=i.Range.create(e.positionAt(a),e.positionAt(f)),h=i.Range.create(e.positionAt(r),e.positionAt(o)),m=i.Range.create(e.positionAt(c),e.positionAt(d));n.push(new s.ParserDirective(e,g,h,m)),r=-1,a="\r"===t.charAt(d)?d+1:d;continue d;default:-1===r&&(r=l)}}}return n}parse(e){this.document=r.TextDocument.create("","",0,e),this.buffer=e;let t=new T.Dockerfile(this.document),n=this.getParserDirectives(this.document,this.buffer),a=0;this.escapeChar="\\",n.length>0?(t.setDirectives(n),this.escapeChar=t.getEscapeCharacter(),a=this.document.offsetAt(i.Position.create(n.length,0))):I.Util.isUTF8BOM(e.substring(0,1))&&(a=1);for(let e=a;e<this.buffer.length;e++){let n=this.buffer.charAt(e);switch(n){case" ":case"	":case"\r":case"\n":break;case"#":e=this.processComment(t,e);break;default:e=this.processInstruction(t,n,e)}}return t.organizeComments(),t}processInstruction(e,t,n){let r=t,i=-1,a=!1;g:for(let s=n+1;s<this.buffer.length;s++)switch(t=this.buffer.charAt(s)){case this.escapeChar:if(a=!0,"\r"===(t=this.buffer.charAt(s+1))||"\n"===t)-1===i&&(i=s),s++;else if(" "===t||"	"===t){for(let e=s+2;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":s=e;continue g;default:i=s+1,r+=this.escapeChar,s=e-2;continue g}i=s+1,r+=this.escapeChar;break g}else i=s+1,r+=this.escapeChar,a=!1;break;case" ":case"	":if(a){t:for(let e=s+1;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":s=e;continue g;default:break t}a=!1}return -1===i&&(i=s),s=this.processArguments(e,r,i,n,s),e.addInstruction(this.createInstruction(e,r,n,i,s)),s;case"\r":case"\n":if(a)continue;return -1===i&&(i=s),e.addInstruction(this.createInstruction(e,r,n,s,s)),s;case"#":if(a)continue;default:i=s+1,r+=t,a=!1}return -1===i&&(i=this.buffer.length),e.addInstruction(this.createInstruction(e,r,n,i,this.buffer.length)),this.buffer.length}processHeredocs(e,t){let n=e.getKeyword();if(n===S.Keyword.ONBUILD){if(null===(e=e.getTriggerInstruction()))return t;n=e.getKeyword()}if(n!==S.Keyword.ADD&&n!==S.Keyword.COPY&&n!==S.Keyword.RUN)return t;let r=[],i=!1;for(let t of e.getArguments()){let e=t.getValue();if(e.startsWith("<<")&&e.length>2){e.startsWith("<<-")&&(i=!0);let t=I.Util.parseHeredocName(e);null!==t&&r.push(t)}}if(r.length>0)for(let e of r)t=this.parseHeredoc(e,t,i);return t}processArguments(e,t,n,r,i){let a=!1;h:for(let s=i+1;s<this.buffer.length;s++)switch(this.buffer.charAt(s)){case"\r":case"\n":if(a)continue;return this.processHeredocs(this.createInstruction(e,t,r,n,s),s);case this.escapeChar:let i=this.buffer.charAt(s+1);if("\n"===i||"\r"===i)a=!0,s++;else if(" "===i||"	"===i){for(let e=s+2;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":a=!0;default:s=e;continue h}return this.buffer.length}continue;case"#":if(a){s=this.processComment(e,s);continue}break;case" ":case"	":break;default:a&&(a=!1)}return this.buffer.length}processComment(e,t){let n=this.buffer.length;m:for(let e=t+1;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case"\r":case"\n":n=e;break m}let r=i.Range.create(this.document.positionAt(t),this.document.positionAt(n));return e.addComment(new a.Comment(this.document,r)),n}parseHeredoc(e,t,n){let r=-1,i=!0;for(let a=t;a<this.buffer.length;a++)switch(this.buffer.charAt(a)){case" ":i=!1;break;case"	":n||(i=!1);break;case"\r":case"\n":if(-1!==r&&e===this.buffer.substring(r,a))return a;r=-1,i=!0;break;default:i&&(r=a,i=!1)}return this.buffer.length}createInstruction(e,t,n,r,a){let s=this.document.positionAt(n),o=i.Range.create(s,this.document.positionAt(r)),l=i.Range.create(s,this.document.positionAt(a));return R.createInstruction(this.document,e,this.escapeChar,l,t,o)}}n.Parser=R},242619,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DockerfileParser=n.DefaultVariables=n.Directive=n.Keyword=n.Workdir=n.Volume=n.User=n.Stopsignal=n.Shell=n.Run=n.PropertyInstruction=n.Onbuild=n.ModifiableInstruction=n.Label=n.JSONInstruction=n.Heredoc=n.Healthcheck=n.From=n.Env=n.Entrypoint=n.Copy=n.Cmd=n.Arg=n.Add=n.Variable=n.Property=n.ParserDirective=n.Line=n.Instruction=n.Flag=n.Comment=n.JSONArgument=n.Argument=void 0;var r,i,a,s,o,l=e.r(613399);Object.defineProperty(n,"Argument",{enumerable:!0,get:function(){return l.Argument}});var u=e.r(678283);Object.defineProperty(n,"JSONArgument",{enumerable:!0,get:function(){return u.JSONArgument}});let c=e.r(160056);Object.defineProperty(n,"Comment",{enumerable:!0,get:function(){return c.Comment}});let d=e.r(100665);var f=e.r(43866);Object.defineProperty(n,"Flag",{enumerable:!0,get:function(){return f.Flag}});let g=e.r(137920);Object.defineProperty(n,"Instruction",{enumerable:!0,get:function(){return g.Instruction}});var h=e.r(193466);Object.defineProperty(n,"Line",{enumerable:!0,get:function(){return h.Line}});let m=e.r(698374);Object.defineProperty(n,"ParserDirective",{enumerable:!0,get:function(){return m.ParserDirective}});var p=e.r(677437);Object.defineProperty(n,"Property",{enumerable:!0,get:function(){return p.Property}});var b=e.r(931882);Object.defineProperty(n,"Variable",{enumerable:!0,get:function(){return b.Variable}});var y=e.r(468406);Object.defineProperty(n,"Add",{enumerable:!0,get:function(){return y.Add}});let v=e.r(48572);Object.defineProperty(n,"Arg",{enumerable:!0,get:function(){return v.Arg}});let E=e.r(854239);Object.defineProperty(n,"Cmd",{enumerable:!0,get:function(){return E.Cmd}});let w=e.r(248264);Object.defineProperty(n,"Copy",{enumerable:!0,get:function(){return w.Copy}});let A=e.r(304063);Object.defineProperty(n,"Entrypoint",{enumerable:!0,get:function(){return A.Entrypoint}});let N=e.r(232084);Object.defineProperty(n,"Env",{enumerable:!0,get:function(){return N.Env}});let T=e.r(614508);Object.defineProperty(n,"From",{enumerable:!0,get:function(){return T.From}});let I=e.r(372510);Object.defineProperty(n,"Healthcheck",{enumerable:!0,get:function(){return I.Healthcheck}});var S=e.r(117008);Object.defineProperty(n,"Heredoc",{enumerable:!0,get:function(){return S.Heredoc}});var R=e.r(79181);Object.defineProperty(n,"JSONInstruction",{enumerable:!0,get:function(){return R.JSONInstruction}});var O=e.r(123702);Object.defineProperty(n,"Label",{enumerable:!0,get:function(){return O.Label}});var x=e.r(127234);Object.defineProperty(n,"ModifiableInstruction",{enumerable:!0,get:function(){return x.ModifiableInstruction}});var k=e.r(376561);Object.defineProperty(n,"Onbuild",{enumerable:!0,get:function(){return k.Onbuild}});var C=e.r(532972);Object.defineProperty(n,"PropertyInstruction",{enumerable:!0,get:function(){return C.PropertyInstruction}});var _=e.r(661688);Object.defineProperty(n,"Run",{enumerable:!0,get:function(){return _.Run}});var V=e.r(307056);Object.defineProperty(n,"Shell",{enumerable:!0,get:function(){return V.Shell}});var D=e.r(677737);Object.defineProperty(n,"Stopsignal",{enumerable:!0,get:function(){return D.Stopsignal}});var F=e.r(489496);Object.defineProperty(n,"User",{enumerable:!0,get:function(){return F.User}});var U=e.r(453540);Object.defineProperty(n,"Volume",{enumerable:!0,get:function(){return U.Volume}});let P=e.r(235187);Object.defineProperty(n,"Workdir",{enumerable:!0,get:function(){return P.Workdir}}),(r=a||(n.Keyword=a={})).ADD="ADD",r.ARG="ARG",r.CMD="CMD",r.COPY="COPY",r.ENTRYPOINT="ENTRYPOINT",r.ENV="ENV",r.EXPOSE="EXPOSE",r.FROM="FROM",r.HEALTHCHECK="HEALTHCHECK",r.LABEL="LABEL",r.MAINTAINER="MAINTAINER",r.ONBUILD="ONBUILD",r.RUN="RUN",r.SHELL="SHELL",r.STOPSIGNAL="STOPSIGNAL",r.USER="USER",r.VOLUME="VOLUME",r.WORKDIR="WORKDIR",(i=s||(n.Directive=s={})).escape="escape",i.syntax="syntax",n.DefaultVariables=["ALL_PROXY","all_proxy","FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],(o||(n.DockerfileParser=o={})).parse=function(e){return new d.Parser().parse(e)}},279094,e=>{"use strict";let t,n,r,i,a,s,o=/\{[^{}]+\}/g;function l(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:a,headers:s,requestInitExt:l,...p}={...e};l="object"==typeof process&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici?l:void 0,t=m(t);let b=[];async function y(e,y){var v,E;let w,A,N,T,I,{baseUrl:S,fetch:R=r,Request:O=n,headers:x,params:k={},parseAs:C="json",querySerializer:_,bodySerializer:V=a??g,body:D,...F}=y||{},U=t;S&&(U=m(S)??t);let P="function"==typeof i?i:f(i);_&&(P="function"==typeof _?_:f({..."object"==typeof i?i:{},..._}));let L=void 0===D?void 0:V(D,h(s,x,k.header)),B=h(void 0===L||L instanceof FormData?{}:{"Content-Type":"application/json"},s,x,k.header),M={redirect:"follow",...p,...F,body:L,headers:B},j=new O((v=e,E={baseUrl:U,params:k,querySerializer:P},w=`${E.baseUrl}${v}`,E.params?.path&&(w=function(e,t){let n=e;for(let r of e.match(o)??[]){let e=r.substring(1,r.length-1),i=!1,a="simple";if(e.endsWith("*")&&(i=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(a="label",e=e.substring(1)):e.startsWith(";")&&(a="matrix",e=e.substring(1)),!t||void 0===t[e]||null===t[e])continue;let s=t[e];if(Array.isArray(s)){n=n.replace(r,d(e,s,{style:a,explode:i}));continue}if("object"==typeof s){n=n.replace(r,c(e,s,{style:a,explode:i}));continue}if("matrix"===a){n=n.replace(r,`;${u(e,s)}`);continue}n=n.replace(r,"label"===a?`.${encodeURIComponent(s)}`:encodeURIComponent(s))}return n}(w,E.params.path)),(A=E.querySerializer(E.params.query??{})).startsWith("?")&&(A=A.substring(1)),A&&(w+=`?${A}`),w),M);for(let e in F)e in j||(j[e]=F[e]);if(b.length){for(let t of(N=Math.random().toString(36).slice(2,11),T=Object.freeze({baseUrl:U,fetch:R,parseAs:C,querySerializer:P,bodySerializer:V}),b))if(t&&"object"==typeof t&&"function"==typeof t.onRequest){let n=await t.onRequest({request:j,schemaPath:e,params:k,options:T,id:N});if(n)if(n instanceof O)j=n;else if(n instanceof Response){I=n;break}else throw Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!I){try{I=await R(j,l)}catch(n){let t=n;if(b.length)for(let n=b.length-1;n>=0;n--){let r=b[n];if(r&&"object"==typeof r&&"function"==typeof r.onError){let n=await r.onError({request:j,error:t,schemaPath:e,params:k,options:T,id:N});if(n){if(n instanceof Response){t=void 0,I=n;break}if(n instanceof Error){t=n;continue}throw Error("onError: must return new Response() or instance of Error")}}}if(t)throw t}if(b.length)for(let t=b.length-1;t>=0;t--){let n=b[t];if(n&&"object"==typeof n&&"function"==typeof n.onResponse){let t=await n.onResponse({request:j,response:I,schemaPath:e,params:k,options:T,id:N});if(t){if(!(t instanceof Response))throw Error("onResponse: must return new Response() when modifying the response");I=t}}}}if(204===I.status||"HEAD"===j.method||"0"===I.headers.get("Content-Length"))return I.ok?{data:void 0,response:I}:{error:void 0,response:I};if(I.ok)return"stream"===C?{data:I.body,response:I}:{data:await I[C](),response:I};let G=await I.text();try{G=JSON.parse(G)}catch{}return{error:G,response:I}}return{request:(e,t,n)=>y(t,{...n,method:e.toUpperCase()}),GET:(e,t)=>y(e,{...t,method:"GET"}),PUT:(e,t)=>y(e,{...t,method:"PUT"}),POST:(e,t)=>y(e,{...t,method:"POST"}),DELETE:(e,t)=>y(e,{...t,method:"DELETE"}),OPTIONS:(e,t)=>y(e,{...t,method:"OPTIONS"}),HEAD:(e,t)=>y(e,{...t,method:"HEAD"}),PATCH:(e,t)=>y(e,{...t,method:"PATCH"}),TRACE:(e,t)=>y(e,{...t,method:"TRACE"}),use(...e){for(let t of e)if(t){if("object"!=typeof t||!("onRequest"in t||"onResponse"in t||"onError"in t))throw Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");b.push(t)}},eject(...e){for(let t of e){let e=b.indexOf(t);-1!==e&&b.splice(e,1)}}}}function u(e,t,n){if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function c(e,t,n){if(!t||"object"!=typeof t)return"";let r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if("deepObject"!==n.style&&!1===n.explode){for(let e in t)r.push(e,!0===n.allowReserved?t[e]:encodeURIComponent(t[e]));let i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(let i in t){let a="deepObject"===n.style?`${e}[${i}]`:i;r.push(u(a,t[i],n))}let a=r.join(i);return"label"===n.style||"matrix"===n.style?`${i}${a}`:a}function d(e,t,n){if(!Array.isArray(t))return"";if(!1===n.explode){let r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(!0===n.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(r);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}let r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(let r of t)"simple"===n.style||"label"===n.style?i.push(!0===n.allowReserved?r:encodeURIComponent(r)):i.push(u(e,r,n));return"label"===n.style||"matrix"===n.style?`${r}${i.join(r)}`:i.join(r)}function f(e){return function(t){let n=[];if(t&&"object"==typeof t)for(let r in t){let i=t[r];if(null!=i){if(Array.isArray(i)){if(0===i.length)continue;n.push(d(r,i,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if("object"==typeof i){n.push(c(r,i,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}n.push(u(r,i,e))}}return n.join("&")}}function g(e,t){return e instanceof FormData?e:t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])?new URLSearchParams(e).toString():JSON.stringify(e)}function h(...e){let t=new Headers;for(let n of e)if(n&&"object"==typeof n)for(let[e,r]of n instanceof Headers?n.entries():Object.entries(n))if(null===r)t.delete(e);else if(Array.isArray(r))for(let n of r)t.append(e,n);else void 0!==r&&t.set(e,r);return t}function m(e){return e.endsWith("/")?e.substring(0,e.length-1):e}var p,b,y,v,E,w,A,N,T,I,S,R,O,x,k,C,_,V,D,F,U,P,L,B,M,j,G,$,W,K,Y,X,Z,J,H,z,q,Q,ee,et,en,er,ei,ea,es,eo,el,eu,ec,ed,ef,eg,eh,em,ep,eb,ey=e.i(569783);function ev(e,t){return!!(null!==e&&"object"==typeof e&&"$typeName"in e&&"string"==typeof e.$typeName)&&(void 0===t||t.typeName===e.$typeName)}function eE(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,(128&n)==0)return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}throw Error("invalid varint")}function ew(e,t,n){for(let r=0;r<28;r+=7){let i=e>>>r,a=i>>>7!=0||0!=t,s=(a?128|i:i)&255;if(n.push(s),!a)return}let r=e>>>28&15|(7&t)<<4,i=t>>3!=0;if(n.push((i?128|r:r)&255),i){for(let e=3;e<31;e+=7){let r=t>>>e,i=r>>>7!=0,a=(i?128|r:r)&255;if(n.push(a),!i)return}n.push(t>>>31&1)}}function eA(e){let t="-"===e[0];t&&(e=e.slice(1));let n=0,r=0;function i(t,i){let a=Number(e.slice(t,i));r*=1e6,(n=1e6*n+a)>=0x100000000&&(r+=n/0x100000000|0,n%=0x100000000)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?eI(n,r):eT(n,r)}function eN(e,t){if({lo:e,hi:t}={lo:e>>>0,hi:t>>>0},t<=2097151)return String(0x100000000*t+e);let n=0xffffff&e,r=(e>>>24|t<<8)&0xffffff,i=t>>16&65535,a=n+6777216*r+6710656*i,s=r+8147497*i,o=2*i;return a>=1e7&&(s+=Math.floor(a/1e7),a%=1e7),s>=1e7&&(o+=Math.floor(s/1e7),s%=1e7),o.toString()+eS(s)+eS(a)}function eT(e,t){return{lo:0|e,hi:0|t}}function eI(e,t){return t=~t,e?e=~e+1:t+=1,eT(e,t)}(b=Y||(Y={}))[b.Canceled=1]="Canceled",b[b.Unknown=2]="Unknown",b[b.InvalidArgument=3]="InvalidArgument",b[b.DeadlineExceeded=4]="DeadlineExceeded",b[b.NotFound=5]="NotFound",b[b.AlreadyExists=6]="AlreadyExists",b[b.PermissionDenied=7]="PermissionDenied",b[b.ResourceExhausted=8]="ResourceExhausted",b[b.FailedPrecondition=9]="FailedPrecondition",b[b.Aborted=10]="Aborted",b[b.OutOfRange=11]="OutOfRange",b[b.Unimplemented=12]="Unimplemented",b[b.Internal=13]="Internal",b[b.Unavailable=14]="Unavailable",b[b.DataLoss=15]="DataLoss",b[b.Unauthenticated=16]="Unauthenticated",(y=X||(X={}))[y.DOUBLE=1]="DOUBLE",y[y.FLOAT=2]="FLOAT",y[y.INT64=3]="INT64",y[y.UINT64=4]="UINT64",y[y.INT32=5]="INT32",y[y.FIXED64=6]="FIXED64",y[y.FIXED32=7]="FIXED32",y[y.BOOL=8]="BOOL",y[y.STRING=9]="STRING",y[y.BYTES=12]="BYTES",y[y.UINT32=13]="UINT32",y[y.SFIXED32=15]="SFIXED32",y[y.SFIXED64=16]="SFIXED64",y[y.SINT32=17]="SINT32",y[y.SINT64=18]="SINT64";let eS=e=>{let t=String(e);return"0000000".slice(t.length)+t};function eR(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function eO(){let e=this.buf[this.pos++],t=127&e;if((128&e)==0||(t|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;(128&e)!=0&&t<10;t++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),t>>>0}let ex=function(){let e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&(globalThis.Deno||"object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){let t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){let r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw Error(`invalid int64: ${e}`);return r},uParse(e){let t="bigint"==typeof e?e:BigInt(e);if(t>i||t<r)throw Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),ek(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),eC(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),ek(e),eA(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),eC(e),eA(e)),dec:(e,t)=>{let n,r,i;return(r=0x80000000&(n=eT(e,t)).hi)&&(n=eI(n.lo,n.hi)),i=eN(n.lo,n.hi),r?"-"+i:i},uDec:(e,t)=>eN(e,t)}}();function ek(e){if(!/^-?[0-9]+$/.test(e))throw Error("invalid int64: "+e)}function eC(e){if(!/^[0-9]+$/.test(e))throw Error("invalid uint64: "+e)}function e_(e,t){switch(e){case X.STRING:return"";case X.BOOL:return!1;case X.DOUBLE:case X.FLOAT:return 0;case X.INT64:case X.UINT64:case X.SFIXED64:case X.FIXED64:case X.SINT64:return t?"0":ex.zero;case X.BYTES:return new Uint8Array(0);default:return 0}}let eV=Symbol.for("reflect unsafe local");function eD(e,t){let n=e[t.localName].case;return void 0===n?n:t.fields.find(e=>e.localName===n)}function eF(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]}function eU(e,t){if(t.oneof){let n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function eP(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function eL(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function eB(e,t){var n,r,i,a;if(eL(e)&&eV in e&&"add"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){let s=e.field();return t.listKind==s.listKind&&t.scalar===s.scalar&&(null==(n=t.message)?void 0:n.typeName)===(null==(r=s.message)?void 0:r.typeName)&&(null==(i=t.enum)?void 0:i.typeName)===(null==(a=s.enum)?void 0:a.typeName)}return!0}return!1}function eM(e,t){var n,r,i,a;if(eL(e)&&eV in e&&"has"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){let s=e.field();return t.mapKey===s.mapKey&&t.mapKind==s.mapKind&&t.scalar===s.scalar&&(null==(n=t.message)?void 0:n.typeName)===(null==(r=s.message)?void 0:r.typeName)&&(null==(i=t.enum)?void 0:i.typeName)===(null==(a=s.enum)?void 0:a.typeName)}return!0}return!1}function ej(e,t){return eL(e)&&eV in e&&"desc"in e&&eL(e.desc)&&"message"===e.desc.kind&&(void 0===t||e.desc.typeName==t.typeName)}function eG(e){let t=e.fields[0];return e$(e.typeName)&&void 0!==t&&"scalar"==t.fieldKind&&"value"==t.name&&1==t.number}function e$(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}function eW(e,t){if(ev(t,e))return t;let n=function(e){let t;if(function(e){switch(e.file.edition){case 999:return!1;case 998:return!0;default:return e.fields.some(e=>2!=e.presence&&"message"!=e.fieldKind&&!e.oneof)}}(e)){let n,r,i=eH.get(e);if(i)({prototype:n,members:r}=i);else{for(let t of(n={},r=new Set,e.members))"oneof"!=t.kind&&("scalar"==t.fieldKind||"enum"==t.fieldKind)&&2!=t.presence&&(r.add(t),n[t.localName]=ez(t));eH.set(e,{prototype:n,members:r})}for(let i of((t=Object.create(n)).$typeName=e.typeName,e.members))if(!r.has(i)){if("field"==i.kind&&("message"==i.fieldKind||("scalar"==i.fieldKind||"enum"==i.fieldKind)&&2!=i.presence))continue;t[i.localName]=ez(i)}}else for(let n of(t={$typeName:e.typeName},e.members))("oneof"==n.kind||2==n.presence)&&(t[n.localName]=ez(n));return t}(e);return void 0!==t&&function(e,t,n){for(let r of e.members){let e,i=n[r.localName];if(null!=i){if("oneof"==r.kind){let t=eD(n,r);if(!t)continue;e=t,i=eU(n,t)}else e=r;switch(e.fieldKind){case"message":i=eY(e,i);break;case"scalar":i=eK(e,i);break;case"list":i=function(e,t){if(Array.isArray(t)){if(e.scalar==X.BYTES)return t.map(eX);if("message"==e.listKind)return t.map(t=>eY(e,t))}return t}(e,i);break;case"map":i=function(e,t){if(eL(t)){if(e.scalar==X.BYTES)return eZ(t,eX);if("message"==e.mapKind)return eZ(t,t=>eY(e,t))}return t}(e,i)}eP(t,e,i)}}}(e,n,t),n}function eK(e,t){return e.scalar==X.BYTES?eX(t):t}function eY(e,t){if("message"==e.fieldKind&&!e.oneof&&eG(e.message))return eK(e.message.fields[0],t);if(eL(t)){if("google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!==e.parent.typeName)return t;if(!ev(t,e.message))return eW(e.message,t)}return t}function eX(e){return Array.isArray(e)?new Uint8Array(e):e}function eZ(e,t){let n={};for(let r of Object.entries(e))n[r[0]]=t(r[1]);return n}let eJ=Symbol(),eH=new WeakMap;function ez(e){if("oneof"==e.kind)return{case:void 0};if("list"==e.fieldKind)return[];if("map"==e.fieldKind)return{};if("message"==e.fieldKind)return eJ;let t=e.getDefaultValue();return void 0!==t?"scalar"==e.fieldKind&&e.longAsString?t.toString():t:"scalar"==e.fieldKind?e_(e.scalar,e.longAsString):e.enum.values[0].number}let eq=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class eQ extends Error{constructor(e,t,n="FieldValueInvalidError"){super(t),this.name=n,this.field=()=>e}}let e0=Symbol.for("@bufbuild/protobuf/text-encoding");function e1(){if(void 0==globalThis[e0]){let e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[e0]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[e0]}(v=Z||(Z={}))[v.Varint=0]="Varint",v[v.Bit64=1]="Bit64",v[v.LengthDelimited=2]="LengthDelimited",v[v.StartGroup=3]="StartGroup",v[v.EndGroup=4]="EndGroup",v[v.Bit32=5]="Bit32";class e2{constructor(e=e1().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(e4(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return e9(e),eR(e,this.buf),this}bool(e){return this.buf.push(+!!e),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){var t=e;if("string"==typeof t){let e=t;if(Number.isNaN(t=Number(t))&&"NaN"!==e)throw Error("invalid float32: "+e)}else if("number"!=typeof t)throw Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>34028234663852886e22||t<-34028234663852886e22))throw Error("invalid float32: "+t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){e4(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){e9(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return e9(e),eR(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=ex.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=ex.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=ex.enc(e);return ew(t.lo,t.hi,this.buf),this}sint64(e){let t=ex.enc(e),n=t.hi>>31;return ew(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=ex.uEnc(e);return ew(t.lo,t.hi,this.buf),this}}class e3{constructor(e,t=e1().decodeUtf8){this.decodeUtf8=t,this.varint64=eE,this.uint32=eO,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Z.Varint:for(;128&this.buf[this.pos++];);break;case Z.Bit64:this.pos+=4;case Z.Bit32:this.pos+=4;break;case Z.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Z.StartGroup:for(;;){let[e,n]=this.tag();if(n===Z.EndGroup){if(void 0!==t&&e!==t)throw Error("invalid end group tag");break}this.skip(n,e)}break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return ex.dec(...this.varint64())}uint64(){return ex.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,ex.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return ex.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return ex.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function e9(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int32: "+e)}function e4(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint32: "+e)}function e5(e,t){let n,r="list"==e.fieldKind?eB(t,e):"map"==e.fieldKind?eM(t,e):e8(e,t);if(!0!==r){switch(e.fieldKind){case"list":n=`expected ${tr(e)}, got ${tt(t)}`;break;case"map":n=`expected ${ti(e)}, got ${tt(t)}`;break;default:n=te(e,t,r)}return new eQ(e,n)}}function e6(e,t,n){let r=e8(e,n);if(!0!==r)return new eQ(e,`list item #${t+1}: ${te(e,n,r)}`)}function e8(e,t){return void 0!==e.scalar?e7(t,e.scalar):void 0!==e.enum?e.enum.open?Number.isInteger(t):e.enum.values.some(e=>e.number===t):ej(t,e.message)}function e7(e,t){switch(t){case X.DOUBLE:return"number"==typeof e;case X.FLOAT:if("number"!=typeof e)return!1;if(Number.isNaN(e)||!Number.isFinite(e))return!0;if(e>34028234663852886e22||e<-34028234663852886e22)return`${e.toFixed()} out of range`;return!0;case X.INT32:case X.SFIXED32:case X.SINT32:if("number"!=typeof e||!Number.isInteger(e))return!1;if(e>0x7fffffff||e<-0x80000000)return`${e.toFixed()} out of range`;return!0;case X.FIXED32:case X.UINT32:if("number"!=typeof e||!Number.isInteger(e))return!1;if(e>0xffffffff||e<0)return`${e.toFixed()} out of range`;return!0;case X.BOOL:return"boolean"==typeof e;case X.STRING:if("string"!=typeof e)return!1;return e1().checkUtf8(e)||"invalid UTF8";case X.BYTES:return e instanceof Uint8Array;case X.INT64:case X.SFIXED64:case X.SINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return ex.parse(e),!0}catch(t){return`${e} out of range`}return!1;case X.FIXED64:case X.UINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return ex.uParse(e),!0}catch(t){return`${e} out of range`}return!1}}function te(e,t,n){return(n="string"==typeof n?`: ${n}`:`, got ${tt(t)}`,void 0!==e.scalar)?`expected ${function(e){switch(e){case X.STRING:return"string";case X.BOOL:return"boolean";case X.INT64:case X.SINT64:case X.SFIXED64:return"bigint (int64)";case X.UINT64:case X.FIXED64:return"bigint (uint64)";case X.BYTES:return"Uint8Array";case X.DOUBLE:return"number (float64)";case X.FLOAT:return"number (float32)";case X.FIXED32:case X.UINT32:return"number (uint32)";case X.INT32:case X.SFIXED32:case X.SINT32:return"number (int32)"}}(e.scalar)}`+n:void 0!==e.enum?`expected ${e.enum.toString()}`+n:`expected ${tn(e.message)}`+n}function tt(e){switch(typeof e){case"object":if(null===e)return"null";if(e instanceof Uint8Array)return`Uint8Array(${e.length})`;if(Array.isArray(e))return`Array(${e.length})`;if(eB(e))return tr(e.field());if(eM(e))return ti(e.field());if(ej(e))return tn(e.desc);if(ev(e))return`message ${e.$typeName}`;return"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function tn(e){return`ReflectMessage (${e.typeName})`}function tr(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${X[e.scalar]})`}}function ti(e){switch(e.mapKind){case"message":return`ReflectMap (${X[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${X[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${X[e.mapKey]}, ${X[e.scalar]})`}}function ta(e,t,n=!0){return new to(e,t,n)}let ts=new WeakMap;class to{get sortedFields(){let e=ts.get(this.desc);if(e)return e;let t=this.desc.fields.concat().sort((e,t)=>e.number-t.number);return ts.set(this.desc,t),t}constructor(e,t,n=!0){this.lists=new Map,this.maps=new Map,this.check=n,this.desc=e,this.message=this[eV]=null!=t?t:eW(e),this.fields=e.fields,this.oneofs=e.oneofs,this.members=e.members}findNumber(e){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(e=>[e.number,e]))),this._fieldsByNumber.get(e)}oneofCase(e){return tl(this.message,e),eD(this.message,e)}isSet(e){tl(this.message,e);var t=this.message;let n=e.localName;if(e.oneof)return t[e.oneof.localName].case===n;if(2!=e.presence)return void 0!==t[n]&&Object.prototype.hasOwnProperty.call(t,n);switch(e.fieldKind){case"list":return t[n].length>0;case"map":return Object.keys(t[n]).length>0;case"scalar":return!function(e,t){switch(e){case X.BOOL:return!1===t;case X.STRING:return""===t;case X.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}(e.scalar,t[n]);case"enum":return t[n]!==e.enum.values[0].number}throw Error("message field with implicit presence")}clear(e){tl(this.message,e);var t=this.message;let n=e.localName;if(e.oneof){let r=e.oneof.localName;t[r].case===n&&(t[r]={case:void 0})}else if(2!=e.presence)delete t[n];else switch(e.fieldKind){case"map":t[n]={};break;case"list":t[n]=[];break;case"enum":t[n]=e.enum.values[0].number;break;case"scalar":t[n]=e_(e.scalar,e.longAsString)}}get(e){tl(this.message,e);let t=eU(this.message,e);switch(e.fieldKind){case"list":let n=this.lists.get(e);return n&&n[eV]===t||this.lists.set(e,n=new tu(e,t,this.check)),n;case"map":let r=this.maps.get(e);return r&&r[eV]===t||this.maps.set(e,r=new tc(e,t,this.check)),r;case"message":return tf(e,t,this.check);case"scalar":return void 0===t?e_(e.scalar,!1):ty(e,t);case"enum":return null!=t?t:e.enum.values[0].number}}set(e,t){let n;if(tl(this.message,e),this.check){let n=e5(e,t);if(n)throw n}n="message"==e.fieldKind?td(e,t):eM(t)||eB(t)?t[eV]:tv(e,t),eP(this.message,e,n)}getUnknown(){return this.message.$unknown}setUnknown(e){this.message.$unknown=e}}function tl(e,t){if(t.parent.typeName!==e.$typeName)throw new eQ(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class tu{field(){return this._field}get size(){return this._arr.length}constructor(e,t,n){this._field=e,this._arr=this[eV]=t,this.check=n}get(e){let t=this._arr[e];return void 0===t?void 0:th(this._field,t,this.check)}set(e,t){if(e<0||e>=this._arr.length)throw new eQ(this._field,`list item #${e+1}: out of range`);if(this.check){let n=e6(this._field,e,t);if(n)throw n}this._arr[e]=tg(this._field,t)}add(e){if(this.check){let t=e6(this._field,this._arr.length,e);if(t)throw t}this._arr.push(tg(this._field,e))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(let e of this._arr)yield th(this._field,e,this.check)}*entries(){for(let e=0;e<this._arr.length;e++)yield[e,th(this._field,this._arr[e],this.check)]}}class tc{constructor(e,t,n=!0){this.obj=this[eV]=null!=t?t:{},this.check=n,this._field=e}field(){return this._field}set(e,t){var n,r;if(this.check){let n=function(e,t,n){let r=e7(t,e.mapKey);if(!0!==r)return new eQ(e,`invalid map key: ${te({scalar:e.mapKey},t,r)}`);let i=e8(e,n);if(!0!==i)return new eQ(e,`map entry ${tt(t)}: ${te(e,n,i)}`)}(this._field,e,t);if(n)throw n}return this.obj[tp(e)]=(n=this._field,r=t,"message"==n.mapKind?td(n,r):tv(n,r)),this}delete(e){let t=tp(e),n=Object.prototype.hasOwnProperty.call(this.obj,t);return n&&delete this.obj[t],n}clear(){for(let e of Object.keys(this.obj))delete this.obj[e]}get(e){let t=this.obj[tp(e)];return void 0!==t&&(t=tm(this._field,t,this.check)),t}has(e){return Object.prototype.hasOwnProperty.call(this.obj,tp(e))}*keys(){for(let e of Object.keys(this.obj))yield tb(e,this._field.mapKey)}*entries(){for(let e of Object.entries(this.obj))yield[tb(e[0],this._field.mapKey),tm(this._field,e[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(let e of Object.values(this.obj))yield tm(this._field,e,this.check)}forEach(e,t){for(let n of this.entries())e.call(t,n[1],n[0],this)}}function td(e,t){return ej(t)?e$(t.message.$typeName)&&!e.oneof&&"message"==e.fieldKind?t.message.value:"google.protobuf.Struct"==t.desc.typeName&&"google.protobuf.Value"!=e.parent.typeName?function e(t){let n={};for(let[r,i]of Object.entries(t.fields))n[r]=function t(n){switch(n.kind.case){case"structValue":return e(n.kind.value);case"listValue":return n.kind.value.values.map(t);case"nullValue":case void 0:return null;default:return n.kind.value}}(i);return n}(t.message):t.message:t}function tf(e,t,n){return void 0!==t&&(eG(e.message)&&!e.oneof&&"message"==e.fieldKind?t={$typeName:e.message.typeName,value:ty(e.message.fields[0],t)}:"google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!=e.parent.typeName&&eL(t)&&(t=function e(t){let n={$typeName:"google.protobuf.Struct",fields:{}};if(eL(t))for(let[r,i]of Object.entries(t))n.fields[r]=function t(n){let r={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof n){case"number":r.kind={case:"numberValue",value:n};break;case"string":r.kind={case:"stringValue",value:n};break;case"boolean":r.kind={case:"boolValue",value:n};break;case"object":if(null===n)r.kind={case:"nullValue",value:0};else if(Array.isArray(n)){let e={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(n))for(let r of n)e.values.push(t(r));r.kind={case:"listValue",value:e}}else r.kind={case:"structValue",value:e(n)}}return r}(i);return n}(t))),new to(e.message,t,n)}function tg(e,t){return"message"==e.listKind?td(e,t):tv(e,t)}function th(e,t,n){return"message"==e.listKind?tf(e,t,n):ty(e,t)}function tm(e,t,n){return"message"==e.mapKind?tf(e,t,n):t}function tp(e){return"string"==typeof e||"number"==typeof e?e:String(e)}function tb(e,t){switch(t){case X.STRING:break;case X.INT32:case X.FIXED32:case X.UINT32:case X.SFIXED32:case X.SINT32:{let t=Number.parseInt(e);if(Number.isFinite(t))return t;break}case X.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case X.UINT64:case X.FIXED64:try{return ex.uParse(e)}catch(e){}break;default:try{return ex.parse(e)}catch(e){}}return e}function ty(e,t){switch(e.scalar){case X.INT64:case X.SFIXED64:case X.SINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=ex.parse(t));break;case X.FIXED64:case X.UINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=ex.uParse(t))}return t}function tv(e,t){switch(e.scalar){case X.INT64:case X.SFIXED64:case X.SINT64:"longAsString"in e&&e.longAsString?t=String(t):("string"==typeof t||"number"==typeof t)&&(t=ex.parse(t));break;case X.FIXED64:case X.UINT64:"longAsString"in e&&e.longAsString?t=String(t):("string"==typeof t||"number"==typeof t)&&(t=ex.uParse(t))}return t}let tE={readUnknownFields:!0};function tw(e,t,n){let r=ta(e,void 0,!1);return tA(r,new e3(t),n?Object.assign(Object.assign({},tE),n):tE,!1,t.byteLength),r.message}function tA(e,t,n,r,i){var a;let s,o,l=r?t.len:t.pos+i,u=null!=(a=e.getUnknown())?a:[];for(;t.pos<l&&([s,o]=t.tag(),!r||o!=Z.EndGroup);){let r=e.findNumber(s);if(!r){let e=t.skip(o,s);n.readUnknownFields&&u.push({no:s,wireType:o,data:e});continue}tN(e,t,r,o,n)}if(r&&(o!=Z.EndGroup||s!==i))throw Error("invalid end group tag");u.length>0&&e.setUnknown(u)}function tN(e,t,n,r,i){var a;switch(n.fieldKind){case"scalar":e.set(n,tI(t,n.scalar));break;case"enum":let s=tI(t,X.INT32);if(n.enum.open)e.set(n,s);else if(n.enum.values.some(e=>e.number===s))e.set(n,s);else if(i.readUnknownFields){let t=[];eR(s,t);let i=null!=(a=e.getUnknown())?a:[];i.push({no:n.number,wireType:r,data:new Uint8Array(t)}),e.setUnknown(i)}break;case"message":e.set(n,tT(t,i,n,e.get(n)));break;case"list":!function(e,t,n,r){var i;let a=n.field();if("message"===a.listKind)return n.add(tT(e,r,a));let s=null!=(i=a.scalar)?i:X.INT32;if(t!=Z.LengthDelimited||s==X.STRING||s==X.BYTES)return n.add(tI(e,s));let o=e.uint32()+e.pos;for(;e.pos<o;)n.add(tI(e,s))}(t,r,e.get(n),i);break;case"map":!function(e,t,n){let r,i,a=t.field(),s=e.uint32(),o=e.pos+s;for(;e.pos<o;){let[t]=e.tag();switch(t){case 1:r=tI(e,a.mapKey);break;case 2:switch(a.mapKind){case"scalar":i=tI(e,a.scalar);break;case"enum":i=e.int32();break;case"message":i=tT(e,n,a)}}}if(void 0===r&&(r=e_(a.mapKey,!1)),void 0===i)switch(a.mapKind){case"scalar":i=e_(a.scalar,!1);break;case"enum":i=a.enum.values[0].number;break;case"message":i=ta(a.message,void 0,!1)}t.set(r,i)}(t,e.get(n),i)}}function tT(e,t,n,r){let i=n.delimitedEncoding,a=null!=r?r:ta(n.message,void 0,!1);return tA(a,e,t,i,i?n.number:e.uint32()),a}function tI(e,t){switch(t){case X.STRING:return e.string();case X.BOOL:return e.bool();case X.DOUBLE:return e.double();case X.FLOAT:return e.float();case X.INT32:return e.int32();case X.INT64:return e.int64();case X.UINT64:return e.uint64();case X.FIXED64:return e.fixed64();case X.BYTES:return e.bytes();case X.FIXED32:return e.fixed32();case X.SFIXED32:return e.sfixed32();case X.SFIXED64:return e.sfixed64();case X.SINT64:return e.sint64();case X.UINT32:return e.uint32();case X.SINT32:return e.sint32()}}function tS(e){let t=Y[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class tR extends Error{constructor(e,t=Y.Unknown,n,r,i){super(function(e,t){return e.length?`[${tS(t)}] ${e}`:`[${tS(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=n?n:{}),this.details=null!=r?r:[],this.cause=i}static from(e,t=Y.Unknown){return e instanceof tR?e:e instanceof Error?"AbortError"==e.name?new tR(e.message,Y.Canceled):new tR(e.message,t,void 0,void 0,e):new tR(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===tR.prototype||"ConnectError"===e.name&&"code"in e&&"number"==typeof e.code&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&"string"==typeof e.rawMessage&&"cause"in e)}findDetails(e){let t="message"===e.kind?{getMessage:t=>t===e.typeName?e:void 0}:e,n=[];for(let e of this.details){if("desc"in e){t.getMessage(e.desc.typeName)&&n.push(eW(e.desc,e.value));continue}let r=t.getMessage(e.type);if(r)try{n.push(tw(r,e.value))}catch(e){}}return n}}var tO=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var a,s,o;a=r,s=i,o=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){a({value:e,done:o})},s)})}}},tx=function(e){return this instanceof tx?(this.v=e,this):new tx(e)},tk=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof tx?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}},tC=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:tx(e[r](t)),done:!1}:i?i(t):t}:i}},t_=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var a,s,o;a=r,s=i,o=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){a({value:e,done:o})},s)})}}},tV=function(e){return this instanceof tV?(this.v=e,this):new tV(e)},tD=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:tV(e[r](t)),done:!1}:i?i(t):t}:i}},tF=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof tV?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};function tU(e,t){var n=e=>{var n,r,i,a,s,o,l,u;switch(e.methodKind){case"unary":return n=t,r=e,async function(e,t){var i,a;let s=await n.unary(r,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues);return null==(i=null==t?void 0:t.onHeader)||i.call(t,s.header),null==(a=null==t?void 0:t.onTrailer)||a.call(t,s.trailer),s.message};case"server_streaming":return i=t,a=e,function(e,t){return tP(i.stream(a,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,function(e){return tk(this,arguments,function*(){yield tx((yield*tC(tO(e))))})}([e]),null==t?void 0:t.contextValues),t)};case"client_streaming":return s=t,o=e,async function(e,t){let n,r=await s.stream(o,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues);null==(d=null==t?void 0:t.onHeader)||d.call(t,r.header);let i=0;try{for(var a,l,u,c,d,f,g,h=!0,m=t_(r.message);!(a=(g=await m.next()).done);h=!0)c=g.value,h=!1,n=c,i++}catch(e){l={error:e}}finally{try{!h&&!a&&(u=m.return)&&await u.call(m)}finally{if(l)throw l.error}}if(!n)throw new tR("protocol error: missing response message",Y.Unimplemented);if(i>1)throw new tR("protocol error: received extra messages for client streaming method",Y.Unimplemented);return null==(f=null==t?void 0:t.onTrailer)||f.call(t,r.trailer),n};case"bidi_streaming":return l=t,u=e,function(e,t){return tP(l.stream(u,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues),t)};default:return null}};let r={};for(let t of e.methods){let e=n(t);null!=e&&(r[t.localName]=e)}return r}function tP(e,t){let n=(function(){return tF(this,arguments,function*(){var n,r;let i=yield tV(e);null==(n=null==t?void 0:t.onHeader)||n.call(t,i.header),yield tV((yield*tD(t_(i.message)))),null==(r=null==t?void 0:t.onTrailer)||r.call(t,i.trailer)})})()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}let tL=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,tB=e=>{if("string"!=typeof e)throw TypeError("Invalid argument expected string");let t=e.match(tL);if(!t)throw Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},tM=e=>"*"===e||"x"===e||"X"===e,tj=e=>{let t=parseInt(e,10);return isNaN(t)?e:t},tG=(e,t)=>{let n,r;if(tM(e)||tM(t))return 0;let[i,a]=typeof(n=tj(e))!=typeof(r=tj(t))?[String(n),String(r)]:[n,r];return i>a?1:i<a?-1:0},t$=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){let r=tG(e[n]||"0",t[n]||"0");if(0!==r)return r}return 0},tW=(e,t)=>{let n=tB(e),r=tB(t),i=n.pop(),a=r.pop(),s=t$(n,r);return 0!==s?s:i&&a?t$(i.split("."),a.split(".")):i||a?i?-1:1:0};function tK(e){let t=function(){if(!i){i=[];let e=tX("std");for(let t=0;t<e.length;t++)i[e[t].charCodeAt(0)]=t;i[45]=e.indexOf("+"),i[95]=e.indexOf("/")}return i}(),n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);let r=new Uint8Array(n),a=0,s=0,o,l=0;for(let n=0;n<e.length;n++){if(void 0===(o=t[e.charCodeAt(n)]))switch(e[n]){case"=":s=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(s){case 0:l=o,s=1;break;case 1:r[a++]=l<<2|(48&o)>>4,l=o,s=2;break;case 2:r[a++]=(15&l)<<4|(60&o)>>2,l=o,s=3;break;case 3:r[a++]=(3&l)<<6|o,s=0}}if(1==s)throw Error("invalid base64 string");return r.subarray(0,a)}function tY(e,t="std"){let n=tX(t),r="std"==t,i="",a=0,s,o=0;for(let t=0;t<e.length;t++)switch(s=e[t],a){case 0:i+=n[s>>2],o=(3&s)<<4,a=1;break;case 1:i+=n[o|s>>4],o=(15&s)<<2,a=2;break;case 2:i+=n[o|s>>6],i+=n[63&s],a=0}return a&&(i+=n[o],r&&(i+="=",1==a&&(i+="="))),i}function tX(e){return n||(r=(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("")).slice(0,-2).concat("-","_")),"url"==e?r:n}function tZ(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i)}}return n.join("")}let tJ=new Set(["constructor","toString","toJSON","valueOf"]);function tH(e){return tJ.has(e)?e+"$":e}function tz(e){for(let t of e.field)eF(t,"jsonName")||(t.jsonName=tZ(t.name));e.nestedType.forEach(tz)}function tq(...e){let t,n,r,i=(t=new Map,n=new Map,r=new Map,{kind:"registry",types:t,extendees:n,[Symbol.iterator]:()=>t.values(),get files(){return r.values()},addFile(e,t,n){if(r.set(e.proto.name,e),!t)for(let t of function* e(t){switch(t.kind){case"file":for(let n of t.messages)yield n,yield*e(n);yield*t.enums,yield*t.services,yield*t.extensions;break;case"message":for(let n of t.nestedMessages)yield n,yield*e(n);yield*t.nestedEnums,yield*t.nestedExtensions}}(e))this.add(t);if(n)for(let r of e.dependencies)this.addFile(r,t,n)},add(e){if("extension"==e.kind){let t=n.get(e.extendee.typeName);t||n.set(e.extendee.typeName,t=new Map),t.set(e.number,e)}t.set(e.typeName,e)},get:e=>t.get(e),getFile:e=>r.get(e),getMessage(e){let n=t.get(e);return(null==n?void 0:n.kind)=="message"?n:void 0},getEnum(e){let n=t.get(e);return(null==n?void 0:n.kind)=="enum"?n:void 0},getExtension(e){let n=t.get(e);return(null==n?void 0:n.kind)=="extension"?n:void 0},getExtensionFor(e,t){var r;return null==(r=n.get(e.typeName))?void 0:r.get(t)},getService(e){let n=t.get(e);return(null==n?void 0:n.kind)=="service"?n:void 0}});if(!e.length)return i;if("$typeName"in e[0]&&"google.protobuf.FileDescriptorSet"==e[0].$typeName){for(let t of e[0].file)t0(t,i);return i}if("$typeName"in e[0]){let t=e[0],n=e[1],r=new Set;for(let e of[t,...function e(t){let a=[];for(let e of t.dependency){if(void 0!=i.getFile(e)||r.has(e))continue;let s=n(e);if(!s)throw Error(`Unable to resolve ${e}, imported by ${t.name}`);"kind"in s?i.addFile(s,!1,!0):(r.add(s.name),a.push(s))}return a.concat(...a.map(e))}(t)].reverse())t0(e,i)}else for(let t of e)for(let e of t.files)i.addFile(e);return i}let tQ={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function t0(e,t){var n,r,i,a;let s={kind:"file",proto:e,deprecated:null!=(r=null==(n=e.options)?void 0:n.deprecated)&&r,edition:function(e){switch(e.syntax){case"":case"proto2":return 998;case"proto3":return 999;case"editions":if(e.edition in tQ)return e.edition;throw Error(`${e.name}: unsupported edition`);default:throw Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}(e),name:e.name.replace(/\.proto$/,""),dependencies:(i=e,a=t,i.dependency.map(e=>{let t=a.getFile(e);if(!t)throw Error(`Cannot find ${e}, imported by ${i.name}`);return t})),enums:[],messages:[],extensions:[],services:[],toString:()=>`file ${e.name}`},o=new Map,l={get:e=>o.get(e),add(e){var t;t7((null==(t=e.proto.options)?void 0:t.mapEntry)===!0),o.set(e.typeName,e)}};for(let n of e.enumType)t3(n,s,void 0,t);for(let n of e.messageType)!function e(t,n,r,i,a){var s,o,l,u;let c={kind:"message",proto:t,deprecated:null!=(o=null==(s=t.options)?void 0:s.deprecated)&&o,file:n,parent:r,name:t.name,typeName:t4(t,r,n),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};for(let e of((null==(l=t.options)?void 0:l.mapEntry)===!0?a.add(c):((null!=(u=null==r?void 0:r.nestedMessages)?u:n.messages).push(c),i.add(c)),t.enumType))t3(e,n,c,i);for(let r of t.nestedType)e(r,n,c,i,a)}(n,s,void 0,t,l);for(let n of e.service)!function(e,t,n){var r,i;let a={kind:"service",proto:e,deprecated:null!=(i=null==(r=e.options)?void 0:r.deprecated)&&i,file:t,name:e.name,typeName:t4(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};for(let r of(t.services.push(a),n.add(a),e.method)){let e=function(e,t,n){var r,i,a,s;let o;o=e.clientStreaming&&e.serverStreaming?"bidi_streaming":e.clientStreaming?"client_streaming":e.serverStreaming?"server_streaming":"unary";let l=n.getMessage(t5(e.inputType)),u=n.getMessage(t5(e.outputType));t7(l,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),t7(u,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);let c=e.name;return{kind:"rpc",proto:e,deprecated:null!=(i=null==(r=e.options)?void 0:r.deprecated)&&i,parent:t,name:c,localName:tH(c.length?tH(c[0].toLowerCase()+c.substring(1)):c),methodKind:o,input:l,output:u,idempotency:null!=(s=null==(a=e.options)?void 0:a.idempotencyLevel)?s:0,toString:()=>`rpc ${t.typeName}.${c}`}}(r,a,n);a.methods.push(e),a.method[e.localName]=e}}(n,s,t);for(let e of(t1(s,t),o.values()))t2(e,t,l);for(let e of s.messages)t2(e,t,l),t1(e,t);t.addFile(s,!0)}function t1(e,t){switch(e.kind){case"file":for(let n of e.proto.extension){let r=t9(n,e,t);e.extensions.push(r),t.add(r)}break;case"message":for(let n of e.proto.extension){let r=t9(n,e,t);e.nestedExtensions.push(r),t.add(r)}for(let n of e.nestedMessages)t1(n,t)}}function t2(e,t,n){let r=e.proto.oneofDecl.map(t=>{var n,r;return n=t,{kind:"oneof",proto:n,deprecated:!1,parent:r=e,fields:[],name:n.name,localName:tH(tZ(n.name)),toString(){return`oneof ${r.typeName}.${this.name}`}}}),i=new Set;for(let a of e.proto.field){let s=function(e,t){if(!eF(e,"oneofIndex")||e.proto3Optional)return;let n=t[e.oneofIndex];return t7(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}(a,r),o=t9(a,e,t,s,n);e.fields.push(o),e.field[o.localName]=o,void 0===s?e.members.push(o):(s.fields.push(o),i.has(s)||(i.add(s),e.members.push(s)))}for(let t of r.filter(e=>i.has(e)))e.oneofs.push(t);for(let r of e.nestedMessages)t2(r,t,n)}function t3(e,t,n,r){var i,a,s,o,l,u,c;let d=function(e,t){var n;let r=((n=e).substring(0,1)+n.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()+"_";for(let e of t){if(!e.name.toLowerCase().startsWith(r))return;let t=e.name.substring(r.length);if(0==t.length||/^\d/.test(t))return}return r}(e.name,e.value),f={kind:"enum",proto:e,deprecated:null!=(a=null==(i=e.options)?void 0:i.deprecated)&&a,file:t,parent:n,open:!0,name:e.name,typeName:t4(e,n,t),value:{},values:[],sharedPrefix:d,toString(){return`enum ${this.typeName}`}};for(let t of(f.open=1==t8("enumType",{proto:(u=f).proto,parent:null!=(c=u.parent)?c:u.file}),r.add(f),e.value)){let e=t.name;f.values.push(f.value[t.number]={kind:"enum_value",proto:t,deprecated:null!=(o=null==(s=t.options)?void 0:s.deprecated)&&o,parent:f,name:e,localName:tH(void 0==d?e:e.substring(d.length)),number:t.number,toString:()=>`enum value ${f.typeName}.${e}`})}(null!=(l=null==n?void 0:n.nestedEnums)?l:t.enums).push(f)}function t9(e,t,n,r,i){var a,s,o,l;let u=void 0===i,c={kind:"field",proto:e,deprecated:null!=(s=null==(a=e.options)?void 0:a.deprecated)&&s,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:function(e,t,n,r){if(2==e.label)return 3;if(3==e.label)return 2;if(t||e.proto3Optional||n)return 1;let i=t8("fieldPresence",{proto:e,parent:r});return 2==i&&(11==e.type||10==e.type)?1:i}(e,r,u,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(u){let r="file"==t.kind?t:t.file,i="file"==t.kind?void 0:t,a=t4(e,i,r);c.kind="extension",c.file=r,c.parent=i,c.oneof=void 0,c.typeName=a,c.jsonName=`[${a}]`,c.toString=()=>`extension ${a}`;let s=n.getMessage(t5(e.extendee));t7(s,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),c.extendee=s}else t7("message"==t.kind),c.parent=t,c.oneof=r,c.localName=r?tZ(e.name):tH(tZ(e.name)),c.jsonName=e.jsonName,c.toString=()=>`field ${t.typeName}.${e.name}`;let d=e.label,f=e.type,g=null==(o=e.options)?void 0:o.jstype;if(3===d){let r=11==f?null==i?void 0:i.get(t5(e.typeName)):void 0;if(r){let e,t;c.fieldKind="map";let{key:n,value:i}=(e=(l=r).fields.find(e=>1===e.number),t=l.fields.find(e=>2===e.number),t7(e&&"scalar"==e.fieldKind&&e.scalar!=X.BYTES&&e.scalar!=X.FLOAT&&e.scalar!=X.DOUBLE&&t&&"list"!=t.fieldKind&&"map"!=t.fieldKind),{key:e,value:t});return c.mapKey=n.scalar,c.mapKind=i.fieldKind,c.message=i.message,c.delimitedEncoding=!1,c.enum=i.enum,c.scalar=i.scalar,c}switch(c.fieldKind="list",f){case 11:case 10:c.listKind="message",c.message=n.getMessage(t5(e.typeName)),t7(c.message),c.delimitedEncoding=t6(e,t);break;case 14:c.listKind="enum",c.enum=n.getEnum(t5(e.typeName)),t7(c.enum);break;default:c.listKind="scalar",c.scalar=f,c.longAsString=1==g}return c.packed=function(e,t){if(3!=e.label)return!1;switch(e.type){case 9:case 12:case 10:case 11:return!1}let n=e.options;return n&&eF(n,"packed")?n.packed:1==t8("repeatedFieldEncoding",{proto:e,parent:t})}(e,t),c}switch(f){case 11:case 10:c.fieldKind="message",c.message=n.getMessage(t5(e.typeName)),t7(c.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.delimitedEncoding=t6(e,t),c.getDefaultValue=()=>void 0;break;case 14:{let t=n.getEnum(t5(e.typeName));t7(void 0!==t,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.fieldKind="enum",c.enum=n.getEnum(t5(e.typeName)),c.getDefaultValue=()=>eF(e,"defaultValue")?function(e,t){let n=e.values.find(e=>e.name===t);if(!n)throw Error(`cannot parse ${e} default value: ${t}`);return n.number}(t,e.defaultValue):void 0;break}default:c.fieldKind="scalar",c.scalar=f,c.longAsString=1==g,c.getDefaultValue=()=>eF(e,"defaultValue")?function(e,t){switch(e){case X.STRING:return t;case X.BYTES:{let n=function(e){let t=[],n={tail:e,c:"",next(){return 0!=this.tail.length&&(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(e){if(this.tail.length>=e){let t=this.tail.substring(0,e);return this.tail=this.tail.substring(e),t}return!1}};for(;n.next();)if("\\"===n.c){if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{let e=n.c,r=n.take(2);if(!1===r)return!1;let i=parseInt(e+r,8);if(Number.isNaN(i))return!1;t.push(i);break}case"x":{let e=n.c,r=n.take(2);if(!1===r)return!1;let i=parseInt(e+r,16);if(Number.isNaN(i))return!1;t.push(i);break}case"u":{let e=n.c,r=n.take(4);if(!1===r)return!1;let i=parseInt(e+r,16);if(Number.isNaN(i))return!1;let a=new Uint8Array(4);new DataView(a.buffer).setInt32(0,i,!0),t.push(a[0],a[1],a[2],a[3]);break}case"U":{let e=n.c,r=n.take(8);if(!1===r)return!1;let i=ex.uEnc(e+r),a=new Uint8Array(8),s=new DataView(a.buffer);s.setInt32(0,i.lo,!0),s.setInt32(4,i.hi,!0),t.push(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])}}}else t.push(n.c.charCodeAt(0));return new Uint8Array(t)}(t);if(!1===n)throw Error(`cannot parse ${X[e]} default value: ${t}`);return n}case X.INT64:case X.SFIXED64:case X.SINT64:return ex.parse(t);case X.UINT64:case X.FIXED64:return ex.uParse(t);case X.DOUBLE:case X.FLOAT:switch(t){case"inf":return 1/0;case"-inf":return-1/0;case"nan":return NaN;default:return parseFloat(t)}case X.BOOL:return"true"===t;case X.INT32:case X.UINT32:case X.SINT32:case X.FIXED32:case X.SFIXED32:return parseInt(t,10)}}(f,e.defaultValue):void 0}return c}function t4(e,t,n){return t?`${t.typeName}.${e.name}`:n.proto.package.length>0?`${n.proto.package}.${e.name}`:`${e.name}`}function t5(e){return e.startsWith(".")?e.substring(1):e}function t6(e,t){return 10==e.type||2==t8("messageEncoding",{proto:e,parent:t})}function t8(e,t){var n,r;let i=null==(n=t.proto.options)?void 0:n.features;if(i){let t=i[e];if(0!=t)return t}if("kind"in t){if("message"==t.kind)return t8(e,null!=(r=t.parent)?r:t.file);let n=tQ[t.edition];if(!n)throw Error(`feature default for edition ${t.edition} not found`);return n[e]}return t8(e,t.parent)}function t7(e,t){if(!e)throw Error(t)}function ne(e){var t,n,r,i,a,s,o,l;return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:null!=(n=null==(t=e.field)?void 0:t.map(nt))?n:[],extension:[],nestedType:null!=(i=null==(r=e.nestedType)?void 0:r.map(ne))?i:[],enumType:null!=(s=null==(a=e.enumType)?void 0:a.map(nn))?s:[],extensionRange:null!=(l=null==(o=e.extensionRange)?void 0:o.map(e=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},e)))?l:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function nt(e){var t,n,r,i;return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?(t=e.options,Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},t),{targets:null!=(n=t.targets)?n:[],editionDefaults:null!=(i=null==(r=t.editionDefaults)?void 0:r.map(e=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},e)))?i:[],uninterpretedOption:[]}))):void 0}))}function nn(e){return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(e=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},e))})}function nr(e,t,...n){return n.reduce((e,t)=>e.nestedMessages[t],e.messages[t])}let ni=nr((p={name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:0x1ff2b601}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:0x1ff2b601}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_UNSTABLE",number:9999},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:0x7fffffff}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]},(s=Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},p),{messageType:p.messageType.map(ne),enumType:p.enumType.map(nn)}))).messageType.forEach(tz),tq(s,()=>void 0).getFile(s.name)),1);function na(e,t){var n;let r=tw(ni,tK(e));return r.messageType.forEach(tz),r.dependency=null!=(n=null==t?void 0:t.map(e=>e.proto.name))?n:[],tq(r,e=>null==t?void 0:t.find(t=>t.proto.name===e)).getFile(r.name)}function ns(e,t,...n){if(n.length>0)throw Error();return e.services[t]}(E=J||(J={}))[E.DECLARATION=0]="DECLARATION",E[E.UNVERIFIED=1]="UNVERIFIED",(w=H||(H={}))[w.DOUBLE=1]="DOUBLE",w[w.FLOAT=2]="FLOAT",w[w.INT64=3]="INT64",w[w.UINT64=4]="UINT64",w[w.INT32=5]="INT32",w[w.FIXED64=6]="FIXED64",w[w.FIXED32=7]="FIXED32",w[w.BOOL=8]="BOOL",w[w.STRING=9]="STRING",w[w.GROUP=10]="GROUP",w[w.MESSAGE=11]="MESSAGE",w[w.BYTES=12]="BYTES",w[w.UINT32=13]="UINT32",w[w.ENUM=14]="ENUM",w[w.SFIXED32=15]="SFIXED32",w[w.SFIXED64=16]="SFIXED64",w[w.SINT32=17]="SINT32",w[w.SINT64=18]="SINT64",(A=z||(z={}))[A.OPTIONAL=1]="OPTIONAL",A[A.REPEATED=3]="REPEATED",A[A.REQUIRED=2]="REQUIRED",(N=q||(q={}))[N.SPEED=1]="SPEED",N[N.CODE_SIZE=2]="CODE_SIZE",N[N.LITE_RUNTIME=3]="LITE_RUNTIME",(T=Q||(Q={}))[T.STRING=0]="STRING",T[T.CORD=1]="CORD",T[T.STRING_PIECE=2]="STRING_PIECE",(I=ee||(ee={}))[I.JS_NORMAL=0]="JS_NORMAL",I[I.JS_STRING=1]="JS_STRING",I[I.JS_NUMBER=2]="JS_NUMBER",(S=et||(et={}))[S.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",S[S.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",S[S.RETENTION_SOURCE=2]="RETENTION_SOURCE",(R=en||(en={}))[R.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",R[R.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",R[R.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",R[R.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",R[R.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",R[R.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",R[R.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",R[R.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",R[R.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",R[R.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD",(O=er||(er={}))[O.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",O[O.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",O[O.IDEMPOTENT=2]="IDEMPOTENT",(x=ei||(ei={}))[x.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",x[x.EXPORT_ALL=1]="EXPORT_ALL",x[x.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",x[x.LOCAL_ALL=3]="LOCAL_ALL",x[x.STRICT=4]="STRICT",(k=ea||(ea={}))[k.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",k[k.EXPLICIT=1]="EXPLICIT",k[k.IMPLICIT=2]="IMPLICIT",k[k.LEGACY_REQUIRED=3]="LEGACY_REQUIRED",(C=es||(es={}))[C.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",C[C.OPEN=1]="OPEN",C[C.CLOSED=2]="CLOSED",(_=eo||(eo={}))[_.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",_[_.PACKED=1]="PACKED",_[_.EXPANDED=2]="EXPANDED",(V=el||(el={}))[V.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",V[V.VERIFY=2]="VERIFY",V[V.NONE=3]="NONE",(D=eu||(eu={}))[D.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",D[D.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",D[D.DELIMITED=2]="DELIMITED",(F=ec||(ec={}))[F.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",F[F.ALLOW=1]="ALLOW",F[F.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT",(U=ed||(ed={}))[U.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",U[U.STYLE2024=1]="STYLE2024",U[U.STYLE_LEGACY=2]="STYLE_LEGACY",(P=ef||(ef={}))[P.NONE=0]="NONE",P[P.SET=1]="SET",P[P.ALIAS=2]="ALIAS",(L=eg||(eg={}))[L.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",L[L.EDITION_LEGACY=900]="EDITION_LEGACY",L[L.EDITION_PROTO2=998]="EDITION_PROTO2",L[L.EDITION_PROTO3=999]="EDITION_PROTO3",L[L.EDITION_2023=1e3]="EDITION_2023",L[L.EDITION_2024=1001]="EDITION_2024",L[L.EDITION_UNSTABLE=9999]="EDITION_UNSTABLE",L[L.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",L[L.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",L[L.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",L[L.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",L[L.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",L[L.EDITION_MAX=0x7fffffff]="EDITION_MAX",(B=eh||(eh={}))[B.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",B[B.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",B[B.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT";let no=na("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),nl=nr(na("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),0),nu={writeUnknownFields:!0};function nc(e,t,n){return nd(new e2,n?Object.assign(Object.assign({},nu),n):nu,ta(e,t)).finish()}function nd(e,t,n){var r;for(let r of n.sortedFields){if(!n.isSet(r)){if(3==r.presence)throw Error(`cannot encode ${r} to binary: required field not set`);continue}nf(e,t,n,r)}if(t.writeUnknownFields)for(let{no:t,wireType:i,data:a}of null!=(r=n.getUnknown())?r:[])e.tag(t,i).raw(a);return e}function nf(e,t,n,r){var i;switch(r.fieldKind){case"scalar":case"enum":ng(e,n.desc.typeName,r.name,null!=(i=r.scalar)?i:X.INT32,r.number,n.get(r));break;case"list":!function(e,t,n,r){var i;if("message"==n.listKind){for(let i of r)nh(e,t,n,i);return}let a=null!=(i=n.scalar)?i:X.INT32;if(n.packed){if(!r.size)return;for(let t of(e.tag(n.number,Z.LengthDelimited).fork(),r))nm(e,n.parent.typeName,n.name,a,t);e.join();return}for(let t of r)ng(e,n.parent.typeName,n.name,a,n.number,t)}(e,t,r,n.get(r));break;case"message":nh(e,t,r,n.get(r));break;case"map":for(let[i,a]of n.get(r))!function(e,t,n,r,i){var a;switch(e.tag(n.number,Z.LengthDelimited).fork(),ng(e,n.parent.typeName,n.name,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":ng(e,n.parent.typeName,n.name,null!=(a=n.scalar)?a:X.INT32,2,i);break;case"message":nd(e.tag(2,Z.LengthDelimited).fork(),t,i).join()}e.join()}(e,t,r,i,a)}}function ng(e,t,n,r,i,a){nm(e.tag(i,function(e){switch(e){case X.BYTES:case X.STRING:return Z.LengthDelimited;case X.DOUBLE:case X.FIXED64:case X.SFIXED64:return Z.Bit64;case X.FIXED32:case X.SFIXED32:case X.FLOAT:return Z.Bit32;default:return Z.Varint}}(r)),t,n,r,a)}function nh(e,t,n,r){n.delimitedEncoding?nd(e.tag(n.number,Z.StartGroup),t,r).tag(n.number,Z.EndGroup):nd(e.tag(n.number,Z.LengthDelimited).fork(),t,r).join()}function nm(e,t,n,r,i){try{switch(r){case X.STRING:e.string(i);break;case X.BOOL:e.bool(i);break;case X.DOUBLE:e.double(i);break;case X.FLOAT:e.float(i);break;case X.INT32:e.int32(i);break;case X.INT64:e.int64(i);break;case X.UINT64:e.uint64(i);break;case X.FIXED64:e.fixed64(i);break;case X.BYTES:e.bytes(i);break;case X.FIXED32:e.fixed32(i);break;case X.SFIXED32:e.sfixed32(i);break;case X.SFIXED64:e.sfixed64(i);break;case X.SINT64:e.sint64(i);break;case X.UINT32:e.uint32(i);break;case X.SINT32:e.sint32(i)}}catch(e){if(e instanceof Error)throw Error(`cannot encode field ${t}.${n} to binary: ${e.message}`);throw e}}function np(e){let t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw Error(`invalid type url: ${e}`);return n}let nb=na("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),ny=nr(nb,0),nv=nr(nb,1),nE=nr(nb,2);function nw(e,t){let n=e.typeName,r=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),i=Object.assign(Object.assign({},e.extendee),{fields:[r],members:[r],oneofs:[]}),a=eW(i,void 0!==t?{[n]:t}:void 0);return[ta(i,a),r,()=>{let t=a[n];if(void 0===t){let t=e.message;return eG(t)?e_(t.fields[0].scalar,t.fields[0].longAsString):eW(t)}return t}]}function nA(e,t){if(e.extendee.typeName!=t.$typeName)throw Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}(M=em||(em={}))[M.NULL_VALUE=0]="NULL_VALUE";let nN={ignoreUnknownFields:!1};function nT(e,t,n){let r=ta(e);try{nI(r,t,n?Object.assign(Object.assign({},nN),n):nN)}catch(e){if(e instanceof Error&&eq.includes(e.name)&&"field"in e&&"function"==typeof e.field)throw Error(`cannot decode ${e.field()} from JSON: ${e.message}`,{cause:e});throw e}return r.message}function nI(e,t,n){var r;if(function(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t,n){var r,i,a,s,o;if(null===t||Array.isArray(t)||"object"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${tt(t)}`);if(0==Object.keys(t).length)return;let l=t["@type"];if("string"!=typeof l||""==l)throw Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);let u=l.includes("/")?l.substring(l.lastIndexOf("/")+1):l;if(!u.length)throw Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);let c=null==(r=n.registry)?void 0:r.getMessage(u);if(!c)throw Error(`cannot decode message ${e.$typeName} from JSON: ${l} is not in the type registry`);let d=ta(c);if(u.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))nI(d,t.value,n);else{let e=Object.assign({},t);delete e["@type"],nI(d,e,n)}i=d.desc,a=d.message,(s=e)||(s=eW(nl)),s.value=nc(i,a),s.typeUrl=(o=a.$typeName,`type.googleapis.com/${o}`)}(e.message,t,n),!0;case"google.protobuf.Timestamp":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${tt(t)}`);let n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);let r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=ex.parse(r/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}(e.message,t),!0;case"google.protobuf.Duration":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${tt(t)}`);let n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===n)throw Error(`cannot decode message ${e.$typeName} from JSON: ${tt(t)}`);let r=Number(n[1]);if(r>315576e6||r<-315576e6)throw Error(`cannot decode message ${e.$typeName} from JSON: ${tt(t)}`);e.seconds=ex.parse(r),"string"!=typeof n[2]||(e.nanos=parseInt(n[2]+"0".repeat(9-n[2].length)),(r<0||Object.is(r,-0))&&(e.nanos=-e.nanos))}(e.message,t),!0;case"google.protobuf.FieldMask":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${tt(t)}`);""!==t&&(e.paths=t.split(",").map(function(t){if(t.includes("_"))throw Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);let n=t.replace(/[A-Z]/g,e=>"_"+e.toLowerCase());return"_"===n[0]?n.substring(1):n}))}(e.message,t),!0;case"google.protobuf.Struct":return nV(e.message,t),!0;case"google.protobuf.Value":return nD(e.message,t),!0;case"google.protobuf.ListValue":return nF(e.message,t),!0;default:if(eG(e.desc)){let n=e.desc.fields[0];return null===t?e.clear(n):e.set(n,nC(n,t,!0)),!0}return!1}}(e,t,n))return;if(null==t||Array.isArray(t)||"object"!=typeof t)throw Error(`cannot decode ${e.desc} from JSON: ${tt(t)}`);let i=new Map,a=new Map;for(let t of e.desc.fields)a.set(t.name,t).set(t.jsonName,t);for(let[s,o]of Object.entries(t)){let t=a.get(s);if(t){if(t.oneof){if(null===o&&"scalar"==t.fieldKind)continue;let e=i.get(t.oneof);if(void 0!==e)throw new eQ(t.oneof,`oneof set multiple times by ${e.name} and ${t.name}`);i.set(t.oneof,t)}nS(e,t,o,n)}else{let t;if(s.startsWith("[")&&s.endsWith("]")&&(t=null==(r=n.registry)?void 0:r.getExtension(s.substring(1,s.length-1)))&&t.extendee.typeName===e.desc.typeName){let[r,i,a]=nw(t);nS(r,i,o,n),function(e,t,n){var r;nA(t,e);let i=(null!=(r=e.$unknown)?r:[]).filter(e=>e.no!==t.number),[a,s]=nw(t,n),o=new e2;nf(o,{writeUnknownFields:!0},a,s);let l=new e3(o.finish());for(;l.pos<l.len;){let[e,t]=l.tag(),n=l.skip(t,e);i.push({no:e,wireType:t,data:n})}e.$unknown=i}(e.message,t,a())}if(!t&&!n.ignoreUnknownFields)throw Error(`cannot decode ${e.desc} from JSON: key "${s}" is unknown`)}}}function nS(e,t,n,r){var i,a,s,o,l,u;switch(t.fieldKind){case"scalar":let c;i=e,(c=nC(a=t,n,!1))===nk?i.clear(a):i.set(a,c);break;case"enum":let d;s=e,o=t,l=n,u=r,(d=nx(o.enum,l,u.ignoreUnknownFields,!1))===nk?s.clear(o):d!==nO&&s.set(o,d);break;case"message":!function(e,t,n,r){if(null===n&&"google.protobuf.Value"!=t.message.typeName)return e.clear(t);let i=e.isSet(t)?e.get(t):ta(t.message);nI(i,n,r),e.set(t,i)}(e,t,n,r);break;case"list":!function(e,t,n){if(null===t)return;let r=e.field();if(!Array.isArray(t))throw new eQ(r,"expected Array, got "+tt(t));for(let i of t){if(null===i&&!nR(r))throw new eQ(r,"list item must not be null");switch(r.listKind){case"message":let t=ta(r.message);nI(t,i,n),e.add(t);break;case"enum":let a=nx(r.enum,i,n.ignoreUnknownFields,!0);a!==nO&&e.add(a);break;case"scalar":e.add(nC(r,i,!0))}}}(e.get(t),n,r);break;case"map":!function(e,t,n){if(null===t)return;let r=e.field();if("object"!=typeof t||Array.isArray(t))throw new eQ(r,"expected object, got "+tt(t));for(let[i,a]of Object.entries(t)){let t;if(null===a&&!nR(r))throw new eQ(r,"map value must not be null");switch(r.mapKind){case"message":let s=ta(r.message);nI(s,a,n),t=s;break;case"enum":if((t=nx(r.enum,a,n.ignoreUnknownFields,!0))===nO)return;break;case"scalar":t=nC(r,a,!0)}let o=function(e,t){switch(e){case X.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case X.INT32:case X.FIXED32:case X.UINT32:case X.SFIXED32:case X.SINT32:return n_(t);default:return t}}(r.mapKey,i);e.set(o,t)}}(e.get(t),n,r)}}function nR(e){var t,n;return(null==(t=e.message)?void 0:t.typeName)=="google.protobuf.Value"||(null==(n=e.enum)?void 0:n.typeName)=="google.protobuf.NullValue"}let nO=Symbol();function nx(e,t,n,r){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:r?e.values[0].number:nk;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let i=e.values.find(e=>e.name===t);if(void 0!==i)return i.number;if(n)return nO}throw Error(`cannot decode ${e} from JSON: ${tt(t)}`)}let nk=Symbol();function nC(e,t,n){if(null===t)return n?e_(e.scalar,!1):nk;switch(e.scalar){case X.DOUBLE:case X.FLOAT:if("NaN"===t)return NaN;if("Infinity"===t)return 1/0;if("-Infinity"===t)return-1/0;if("number"==typeof t){if(Number.isNaN(t))throw new eQ(e,"unexpected NaN number");if(!Number.isFinite(t))throw new eQ(e,"unexpected infinite number");break}if("string"==typeof t){if(""===t||t.trim().length!==t.length)break;let e=Number(t);if(!Number.isFinite(e))break;return e}break;case X.INT32:case X.FIXED32:case X.SFIXED32:case X.SINT32:case X.UINT32:return n_(t);case X.BYTES:if("string"==typeof t){if(""===t)return new Uint8Array(0);try{return tK(t)}catch(t){throw new eQ(e,t instanceof Error?t.message:String(t))}}}return t}function n_(e){if("string"==typeof e){if(""===e||e.trim().length!==e.length)return e;let t=Number(e);return Number.isNaN(t)?e:t}return e}function nV(e,t){if("object"!=typeof t||null==t||Array.isArray(t))throw Error(`cannot decode message ${e.$typeName} from JSON ${tt(t)}`);for(let[n,r]of Object.entries(t)){let t=eW(nv);nD(t,r),e.fields[n]=t}}function nD(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(null===t)e.kind={case:"nullValue",value:em.NULL_VALUE};else if(Array.isArray(t)){let n=eW(nE);nF(n,t),e.kind={case:"listValue",value:n}}else{let n=eW(ny);nV(n,t),e.kind={case:"structValue",value:n}}break;default:throw Error(`cannot decode message ${e.$typeName} from JSON ${tt(t)}`)}return e}function nF(e,t){if(!Array.isArray(t))throw Error(`cannot decode message ${e.$typeName} from JSON ${tt(t)}`);for(let n of t){let t=eW(nv);nD(t,n),e.values.push(t)}}function nU(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}let nP={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function nL(e,t){var n,r;let i=function(e,t){if(e.desc.typeName.startsWith("google.protobuf."))switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t){let n,r;if(""===e.typeUrl)return{};let{registry:i}=t;if(i&&(n=function(e,t){var n,r;if(""===e.typeUrl)return;let i="message"==t.kind?t:t.getMessage(np(e.typeUrl));if(i&&(n=e,r=i,""!==n.typeUrl&&("string"==typeof r?r:r.typeName)===np(n.typeUrl)))return tw(i,e.value)}(e,i))&&(r=i.getMessage(n.$typeName)),!r||!n)throw Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let a=nL(ta(r,n),t);return(r.typeName.startsWith("google.protobuf.")||null===a||Array.isArray(a)||"object"!=typeof a)&&(a={value:a}),a["@type"]=e.typeUrl,a}(e.message,t);case"google.protobuf.Timestamp":return function(e){let t=1e3*Number(e.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);if(e.nanos>0x3b9ac9ff)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be greater than 99999999`);let n="Z";if(e.nanos>0){let t=(e.nanos+1e9).toString().substring(1);n="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(t).toISOString().replace(".000Z",n)}(e.message);case"google.protobuf.Duration":return function(e){let t=Number(e.seconds),n=e.nanos;if(t>315576e6||t<-315576e6)throw Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);if(t>0&&n<0||t<0&&n>0)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos sign must match seconds sign`);let r=e.seconds.toString();if(0!==n){let e=Math.abs(n).toString();"000000"===(e="0".repeat(9-e.length)+e).substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),r+="."+e,n<0&&0==t&&(r="-"+r)}return r+"s"}(e.message);case"google.protobuf.FieldMask":var n;return(n=e.message).paths.map(e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw Error(`cannot encode message ${n.$typeName} to JSON: lowerCamelCase of path name "`+e+'" is irreversible');return tZ(e)}).join(",");case"google.protobuf.Struct":return nG(e.message);case"google.protobuf.Value":return n$(e.message);case"google.protobuf.ListValue":return nW(e.message);default:if(eG(e.desc)){let t=e.desc.fields[0];return nj(t,e.get(t))}return}}(e,t);if(void 0!==i)return i;let a={};for(let n of e.sortedFields){if(!e.isSet(n)){if(3==n.presence)throw Error(`cannot encode ${n} to JSON: required field not set`);if(!t.alwaysEmitImplicit||2!==n.presence)continue}let i=nB(n,e.get(n),t);void 0!==i&&(a[r=n,t.useProtoFieldName?r.name:r.jsonName]=i)}if(t.registry){let r=new Set;for(let{no:i}of null!=(n=e.getUnknown())?n:[])if(!r.has(i)){r.add(i);let n=t.registry.getExtensionFor(e.desc,i);if(!n)continue;let s=function(e,t){nA(t,e);let n=function(e,t){if(void 0===e)return[];if("enum"===t.fieldKind||"scalar"===t.fieldKind){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(e=>e.no===t.number)}(e.$unknown,t),[r,i,a]=nw(t);for(let e of n)tN(r,new e3(e.data),i,e.wireType,{readUnknownFields:!0});return a()}(e.message,n),[o,l]=nw(n,s),u=nB(l,o.get(l),t);void 0!==u&&(a[n.jsonName]=u)}}return a}function nB(e,t,n){switch(e.fieldKind){case"scalar":return nj(e,t);case"message":return nL(t,n);case"enum":return nM(e.enum,t,n.enumAsInteger);case"list":var r=t,i=n;let a=r.field(),s=[];switch(a.listKind){case"scalar":for(let e of r)s.push(nj(a,e));break;case"enum":for(let e of r)s.push(nM(a.enum,e,i.enumAsInteger));break;case"message":for(let e of r)s.push(nL(e,i))}return i.alwaysEmitImplicit||s.length>0?s:void 0;case"map":var o=t,l=n;let u=o.field(),c={};switch(u.mapKind){case"scalar":for(let[e,t]of o)c[e]=nj(u,t);break;case"message":for(let[e,t]of o)c[e]=nL(t,l);break;case"enum":for(let[e,t]of o)c[e]=nM(u.enum,t,l.enumAsInteger)}return l.alwaysEmitImplicit||o.size>0?c:void 0}}function nM(e,t,n){var r;if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: expected number, got ${tt(t)}`);if("google.protobuf.NullValue"==e.typeName)return null;if(n)return t;let i=e.value[t];return null!=(r=null==i?void 0:i.name)?r:t}function nj(e,t){var n,r,i,a,s,o;switch(e.scalar){case X.INT32:case X.SFIXED32:case X.SINT32:case X.FIXED32:case X.UINT32:if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(n=e5(e,t))?void 0:n.message}`);return t;case X.FLOAT:case X.DOUBLE:if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(r=e5(e,t))?void 0:r.message}`);if(Number.isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";return t;case X.STRING:if("string"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(i=e5(e,t))?void 0:i.message}`);return t;case X.BOOL:if("boolean"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(a=e5(e,t))?void 0:a.message}`);return t;case X.UINT64:case X.FIXED64:case X.INT64:case X.SFIXED64:case X.SINT64:if("bigint"!=typeof t&&"string"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(s=e5(e,t))?void 0:s.message}`);return t.toString();case X.BYTES:if(t instanceof Uint8Array)return tY(t);throw Error(`cannot encode ${e} to JSON: ${null==(o=e5(e,t))?void 0:o.message}`)}}function nG(e){let t={};for(let[n,r]of Object.entries(e.fields))t[n]=n$(r);return t}function n$(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":case"stringValue":return e.kind.value;case"structValue":return nG(e.kind.value);case"listValue":return nW(e.kind.value);default:throw Error(`${e.$typeName} must have a value`)}}function nW(e){return e.values.map(n$)}function nK(e){let t=Object.assign({},e);return null!=t.ignoreUnknownFields||(t.ignoreUnknownFields=!0),t}function nY(e,t,n,r){let i=t?nX(e.input,r):nZ(e.input,n);return{parse:(t?nX(e.output,r):nZ(e.output,n)).parse,serialize:i.serialize}}function nX(e,t){return{parse(n){try{return tw(e,n,t)}catch(t){let e=t instanceof Error?t.message:String(t);throw new tR(`parse binary: ${e}`,Y.Internal)}},serialize(n){try{return nc(e,n,t)}catch(t){let e=t instanceof Error?t.message:String(t);throw new tR(`serialize binary: ${e}`,Y.Internal)}}}}function nZ(e,t){var n,r;let i=null!=(n=null==t?void 0:t.textEncoder)?n:new TextEncoder,a=null!=(r=null==t?void 0:t.textDecoder)?r:new TextDecoder,s=nK(t);return{parse(t){try{let n=a.decode(t);return nT(e,function(e,t){try{return JSON.parse(e)}catch(n){let e=n instanceof Error?n.message:String(n);throw Error(`cannot decode message ${t} from JSON: ${e}`,{cause:n})}}(n,e.typeName),s)}catch(e){throw tR.from(e,Y.InvalidArgument)}},serialize(t){try{var n;let r=JSON.stringify(nL(ta(e,t),s?Object.assign(Object.assign({},nP),s):nP),null,null!=(n=null==s?void 0:s.prettySpaces)?n:0);return i.encode(r)}catch(e){throw tR.from(e,Y.Internal)}}}}function nJ(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function nH(e,t){var n;return null!=(n=null==t?void 0:t.concat().reverse().reduce((e,t)=>t(e),e))?n:e}function nz(e){if(!e.aborted)return;if(void 0!==e.reason)return e.reason;let t=Error("This operation was aborted");return t.name="AbortError",t}function nq(e){var t;let n,r,i,{signal:a,cleanup:s}=(t=e.timeoutMs,r=new AbortController,i=()=>{r.abort(new tR("the operation timed out",Y.DeadlineExceeded))},void 0!==t&&(t<=0?i():n=setTimeout(i,t)),{signal:r.signal,cleanup:()=>clearTimeout(n)}),o=function(...e){let t=new AbortController,n=e.filter(e=>void 0!==e).concat(t.signal);for(let e of n){if(e.aborted){r.apply(e);break}e.addEventListener("abort",r)}function r(){for(let e of(t.signal.aborted||t.abort(nz(this)),n))e.removeEventListener("abort",r)}return t}(e.signal,a);return[o.signal,function(e){let t=tR.from(a.aborted?nz(a):e);return o.abort(t),s(),Promise.reject(t)},function(){s(),o.abort()}]}function nQ(e,n,r){var i;if(n&&new Headers(n).forEach((e,t)=>r.metadata.append(t,e)),"object"!=typeof e||null==e||Array.isArray(e))throw r;let a=r.code;"code"in e&&"string"==typeof e.code&&(a=null!=(i=function(e){if(!t)for(let e of(t={},Object.values(Y)))"string"!=typeof e&&(t[tS(e)]=e);return t[e]}(e.code))?i:a);let s=e.message;if(null!=s&&"string"!=typeof s)throw r;let o=new tR(null!=s?s:"",a,n);if("details"in e&&Array.isArray(e.details))for(let t of e.details){if(null===t||"object"!=typeof t||Array.isArray(t)||"string"!=typeof t.type||"string"!=typeof t.value)throw r;try{o.details.push({type:t.type,value:tK(t.value),debug:t.debug})}catch(e){throw r}}return o}let n0="Content-Type",n1="Content-Encoding",n2="Connect-Protocol-Version",n3="User-Agent",n9=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function n4(e,t,n,r,i){let a=new Headers(null!=r?r:{});return void 0!==n&&a.set("Connect-Timeout-Ms",`${n}`),a.set(n0,"unary"==e?t?"application/proto":"application/json":t?"application/connect+proto":"application/connect+json"),a.set(n2,"1"),!a.has(n3)&&i&&a.set(n3,"connect-es/2.0.0-rc.3"),a}function n5(e){let t=new Headers,n=new Headers;return e.forEach((e,r)=>{r.toLowerCase().startsWith("trailer-")?n.append(r.substring(8),e):t.append(r,e)}),[t,n]}let n6="application/";function n8(e,t,n,r){let i=r.get(n0),a=function(e){let t=null==e?void 0:e.match(n9);if(t)return{stream:!!t[1],binary:!!t[3]}}(i);if(200!==n){let t=new tR(`HTTP ${n}`,function(e){switch(e){case 400:return Y.Internal;case 401:return Y.Unauthenticated;case 403:return Y.PermissionDenied;case 404:return Y.Unimplemented;case 429:case 502:case 503:case 504:return Y.Unavailable;default:return Y.Unknown}}(n),r);if("unary"==e&&a&&!a.binary)return{isUnaryError:!0,unaryError:t};throw t}let s={binary:t,stream:"unary"!==e};if((null==a?void 0:a.binary)!==s.binary||a.stream!==s.stream)throw new tR(`unsupported content type ${i}`,void 0===a?Y.Unknown:Y.Internal,r);return{isUnaryError:!1}}var n7=function(e){return this instanceof n7?(this.v=e,this):new n7(e)},re=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof n7?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};let rt={redirect:"error"},rn=(e=0)=>t=>`\u001B[${t+e}m`,rr=(e=0)=>t=>`\u001B[${38+e};5;${t}m`,ri=(e=0)=>(t,n,r)=>`\u001B[${38+e};2;${t};${n};${r}m`,ra={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(ra.modifier),[...Object.keys(ra.color),...Object.keys(ra.bgColor)];let rs=function(){let e=new Map;for(let[t,n]of Object.entries(ra)){for(let[t,r]of Object.entries(n))ra[t]={open:`\u001B[${r[0]}m`,close:`\u001B[${r[1]}m`},n[t]=ra[t],e.set(r[0],r[1]);Object.defineProperty(ra,t,{value:n,enumerable:!1})}return Object.defineProperty(ra,"codes",{value:e,enumerable:!1}),ra.color.close="\x1b[39m",ra.bgColor.close="\x1b[49m",ra.color.ansi=rn(),ra.color.ansi256=rr(),ra.color.ansi16m=ri(),ra.bgColor.ansi=rn(10),ra.bgColor.ansi256=rr(10),ra.bgColor.ansi16m=ri(10),Object.defineProperties(ra,{rgbToAnsi256:{value:(e,t,n)=>e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5),enumerable:!1},hexToRgb:{value(e){let t=/[a-f\d]{6}|[a-f\d]{3}/i.exec(e.toString(16));if(!t)return[0,0,0];let[n]=t;3===n.length&&(n=[...n].map(e=>e+e).join(""));let r=Number.parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},enumerable:!1},hexToAnsi256:{value:e=>ra.rgbToAnsi256(...ra.hexToRgb(e)),enumerable:!1},ansi256ToAnsi:{value(e){let t,n,r;if(e<8)return 30+e;if(e<16)return 90+(e-8);if(e>=232)n=t=((e-232)*10+8)/255,r=t;else{let i=(e-=16)%36;t=Math.floor(e/36)/5,n=Math.floor(i/6)/5,r=i%6/5}let i=2*Math.max(t,n,r);if(0===i)return 30;let a=30+(Math.round(r)<<2|Math.round(n)<<1|Math.round(t));return 2===i&&(a+=60),a},enumerable:!1},rgbToAnsi:{value:(e,t,n)=>ra.ansi256ToAnsi(ra.rgbToAnsi256(e,t,n)),enumerable:!1},hexToAnsi:{value:e=>ra.ansi256ToAnsi(ra.hexToAnsi256(e)),enumerable:!1}}),ra}();var ro=e.i(59639),rl=e.i(660526),ru=e.i(509656);function rc(e,t=globalThis.Deno?globalThis.Deno.args:ro.default.argv){let n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return -1!==r&&(-1===i||r<i)}let{env:rd}=ro.default;function rf(e,t={}){var n;return 0!==(n=function(e,{streamIsTTY:t,sniffFlags:n=!0}={}){let r=function(){if("FORCE_COLOR"in rd)return"true"===rd.FORCE_COLOR?1:"false"===rd.FORCE_COLOR?0:0===rd.FORCE_COLOR.length?1:Math.min(Number.parseInt(rd.FORCE_COLOR,10),3)}();void 0!==r&&(a=r);let i=n?a:r;if(0===i)return 0;if(n){if(rc("color=16m")||rc("color=full")||rc("color=truecolor"))return 3;if(rc("color=256"))return 2}if("TF_BUILD"in rd&&"AGENT_NAME"in rd)return 1;if(e&&!t&&void 0===i)return 0;let s=i||0;if("dumb"===rd.TERM)return s;if("win32"===ro.default.platform){let e=rl.default.release().split(".");return Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in rd)return["GITHUB_ACTIONS","GITEA_ACTIONS","CIRCLECI"].some(e=>e in rd)?3:["TRAVIS","APPVEYOR","GITLAB_CI","BUILDKITE","DRONE"].some(e=>e in rd)||"codeship"===rd.CI_NAME?1:s;if("TEAMCITY_VERSION"in rd)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(rd.TEAMCITY_VERSION);if("truecolor"===rd.COLORTERM||"xterm-kitty"===rd.TERM||"xterm-ghostty"===rd.TERM||"wezterm"===rd.TERM)return 3;if("TERM_PROGRAM"in rd){let e=Number.parseInt((rd.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(rd.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(rd.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(rd.TERM)||"COLORTERM"in rd?1:s}(e,{streamIsTTY:e&&e.isTTY,...t}))&&{level:n,hasBasic:!0,has256:n>=2,has16m:n>=3}}rc("no-color")||rc("no-colors")||rc("color=false")||rc("color=never")?a=0:(rc("color")||rc("colors")||rc("color=true")||rc("color=always"))&&(a=1);let{stdout:rg,stderr:rh}={stdout:rf({isTTY:ru.default.isatty(1)}),stderr:rf({isTTY:ru.default.isatty(2)})},rm=Symbol("GENERATOR"),rp=Symbol("STYLER"),rb=Symbol("IS_EMPTY"),ry=["ansi","ansi","ansi256","ansi16m"],rv=Object.create(null);function rE(e){let t;return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let n=rg?rg.level:0;e.level=void 0===t.level?n:t.level})(t=(...e)=>e.join(" "),e),Object.setPrototypeOf(t,rE.prototype),t}for(let[e,t]of(Object.setPrototypeOf(rE.prototype,Function.prototype),Object.entries(rs)))rv[e]={get(){let n=rT(this,rN(t.open,t.close,this[rp]),this[rb]);return Object.defineProperty(this,e,{value:n}),n}};rv.visible={get(){let e=rT(this,this[rp],!0);return Object.defineProperty(this,"visible",{value:e}),e}};let rw=(e,t,n,...r)=>"rgb"===e?"ansi16m"===t?rs[n].ansi16m(...r):"ansi256"===t?rs[n].ansi256(rs.rgbToAnsi256(...r)):rs[n].ansi(rs.rgbToAnsi(...r)):"hex"===e?rw("rgb",t,n,...rs.hexToRgb(...r)):rs[n][e](...r);for(let e of["rgb","hex","ansi256"])rv[e]={get(){let{level:t}=this;return function(...n){return rT(this,rN(rw(e,ry[t],"color",...n),rs.color.close,this[rp]),this[rb])}}},rv["bg"+e[0].toUpperCase()+e.slice(1)]={get(){let{level:t}=this;return function(...n){return rT(this,rN(rw(e,ry[t],"bgColor",...n),rs.bgColor.close,this[rp]),this[rb])}}};let rA=Object.defineProperties(()=>{},{...rv,level:{enumerable:!0,get(){return this[rm].level},set(e){this[rm].level=e}}}),rN=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},rT=(e,t,n)=>{let r=(...e)=>rI(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,rA),r[rm]=e,r[rp]=t,r[rb]=n,r},rI=(e,t)=>{if(e.level<=0||!t)return e[rb]?"":t;let n=e[rp];if(void 0===n)return t;let{openAll:r,closeAll:i}=n;if(t.includes("\x1b"))for(;void 0!==n;)t=function(e,t,n){let r=e.indexOf(t);if(-1===r)return e;let i=t.length,a=0,s="";do s+=e.slice(a,r)+t+n,a=r+i,r=e.indexOf(t,a);while(-1!==r)return s+e.slice(a)}(t,n.close,n.open),n=n.parent;let a=t.indexOf("\n");return -1!==a&&(t=function(e,t,n,r){let i=0,a="";do{let s="\r"===e[r-1];a+=e.slice(i,s?r-1:r)+t+(s?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r)return a+e.slice(i)}(t,i,r,a)),r+t+i};Object.defineProperties(rE.prototype,rv);let rS=rE();rE({level:rh?rh.level:0});var rR=e.i(666680),rO=e.i(902157),rx=e.i(750227),rk=e.i(242619),rC=Object.defineProperty,r_=Object.defineProperties,rV=Object.getOwnPropertyDescriptors,rD=Object.getOwnPropertySymbols,rF=Object.prototype.hasOwnProperty,rU=Object.prototype.propertyIsEnumerable,rP=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),rL=(e,t,n)=>t in e?rC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rB=(e,t)=>{for(var n in t||(t={}))rF.call(t,n)&&rL(e,n,t[n]);if(rD)for(var n of rD(t))rU.call(t,n)&&rL(e,n,t[n]);return e},rM=e.z,rj=function(e,t){this[0]=e,this[1]=t},rG=(e,t,n)=>{var r=(e,t,i,a)=>{try{var s=n[e](t),o=(t=s.value)instanceof rj,l=s.done;Promise.resolve(o?t[0]:t).then(n=>o?r("return"===e?e:"next",t[1]?{done:n.done,value:n.value}:n,i,a):i({value:n,done:l})).catch(e=>r("throw",e,i,a))}catch(e){a(e)}},i=e=>a[e]=t=>new Promise((n,i)=>r(e,t,n,i)),a={};return n=n.apply(e,t),a[rP("asyncIterator")]=()=>a,i("next"),i("throw"),i("return"),a},r$=(e,t,n)=>(t=e[rP("asyncIterator")])?t.call(e):(e=e[rP("iterator")](),t={},(n=(n,r)=>(r=e[n])&&(t[n]=t=>new Promise((n,i,a)=>(a=(t=r.call(e,t)).done,Promise.resolve(t.value).then(e=>n({value:e,done:a}),i)))))("next"),n("return"),t),rW="2.9.0",{runtime:rK,version:rY}=globalThis.Bun?{runtime:"bun",version:globalThis.Bun.version}:globalThis.Deno?{runtime:"deno",version:globalThis.Deno.version.deno}:(null==(G=null==(j=globalThis.process)?void 0:j.release)?void 0:G.name)==="node"?{runtime:"node",version:ey.default.version||"unknown"}:"string"==typeof EdgeRuntime?{runtime:"vercel-edge",version:"unknown"}:(null==($=globalThis.navigator)?void 0:$.userAgent)==="Cloudflare-Workers"?{runtime:"cloudflare-worker",version:"unknown"}:{runtime:"unknown",version:"unknown"};async function rX(e){if("undefined"!=typeof crypto){let t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.digest("SHA-256",t))))}let{createHash:t}=rM("node:crypto");return t("sha256").update(e,"utf8").digest().toString("base64")}function rZ(e){return Math.ceil(e/1e3)}async function rJ(e){if("browser"===rK)throw Error("Browser runtime is not supported for dynamic import");return await Promise.resolve().then(()=>{let e=Error("Cannot find module as expression is too dynamic");throw e.code="MODULE_NOT_FOUND",e})}function rH(e){return e.replace(function({onlyFirst:e=!1}={}){let t=`(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))`;return RegExp(`${t}|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]`,e?void 0:"g")}(),"")}var rz={browser:"unknown",lang:"js",lang_version:rY,package_version:rW,publisher:"e2b",sdk_runtime:rK,system:(null==(ep=ey.default.os)?void 0:ep.family)||"unknown"};function rq(e){return"deno"===rK?Deno.env.get(e):"undefined"==typeof process?"":process.env[e]}function rQ(e){return new r1(`${e}: This error is likely due to sandbox timeout. You can modify the sandbox timeout by passing 'timeoutMs' when starting the sandbox or calling '.setTimeout' on the sandbox with the desired timeout.`)}var r0=class extends Error{constructor(e,t){super(e),this.name="SandboxError",t&&(this.stack=t)}},r1=class extends r0{constructor(e,t){super(e,t),this.name="TimeoutError"}},r2=class extends r0{constructor(e,t){super(e,t),this.name="InvalidArgumentError"}},r3=class extends r0{constructor(e,t){super(e,t),this.name="NotEnoughSpaceError"}},r9=class extends r0{constructor(e,t){super(e,t),this.name="NotFoundError"}},r4=class extends Error{constructor(e){super(e),this.name="AuthenticationError"}},r5=class extends r0{constructor(e,t){super(e,t),this.name="TemplateError"}},r6=class extends r0{constructor(e){super(e),this.name="RateLimitError"}},r8=class extends Error{constructor(e,t){super(e),this.name="BuildError",t&&(this.stack=t)}},r7=class extends r8{constructor(e,t){super(e,t),this.name="FileUploadError"}};function ie(e){return JSON.parse(JSON.stringify(e))}function it(e){return{async onRequest({request:t}){var n;return null==(n=e.info)||n.call(e,`Request ${t.method} ${t.url}`),t},async onResponse({response:t}){var n,r;return t.status>=400?null==(n=e.error)||n.call(e,"Response:",t.status,t.statusText):null==(r=e.info)||r.call(e,"Response:",t.status,t.statusText),t}}}function ir(e,t=r0,n){var r,i,a,s,o,l;if(!e.error)return;if(401===e.response.status){let t="Unauthorized, please check your credentials.",n=null!=(i=null==(r=e.error)?void 0:r.message)?i:e.error;return new r4(n?`${t} - ${n}`:t)}if(429===e.response.status){let t="Rate limit exceeded, please try again later",n=null!=(s=null==(a=e.error)?void 0:a.message)?s:e.error;return new r6(n?`${t} - ${n}`:t)}let u=null!=(l=null==(o=e.error)?void 0:o.message)?l:e.error;return new t(`${e.response.status}: ${u}`,n)}var ii=class{constructor(e,t={requireAccessToken:!1,requireApiKey:!1}){if((null==t?void 0:t.requireApiKey)&&!e.apiKey)throw new r4("API key is required, please visit the Team tab at https://e2b.dev/dashboard to get your API key. You can either set the environment variable `E2B_API_KEY` or you can pass it directly to the sandbox like Sandbox.create({ apiKey: 'e2b_...' })");if((null==t?void 0:t.requireAccessToken)&&!e.accessToken)throw new r4("Access token is required, please visit the Personal tab at https://e2b.dev/dashboard to get your access token. You can set the environment variable `E2B_ACCESS_TOKEN` or pass the `accessToken` in options.");this.api=l({baseUrl:e.apiUrl,headers:rB(rB(rB(rB({},rz),e.apiKey&&{"X-API-KEY":e.apiKey}),e.accessToken&&{Authorization:`Bearer ${e.accessToken}`}),e.headers),querySerializer:{array:{style:"form",explode:!1}}}),e.logger&&this.api.use(it(e.logger))}},ia="Keepalive-Ping-Interval",is=class e{constructor(t){var n;this.apiKey=(null==t?void 0:t.apiKey)||e.apiKey,this.debug=(null==t?void 0:t.debug)||e.debug,this.domain=(null==t?void 0:t.domain)||e.domain,this.accessToken=(null==t?void 0:t.accessToken)||e.accessToken,this.requestTimeoutMs=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:6e4,this.logger=null==t?void 0:t.logger,this.headers=(null==t?void 0:t.headers)||{},this.headers["User-Agent"]=`e2b-js-sdk/${rW}`,this.apiUrl=(null==t?void 0:t.apiUrl)||e.apiUrl||(this.debug?"http://localhost:3000":`https://api.${this.domain}`),this.sandboxUrl=(null==t?void 0:t.sandboxUrl)||e.sandboxUrl}static get domain(){return rq("E2B_DOMAIN")||"e2b.app"}static get apiUrl(){return rq("E2B_API_URL")}static get sandboxUrl(){return rq("E2B_SANDBOX_URL")}static get debug(){return"true"===(rq("E2B_DEBUG")||"false").toLowerCase()}static get apiKey(){return rq("E2B_API_KEY")}static get accessToken(){return rq("E2B_ACCESS_TOKEN")}getSignal(e){let t=null!=e?e:this.requestTimeoutMs;return t?AbortSignal.timeout(t):void 0}getSandboxUrl(e,t){return this.sandboxUrl?this.sandboxUrl:`${this.debug?"http":"https"}://${this.getHost(e,t.envdPort,t.sandboxDomain)}`}getHost(e,t,n){return this.debug?`localhost:${t}`:`${t}-${e}.${null!=n?n:this.domain}`}};is.envdPort=49983;var io="user";async function il({path:e,operation:t,user:n,expirationInSeconds:r,envdAccessToken:i}){let a;if(!i)throw Error("Access token is not set and signature cannot be generated!");let s=r?Math.floor(Date.now()/1e3)+r:null;return void 0==n&&(n=""),a=null===s?`${e}:${t}:${n}:${i}`:`${e}:${t}:${n}:${i}:${s.toString()}`,{signature:"v1_"+(await rX(a)).replace(/=+$/,""),expiration:s}}async function iu(e){var t;if(!e.error)return;let n="string"==typeof e.error?e.error:(null==(t=e.error)?void 0:t.message)||await e.response.text();switch(e.response.status){case 400:return new r2(n);case 401:return new r4(n);case 404:return new r9(n);case 429:return new r0(`${e.response.status}: ${n}: The requests are being rate limited.`);case 502:return rQ(n);case 507:return new r3(n);default:return new r0(`${e.response.status}: ${n}`)}}async function ic(e){var t;let n;try{n=(await e[Symbol.asyncIterator]().next()).value}catch(e){if(e instanceof tR&&e.code===Y.Unavailable)throw new r9("Sandbox is probably not running anymore");throw e}if((null==(t=n.event)?void 0:t.event.case)!=="start")throw Error("Expected start event");return n.event.event.value.pid}async function id(e){var t;let n;try{n=(await e[Symbol.asyncIterator]().next()).value}catch(e){if(e instanceof tR&&e.code===Y.Unavailable)throw new r9("Sandbox is probably not running anymore");throw e}if((null==(t=n.event)?void 0:t.case)!=="start")throw Error("Expected start event");return n.event.value}var ig=class{constructor(e,t){this.api=l({baseUrl:e.apiUrl,fetch:null==e?void 0:e.fetch,headers:null==e?void 0:e.headers}),this.version=t.version,e.logger&&this.api.use(it(e.logger))}},ih="99.99.99",im="0.4.0";function ip(e){if(e instanceof tR)switch(e.code){case Y.InvalidArgument:return new r2(e.message);case Y.Unauthenticated:return new r4(e.message);case Y.NotFound:return new r9(e.message);case Y.Unavailable:return rQ(e.message);case Y.Canceled:return new r1(`${e.message}: This error is likely due to exceeding 'requestTimeoutMs'. You can pass the request timeout value as an option when making the request.`);case Y.DeadlineExceeded:return new r1(`${e.message}: This error is likely due to exceeding 'timeoutMs' \u2014 the total time a long running request (like command execution or directory watch) can be active. It can be modified by passing 'timeoutMs' when making the request. Use '0' to disable the timeout.`);default:return new r0(`${e.code}: ${e.message}`)}return e}function ib(e,t){if(void 0==t&&0>tW(e,im)&&(t=io),!t)return{};let n=function(e){switch(rK){case"deno":default:return btoa(e);case"node":case"bun":return Buffer.from(e).toString("base64")}}(`${t}:`);return{Authorization:`Basic ${n}`}}var iy=ns(na("ChtmaWxlc3lzdGVtL2ZpbGVzeXN0ZW0ucHJvdG8SCmZpbGVzeXN0ZW0iMgoLTW92ZVJlcXVlc3QSDgoGc291cmNlGAEgASgJEhMKC2Rlc3RpbmF0aW9uGAIgASgJIjQKDE1vdmVSZXNwb25zZRIkCgVlbnRyeRgBIAEoCzIVLmZpbGVzeXN0ZW0uRW50cnlJbmZvIh4KDk1ha2VEaXJSZXF1ZXN0EgwKBHBhdGgYASABKAkiNwoPTWFrZURpclJlc3BvbnNlEiQKBWVudHJ5GAEgASgLMhUuZmlsZXN5c3RlbS5FbnRyeUluZm8iHQoNUmVtb3ZlUmVxdWVzdBIMCgRwYXRoGAEgASgJIhAKDlJlbW92ZVJlc3BvbnNlIhsKC1N0YXRSZXF1ZXN0EgwKBHBhdGgYASABKAkiNAoMU3RhdFJlc3BvbnNlEiQKBWVudHJ5GAEgASgLMhUuZmlsZXN5c3RlbS5FbnRyeUluZm8i/QEKCUVudHJ5SW5mbxIMCgRuYW1lGAEgASgJEiIKBHR5cGUYAiABKA4yFC5maWxlc3lzdGVtLkZpbGVUeXBlEgwKBHBhdGgYAyABKAkSDAoEc2l6ZRgEIAEoAxIMCgRtb2RlGAUgASgNEhMKC3Blcm1pc3Npb25zGAYgASgJEg0KBW93bmVyGAcgASgJEg0KBWdyb3VwGAggASgJEjEKDW1vZGlmaWVkX3RpbWUYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEhsKDnN5bWxpbmtfdGFyZ2V0GAogASgJSACIAQFCEQoPX3N5bWxpbmtfdGFyZ2V0Ii0KDkxpc3REaXJSZXF1ZXN0EgwKBHBhdGgYASABKAkSDQoFZGVwdGgYAiABKA0iOQoPTGlzdERpclJlc3BvbnNlEiYKB2VudHJpZXMYASADKAsyFS5maWxlc3lzdGVtLkVudHJ5SW5mbyIyCg9XYXRjaERpclJlcXVlc3QSDAoEcGF0aBgBIAEoCRIRCglyZWN1cnNpdmUYAiABKAgiRAoPRmlsZXN5c3RlbUV2ZW50EgwKBG5hbWUYASABKAkSIwoEdHlwZRgCIAEoDjIVLmZpbGVzeXN0ZW0uRXZlbnRUeXBlIuABChBXYXRjaERpclJlc3BvbnNlEjgKBXN0YXJ0GAEgASgLMicuZmlsZXN5c3RlbS5XYXRjaERpclJlc3BvbnNlLlN0YXJ0RXZlbnRIABIxCgpmaWxlc3lzdGVtGAIgASgLMhsuZmlsZXN5c3RlbS5GaWxlc3lzdGVtRXZlbnRIABI7CglrZWVwYWxpdmUYAyABKAsyJi5maWxlc3lzdGVtLldhdGNoRGlyUmVzcG9uc2UuS2VlcEFsaXZlSAAaDAoKU3RhcnRFdmVudBoLCglLZWVwQWxpdmVCBwoFZXZlbnQiNwoUQ3JlYXRlV2F0Y2hlclJlcXVlc3QSDAoEcGF0aBgBIAEoCRIRCglyZWN1cnNpdmUYAiABKAgiKwoVQ3JlYXRlV2F0Y2hlclJlc3BvbnNlEhIKCndhdGNoZXJfaWQYASABKAkiLQoXR2V0V2F0Y2hlckV2ZW50c1JlcXVlc3QSEgoKd2F0Y2hlcl9pZBgBIAEoCSJHChhHZXRXYXRjaGVyRXZlbnRzUmVzcG9uc2USKwoGZXZlbnRzGAEgAygLMhsuZmlsZXN5c3RlbS5GaWxlc3lzdGVtRXZlbnQiKgoUUmVtb3ZlV2F0Y2hlclJlcXVlc3QSEgoKd2F0Y2hlcl9pZBgBIAEoCSIXChVSZW1vdmVXYXRjaGVyUmVzcG9uc2UqUgoIRmlsZVR5cGUSGQoVRklMRV9UWVBFX1VOU1BFQ0lGSUVEEAASEgoORklMRV9UWVBFX0ZJTEUQARIXChNGSUxFX1RZUEVfRElSRUNUT1JZEAIqmAEKCUV2ZW50VHlwZRIaChZFVkVOVF9UWVBFX1VOU1BFQ0lGSUVEEAASFQoRRVZFTlRfVFlQRV9DUkVBVEUQARIUChBFVkVOVF9UWVBFX1dSSVRFEAISFQoRRVZFTlRfVFlQRV9SRU1PVkUQAxIVChFFVkVOVF9UWVBFX1JFTkFNRRAEEhQKEEVWRU5UX1RZUEVfQ0hNT0QQBTKfBQoKRmlsZXN5c3RlbRI5CgRTdGF0EhcuZmlsZXN5c3RlbS5TdGF0UmVxdWVzdBoYLmZpbGVzeXN0ZW0uU3RhdFJlc3BvbnNlEkIKB01ha2VEaXISGi5maWxlc3lzdGVtLk1ha2VEaXJSZXF1ZXN0GhsuZmlsZXN5c3RlbS5NYWtlRGlyUmVzcG9uc2USOQoETW92ZRIXLmZpbGVzeXN0ZW0uTW92ZVJlcXVlc3QaGC5maWxlc3lzdGVtLk1vdmVSZXNwb25zZRJCCgdMaXN0RGlyEhouZmlsZXN5c3RlbS5MaXN0RGlyUmVxdWVzdBobLmZpbGVzeXN0ZW0uTGlzdERpclJlc3BvbnNlEj8KBlJlbW92ZRIZLmZpbGVzeXN0ZW0uUmVtb3ZlUmVxdWVzdBoaLmZpbGVzeXN0ZW0uUmVtb3ZlUmVzcG9uc2USRwoIV2F0Y2hEaXISGy5maWxlc3lzdGVtLldhdGNoRGlyUmVxdWVzdBocLmZpbGVzeXN0ZW0uV2F0Y2hEaXJSZXNwb25zZTABElQKDUNyZWF0ZVdhdGNoZXISIC5maWxlc3lzdGVtLkNyZWF0ZVdhdGNoZXJSZXF1ZXN0GiEuZmlsZXN5c3RlbS5DcmVhdGVXYXRjaGVyUmVzcG9uc2USXQoQR2V0V2F0Y2hlckV2ZW50cxIjLmZpbGVzeXN0ZW0uR2V0V2F0Y2hlckV2ZW50c1JlcXVlc3QaJC5maWxlc3lzdGVtLkdldFdhdGNoZXJFdmVudHNSZXNwb25zZRJUCg1SZW1vdmVXYXRjaGVyEiAuZmlsZXN5c3RlbS5SZW1vdmVXYXRjaGVyUmVxdWVzdBohLmZpbGVzeXN0ZW0uUmVtb3ZlV2F0Y2hlclJlc3BvbnNlQmkKDmNvbS5maWxlc3lzdGVtQg9GaWxlc3lzdGVtUHJvdG9QAaICA0ZYWKoCCkZpbGVzeXN0ZW3KAgpGaWxlc3lzdGVt4gIWRmlsZXN5c3RlbVxHUEJNZXRhZGF0YeoCCkZpbGVzeXN0ZW1iBnByb3RvMw",[no]),0),iv=((W=iv||{}).CHMOD="chmod",W.CREATE="create",W.REMOVE="remove",W.RENAME="rename",W.WRITE="write",W),iE=class{constructor(e,t,n,r){this.handleStop=e,this.events=t,this.onEvent=n,this.onExit=r,this.handleEvents()}async stop(){this.handleStop()}iterateEvents(){return rG(this,null,function*(){try{try{for(var e,t,n,r=r$(this.events);e=!(t=yield new rj(r.next())).done;e=!1){let e=t.value;"filesystem"===e.event.case&&(yield e.event)}}catch(e){n=[e]}finally{try{e&&(t=r.return)&&(yield new rj(t.call(r)))}finally{if(n)throw n[0]}}}catch(e){throw ip(e)}})}async handleEvents(){var e,t,n;try{try{for(var r,i,a,s=r$(this.iterateEvents());r=!(i=await s.next()).done;r=!1){let t=i.value,n=function(e){switch(e){case 5:return"chmod";case 1:return"create";case 3:return"remove";case 4:return"rename";case 2:return"write"}}(t.value.type);void 0!==n&&(null==(e=this.onEvent)||e.call(this,{name:t.value.name,type:n}))}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&await i.call(s)}finally{if(a)throw a[0]}}null==(t=this.onExit)||t.call(this)}catch(e){null==(n=this.onExit)||n.call(this,e)}}},iw=((K=iw||{}).FILE="file",K.DIR="dir",K);function iA(e){switch(e){case 2:return"dir";case 1:return"file"}}function iN(e){if(e)return new Date(1e3*Number(e.seconds)+Math.floor(e.nanos/1e6))}var iT=class{constructor(e,t,n){this.envdApi=t,this.connectionConfig=n,this.defaultWatchTimeout=6e4,this.defaultWatchRecursive=!1,this.rpc=tU(iy,e)}async read(e,t){var n;let r=null!=(n=null==t?void 0:t.format)?n:"text",i=null==t?void 0:t.user;void 0==i&&0>tW(this.envdApi.version,im)&&(i=io);let a=await this.envdApi.api.GET("/files",{params:{query:{path:e,username:i}},parseAs:"bytes"===r?"arrayBuffer":r,signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),s=await iu(a);if(s)throw s;return"bytes"===r?new Uint8Array(a.data):"0"===a.response.headers.get("content-length")?"":a.data}async write(e,t,n){if("string"!=typeof e&&!Array.isArray(e))throw Error("Path or files are required");if("string"==typeof e&&Array.isArray(t))throw Error("Cannot specify both path and array of files. You have to specify either path and data for a single file or an array for multiple files.");let{path:r,writeOpts:i,writeFiles:a}="string"==typeof e?{path:e,writeOpts:n,writeFiles:[{data:t}]}:{path:void 0,writeOpts:t,writeFiles:e};if(0===a.length)return[];let s=await Promise.all(a.map(e=>new Response(e.data).blob())),o=null==i?void 0:i.user;void 0==o&&0>tW(this.envdApi.version,im)&&(o=io);let l=await this.envdApi.api.POST("/files",{params:{query:{path:r,username:o}},bodySerializer:()=>s.reduce((e,t,n)=>(e.append("file",t,a[n].path),e),new FormData),signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs),body:{}}),u=await iu(l);if(u)throw u;let c=l.data;if(!c)throw Error("Expected to receive information about written file");return 1===c.length&&r?c[0]:c}async list(e,t){var n;if("number"==typeof(null==t?void 0:t.depth)&&t.depth<1)throw new r2("depth should be at least one");try{let r=await this.rpc.listDir({path:e,depth:null!=(n=null==t?void 0:t.depth)?n:1},{headers:ib(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),i=[];for(let e of r.entries){let t=iA(e.type);t&&i.push({name:e.name,type:t,path:e.path,size:Number(e.size),mode:e.mode,permissions:e.permissions,owner:e.owner,group:e.group,modifiedTime:iN(e.modifiedTime),symlinkTarget:e.symlinkTarget})}return i}catch(e){throw ip(e)}}async makeDir(e,t){try{return await this.rpc.makeDir({path:e},{headers:ib(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tR&&e.code===Y.AlreadyExists)return!1;throw ip(e)}}async rename(e,t,n){try{let r=(await this.rpc.move({source:e,destination:t},{headers:ib(this.envdApi.version,null==n?void 0:n.user),signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})).entry;if(!r)throw Error("Expected to receive information about moved object");return{name:r.name,type:iA(r.type),path:r.path,size:Number(r.size),mode:r.mode,permissions:r.permissions,owner:r.owner,group:r.group,modifiedTime:iN(r.modifiedTime),symlinkTarget:r.symlinkTarget}}catch(e){throw ip(e)}}async remove(e,t){try{await this.rpc.remove({path:e},{headers:ib(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)})}catch(e){throw ip(e)}}async exists(e,t){try{return await this.rpc.stat({path:e},{headers:ib(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tR&&e.code===Y.NotFound)return!1;throw ip(e)}}async getInfo(e,t){try{let n=await this.rpc.stat({path:e},{headers:ib(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)});if(!n.entry)throw Error("Expected to receive information about the file or directory");return{name:n.entry.name,type:iA(n.entry.type),path:n.entry.path,size:Number(n.entry.size),mode:n.entry.mode,permissions:n.entry.permissions,owner:n.entry.owner,group:n.entry.group,modifiedTime:iN(n.entry.modifiedTime),symlinkTarget:n.entry.symlinkTarget}}catch(e){throw ip(e)}}async watchDir(e,t,n){var r,i,a;if((null==n?void 0:n.recursive)&&this.envdApi.version&&0>tW(this.envdApi.version,"0.1.4"))throw new r5("You need to update the template to use recursive watching. You can do this by running `e2b template build` in the directory with the template.");let s=null!=(r=null==n?void 0:n.requestTimeoutMs)?r:this.connectionConfig.requestTimeoutMs,o=new AbortController,l=s?setTimeout(()=>{o.abort()},s):void 0,u=this.rpc.watchDir({path:e,recursive:null!=(i=null==n?void 0:n.recursive)?i:this.defaultWatchRecursive},{headers:r_(rB({},ib(this.envdApi.version,null==n?void 0:n.user)),rV({[ia]:"50"})),signal:o.signal,timeoutMs:null!=(a=null==n?void 0:n.timeoutMs)?a:this.defaultWatchTimeout});try{return await id(u),clearTimeout(l),new iE(()=>o.abort(),u,t,null==n?void 0:n.onExit)}catch(e){throw ip(e)}}},iI=class extends r0{constructor(e){super(e.error),this.result=e,this.name="CommandExitError"}get exitCode(){return this.result.exitCode}get error(){return this.result.error}get stdout(){return this.result.stdout}get stderr(){return this.result.stderr}},iS=class{constructor(e,t,n,r,i,a,s){this.pid=e,this.handleDisconnect=t,this.handleKill=n,this.events=r,this.onStdout=i,this.onStderr=a,this.onPty=s,this._stdout="",this._stderr="",this._wait=this.handleEvents()}get exitCode(){var e;return null==(e=this.result)?void 0:e.exitCode}get error(){var e;return null==(e=this.result)?void 0:e.error}get stderr(){return this._stderr}get stdout(){return this._stdout}async wait(){if(await this._wait,this.iterationError)throw this.iterationError;if(!this.result)throw new r0("Process exited without a result");if(0!==this.result.exitCode)throw new iI(this.result);return this.result}async disconnect(){this.handleDisconnect()}async kill(){return await this.handleKill()}iterateEvents(){return rG(this,null,function*(){var e;try{for(var t,n,r,i=r$(this.events);t=!(n=yield new rj(i.next())).done;t=!1){let t,r=n.value,i=null==(e=null==r?void 0:r.event)?void 0:e.event;switch(null==i?void 0:i.case){case"data":switch(i.value.output.case){case"stdout":t=new TextDecoder().decode(i.value.output.value),this._stdout+=t,yield[t,null,null];break;case"stderr":t=new TextDecoder().decode(i.value.output.value),this._stderr+=t,yield[null,t,null];break;case"pty":yield[null,null,i.value.output.value]}break;case"end":this.result={exitCode:i.value.exitCode,error:i.value.error,stdout:this.stdout,stderr:this.stderr}}}}catch(e){r=[e]}finally{try{t&&(n=i.return)&&(yield new rj(n.call(i)))}finally{if(r)throw r[0]}}})}async handleEvents(){var e,t,n;try{try{for(var r,i,a,s=r$(this.iterateEvents());r=!(i=await s.next()).done;r=!1){let[r,a,s]=i.value;null!==r?null==(e=this.onStdout)||e.call(this,r):null!==a?null==(t=this.onStderr)||t.call(this,a):s&&(null==(n=this.onPty)||n.call(this,s))}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&await i.call(s)}finally{if(a)throw a[0]}}}catch(e){this.iterationError=ip(e)}}},iR="0.0.0.0/0",iO=ns(na("ChVwcm9jZXNzL3Byb2Nlc3MucHJvdG8SB3Byb2Nlc3MiSgoDUFRZEh8KBHNpemUYASABKAsyES5wcm9jZXNzLlBUWS5TaXplGiIKBFNpemUSDAoEY29scxgBIAEoDRIMCgRyb3dzGAIgASgNIqEBCg1Qcm9jZXNzQ29uZmlnEgsKA2NtZBgBIAEoCRIMCgRhcmdzGAIgAygJEi4KBGVudnMYAyADKAsyIC5wcm9jZXNzLlByb2Nlc3NDb25maWcuRW52c0VudHJ5EhAKA2N3ZBgEIAEoCUgAiAEBGisKCUVudnNFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBQgYKBF9jd2QiDQoLTGlzdFJlcXVlc3QiXAoLUHJvY2Vzc0luZm8SJgoGY29uZmlnGAEgASgLMhYucHJvY2Vzcy5Qcm9jZXNzQ29uZmlnEgsKA3BpZBgCIAEoDRIQCgN0YWcYAyABKAlIAIgBAUIGCgRfdGFnIjcKDExpc3RSZXNwb25zZRInCglwcm9jZXNzZXMYASADKAsyFC5wcm9jZXNzLlByb2Nlc3NJbmZvIpcBCgxTdGFydFJlcXVlc3QSJwoHcHJvY2VzcxgBIAEoCzIWLnByb2Nlc3MuUHJvY2Vzc0NvbmZpZxIeCgNwdHkYAiABKAsyDC5wcm9jZXNzLlBUWUgAiAEBEhAKA3RhZxgDIAEoCUgBiAEBEhIKBXN0ZGluGAQgASgISAKIAQFCBgoEX3B0eUIGCgRfdGFnQggKBl9zdGRpbiJiCg1VcGRhdGVSZXF1ZXN0EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvchIeCgNwdHkYAiABKAsyDC5wcm9jZXNzLlBUWUgAiAEBQgYKBF9wdHkiEAoOVXBkYXRlUmVzcG9uc2UirwMKDFByb2Nlc3NFdmVudBIxCgVzdGFydBgBIAEoCzIgLnByb2Nlc3MuUHJvY2Vzc0V2ZW50LlN0YXJ0RXZlbnRIABIvCgRkYXRhGAIgASgLMh8ucHJvY2Vzcy5Qcm9jZXNzRXZlbnQuRGF0YUV2ZW50SAASLQoDZW5kGAMgASgLMh4ucHJvY2Vzcy5Qcm9jZXNzRXZlbnQuRW5kRXZlbnRIABI0CglrZWVwYWxpdmUYBCABKAsyHy5wcm9jZXNzLlByb2Nlc3NFdmVudC5LZWVwQWxpdmVIABoZCgpTdGFydEV2ZW50EgsKA3BpZBgBIAEoDRpICglEYXRhRXZlbnQSEAoGc3Rkb3V0GAEgASgMSAASEAoGc3RkZXJyGAIgASgMSAASDQoDcHR5GAMgASgMSABCCAoGb3V0cHV0GlsKCEVuZEV2ZW50EhEKCWV4aXRfY29kZRgBIAEoERIOCgZleGl0ZWQYAiABKAgSDgoGc3RhdHVzGAMgASgJEhIKBWVycm9yGAQgASgJSACIAQFCCAoGX2Vycm9yGgsKCUtlZXBBbGl2ZUIHCgVldmVudCI1Cg1TdGFydFJlc3BvbnNlEiQKBWV2ZW50GAEgASgLMhUucHJvY2Vzcy5Qcm9jZXNzRXZlbnQiNwoPQ29ubmVjdFJlc3BvbnNlEiQKBWV2ZW50GAEgASgLMhUucHJvY2Vzcy5Qcm9jZXNzRXZlbnQiYwoQU2VuZElucHV0UmVxdWVzdBIpCgdwcm9jZXNzGAEgASgLMhgucHJvY2Vzcy5Qcm9jZXNzU2VsZWN0b3ISJAoFaW5wdXQYAiABKAsyFS5wcm9jZXNzLlByb2Nlc3NJbnB1dCITChFTZW5kSW5wdXRSZXNwb25zZSI3CgxQcm9jZXNzSW5wdXQSDwoFc3RkaW4YASABKAxIABINCgNwdHkYAiABKAxIAEIHCgVpbnB1dCLCAgoSU3RyZWFtSW5wdXRSZXF1ZXN0EjcKBXN0YXJ0GAEgASgLMiYucHJvY2Vzcy5TdHJlYW1JbnB1dFJlcXVlc3QuU3RhcnRFdmVudEgAEjUKBGRhdGEYAiABKAsyJS5wcm9jZXNzLlN0cmVhbUlucHV0UmVxdWVzdC5EYXRhRXZlbnRIABI6CglrZWVwYWxpdmUYAyABKAsyJS5wcm9jZXNzLlN0cmVhbUlucHV0UmVxdWVzdC5LZWVwQWxpdmVIABo3CgpTdGFydEV2ZW50EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvchoxCglEYXRhRXZlbnQSJAoFaW5wdXQYAiABKAsyFS5wcm9jZXNzLlByb2Nlc3NJbnB1dBoLCglLZWVwQWxpdmVCBwoFZXZlbnQiFQoTU3RyZWFtSW5wdXRSZXNwb25zZSJfChFTZW5kU2lnbmFsUmVxdWVzdBIpCgdwcm9jZXNzGAEgASgLMhgucHJvY2Vzcy5Qcm9jZXNzU2VsZWN0b3ISHwoGc2lnbmFsGAIgASgOMg8ucHJvY2Vzcy5TaWduYWwiFAoSU2VuZFNpZ25hbFJlc3BvbnNlIjsKDkNvbm5lY3RSZXF1ZXN0EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvciI7Cg9Qcm9jZXNzU2VsZWN0b3ISDQoDcGlkGAEgASgNSAASDQoDdGFnGAIgASgJSABCCgoIc2VsZWN0b3IqSAoGU2lnbmFsEhYKElNJR05BTF9VTlNQRUNJRklFRBAAEhIKDlNJR05BTF9TSUdURVJNEA8SEgoOU0lHTkFMX1NJR0tJTEwQCTLKAwoHUHJvY2VzcxIzCgRMaXN0EhQucHJvY2Vzcy5MaXN0UmVxdWVzdBoVLnByb2Nlc3MuTGlzdFJlc3BvbnNlEj4KB0Nvbm5lY3QSFy5wcm9jZXNzLkNvbm5lY3RSZXF1ZXN0GhgucHJvY2Vzcy5Db25uZWN0UmVzcG9uc2UwARI4CgVTdGFydBIVLnByb2Nlc3MuU3RhcnRSZXF1ZXN0GhYucHJvY2Vzcy5TdGFydFJlc3BvbnNlMAESOQoGVXBkYXRlEhYucHJvY2Vzcy5VcGRhdGVSZXF1ZXN0GhcucHJvY2Vzcy5VcGRhdGVSZXNwb25zZRJKCgtTdHJlYW1JbnB1dBIbLnByb2Nlc3MuU3RyZWFtSW5wdXRSZXF1ZXN0GhwucHJvY2Vzcy5TdHJlYW1JbnB1dFJlc3BvbnNlKAESQgoJU2VuZElucHV0EhkucHJvY2Vzcy5TZW5kSW5wdXRSZXF1ZXN0GhoucHJvY2Vzcy5TZW5kSW5wdXRSZXNwb25zZRJFCgpTZW5kU2lnbmFsEhoucHJvY2Vzcy5TZW5kU2lnbmFsUmVxdWVzdBobLnByb2Nlc3MuU2VuZFNpZ25hbFJlc3BvbnNlQlcKC2NvbS5wcm9jZXNzQgxQcm9jZXNzUHJvdG9QAaICA1BYWKoCB1Byb2Nlc3PKAgdQcm9jZXNz4gITUHJvY2Vzc1xHUEJNZXRhZGF0YeoCB1Byb2Nlc3NiBnByb3RvMw"),0),ix=class{constructor(e,t,n){this.transport=e,this.connectionConfig=t,this.defaultPtyConnectionTimeout=6e4,this.rpc=tU(iO,this.transport),this.envdVersion=n.version}async create(e){var t,n,r;let i=null!=(t=null==e?void 0:e.requestTimeoutMs)?t:this.connectionConfig.requestTimeoutMs,a=null!=(n=null==e?void 0:e.envs)?n:{};a.TERM="xterm-256color";let s=new AbortController,o=setTimeout(()=>{s.abort()},i),l=this.rpc.start({process:{cmd:"/bin/bash",args:["-i","-l"],envs:a,cwd:null==e?void 0:e.cwd},pty:{size:{cols:e.cols,rows:e.rows}}},{headers:r_(rB({},ib(this.envdVersion,null==e?void 0:e.user)),rV({[ia]:"50"})),signal:s.signal,timeoutMs:null!=(r=null==e?void 0:e.timeoutMs)?r:this.defaultPtyConnectionTimeout});try{let t=await ic(l);return clearTimeout(o),new iS(t,()=>s.abort(),()=>this.kill(t),l,void 0,void 0,e.onData)}catch(e){throw ip(e)}}async connect(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0,o=this.rpc.connect({process:{selector:{case:"pid",value:e}}},{signal:a.signal,headers:{[ia]:"50"},timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultPtyConnectionTimeout});try{let e=await ic(o);return clearTimeout(s),new iS(e,()=>a.abort(),()=>this.kill(e),o,void 0,void 0,null==t?void 0:t.onData)}catch(e){throw ip(e)}}async sendInput(e,t,n){try{await this.rpc.sendInput({input:{input:{case:"pty",value:t}},process:{selector:{case:"pid",value:e}}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw ip(e)}}async resize(e,t,n){try{await this.rpc.update({process:{selector:{case:"pid",value:e}},pty:{size:t}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw ip(e)}}async kill(e,t){try{return await this.rpc.sendSignal({process:{selector:{case:"pid",value:e}},signal:9},{signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tR&&e.code===Y.NotFound)return!1;throw ip(e)}}},ik=class{constructor(e,t,n){this.connectionConfig=t,this.defaultProcessConnectionTimeout=6e4,this.rpc=tU(iO,e),this.envdVersion=n.version}async list(e){try{return(await this.rpc.list({},{signal:this.connectionConfig.getSignal(null==e?void 0:e.requestTimeoutMs)})).processes.map(e=>{let t,n;return rB((t=rB({pid:e.pid},e.tag&&{tag:e.tag}),n={args:e.config.args,envs:e.config.envs,cmd:e.config.cmd},r_(t,rV(n))),e.config.cwd&&{cwd:e.config.cwd})})}catch(e){throw ip(e)}}async sendStdin(e,t,n){try{await this.rpc.sendInput({process:{selector:{case:"pid",value:e}},input:{input:{case:"stdin",value:new TextEncoder().encode(t)}}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw ip(e)}}async kill(e,t){try{return await this.rpc.sendSignal({process:{selector:{case:"pid",value:e}},signal:9},{signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tR&&e.code===Y.NotFound)return!1;throw ip(e)}}async connect(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0,o=this.rpc.connect({process:{selector:{case:"pid",value:e}}},{signal:a.signal,headers:{[ia]:"50"},timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultProcessConnectionTimeout});try{let e=await ic(o);return clearTimeout(s),new iS(e,()=>a.abort(),()=>this.kill(e),o,null==t?void 0:t.onStdout,null==t?void 0:t.onStderr,void 0)}catch(e){throw ip(e)}}async run(e,t){let n=await this.start(e,t);return(null==t?void 0:t.background)?n:n.wait()}async start(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0;if((null==t?void 0:t.stdin)===!1&&0>tW(this.envdVersion,"0.3.0"))throw new r0(`Sandbox envd version ${this.envdVersion} can't specify stdin, it's always turned on. Please rebuild your template if you need this feature.`);let o=this.rpc.start({process:{cmd:"/bin/bash",cwd:null==t?void 0:t.cwd,envs:null==t?void 0:t.envs,args:["-l","-c",e]},stdin:(null==t?void 0:t.stdin)||!1},{headers:r_(rB({},ib(this.envdVersion,null==t?void 0:t.user)),rV({[ia]:"50"})),signal:a.signal,timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultProcessConnectionTimeout});try{let e=await ic(o);return clearTimeout(s),new iS(e,()=>a.abort(),()=>this.kill(e),o,null==t?void 0:t.onStdout,null==t?void 0:t.onStderr,void 0)}catch(e){throw ip(e)}}},iC=class{static async kill(e,t){var n;let r=new is(t),i=new ii(r),a=await i.api.DELETE("/sandboxes/{sandboxID}",{params:{path:{sandboxID:e}},signal:r.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=a.error)?void 0:n.code)===404)return!1;let s=ir(a);if(s)throw s;return!0}static async getInfo(e,t){let n=await this.getFullInfo(e,t);return delete n.envdAccessToken,delete n.sandboxDomain,n}static async getMetrics(e,t){var n,r;let i=new is(t),a=new ii(i),s=await a.api.GET("/sandboxes/{sandboxID}/metrics",{params:{path:{sandboxID:e,start:null==t?void 0:t.start,end:null==t?void 0:t.end}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)}),o=ir(s);if(o)throw o;return null!=(r=null==(n=s.data)?void 0:n.map(e=>({timestamp:new Date(e.timestamp),cpuUsedPct:e.cpuUsedPct,cpuCount:e.cpuCount,memUsed:e.memUsed,memTotal:e.memTotal,diskUsed:e.diskUsed,diskTotal:e.diskTotal})))?r:[]}static async setTimeout(e,t,n){var r;let i=new is(n),a=new ii(i),s=await a.api.POST("/sandboxes/{sandboxID}/timeout",{params:{path:{sandboxID:e}},body:{timeout:rZ(t)},signal:i.getSignal(null==n?void 0:n.requestTimeoutMs)});if((null==(r=s.error)?void 0:r.code)===404)throw new r9(`Sandbox ${e} not found`);let o=ir(s);if(o)throw o}static async getFullInfo(e,t){var n,r;let i=new is(t),a=new ii(i),s=await a.api.GET("/sandboxes/{sandboxID}",{params:{path:{sandboxID:e}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=s.error)?void 0:n.code)===404)throw new r9(`Sandbox ${e} not found`);let o=ir(s);if(o)throw o;if(!s.data)throw Error("Sandbox not found");return r_(rB({sandboxId:s.data.sandboxID,templateId:s.data.templateID},s.data.alias&&{name:s.data.alias}),rV({metadata:null!=(r=s.data.metadata)?r:{},envdVersion:s.data.envdVersion,envdAccessToken:s.data.envdAccessToken,startedAt:new Date(s.data.startedAt),endAt:new Date(s.data.endAt),state:s.data.state,cpuCount:s.data.cpuCount,memoryMB:s.data.memoryMB,sandboxDomain:s.data.domain||void 0}))}static async betaPause(e,t){var n,r;let i=new is(t),a=new ii(i),s=await a.api.POST("/sandboxes/{sandboxID}/pause",{params:{path:{sandboxID:e}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=s.error)?void 0:n.code)===404)throw new r9(`Sandbox ${e} not found`);if((null==(r=s.error)?void 0:r.code)===409)return!1;let o=ir(s);if(o)throw o;return!0}static async createSandbox(e,t,n){var r,i,a;let s=new is(n),o=new ii(s),l=await o.api.POST("/sandboxes",{body:{autoPause:null!=(r=null==n?void 0:n.autoPause)&&r,templateID:e,metadata:null==n?void 0:n.metadata,mcp:null==n?void 0:n.mcp,envVars:null==n?void 0:n.envs,timeout:rZ(t),secure:null==(i=null==n?void 0:n.secure)||i,allow_internet_access:null==(a=null==n?void 0:n.allowInternetAccess)||a,network:null==n?void 0:n.network},signal:s.getSignal(null==n?void 0:n.requestTimeoutMs)}),u=ir(l);if(u)throw u;if(0>tW(l.data.envdVersion,"0.1.0"))throw await this.kill(l.data.sandboxID,n),new r5("You need to update the template to use the new SDK. You can do this by running `e2b template build` in the directory with the template.");return{sandboxId:l.data.sandboxID,sandboxDomain:l.data.domain||void 0,envdVersion:l.data.envdVersion,envdAccessToken:l.data.envdAccessToken,trafficAccessToken:l.data.trafficAccessToken||void 0}}static async connectSandbox(e,t){var n,r;let i=null!=(n=null==t?void 0:t.timeoutMs)?n:3e5,a=new is(t),s=new ii(a),o=await s.api.POST("/sandboxes/{sandboxID}/connect",{params:{path:{sandboxID:e}},body:{timeout:rZ(i)},signal:a.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(r=o.error)?void 0:r.code)===404)throw new r9(`Paused sandbox ${e} not found`);let l=ir(o);if(l)throw l;return{sandboxId:o.data.sandboxID,sandboxDomain:o.data.domain||void 0,envdVersion:o.data.envdVersion,envdAccessToken:o.data.envdAccessToken,trafficAccessToken:o.data.trafficAccessToken||void 0}}},i_=class{constructor(e){this.config=new is(e),this.client=new ii(this.config),this._hasNext=!0,this._nextToken=null==e?void 0:e.nextToken,this.query=null==e?void 0:e.query,this.limit=null==e?void 0:e.limit}get hasNext(){return this._hasNext}get nextToken(){return this._nextToken}async nextItems(){var e,t,n;let r;if(!this.hasNext)throw Error("No more items to fetch");(null==(e=this.query)?void 0:e.metadata)&&(r=new URLSearchParams(Object.fromEntries(Object.entries(this.query.metadata).map(([e,t])=>[encodeURIComponent(e),encodeURIComponent(t)]))).toString());let i=await this.client.api.GET("/v2/sandboxes",{params:{query:{metadata:r,state:null==(t=this.query)?void 0:t.state,limit:this.limit,nextToken:this.nextToken}},signal:this.config.getSignal()}),a=ir(i);if(a)throw a;return this._nextToken=i.response.headers.get("x-next-token")||void 0,this._hasNext=!!this._nextToken,(null!=(n=i.data)?n:[]).map(e=>{var t;return r_(rB({sandboxId:e.sandboxID,templateId:e.templateID},e.alias&&{name:e.alias}),rV({metadata:null!=(t=e.metadata)?t:{},startedAt:new Date(e.startedAt),endAt:new Date(e.endAt),state:e.state,cpuCount:e.cpuCount,memoryMB:e.memoryMB,envdVersion:e.envdVersion}))})}},iV=class extends iC{constructor(e){var t;super(),this.envdPort=49983,this.mcpPort=50005,this.connectionConfig=new is(e),this.sandboxId=e.sandboxId,this.sandboxDomain=null!=(t=e.sandboxDomain)?t:this.connectionConfig.domain,this.envdAccessToken=e.envdAccessToken,this.trafficAccessToken=e.trafficAccessToken,this.envdApiUrl=this.connectionConfig.getSandboxUrl(this.sandboxId,{sandboxDomain:this.sandboxDomain,envdPort:this.envdPort});const n={"E2b-Sandbox-Id":this.sandboxId,"E2b-Sandbox-Port":this.envdPort.toString()},r=function(e){var t;try{new Headers}catch(e){throw Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}let n=null!=(t=e.useBinaryFormat)&&t;return{async unary(t,r,i,a,s,o){let{serialize:l,parse:u}=nY(t,n,e.jsonOptions,e.binaryOptions);return i=void 0===i?e.defaultTimeoutMs:i<=0?void 0:i,await function(e){let t=nH(e.next,e.interceptors),[n,r,i]=nq(e);return t(Object.assign(Object.assign({},e.req),{message:eW(e.req.method.input,e.req.message),signal:n})).then(e=>(i(),e),r)}({interceptors:e.interceptors,signal:r,timeoutMs:i,req:{stream:!1,service:t.parent,method:t,requestMethod:"POST",url:nJ(e.baseUrl,t),header:n4(t.methodKind,n,i,a,!1),contextValues:null!=o?o:nU(),message:s},next:async r=>{var i,a,s,o;let c=!0===e.useHttpGet&&t.idempotency===er.NO_SIDE_EFFECTS,d=null;if(c){let e,t,i,u,c;a=r,s=l(r.message),o=n,e="?connect=v1",(null==(t=a.header.get(n0))?void 0:t.indexOf(n6))===0&&(e+="&encoding="+encodeURIComponent(t.slice(n6.length))),null!==(i=a.header.get(n1))&&"identity"!==i&&(e+="&compression="+encodeURIComponent(i),o=!0),o&&(e+="&base64=1"),e+="&message="+(o?tY(s,"url"):encodeURIComponent(new TextDecoder().decode(s))),u=a.url+e,c=new Headers(a.header),[n2,n0,"Content-Length",n1,"Accept-Encoding"].forEach(e=>c.delete(e)),r=Object.assign(Object.assign({},a),{requestMethod:"GET",url:u,header:c})}else d=l(r.message);let f=null!=(i=e.fetch)?i:globalThis.fetch,g=await f(r.url,Object.assign(Object.assign({},rt),{method:r.requestMethod,headers:r.header,signal:r.signal,body:d})),{isUnaryError:h,unaryError:m}=n8(t.methodKind,n,g.status,g.headers);if(h)throw nQ(await g.json(),function(...e){let t=new Headers;for(let n of e)n.forEach((e,n)=>{t.append(n,e)});return t}(...n5(g.headers)),m);let[p,b]=n5(g.headers);return{stream:!1,service:t.parent,method:t,header:p,message:n?u(new Uint8Array(await g.arrayBuffer())):nT(t.output,await g.json(),nK(e.jsonOptions)),trailer:b}}})},async stream(t,r,i,a,s,o){let{serialize:l,parse:u}=nY(t,n,e.jsonOptions,e.binaryOptions);async function c(e){var n;let r,i;if("server_streaming"!=t.methodKind)throw"The fetch API does not support streaming request bodies";let a=await e[Symbol.asyncIterator]().next();if(!0==a.done)throw"missing request message";return(r=new Uint8Array((n=l(a.value)).length+5)).set(n,5),(i=new DataView(r.buffer,r.byteOffset,r.byteLength)).setUint8(0,0),i.setUint32(1,n.length),r}return i=void 0===i?e.defaultTimeoutMs:i<=0?void 0:i,await function(e){let t=nH(e.next,e.interceptors),[n,r,i]=nq(e),a=Object.assign(Object.assign({},e.req),{message:function(e,t){function n(t){return!0===t.done?t:{done:t.done,value:eW(e,t.value)}}return{[Symbol.asyncIterator](){let e=t[Symbol.asyncIterator](),r={next:()=>e.next().then(n)};return void 0!==e.throw&&(r.throw=t=>e.throw(t).then(n)),void 0!==e.return&&(r.return=t=>e.return(t).then(n)),r}}}(e.req.method.input,e.req.message),signal:n}),s=!1;return n.addEventListener("abort",function(){var t,n;let r=e.req.message[Symbol.asyncIterator]();s||null==(t=r.throw)||t.call(r,this.reason).catch(()=>{}),null==(n=r.return)||n.call(r).catch(()=>{})}),t(a).then(e=>Object.assign(Object.assign({},e),{message:{[Symbol.asyncIterator](){let t=e.message[Symbol.asyncIterator]();return{next:()=>t.next().then(e=>(!0==e.done&&(s=!0,i()),e),r)}}}}),r)}({interceptors:e.interceptors,timeoutMs:i,signal:r,req:{stream:!0,service:t.parent,method:t,requestMethod:"POST",url:nJ(e.baseUrl,t),header:n4(t.methodKind,n,i,a,!1),contextValues:null!=o?o:nU(),message:s},next:async r=>{var i;let a=null!=(i=e.fetch)?i:globalThis.fetch,s=await a(r.url,Object.assign(Object.assign({},rt),{method:r.requestMethod,headers:r.header,signal:r.signal,body:await c(r.message)}));if(n8(t.methodKind,n,s.status,s.headers),null===s.body)throw"missing response body";let o=new Headers;return Object.assign(Object.assign({},r),{header:s.headers,trailer:o,message:function(e,t,n,r){return re(this,arguments,function*(){let i,a,s=(a=new Uint8Array(0),new ReadableStream({start(){i=e.getReader()},async pull(e){let t;for(;;){if(void 0===t&&a.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+a[t];t={flags:a[0],length:e}}if(void 0!==t&&a.byteLength>=t.length+5)break;let e=await i.read();if(e.done)break;!function(e){let t=new Uint8Array(a.length+e.length);t.set(a),t.set(e,a.length),a=t}(e.value)}if(void 0===t)return 0==a.byteLength?void e.close():void e.error(new tR("premature end of stream",Y.DataLoss));let n=a.subarray(5,5+t.length);a=a.subarray(5+t.length),e.enqueue({flags:t.flags,data:n})}})).getReader(),o=!1;for(;;){let e=yield n7(s.read());if(e.done)break;let{flags:r,data:i}=e.value;if((1&r)==1)throw new tR("protocol error: received unsupported compressed output",Y.Internal);if((2&r)==2){o=!0;let e=function(e){let t,n=new tR("invalid end stream",Y.Unknown);try{t=JSON.parse("string"==typeof e?e:new TextDecoder().decode(e))}catch(e){throw n}if("object"!=typeof t||null==t||Array.isArray(t))throw n;let r=new Headers;if("metadata"in t){if("object"!=typeof t.metadata||null==t.metadata||Array.isArray(t.metadata))throw n;for(let[e,i]of Object.entries(t.metadata)){if(!Array.isArray(i)||i.some(e=>"string"!=typeof e))throw n;for(let t of i)r.append(e,t)}}let i="error"in t&&null!=t.error?nQ(t.error,r,n):void 0;return{metadata:r,error:i}}(i);if(e.error){let t=e.error;throw n.forEach((e,n)=>{t.metadata.append(n,e)}),t}e.metadata.forEach((e,n)=>t.set(n,e));continue}yield yield n7(u(i))}if("throwIfAborted"in r&&r.throwIfAborted(),!o)throw"missing EndStreamResponse"})}(s.body,o,s.headers,r.signal)})}})}}}({baseUrl:this.envdApiUrl,useBinaryFormat:!1,interceptors:(null==e?void 0:e.logger)?[function(e){return t=>async n=>{var r,i;null==(r=e.info)||r.call(e,`Request: POST ${n.url}`);let a=await t(n);if(a.stream)return r_(rB({},a),rV({message:function(t){return rG(this,null,function*(){var n;try{for(var r,i,a,s=r$(t);r=!(i=yield new rj(s.next())).done;r=!1){let t=i.value;null==(n=e.debug)||n.call(e,"Response stream:",ie(t)),yield t}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&(yield new rj(i.call(s)))}finally{if(a)throw a[0]}}})}(a.message)}));return null==(i=e.info)||i.call(e,"Response:",ie(a.message)),a}}(e.logger)]:void 0,fetch:(e,t)=>{let r=new Headers(this.connectionConfig.headers);return new Headers(null==t?void 0:t.headers).forEach((e,t)=>r.append(t,e)),new Headers(n).forEach((e,t)=>r.append(t,e)),this.envdAccessToken&&r.append("X-Access-Token",this.envdAccessToken),fetch(e,t=r_(rB({},null!=t?t:{}),rV({headers:r,redirect:"follow"})))}});this.envdApi=new ig({apiUrl:this.envdApiUrl,logger:null==e?void 0:e.logger,accessToken:this.envdAccessToken,headers:this.envdAccessToken?{"X-Access-Token":this.envdAccessToken}:{}},{version:e.envdVersion}),this.files=new iT(r,this.envdApi,this.connectionConfig),this.commands=new ik(r,this.connectionConfig,{version:e.envdVersion}),this.pty=new ix(r,this.connectionConfig,{version:e.envdVersion})}static list(e){return new i_(e)}static async create(e,t){var n,r;let{template:i,sandboxOpts:a}="string"==typeof e?{template:e,sandboxOpts:t}:{template:(null==e?void 0:e.mcp)?this.defaultMcpTemplate:this.defaultTemplate,sandboxOpts:e},s=new is(a);if(s.debug)return new this(rB({sandboxId:"debug_sandbox_id",envdVersion:ih},s));let o=new this(rB(rB({},await iC.createSandbox(i,null!=(n=null==a?void 0:a.timeoutMs)?n:this.defaultSandboxTimeoutMs,a)),s));if(null==a?void 0:a.mcp){o.mcpToken=crypto.randomUUID();let e=await o.commands.run(`mcp-gateway --config '${JSON.stringify(null==a?void 0:a.mcp)}'`,{user:"root",envs:{GATEWAY_ACCESS_TOKEN:null!=(r=o.mcpToken)?r:""}});if(0!==e.exitCode)throw Error(`Failed to start MCP gateway: ${e.stderr}`)}return o}static async betaCreate(e,t){var n,r;let{template:i,sandboxOpts:a}="string"==typeof e?{template:e,sandboxOpts:t}:{template:(null==e?void 0:e.mcp)?this.defaultMcpTemplate:this.defaultTemplate,sandboxOpts:e},s=new is(a);if(s.debug)return new this(rB({sandboxId:"debug_sandbox_id",envdVersion:ih},s));let o=new this(rB(rB({},await iC.createSandbox(i,null!=(n=null==a?void 0:a.timeoutMs)?n:this.defaultSandboxTimeoutMs,a)),s));if(null==a?void 0:a.mcp){o.mcpToken=crypto.randomUUID();let e=await o.commands.run(`mcp-gateway --config '${JSON.stringify(null==a?void 0:a.mcp)}'`,{user:"root",envs:{GATEWAY_ACCESS_TOKEN:null!=(r=o.mcpToken)?r:""}});if(0!==e.exitCode)throw Error(`Failed to start MCP gateway: ${e.stderr}`)}return o}static async connect(e,t){let n=await iC.connectSandbox(e,t),r=new is(t);return new this(rB({sandboxId:e,sandboxDomain:n.sandboxDomain,envdAccessToken:n.envdAccessToken,trafficAccessToken:n.trafficAccessToken,envdVersion:n.envdVersion},r))}async connect(e){return await iC.connectSandbox(this.sandboxId,e),this}getHost(e){return this.connectionConfig.getHost(this.sandboxId,e,this.sandboxDomain)}async isRunning(e){let t=this.connectionConfig.getSignal(null==e?void 0:e.requestTimeoutMs),n=await this.envdApi.api.GET("/health",{signal:t});if(502==n.response.status)return!1;let r=await iu(n);if(r)throw r;return!0}async setTimeout(e,t){this.connectionConfig.debug||await iC.setTimeout(this.sandboxId,e,rB(rB({},this.connectionConfig),t))}async kill(e){this.connectionConfig.debug||await iC.kill(this.sandboxId,rB(rB({},this.connectionConfig),e))}async betaPause(e){return await iC.betaPause(this.sandboxId,e)}getMcpUrl(){return`https://${this.getHost(this.mcpPort)}/mcp`}async getMcpToken(){return this.mcpToken||(this.mcpToken=await this.files.read("/etc/mcp-gateway/.token",{user:"root"})),this.mcpToken}async uploadUrl(e,t){t=null!=t?t:{};let n=!!this.envdAccessToken;if(!n&&void 0!=t.useSignatureExpiration)throw Error("Signature expiration can be used only when sandbox is created as secured.");let r=t.user;void 0==r&&0>tW(this.envdApi.version,im)&&(r=io);let i=null!=e?e:"",a=this.fileUrl(i,r);if(n){let e=new URL(a),n=await il({path:i,operation:"write",user:r,expirationInSeconds:t.useSignatureExpiration,envdAccessToken:this.envdAccessToken});return e.searchParams.set("signature",n.signature),n.expiration&&e.searchParams.set("signature_expiration",n.expiration.toString()),e.toString()}return a}async downloadUrl(e,t){t=null!=t?t:{};let n=!!this.envdAccessToken;if(!n&&void 0!=t.useSignatureExpiration)throw Error("Signature expiration can be used only when sandbox is created as secured.");let r=t.user;void 0==r&&0>tW(this.envdApi.version,im)&&(r=io);let i=this.fileUrl(e,r);if(n){let n=new URL(i),a=await il({path:e,operation:"read",user:r,expirationInSeconds:t.useSignatureExpiration,envdAccessToken:this.envdAccessToken});return n.searchParams.set("signature",a.signature),a.expiration&&n.searchParams.set("signature_expiration",a.expiration.toString()),n.toString()}return i}async getInfo(e){return await iC.getInfo(this.sandboxId,rB(rB({},this.connectionConfig),e))}async getMetrics(e){var t,n;if(this.envdApi.version){if(0>tW(this.envdApi.version,"0.1.5"))throw new r0("You need to update the template to use the new SDK. You can do this by running `e2b template build` in the directory with the template.");0>tW(this.envdApi.version,"0.2.4")&&(null==(n=null==(t=this.connectionConfig.logger)?void 0:t.warn)||n.call(t,"Disk metrics are not supported in this version of the sandbox, please rebuild the template to get disk metrics."))}return await iC.getMetrics(this.sandboxId,rB(rB({},this.connectionConfig),e))}fileUrl(e,t){let n=new URL("/files",this.envdApiUrl);return t&&n.searchParams.set("username",t),e&&n.searchParams.set("path",e),n.toString()}};iV.defaultTemplate="base",iV.defaultMcpTemplate="mcp-gateway",iV.defaultSandboxTimeoutMs=3e5;var iD=class{constructor(e,t,n){this.timestamp=e,this.level=t,this.message=n}toString(){return`[${this.timestamp.toISOString()}] [${this.level}] ${rH(this.message)}`}},iF=class extends iD{constructor(e,t){super(e,"debug",t)}},iU=class extends iD{constructor(e,t){super(e,"debug",t)}},iP="info",iL={error:rS.red("ERROR"),warn:rS.hex("#FF4400")("WARN "),info:rS.hex("#FF8800")("INFO "),debug:rS.gray("DEBUG")},iB={debug:0,info:1,warn:2,error:3},iM=class{constructor(e){this.minLevel=null!=e?e:iP,this.state=this.getInitialState()}logger(e){if(e instanceof iF)return void this.startTimer();if(e instanceof iU)return void clearInterval(this.state.timerInterval);if(iB[e.level]<iB[this.minLevel])return;let t=this.formatLogLine(e);process.stdout.write(`${t}
`),this.updateTimer()}getInitialState(e){return{startTime:Date.now(),animationFrame:0,timerInterval:e}}formatTimerLine(){let e=((Date.now()-this.state.startTime)/1e3).toFixed(1);return`${e}s`}animateStatus(){let e=["⣾","⣽","⣻","⢿","⡿","⣟","⣯","⣷"],t=this.state.animationFrame%e.length;return`${e[t]}`}formatLogLine(e){let t=this.formatTimerLine().padEnd(5),n=rS.dim(e.timestamp.toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",second:"2-digit"})),r=iL[e.level]||iL[iP],i=e.message;return`${t} | ${n} ${r} ${i}`}startTimer(){if(!process.stdout.isTTY)return;let e=setInterval(this.updateTimer.bind(this),150);this.state=this.getInitialState(e),this.updateTimer()}updateTimer(){if(!process.stdout.isTTY)return;this.state.animationFrame++;let e=this.animateStatus();process.stdout.write(`${e} Building ${this.formatTimerLine()}\r`)}};function ij(e){let t=new iM(null==e?void 0:e.minLevel);return t.logger.bind(t)}function iG(e){let t=rx.default.join(e,".dockerignore");return rO.default.existsSync(t)?rO.default.readFileSync(t,"utf-8").split("\n").map(e=>e.trim()).filter(e=>e&&!e.startsWith("#")):[]}async function i$(e,t,n,r=!0){let{glob:i}=await rJ("glob"),a=new Map;for(let s of(await i(e,{ignore:n,withFileTypes:!0,cwd:t})))if(s.isDirectory()){r&&a.set(s.fullpath(),s);let e=rx.default.join(s.relative()||".","**/*").replace(/\\/g,"/");(await i(e,{ignore:n,withFileTypes:!0,cwd:t})).forEach(e=>a.set(e.fullpath(),e))}else a.set(s.fullpath(),s);return Array.from(a.values()).sort()}async function iW(e,t,n,r,i,a){let s=rx.default.join(n,e),o=rR.default.createHash("sha256"),l=`COPY ${e} ${t}`;o.update(l);let u=await i$(e,n,r,!0);if(0===u.length){let e=Error(`No files found in ${s}`);throw a&&(e.stack=a),e}let c=e=>{o.update(e.mode.toString()),o.update(e.size.toString())};for(let e of u){let t=e.relativePosix();if(o.update(t),e.isSymbolicLink()){let t=rO.default.statSync(e.fullpath(),{throwIfNoEntry:!1});if(!(i&&((null==t?void 0:t.isFile())||(null==t?void 0:t.isDirectory())))){c(rO.default.lstatSync(e.fullpath()));let t=rO.default.readlinkSync(e.fullpath());o.update(t);continue}}let n=rO.default.statSync(e.fullpath());if(c(n),n.isFile()){let t=rO.default.readFileSync(e.fullpath());o.update(new Uint8Array(t))}}return o.digest("hex")}function iK(e){let t=Error().stack;if(!t)return;let n=t.split("\n").slice(1);if(!(n.length<e+1))return n.slice(e).join("\n")}function iY(e){return e.toString(8).padStart(4,"0")}async function iX(e,t,n,r){let{create:i}=await rJ("tar"),a=(await i$(e,t,n,!0)).map(e=>e.relativePosix());return i({gzip:!0,cwd:t,follow:r,noDirRecurse:!0},a)}async function iZ(e,t,n,r){let i=await iX(e,t,n,r),a=0;try{for(var s,o,l,u=r$(i);s=!(o=await u.next()).done;s=!1){let e=o.value;a+=e.length}}catch(e){l=[e]}finally{try{s&&(o=u.return)&&await o.call(u)}finally{if(l)throw l[0]}}return{contentLength:a,uploadStream:await iX(e,t,n,r)}}async function iJ(e,{alias:t,cpuCount:n,memoryMB:r}){let i=await e.api.POST("/v3/templates",{body:{alias:t,cpuCount:n,memoryMB:r}}),a=ir(i,r8);if(a)throw a;if(!i.data)throw new r8("Failed to request build");return i.data}async function iH(e,{templateID:t,filesHash:n},r){let i=await e.api.GET("/templates/{templateID}/files/{hash}",{params:{path:{templateID:t,hash:n}}}),a=ir(i,r7,r);if(a)throw a;if(!i.data)throw new r7("Failed to get file upload link",r);return i.data}async function iz(e,t){let{fileName:n,url:r,fileContextPath:i,ignorePatterns:a,resolveSymlinks:s}=e;try{let{contentLength:e,uploadStream:o}=await iZ(n,i,a,s),l=await fetch(r,{method:"PUT",body:o,headers:{"Content-Length":e.toString()},duplex:"half"});if(!l.ok)throw new r7(`Failed to upload file: ${l.statusText}`,t)}catch(e){if(e instanceof r7)throw e;throw new r7(`Failed to upload file: ${e}`,t)}}async function iq(e,{templateID:t,buildID:n,template:r}){let i=ir(await e.api.POST("/v2/templates/{templateID}/builds/{buildID}",{params:{path:{templateID:t,buildID:n}},body:r}),r8);if(i)throw i}async function iQ(e,{templateID:t,buildID:n,logsOffset:r}){let i=await e.api.GET("/templates/{templateID}/builds/{buildID}/status",{params:{path:{templateID:t,buildID:n},query:{logsOffset:r}}}),a=ir(i,r8);if(a)throw a;if(!i.data)throw new r8("Failed to get build status");return i.data}async function i0(e,{templateID:t,buildID:n,onBuildLogs:r,logsRefreshFrequency:i,stackTraces:a}){var s,o,l,u,c;let d=0,f="building";for(;"building"===f||"waiting"===f;){let g=await iQ(e,{templateID:t,buildID:n,logsOffset:d});switch(d+=g.logEntries.length,g.logEntries.forEach(e=>null==r?void 0:r(new iD(new Date(e.timestamp),e.level,rH(e.message)))),f=g.status){case"ready":return;case"waiting":break;case"error":{let e;if((null==(s=g.reason)?void 0:s.step)!==void 0){let t=(u=g.reason.step,c=a.length,"base"===u?0:"finalize"===u?c-1:Number(u));e=a[t]}throw new r8(null!=(l=null==(o=null==g?void 0:g.reason)?void 0:o.message)?l:"Unknown error",e)}}await new Promise(e=>setTimeout(e,i))}throw new r8("Unknown build error occurred.")}var i1=class{constructor(e){this.cmd=e}getCmd(){return this.cmd}};function i2(e){return new i1(`ss -tuln | grep :${e}`)}function i3(e,t=200){return new i1(`curl -s -o /dev/null -w "%{http_code}" ${e} | grep -q "${t}"`)}function i9(e){return new i1(`pgrep ${e} > /dev/null`)}function i4(e){return new i1(`[ -f ${e} ]`)}function i5(e){let t=Math.max(1,Math.floor(e/1e3));return new i1(`sleep ${t}`)}var i6=class{constructor(e){var t,n;this.defaultBaseImage="e2bdev/base",this.baseImage=this.defaultBaseImage,this.baseTemplate=void 0,this.registryConfig=void 0,this.startCmd=void 0,this.readyCmd=void 0,this.force=!1,this.forceNextLayer=!1,this.instructions=[],this.fileContextPath="browser"===rK?".":null!=(eb=function(e){let t=function(e){let t=Error.prepareStackTrace;try{let e=[];return Error.prepareStackTrace=(t,n)=>{let r=n.slice(4);return e=r,r},Error().stack,e}finally{Error.prepareStackTrace=t}}(4);if(0===t.length)return;let n=t[0].getFileName();if(n){if(n.startsWith("file:")){let{fileURLToPath:e}=function(e){if("browser"===rK)throw Error("Browser runtime is not supported for require");return rM(e)}("node:url");n=e(n)}return rx.default.dirname(n)}}(0))?eb:".",this.fileIgnorePatterns=[],this.logsRefreshFrequency=200,this.stackTraces=[],this.stackTracesEnabled=!0,this.stackTracesOverride=void 0,this.fileContextPath=null!=(t=null==e?void 0:e.fileContextPath)?t:this.fileContextPath,this.fileIgnorePatterns=null!=(n=null==e?void 0:e.fileIgnorePatterns)?n:this.fileIgnorePatterns}static toJSON(e,t=!0){return e.toJSON(t)}static toDockerfile(e){return e.toDockerfile()}static async build(e,t){var n,r,i;try{null==(n=t.onBuildLogs)||n.call(t,new iF(new Date,"Build started"));let i=new is({domain:t.domain,apiKey:t.apiKey}),a=new ii(i),s=await e.build(a,t);return null==(r=t.onBuildLogs)||r.call(t,new iD(new Date,"info","Waiting for logs...")),await i0(a,{templateID:s.templateId,buildID:s.buildId,onBuildLogs:t.onBuildLogs,logsRefreshFrequency:e.logsRefreshFrequency,stackTraces:e.stackTraces}),s}finally{null==(i=t.onBuildLogs)||i.call(t,new iU(new Date,"Build finished"))}}static async buildInBackground(e,t){let n=new ii(new is({domain:t.domain,apiKey:t.apiKey}));return await e.build(n,t)}static async getBuildStatus(e,t){let n=new ii(new is({domain:null==t?void 0:t.domain,apiKey:null==t?void 0:t.apiKey}));return await iQ(n,{templateID:e.templateId,buildID:e.buildId,logsOffset:null==t?void 0:t.logsOffset})}fromDebianImage(e="stable"){return this.fromImage(`debian:${e}`)}fromUbuntuImage(e="latest"){return this.fromImage(`ubuntu:${e}`)}fromPythonImage(e="3"){return this.fromImage(`python:${e}`)}fromNodeImage(e="lts"){return this.fromImage(`node:${e}`)}fromBunImage(e="latest"){return this.fromImage(`oven/bun:${e}`)}fromBaseImage(){return this.fromImage(this.defaultBaseImage)}fromImage(e,t){return this.baseImage=e,this.baseTemplate=void 0,t&&(this.registryConfig={type:"registry",username:t.username,password:t.password}),this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromTemplate(e){return this.baseTemplate=e,this.baseImage=void 0,this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromDockerfile(e){let{baseImage:t}=this.runInStackTraceOverrideContext(()=>(function(e,t){let n;try{n=rO.default.existsSync(e)&&rO.default.statSync(e).isFile()?rO.default.readFileSync(e,"utf-8"):e}catch(t){n=e}let r=rk.DockerfileParser.parse(n).getInstructions(),i=r.filter(e=>"FROM"===e.getKeyword());if(i.length>1)throw Error("Multi-stage Dockerfiles are not supported");if(0===i.length)throw Error("Dockerfile must contain a FROM instruction");let a=i[0].getArguments(),s="e2bdev/base",o=!1,l=!1;for(let e of(a&&a.length>0&&(s=a[0].getValue()),t.setUser("root"),t.setWorkdir("/"),r)){let n=e.getKeyword();switch(n){case"FROM":case"EXPOSE":case"VOLUME":break;case"RUN":!function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n.map(e=>e.getValue()).join(" ");t.runCmd(e)}}(e,t);break;case"COPY":case"ADD":!function(e,t){let n=e.getArguments();if(n&&n.length>=2){let e=n[0].getValue(),r=n[n.length-1].getValue();t.copy(e,r)}}(e,t);break;case"WORKDIR":(function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n[0].getValue();t.setWorkdir(e)}})(e,t),l=!0;break;case"USER":(function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n[0].getValue();t.setUser(e)}})(e,t),o=!0;break;case"ENV":case"ARG":!function(e,t){let n=e.getArguments(),r=e.getKeyword();if(n&&n.length>=1){let e={};if(2===n.length){let t=n[0].getValue(),r=n[1].getValue();if(t.includes("=")&&r.includes("="))for(let t of n){let n=t.getValue(),r=n.indexOf("=");if(r>0){let t=n.substring(0,r),i=n.substring(r+1);e[t]=i}}else e[t]=r}else if(1===n.length){let t=n[0].getValue(),i=t.indexOf("=");if(i>0){let n=t.substring(0,i),r=t.substring(i+1);e[n]=r}else"ARG"===r&&t.trim()&&(e[t.trim()]="")}else for(let t of n){let n=t.getValue(),i=n.indexOf("=");if(i>0){let t=n.substring(0,i),r=n.substring(i+1);e[t]=r}else"ARG"===r&&(e[n]="")}Object.keys(e).length>0&&t.setEnvs(e)}}(e,t);break;case"CMD":case"ENTRYPOINT":!function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n.map(e=>e.getValue()).join(" ");try{let t=JSON.parse(e);Array.isArray(t)&&(e=t.join(" "))}catch(e){}t.setStartCmd(e,i5(2e4))}}(e,t);break;default:console.warn(`Unsupported instruction: ${n}`)}}return o||t.setUser("user"),l||t.setWorkdir("/home/user"),{baseImage:s}})(e,this),iK(2));return this.baseImage=t,this.baseTemplate=void 0,this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromAWSRegistry(e,t){return this.baseImage=e,this.baseTemplate=void 0,this.registryConfig={type:"aws",awsAccessKeyId:t.accessKeyId,awsSecretAccessKey:t.secretAccessKey,awsRegion:t.region},this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromGCPRegistry(e,t){var n,r;return this.baseImage=e,this.baseTemplate=void 0,this.registryConfig={type:"gcp",serviceAccountJson:(n=this.fileContextPath.toString(),"string"==typeof(r=t.serviceAccountJSON)?rO.default.readFileSync(rx.default.join(n,r),"utf-8"):JSON.stringify(r))},this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}copy(e,t,n){var r;if("browser"===rK)throw Error("Browser runtime is not supported for copy");for(let i of Array.isArray(e)?e:[e]){let e=[i.toString(),t.toString(),null!=(r=null==n?void 0:n.user)?r:"",(null==n?void 0:n.mode)?iY(n.mode):""];this.instructions.push({type:"COPY",args:e,force:(null==n?void 0:n.forceUpload)||this.forceNextLayer,forceUpload:null==n?void 0:n.forceUpload,resolveSymlinks:null==n?void 0:n.resolveSymlinks})}return this.collectStackTrace(),this}copyItems(e){if("browser"===rK)throw Error("Browser runtime is not supported for copyItems");return this.runInNewStackTraceContext(()=>{for(let t of e)this.copy(t.src,t.dest,{forceUpload:t.forceUpload,user:t.user,mode:t.mode,resolveSymlinks:t.resolveSymlinks})}),this}remove(e,t){let n=Array.isArray(e)?e:[e],r=["rm"];return(null==t?void 0:t.recursive)&&r.push("-r"),(null==t?void 0:t.force)&&r.push("-f"),r.push(...n.map(e=>e.toString())),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==t?void 0:t.user}))}rename(e,t,n){let r=["mv",e.toString(),t.toString()];return(null==n?void 0:n.force)&&r.push("-f"),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}makeDir(e,t){let n=Array.isArray(e)?e:[e],r=["mkdir","-p"];return(null==t?void 0:t.mode)&&r.push(`-m ${iY(t.mode)}`),r.push(...n.map(e=>e.toString())),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==t?void 0:t.user}))}makeSymlink(e,t,n){let r=["ln","-s"];return(null==n?void 0:n.force)&&r.push("-f"),r.push(e.toString(),t.toString()),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}runCmd(e,t){let n=[(Array.isArray(e)?e:[e]).join(" && ")];return(null==t?void 0:t.user)&&n.push(t.user),this.instructions.push({type:"RUN",args:n,force:this.forceNextLayer}),this.collectStackTrace(),this}setWorkdir(e){return this.instructions.push({type:"WORKDIR",args:[e.toString()],force:this.forceNextLayer}),this.collectStackTrace(),this}setUser(e){return this.instructions.push({type:"USER",args:[e],force:this.forceNextLayer}),this.collectStackTrace(),this}pipInstall(e,t){var n;let r=null==(n=null==t?void 0:t.g)||n,i=["pip","install"],a=e?Array.isArray(e)?e:[e]:void 0;return!1===r&&i.push("--user"),a?i.push(...a):i.push("."),this.runInNewStackTraceContext(()=>this.runCmd(i.join(" "),{user:r?"root":void 0}))}npmInstall(e,t){let n=["npm","install"],r=e?Array.isArray(e)?e:[e]:void 0;return(null==t?void 0:t.g)&&n.push("-g"),(null==t?void 0:t.dev)&&n.push("--save-dev"),r&&n.push(...r),this.runInNewStackTraceContext(()=>this.runCmd(n.join(" "),{user:(null==t?void 0:t.g)?"root":void 0}))}bunInstall(e,t){let n=["bun","install"],r=e?Array.isArray(e)?e:[e]:void 0;return(null==t?void 0:t.g)&&n.push("-g"),(null==t?void 0:t.dev)&&n.push("--dev"),r&&n.push(...r),this.runInNewStackTraceContext(()=>this.runCmd(n.join(" "),{user:(null==t?void 0:t.g)?"root":void 0}))}aptInstall(e,t){let n=Array.isArray(e)?e:[e];return this.runInNewStackTraceContext(()=>this.runCmd(["apt-get update",`DEBIAN_FRONTEND=noninteractive DEBCONF_NOWARNINGS=yes apt-get install -y ${(null==t?void 0:t.noInstallRecommends)?"--no-install-recommends ":""}${n.join(" ")}`],{user:"root"}))}addMcpServer(e){if("mcp-gateway"!==this.baseTemplate)throw new r8("MCP servers can only be added to mcp-gateway template",iK(2));let t=Array.isArray(e)?e:[e];return this.runInNewStackTraceContext(()=>this.runCmd(`mcp-gateway pull ${t.join(" ")}`,{user:"root"}))}gitClone(e,t,n){let r=["git","clone",e];return(null==n?void 0:n.branch)&&(r.push(`--branch ${n.branch}`),r.push("--single-branch")),(null==n?void 0:n.depth)&&r.push(`--depth ${n.depth}`),t&&r.push(t.toString()),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}setStartCmd(e,t){return this.startCmd=e,t instanceof i1?this.readyCmd=t.getCmd():this.readyCmd=t,this.collectStackTrace(),this}setReadyCmd(e){return e instanceof i1?this.readyCmd=e.getCmd():this.readyCmd=e,this.collectStackTrace(),this}setEnvs(e){return 0===Object.keys(e).length||(this.instructions.push({type:"ENV",args:Object.entries(e).flatMap(([e,t])=>[e,t]),force:this.forceNextLayer}),this.collectStackTrace()),this}skipCache(){return this.forceNextLayer=!0,this}betaDevContainerPrebuild(e){if("devcontainer"!==this.baseTemplate)throw new r8("Devcontainers can only used in the devcontainer template",iK(2));return this.runInNewStackTraceContext(()=>this.runCmd(`devcontainer build --workspace-folder ${e}`,{user:"root"}))}betaSetDevContainerStart(e){if("devcontainer"!==this.baseTemplate)throw new r8("Devcontainers can only used in the devcontainer template",iK(2));return this.runInNewStackTraceContext(()=>this.setStartCmd(`sudo devcontainer up --workspace-folder ${e} && sudo /prepare-exec.sh ${e} | sudo tee /devcontainer.sh > /dev/null && sudo chmod +x /devcontainer.sh && sudo touch /devcontainer.up`,i4("/devcontainer.up")))}collectStackTrace(e=3){return this.stackTracesEnabled&&(this.stackTracesOverride?this.stackTraces.push(this.stackTracesOverride):this.stackTraces.push(iK(e))),this}disableStackTrace(){return this.stackTracesEnabled=!1,this}enableStackTrace(){return this.stackTracesEnabled=!0,this}runInNewStackTraceContext(e){this.disableStackTrace();let t=e();return this.enableStackTrace(),this.collectStackTrace(4),t}runInStackTraceOverrideContext(e,t){this.stackTracesOverride=t;let n=e();return this.stackTracesOverride=void 0,n}async toJSON(e){let t=this.instructions;return e&&(t=await this.instructionsWithHashes()),JSON.stringify(this.serialize(t),void 0,2)}toDockerfile(){if(void 0!==this.baseTemplate)throw Error("Cannot convert template built from another template to Dockerfile. Templates based on other templates can only be built using the E2B API.");if(void 0===this.baseImage)throw Error("No base image specified for template");let e=`FROM ${this.baseImage}
`;for(let t of this.instructions){if("RUN"===t.type){e+=`RUN ${t.args[0]}
`;continue}if("COPY"===t.type){e+=`COPY ${t.args[0]} ${t.args[1]}
`;continue}if("ENV"===t.type){let n=[];for(let e=0;e<t.args.length;e+=2)n.push(`${t.args[e]}=${t.args[e+1]}`);e+=`ENV ${n.join(" ")}
`;continue}e+=`${t.type} ${t.args.join(" ")}
`}return this.startCmd&&(e+=`ENTRYPOINT ${this.startCmd}
`),e}async build(e,t){var n,r,i,a,s,o;t.skipCache&&(this.force=!0),null==(n=t.onBuildLogs)||n.call(t,new iD(new Date,"info",`Requesting build for template: ${t.alias}`));let{templateID:l,buildID:u}=await iJ(e,{alias:t.alias,cpuCount:null!=(r=t.cpuCount)?r:2,memoryMB:null!=(i=t.memoryMB)?i:1024});null==(a=t.onBuildLogs)||a.call(t,new iD(new Date,"info",`Template created with ID: ${l}, Build ID: ${u}`));let c=await this.instructionsWithHashes(),d=c.map(async(n,r)=>{var i,a,s,o;let u;if("COPY"!==n.type)return;let c=n.args.length>0?n.args[0]:null,d=null!=(i=n.filesHash)?i:null;if(null===c||null===d)throw Error("Source path and files hash are required");let f=n.forceUpload;r+1>=0&&r+1<this.stackTraces.length&&(u=this.stackTraces[r+1]);let{present:g,url:h}=await iH(e,{templateID:l,filesHash:d},u);f&&null!=h||!1===g&&null!=h?(await iz({fileName:c,fileContextPath:this.fileContextPath.toString(),url:h,ignorePatterns:[...this.fileIgnorePatterns,...iG(this.fileContextPath.toString())],resolveSymlinks:null!=(a=n.resolveSymlinks)&&a},u),null==(s=t.onBuildLogs)||s.call(t,new iD(new Date,"info",`Uploaded '${c}'`))):null==(o=t.onBuildLogs)||o.call(t,new iD(new Date,"info",`Skipping upload of '${c}', already cached`))});return await Promise.all(d),null==(s=t.onBuildLogs)||s.call(t,new iD(new Date,"info","All file uploads completed")),null==(o=t.onBuildLogs)||o.call(t,new iD(new Date,"info","Starting building...")),await iq(e,{templateID:l,buildID:u,template:this.serialize(c)}),{alias:t.alias,templateId:l,buildId:u}}async instructionsWithHashes(){return Promise.all(this.instructions.map(async(e,t)=>{var n;let r;if("COPY"!==e.type)return e;let i=e.args.length>0?e.args[0]:null,a=e.args.length>1?e.args[1]:null;if(null===i||null===a)throw Error("Source path and destination path are required");return t+1>=0&&t+1<this.stackTraces.length&&(r=this.stackTraces[t+1]),r_(rB({},e),rV({filesHash:await iW(i,a,this.fileContextPath.toString(),[...this.fileIgnorePatterns,..."browser"===rK?[]:iG(this.fileContextPath.toString())],null!=(n=e.resolveSymlinks)&&n,r)}))}))}serialize(e){let t={startCmd:this.startCmd,readyCmd:this.readyCmd,steps:e,force:this.force};return void 0!==this.baseImage&&(t.fromImage=this.baseImage),void 0!==this.baseTemplate&&(t.fromTemplate=this.baseTemplate),void 0!==this.registryConfig&&(t.fromImageRegistry=this.registryConfig),t}};function i8(e){return new i6(e)}i8.build=i6.build,i8.buildInBackground=i6.buildInBackground,i8.getBuildStatus=i6.getBuildStatus,i8.toJSON=i6.toJSON,i8.toDockerfile=i6.toDockerfile,e.s(["ALL_TRAFFIC",()=>iR,"ApiClient",()=>ii,"AuthenticationError",()=>r4,"BuildError",()=>r8,"CommandExitError",()=>iI,"ConnectionConfig",()=>is,"FileType",()=>iw,"FileUploadError",()=>r7,"FilesystemEventType",()=>iv,"InvalidArgumentError",()=>r2,"LogEntry",()=>iD,"LogEntryEnd",()=>iU,"LogEntryStart",()=>iF,"NotEnoughSpaceError",()=>r3,"NotFoundError",()=>r9,"RateLimitError",()=>r6,"ReadyCmd",()=>i1,"Sandbox",()=>iV,"SandboxError",()=>r0,"Template",()=>i8,"TemplateBase",()=>i6,"TemplateError",()=>r5,"TimeoutError",()=>r1,"default",()=>iV,"defaultBuildLogger",()=>ij,"getSignature",()=>il,"waitForFile",()=>i4,"waitForPort",()=>i2,"waitForProcess",()=>i9,"waitForTimeout",()=>i5,"waitForURL",()=>i3],921236);var i7=Object.defineProperty,ae=Object.defineProperties,at=Object.getOwnPropertyDescriptors,an=Object.getOwnPropertySymbols,ar=Object.prototype.hasOwnProperty,ai=Object.prototype.propertyIsEnumerable,aa=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),as=(e,t,n)=>t in e?i7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ao=(e,t)=>{for(var n in t||(t={}))ar.call(t,n)&&as(e,n,t[n]);if(an)for(var n of an(t))ai.call(t,n)&&as(e,n,t[n]);return e},al=function(e,t){this[0]=e,this[1]=t};async function au(e){if(!e.ok)switch(e.status){case 502:return new r1(`${await e.text()}: This error is likely due to sandbox timeout. You can modify the sandbox timeout by passing 'timeoutMs' when starting the sandbox or calling '.setTimeout' on the sandbox with the desired timeout.`);case 404:return new r9(await e.text());default:return new r0(`${e.status} ${e.statusText}`)}}var ac=class{constructor(e,t,n){this.name=e,this.value=t,this.traceback=n}},ad=class{constructor(e,t){this.isMainResult=t;const n=ao({},e);for(const e of(delete n.type,delete n.is_main_result,this.text=n.text,this.html=n.html,this.markdown=n.markdown,this.svg=n.svg,this.png=n.png,this.jpeg=n.jpeg,this.pdf=n.pdf,this.latex=n.latex,this.json=n.json,this.javascript=n.javascript,this.isMainResult=t,this.raw=n,this.data=n.data,this.chart=n.chart,this.extra={},Object.keys(n)))["plain","html","markdown","svg","png","jpeg","pdf","latex","json","javascript","data","chart","extra","text"].includes(e)||(this.extra[e]=n[e])}formats(){let e=[];for(let t of(this.html&&e.push("html"),this.markdown&&e.push("markdown"),this.svg&&e.push("svg"),this.png&&e.push("png"),this.jpeg&&e.push("jpeg"),this.pdf&&e.push("pdf"),this.latex&&e.push("latex"),this.json&&e.push("json"),this.javascript&&e.push("javascript"),this.data&&e.push("data"),Object.keys(this.extra)))e.push(t);return e}toJSON(){return ao({text:this.text,html:this.html,markdown:this.markdown,svg:this.svg,png:this.png,jpeg:this.jpeg,pdf:this.pdf,latex:this.latex,json:this.json,javascript:this.javascript},Object.keys(this.extra).length>0?{extra:this.extra}:{})}},af=class{constructor(e=[],t={stdout:[],stderr:[]},n,r){this.results=e,this.logs=t,this.error=n,this.executionCount=r}get text(){for(let e of this.results)if(e.isMainResult)return e.text}toJSON(){return{results:this.results,logs:this.logs,error:this.error}}};async function ag(e,t,n,r,i,a){let s=JSON.parse(t);switch(s.type){case"result":{let t=new ad(ae(ao({},s),at({type:void 0,is_main_result:void 0})),s.is_main_result);e.results.push(t),i&&await i(t);break}case"stdout":e.logs.stdout.push(s.text),n&&await n({error:!1,line:s.text,timestamp:1e3*new Date().getTime()});break;case"stderr":e.logs.stderr.push(s.text),r&&await r({error:!0,line:s.text,timestamp:1e3*new Date().getTime()});break;case"error":e.error=new ac(s.name,s.value,s.traceback),a&&await a(e.error);break;case"number_of_executions":e.executionCount=s.execution_count}}function ah(e){return e instanceof Error&&"AbortError"===e.name?new r1("Request timed out — the 'requestTimeoutMs' option can be used to increase this timeout"):e}var am=class extends iV{get jupyterUrl(){return`${this.connectionConfig.debug?"http":"https"}://${this.getHost(49999)}`}async runCode(e,t){var n,r,i;if((null==t?void 0:t.context)&&(null==t?void 0:t.language))throw new r2("You can provide context or language, but not both at the same time.");let a=new AbortController,s=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,o=s?setTimeout(()=>{a.abort()},s):void 0,l={"Content-Type":"application/json"};this.trafficAccessToken&&(l["E2B-Traffic-Access-Token"]=this.trafficAccessToken),this.envdAccessToken&&(l["X-Access-Token"]=this.envdAccessToken);try{let n=await fetch(`${this.jupyterUrl}/execute`,{method:"POST",headers:l,body:JSON.stringify({code:e,context_id:null==(r=null==t?void 0:t.context)?void 0:r.id,language:null==t?void 0:t.language,env_vars:null==t?void 0:t.envs}),signal:a.signal,keepalive:!0}),s=await au(n);if(s)throw s;if(!n.body)throw Error(`Not response body: ${n.statusText} ${await (null==n?void 0:n.text())}`);clearTimeout(o);let g=null!=(i=null==t?void 0:t.timeoutMs)?i:6e4,h=g?setTimeout(()=>{a.abort()},g):void 0,m=new af;try{try{let e,r,i;for(var u,c,d,f=(r=(e=function(e){var t,n,r,i;return t=function*(){let t=e.getReader(),n="";try{for(;;){let{done:e,value:r}=yield new al(t.read());if(void 0!==r&&(n+=new TextDecoder().decode(r)),e){n.length>0&&(yield n);break}let i=-1;do i=n.indexOf("\n"),-1!==i&&(yield n.slice(0,i),n=n.slice(i+1));while(-1!==i)}}finally{t.releaseLock()}},n=(e,r,i,a)=>{try{var s=t[e](r),o=(r=s.value)instanceof al,l=s.done;Promise.resolve(o?r[0]:r).then(t=>o?n("return"===e?e:"next",r[1]?{done:t.done,value:t.value}:t,i,a):i({value:t,done:l})).catch(e=>n("throw",e,i,a))}catch(e){a(e)}},r=e=>i[e]=t=>new Promise((r,i)=>n(e,t,r,i)),i={},t=t.apply(this,null),i[aa("asyncIterator")]=()=>i,r("next"),r("throw"),r("return"),i}(n.body))[aa("asyncIterator")])?r.call(e):(e=e[aa("iterator")](),r={},(i=(t,n)=>(n=e[t])&&(r[t]=t=>new Promise((r,i,a)=>(a=(t=n.call(e,t)).done,Promise.resolve(t.value).then(e=>r({value:e,done:a}),i)))))("next"),i("return"),r);u=!(c=await f.next()).done;u=!1){let e=c.value;await ag(m,e,null==t?void 0:t.onStdout,null==t?void 0:t.onStderr,null==t?void 0:t.onResult,null==t?void 0:t.onError)}}catch(e){d=[e]}finally{try{u&&(c=f.return)&&await c.call(f)}finally{if(d)throw d[0]}}}catch(e){throw e instanceof Error&&"AbortError"===e.name?new r1("Execution timed out — the 'timeoutMs' option can be used to increase this timeout"):e}finally{clearTimeout(h)}return m}catch(e){throw ah(e)}}async createCodeContext(e){try{let t={"Content-Type":"application/json"};this.trafficAccessToken&&(t["E2B-Traffic-Access-Token"]=this.trafficAccessToken);let n=await fetch(`${this.jupyterUrl}/contexts`,{method:"POST",headers:t,body:JSON.stringify({language:null==e?void 0:e.language,cwd:null==e?void 0:e.cwd}),keepalive:!0,signal:this.connectionConfig.getSignal(null==e?void 0:e.requestTimeoutMs)}),r=await au(n);if(r)throw r;return await n.json()}catch(e){throw ah(e)}}async removeCodeContext(e){try{let t="string"==typeof e?e:e.id,n={"Content-Type":"application/json"};this.trafficAccessToken&&(n["E2B-Traffic-Access-Token"]=this.trafficAccessToken);let r=await fetch(`${this.jupyterUrl}/contexts/${t}`,{method:"DELETE",headers:n,keepalive:!0,signal:this.connectionConfig.getSignal(this.connectionConfig.requestTimeoutMs)}),i=await au(r);if(i)throw i}catch(e){throw ah(e)}}async listCodeContexts(){try{let e={"Content-Type":"application/json"};this.trafficAccessToken&&(e["E2B-Traffic-Access-Token"]=this.trafficAccessToken);let t=await fetch(`${this.jupyterUrl}/contexts`,{method:"GET",headers:e,keepalive:!0,signal:this.connectionConfig.getSignal(this.connectionConfig.requestTimeoutMs)}),n=await au(t);if(n)throw n;return await t.json()}catch(e){throw ah(e)}}async restartCodeContext(e){try{let t="string"==typeof e?e:e.id,n={"Content-Type":"application/json"};this.trafficAccessToken&&(n["E2B-Traffic-Access-Token"]=this.trafficAccessToken);let r=await fetch(`${this.jupyterUrl}/contexts/${t}/restart`,{method:"POST",headers:n,keepalive:!0,signal:this.connectionConfig.getSignal(this.connectionConfig.requestTimeoutMs)}),i=await au(r);if(i)throw i}catch(e){throw ah(e)}}};am.defaultTemplate="code-interpreter-v1",e.s(["Sandbox",()=>am,"default",()=>am],37119),e.i(37119),e.i(921236),e.s(["ALL_TRAFFIC",()=>iR,"ApiClient",()=>ii,"AuthenticationError",()=>r4,"BuildError",()=>r8,"CommandExitError",()=>iI,"ConnectionConfig",()=>is,"FileType",()=>iw,"FileUploadError",()=>r7,"FilesystemEventType",()=>iv,"InvalidArgumentError",()=>r2,"LogEntry",()=>iD,"LogEntryEnd",()=>iU,"LogEntryStart",()=>iF,"NotEnoughSpaceError",()=>r3,"NotFoundError",()=>r9,"RateLimitError",()=>r6,"ReadyCmd",()=>i1,"Sandbox",()=>am,"SandboxError",()=>r0,"Template",()=>i8,"TemplateBase",()=>i6,"TemplateError",()=>r5,"TimeoutError",()=>r1,"default",()=>am,"defaultBuildLogger",()=>ij,"getSignature",()=>il,"waitForFile",()=>i4,"waitForPort",()=>i2,"waitForProcess",()=>i9,"waitForTimeout",()=>i5,"waitForURL",()=>i3],279094)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ba2f6dcf._.js.map