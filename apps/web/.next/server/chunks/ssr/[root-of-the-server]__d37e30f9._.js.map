{"version":3,"sources":["../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/maximize-2.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/globe.ts","../../../../../../apps/web/src/lib/ai/icons.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/wind.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/cpu.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/square.ts","../../../../../../node_modules/.bun/command-score%400.1.2/node_modules/command-score/index.js","../../../../../../node_modules/.bun/%40radix-ui%2Breact-hover-card%401.1.15%2Bf178f9b1194b24ba/node_modules/%40radix-ui/react-hover-card/dist/index.mjs","../../../../../../apps/web/src/components/ui/hover-card.tsx","../../../../../../apps/web/src/components/chat/QuickModelSwitcher.tsx","../../../../../../apps/web/src/components/chat/UpgradeRequestDialog.tsx","../../../../../../apps/web/src/lib/ai/categories.ts","../../../../../../apps/web/src/components/chat/CategorySidebar.tsx","../../../../../../apps/web/src/components/chat/model-metrics-badge.tsx","../../../../../../apps/web/src/components/chat/ModelDetailCard.tsx","../../../../../../apps/web/src/components/chat/ModelSelectorItem.tsx","../../../../../../apps/web/src/components/chat/SelectedModelsChips.tsx","../../../../../../apps/web/src/hooks/useFavoriteModels.ts","../../../../../../apps/web/src/lib/ai/sortModels.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/square-function.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/gift.ts","../../../../../../apps/web/src/hooks/useLazyMathRenderer.ts","../../../../../../apps/web/src/hooks/useMathAccessibility.ts","../../../../../../apps/web/src/lib/analytics/mathMetrics.ts","../../../../../../apps/web/src/lib/math/descriptions.ts","../../../../../../apps/web/src/hooks/useMathCopyButtons.ts","../../../../../../apps/web/src/hooks/useStreamBuffer.ts","../../../../../../apps/web/src/lib/utils/markdownTokens.ts","../../../../../../node_modules/.bun/katex%400.16.27/node_modules/katex/dist/contrib/mhchem.mjs","../../../../../../node_modules/.bun/streamdown%401.6.10%2B8a02d65a0c1394a2/node_modules/streamdown/dist/index.js","../../../../../../apps/web/src/lib/highlighter.ts","../../../../../../apps/web/src/components/chat/ClientCodeControls.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/unfold-horizontal.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/text-wrap.ts","../../../../../../apps/web/src/components/chat/CodeBlock.tsx","../../../../../../apps/web/src/components/chat/MathErrorBoundary.tsx","../../../../../../apps/web/src/components/chat/MathSkeleton.tsx","../../../../../../apps/web/src/components/chat/MermaidRenderer.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/minimize-2.ts","../../../../../../apps/web/src/components/chat/MarkdownContent.tsx","../../../../../../apps/web/src/components/chat/ModelRecommendationBanner.tsx","../../../../../../apps/web/src/contexts/TTSContext.tsx","../../../../../../apps/web/src/lib/utils/ttsUtils.ts","../../../../../../apps/web/src/hooks/useTTSAudioPlayer.ts","../../../../../../apps/web/src/lib/utils/markdownToSpeech.ts","../../../../../../apps/web/src/hooks/useMessageKeyboardShortcuts.ts","../../../../../../apps/web/src/lib/utils/formatMetrics.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/file-code.ts","../../../../../../apps/web/src/components/chat/ArtifactList.tsx","../../../../../../apps/web/src/components/chat/ArtifactCard.tsx","../../../../../../apps/web/src/components/chat/AttachmentIndicators.tsx","../../../../../../apps/web/src/components/chat/ImageThumbnail.tsx","../../../../../../apps/web/src/components/chat/ImageGallery.tsx","../../../../../../apps/web/src/components/chat/ImageLightbox.tsx","../../../../../../apps/web/src/components/chat/AttachmentRenderer.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/minus.ts","../../../../../../apps/web/src/components/chat/ToolCallDisplay.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/CreateDocumentRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/ResolveConflictRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/EnterDocumentModeRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/ExitDocumentModeRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/CodeExecutionRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/FileDocumentRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/ProjectContextRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/QueryHistoryRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SaveMemoryRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SearchAllRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SearchFilesRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SearchMemoriesRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SearchNotesRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/CalculatorRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/SearchTasksRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/TaskManagerRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/DateTimeRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/UrlReaderRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/WeatherRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/DefaultToolRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/DeleteMemoryRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/ReadDocumentRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/UpdateDocumentRenderer.tsx","../../../../../../apps/web/src/components/chat/toolRenderers/WebSearchRenderer.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/folder-tree.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/bookmark-plus.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/calculator.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/cloud.ts","../../../../../../apps/web/src/components/chat/toolRenderers/types.ts","../../../../../../apps/web/src/components/chat/toolRenderers/index.ts","../../../../../../apps/web/src/components/chat/InlineToolCallContent.tsx","../../../../../../apps/web/src/components/chat/BookmarkButton.tsx","../../../../../../apps/web/src/components/chat/MessageActionsMenu.tsx","../../../../../../apps/web/src/components/chat/MessageActionsMenuMobile.tsx","../../../../../../apps/web/src/components/chat/TTSButton.tsx","../../../../../../apps/web/src/components/chat/MessageActions.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/volume-x.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/bookmark-check.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/volume-2.ts","../../../../../../apps/web/src/components/chat/MessageBranchIndicator.tsx","../../../../../../apps/web/src/hooks/useSyncedScroll.ts","../../../../../../apps/web/src/components/chat/VotingControls.tsx","../../../../../../apps/web/src/components/chat/ComparisonPanel.tsx","../../../../../../apps/web/src/components/chat/ConsolidateDialog.tsx","../../../../../../apps/web/src/components/chat/ComparisonView.tsx","../../../../../../apps/web/src/components/chat/MessageConsolidationToggle.tsx","../../../../../../apps/web/src/components/chat/MessageEditMode.tsx","../../../../../../apps/web/src/components/chat/MessageLoadingState.tsx","../../../../../../apps/web/src/components/chat/MessageNotesIndicator.tsx","../../../../../../apps/web/src/components/chat/MessageStatsBadges.tsx","../../../../../../apps/web/src/components/chat/ReasoningBlock.tsx","../../../../../../apps/web/src/components/chat/SourceList.tsx","../../../../../../apps/web/src/components/chat/ChatMessage.tsx"],"sourcesContent":["import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M15 3h6v6', key: '1q9fwt' }],\n  ['path', { d: 'm21 3-7 7', key: '1l2asr' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M9 21H3v-6', key: 'wtvkvv' }],\n];\n\n/**\n * @component @name Maximize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUgM2g2djYiIC8+CiAgPHBhdGggZD0ibTIxIDMtNyA3IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNOSAyMUgzdi02IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/maximize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Maximize2 = createLucideIcon('maximize-2', __iconNode);\n\nexport default Maximize2;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['circle', { cx: '12', cy: '12', r: '10', key: '1mglay' }],\n  ['path', { d: 'M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20', key: '13o1zl' }],\n  ['path', { d: 'M2 12h20', key: '9i4pu4' }],\n];\n\n/**\n * @component @name Globe\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSIxMCIgLz4KICA8cGF0aCBkPSJNMTIgMmExNC41IDE0LjUgMCAwIDAgMCAyMCAxNC41IDE0LjUgMCAwIDAgMC0yMCIgLz4KICA8cGF0aCBkPSJNMiAxMmgyMCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/globe\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Globe = createLucideIcon('globe', __iconNode);\n\nexport default Globe;\n","import type { LucideIcon } from \"lucide-react\";\nimport {\n  Bot,\n  Brain,\n  Cpu,\n  Eye,\n  Globe,\n  Sparkles,\n  Stars,\n  Wind,\n  Zap,\n} from \"lucide-react\";\nimport { getModelConfig } from \"./utils\";\n\n/**\n * Get appropriate icon for a model based on its capabilities\n * - Vision models: Eye icon\n * - Thinking/reasoning models: Sparkles icon\n * - Default (fast models): Zap icon\n */\nexport function getModelIcon(modelId: string): LucideIcon {\n  const config = getModelConfig(modelId);\n  if (!config) return Sparkles;\n\n  if (config.capabilities.includes(\"vision\")) return Eye;\n  if (\n    config.capabilities.includes(\"thinking\") ||\n    config.capabilities.includes(\"extended-thinking\")\n  )\n    return Sparkles;\n\n  return Zap; // Default for fast models\n}\n\n/**\n * Get icon for a provider\n * Returns appropriate Lucide icon based on provider name\n */\nexport function getProviderIcon(provider: string): LucideIcon {\n  const icons: Record<string, LucideIcon> = {\n    openai: Sparkles, // OpenAI brand\n    anthropic: Zap, // Claude lightning\n    google: Stars, // Google Gemini\n    xai: Brain, // Grok/xAI thinking\n    perplexity: Globe, // Web search\n    groq: Cpu, // Hardware acceleration\n    cerebras: Cpu, // Hardware acceleration\n    minimax: Bot, // Generic AI\n    deepseek: Brain, // Deep reasoning\n    kimi: Bot, // Generic AI\n    zai: Brain, // AI thinking\n    meta: Bot, // Meta AI (Llama)\n    mistral: Wind, // Mistral (wind brand)\n    alibaba: Bot, // Generic AI\n    zhipu: Bot, // Generic AI\n  };\n\n  return icons[provider] || Sparkles; // Default fallback\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12.8 19.6A2 2 0 1 0 14 16H2', key: '148xed' }],\n  ['path', { d: 'M17.5 8a2.5 2.5 0 1 1 2 4H2', key: '1u4tom' }],\n  ['path', { d: 'M9.8 4.4A2 2 0 1 1 11 8H2', key: '75valh' }],\n];\n\n/**\n * @component @name Wind\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIuOCAxOS42QTIgMiAwIDEgMCAxNCAxNkgyIiAvPgogIDxwYXRoIGQ9Ik0xNy41IDhhMi41IDIuNSAwIDEgMSAyIDRIMiIgLz4KICA8cGF0aCBkPSJNOS44IDQuNEEyIDIgMCAxIDEgMTEgOEgyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/wind\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Wind = createLucideIcon('wind', __iconNode);\n\nexport default Wind;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M12 20v2', key: '1lh1kg' }],\n  ['path', { d: 'M12 2v2', key: 'tus03m' }],\n  ['path', { d: 'M17 20v2', key: '1rnc9c' }],\n  ['path', { d: 'M17 2v2', key: '11trls' }],\n  ['path', { d: 'M2 12h2', key: '1t8f8n' }],\n  ['path', { d: 'M2 17h2', key: '7oei6x' }],\n  ['path', { d: 'M2 7h2', key: 'asdhe0' }],\n  ['path', { d: 'M20 12h2', key: '1q8mjw' }],\n  ['path', { d: 'M20 17h2', key: '1fpfkl' }],\n  ['path', { d: 'M20 7h2', key: '1o8tra' }],\n  ['path', { d: 'M7 20v2', key: '4gnj0m' }],\n  ['path', { d: 'M7 2v2', key: '1i4yhu' }],\n  ['rect', { x: '4', y: '4', width: '16', height: '16', rx: '2', key: '1vbyd7' }],\n  ['rect', { x: '8', y: '8', width: '8', height: '8', rx: '1', key: 'z9xiuo' }],\n];\n\n/**\n * @component @name Cpu\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTIgMjB2MiIgLz4KICA8cGF0aCBkPSJNMTIgMnYyIiAvPgogIDxwYXRoIGQ9Ik0xNyAyMHYyIiAvPgogIDxwYXRoIGQ9Ik0xNyAydjIiIC8+CiAgPHBhdGggZD0iTTIgMTJoMiIgLz4KICA8cGF0aCBkPSJNMiAxN2gyIiAvPgogIDxwYXRoIGQ9Ik0yIDdoMiIgLz4KICA8cGF0aCBkPSJNMjAgMTJoMiIgLz4KICA8cGF0aCBkPSJNMjAgMTdoMiIgLz4KICA8cGF0aCBkPSJNMjAgN2gyIiAvPgogIDxwYXRoIGQ9Ik03IDIwdjIiIC8+CiAgPHBhdGggZD0iTTcgMnYyIiAvPgogIDxyZWN0IHg9IjQiIHk9IjQiIHdpZHRoPSIxNiIgaGVpZ2h0PSIxNiIgcng9IjIiIC8+CiAgPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjgiIGhlaWdodD0iOCIgcng9IjEiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/cpu\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Cpu = createLucideIcon('cpu', __iconNode);\n\nexport default Cpu;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', key: 'afitv7' }],\n];\n\n/**\n * @component @name Square\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/square\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Square = createLucideIcon('square', __iconNode);\n\nexport default Square;\n","// The scores are arranged so that a continuous match of characters will\n// result in a total score of 1.\n//\n// The best case, this character is a match, and either this is the start\n// of the string, or the previous character was also a match.\nvar SCORE_CONTINUE_MATCH = 1,\n\n    // A new match at the start of a word scores better than a new match\n    // elsewhere as it's more likely that the user will type the starts\n    // of fragments.\n    // (Our notion of word includes CamelCase and hypen-separated, etc.)\n    SCORE_WORD_JUMP = 0.9,\n\n    // Any other match isn't ideal, but we include it for completeness.\n    SCORE_CHARACTER_JUMP = 0.3,\n\n    // If the user transposed two letters, it should be signficantly penalized.\n    //\n    // i.e. \"ouch\" is more likely than \"curtain\" when \"uc\" is typed.\n    SCORE_TRANSPOSITION = 0.1,\n\n    // If the user jumped to half-way through a subsequent word, it should be\n    // very significantly penalized.\n    //\n    // i.e. \"loes\" is very unlikely to match \"loch ness\".\n    // NOTE: this is set to 0 for superhuman right now, but we may want to revisit.\n    SCORE_LONG_JUMP = 0,\n\n    // The goodness of a match should decay slightly with each missing\n    // character.\n    //\n    // i.e. \"bad\" is more likely than \"bard\" when \"bd\" is typed.\n    //\n    // This will not change the order of suggestions based on SCORE_* until\n    // 100 characters are inserted between matches.\n    PENALTY_SKIPPED = 0.999,\n\n    // The goodness of an exact-case match should be higher than a\n    // case-insensitive match by a small amount.\n    //\n    // i.e. \"HTML\" is more likely than \"haml\" when \"HM\" is typed.\n    //\n    // This will not change the order of suggestions based on SCORE_* until\n    // 1000 characters are inserted between matches.\n    PENALTY_CASE_MISMATCH = 0.9999,\n\n    // If the word has more characters than the user typed, it should\n    // be penalised slightly.\n    //\n    // i.e. \"html\" is more likely than \"html5\" if I type \"html\".\n    //\n    // However, it may well be the case that there's a sensible secondary\n    // ordering (like alphabetical) that it makes sense to rely on when\n    // there are many prefix matches, so we don't make the penalty increase\n    // with the number of tokens.\n    PENALTY_NOT_COMPLETE = 0.99;\n\nvar IS_GAP_REGEXP = /[\\\\\\/\\-_+.# \\t\"@\\[\\(\\{&]/,\n    COUNT_GAPS_REGEXP = /[\\\\\\/\\-_+.# \\t\"@\\[\\(\\{&]/g;\n\nfunction commandScoreInner(string, abbreviation, lowerString, lowerAbbreviation, stringIndex, abbreviationIndex) {\n\n    if (abbreviationIndex === abbreviation.length) {\n        if (stringIndex === string.length) {\n            return SCORE_CONTINUE_MATCH;\n\n        }\n        return PENALTY_NOT_COMPLETE;\n    }\n\n    var abbreviationChar = lowerAbbreviation.charAt(abbreviationIndex);\n    var index = lowerString.indexOf(abbreviationChar, stringIndex);\n    var highScore = 0;\n\n    var score, transposedScore, wordBreaks;\n\n    while (index >= 0) {\n\n        score = commandScoreInner(string, abbreviation, lowerString, lowerAbbreviation, index + 1, abbreviationIndex + 1);\n        if (score > highScore) {\n            if (index === stringIndex) {\n                score *= SCORE_CONTINUE_MATCH;\n            } else if (IS_GAP_REGEXP.test(string.charAt(index - 1))) {\n                score *= SCORE_WORD_JUMP;\n                wordBreaks = string.slice(stringIndex, index - 1).match(COUNT_GAPS_REGEXP);\n                if (wordBreaks && stringIndex > 0) {\n                    score *= Math.pow(PENALTY_SKIPPED, wordBreaks.length);\n                }\n            } else if (IS_GAP_REGEXP.test(string.slice(stringIndex, index - 1))) {\n                score *= SCORE_LONG_JUMP;\n                if (stringIndex > 0) {\n                    score *= Math.pow(PENALTY_SKIPPED, index - stringIndex);\n                }\n            } else {\n                score *= SCORE_CHARACTER_JUMP;\n                if (stringIndex > 0) {\n                    score *= Math.pow(PENALTY_SKIPPED, index - stringIndex);\n                }\n            }\n\n            if (string.charAt(index) !== abbreviation.charAt(abbreviationIndex)) {\n                score *= PENALTY_CASE_MISMATCH;\n            }\n\n        }\n\n        if (score < SCORE_TRANSPOSITION &&\n                lowerString.charAt(index - 1) === lowerAbbreviation.charAt(abbreviationIndex + 1) &&\n                lowerString.charAt(index - 1) !== lowerAbbreviation.charAt(abbreviationIndex)) {\n            transposedScore = commandScoreInner(string, abbreviation, lowerString, lowerAbbreviation, index + 1, abbreviationIndex + 2);\n\n            if (transposedScore * SCORE_TRANSPOSITION > score) {\n                score = transposedScore * SCORE_TRANSPOSITION;\n            }\n        }\n\n        if (score > highScore) {\n            highScore = score;\n        }\n\n        index = lowerString.indexOf(abbreviationChar, index + 1);\n    }\n\n    return highScore;\n}\n\nfunction commandScore(string, abbreviation) {\n    /* NOTE:\n     * in the original, we used to do the lower-casing on each recursive call, but this meant that toLowerCase()\n     * was the dominating cost in the algorithm, passing both is a little ugly, but considerably faster.\n     */\n    return commandScoreInner(string, abbreviation, string.toLowerCase(), abbreviation.toLowerCase(), 0, 0);\n}\n\nmodule.exports = commandScore;\n","\"use client\";\n\n// src/hover-card.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport * as PopperPrimitive from \"@radix-ui/react-popper\";\nimport { createPopperScope } from \"@radix-ui/react-popper\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { jsx } from \"react/jsx-runtime\";\nvar originalBodyUserSelect;\nvar HOVERCARD_NAME = \"HoverCard\";\nvar [createHoverCardContext, createHoverCardScope] = createContextScope(HOVERCARD_NAME, [\n  createPopperScope\n]);\nvar usePopperScope = createPopperScope();\nvar [HoverCardProvider, useHoverCardContext] = createHoverCardContext(HOVERCARD_NAME);\nvar HoverCard = (props) => {\n  const {\n    __scopeHoverCard,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    openDelay = 700,\n    closeDelay = 300\n  } = props;\n  const popperScope = usePopperScope(__scopeHoverCard);\n  const openTimerRef = React.useRef(0);\n  const closeTimerRef = React.useRef(0);\n  const hasSelectionRef = React.useRef(false);\n  const isPointerDownOnContentRef = React.useRef(false);\n  const [open, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen ?? false,\n    onChange: onOpenChange,\n    caller: HOVERCARD_NAME\n  });\n  const handleOpen = React.useCallback(() => {\n    clearTimeout(closeTimerRef.current);\n    openTimerRef.current = window.setTimeout(() => setOpen(true), openDelay);\n  }, [openDelay, setOpen]);\n  const handleClose = React.useCallback(() => {\n    clearTimeout(openTimerRef.current);\n    if (!hasSelectionRef.current && !isPointerDownOnContentRef.current) {\n      closeTimerRef.current = window.setTimeout(() => setOpen(false), closeDelay);\n    }\n  }, [closeDelay, setOpen]);\n  const handleDismiss = React.useCallback(() => setOpen(false), [setOpen]);\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(openTimerRef.current);\n      clearTimeout(closeTimerRef.current);\n    };\n  }, []);\n  return /* @__PURE__ */ jsx(\n    HoverCardProvider,\n    {\n      scope: __scopeHoverCard,\n      open,\n      onOpenChange: setOpen,\n      onOpen: handleOpen,\n      onClose: handleClose,\n      onDismiss: handleDismiss,\n      hasSelectionRef,\n      isPointerDownOnContentRef,\n      children: /* @__PURE__ */ jsx(PopperPrimitive.Root, { ...popperScope, children })\n    }\n  );\n};\nHoverCard.displayName = HOVERCARD_NAME;\nvar TRIGGER_NAME = \"HoverCardTrigger\";\nvar HoverCardTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeHoverCard, ...triggerProps } = props;\n    const context = useHoverCardContext(TRIGGER_NAME, __scopeHoverCard);\n    const popperScope = usePopperScope(__scopeHoverCard);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Anchor, { asChild: true, ...popperScope, children: /* @__PURE__ */ jsx(\n      Primitive.a,\n      {\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        ...triggerProps,\n        ref: forwardedRef,\n        onPointerEnter: composeEventHandlers(props.onPointerEnter, excludeTouch(context.onOpen)),\n        onPointerLeave: composeEventHandlers(props.onPointerLeave, excludeTouch(context.onClose)),\n        onFocus: composeEventHandlers(props.onFocus, context.onOpen),\n        onBlur: composeEventHandlers(props.onBlur, context.onClose),\n        onTouchStart: composeEventHandlers(props.onTouchStart, (event) => event.preventDefault())\n      }\n    ) });\n  }\n);\nHoverCardTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"HoverCardPortal\";\nvar [PortalProvider, usePortalContext] = createHoverCardContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar HoverCardPortal = (props) => {\n  const { __scopeHoverCard, forceMount, children, container } = props;\n  const context = useHoverCardContext(PORTAL_NAME, __scopeHoverCard);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeHoverCard, forceMount, children: /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children }) }) });\n};\nHoverCardPortal.displayName = PORTAL_NAME;\nvar CONTENT_NAME = \"HoverCardContent\";\nvar HoverCardContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeHoverCard);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useHoverCardContext(CONTENT_NAME, props.__scopeHoverCard);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(\n      HoverCardContentImpl,\n      {\n        \"data-state\": context.open ? \"open\" : \"closed\",\n        ...contentProps,\n        onPointerEnter: composeEventHandlers(props.onPointerEnter, excludeTouch(context.onOpen)),\n        onPointerLeave: composeEventHandlers(props.onPointerLeave, excludeTouch(context.onClose)),\n        ref: forwardedRef\n      }\n    ) });\n  }\n);\nHoverCardContent.displayName = CONTENT_NAME;\nvar HoverCardContentImpl = React.forwardRef((props, forwardedRef) => {\n  const {\n    __scopeHoverCard,\n    onEscapeKeyDown,\n    onPointerDownOutside,\n    onFocusOutside,\n    onInteractOutside,\n    ...contentProps\n  } = props;\n  const context = useHoverCardContext(CONTENT_NAME, __scopeHoverCard);\n  const popperScope = usePopperScope(__scopeHoverCard);\n  const ref = React.useRef(null);\n  const composedRefs = useComposedRefs(forwardedRef, ref);\n  const [containSelection, setContainSelection] = React.useState(false);\n  React.useEffect(() => {\n    if (containSelection) {\n      const body = document.body;\n      originalBodyUserSelect = body.style.userSelect || body.style.webkitUserSelect;\n      body.style.userSelect = \"none\";\n      body.style.webkitUserSelect = \"none\";\n      return () => {\n        body.style.userSelect = originalBodyUserSelect;\n        body.style.webkitUserSelect = originalBodyUserSelect;\n      };\n    }\n  }, [containSelection]);\n  React.useEffect(() => {\n    if (ref.current) {\n      const handlePointerUp = () => {\n        setContainSelection(false);\n        context.isPointerDownOnContentRef.current = false;\n        setTimeout(() => {\n          const hasSelection = document.getSelection()?.toString() !== \"\";\n          if (hasSelection) context.hasSelectionRef.current = true;\n        });\n      };\n      document.addEventListener(\"pointerup\", handlePointerUp);\n      return () => {\n        document.removeEventListener(\"pointerup\", handlePointerUp);\n        context.hasSelectionRef.current = false;\n        context.isPointerDownOnContentRef.current = false;\n      };\n    }\n  }, [context.isPointerDownOnContentRef, context.hasSelectionRef]);\n  React.useEffect(() => {\n    if (ref.current) {\n      const tabbables = getTabbableNodes(ref.current);\n      tabbables.forEach((tabbable) => tabbable.setAttribute(\"tabindex\", \"-1\"));\n    }\n  });\n  return /* @__PURE__ */ jsx(\n    DismissableLayer,\n    {\n      asChild: true,\n      disableOutsidePointerEvents: false,\n      onInteractOutside,\n      onEscapeKeyDown,\n      onPointerDownOutside,\n      onFocusOutside: composeEventHandlers(onFocusOutside, (event) => {\n        event.preventDefault();\n      }),\n      onDismiss: context.onDismiss,\n      children: /* @__PURE__ */ jsx(\n        PopperPrimitive.Content,\n        {\n          ...popperScope,\n          ...contentProps,\n          onPointerDown: composeEventHandlers(contentProps.onPointerDown, (event) => {\n            if (event.currentTarget.contains(event.target)) {\n              setContainSelection(true);\n            }\n            context.hasSelectionRef.current = false;\n            context.isPointerDownOnContentRef.current = true;\n          }),\n          ref: composedRefs,\n          style: {\n            ...contentProps.style,\n            userSelect: containSelection ? \"text\" : void 0,\n            // Safari requires prefix\n            WebkitUserSelect: containSelection ? \"text\" : void 0,\n            // re-namespace exposed content custom properties\n            ...{\n              \"--radix-hover-card-content-transform-origin\": \"var(--radix-popper-transform-origin)\",\n              \"--radix-hover-card-content-available-width\": \"var(--radix-popper-available-width)\",\n              \"--radix-hover-card-content-available-height\": \"var(--radix-popper-available-height)\",\n              \"--radix-hover-card-trigger-width\": \"var(--radix-popper-anchor-width)\",\n              \"--radix-hover-card-trigger-height\": \"var(--radix-popper-anchor-height)\"\n            }\n          }\n        }\n      )\n    }\n  );\n});\nvar ARROW_NAME = \"HoverCardArrow\";\nvar HoverCardArrow = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeHoverCard, ...arrowProps } = props;\n    const popperScope = usePopperScope(__scopeHoverCard);\n    return /* @__PURE__ */ jsx(PopperPrimitive.Arrow, { ...popperScope, ...arrowProps, ref: forwardedRef });\n  }\n);\nHoverCardArrow.displayName = ARROW_NAME;\nfunction excludeTouch(eventHandler) {\n  return (event) => event.pointerType === \"touch\" ? void 0 : eventHandler();\n}\nfunction getTabbableNodes(container) {\n  const nodes = [];\n  const walker = document.createTreeWalker(container, NodeFilter.SHOW_ELEMENT, {\n    acceptNode: (node) => {\n      return node.tabIndex >= 0 ? NodeFilter.FILTER_ACCEPT : NodeFilter.FILTER_SKIP;\n    }\n  });\n  while (walker.nextNode()) nodes.push(walker.currentNode);\n  return nodes;\n}\nvar Root2 = HoverCard;\nvar Trigger = HoverCardTrigger;\nvar Portal = HoverCardPortal;\nvar Content2 = HoverCardContent;\nvar Arrow2 = HoverCardArrow;\nexport {\n  Arrow2 as Arrow,\n  Content2 as Content,\n  HoverCard,\n  HoverCardArrow,\n  HoverCardContent,\n  HoverCardPortal,\n  HoverCardTrigger,\n  Portal,\n  Root2 as Root,\n  Trigger,\n  createHoverCardScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\";\nimport type * as React from \"react\";\n\nimport { cn } from \"@/lib/utils\";\n\nfunction HoverCard({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Root>) {\n  return <HoverCardPrimitive.Root data-slot=\"hover-card\" {...props} />;\n}\n\nfunction HoverCardTrigger({\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Trigger>) {\n  return (\n    <HoverCardPrimitive.Trigger data-slot=\"hover-card-trigger\" {...props} />\n  );\n}\n\nfunction HoverCardContent({\n  className,\n  align = \"center\",\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof HoverCardPrimitive.Content>) {\n  return (\n    <HoverCardPrimitive.Portal data-slot=\"hover-card-portal\">\n      <HoverCardPrimitive.Content\n        data-slot=\"hover-card-content\"\n        align={align}\n        sideOffset={sideOffset}\n        className={cn(\n          \"bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-64 origin-(--radix-hover-card-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden\",\n          className,\n        )}\n        {...props}\n      />\n    </HoverCardPrimitive.Portal>\n  );\n}\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent };\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport commandScore from \"command-score\";\nimport { useQuery } from \"convex/react\";\nimport { ChevronRight, Search } from \"lucide-react\";\nimport { useEffect, useMemo, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  CommandDialog,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandList,\n  CommandSeparator,\n} from \"@/components/ui/command\";\nimport { useFavoriteModels } from \"@/hooks/useFavoriteModels\";\nimport { useRecentModels } from \"@/hooks/useRecentModels\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { MODEL_CATEGORIES } from \"@/lib/ai/categories\";\nimport { sortModels } from \"@/lib/ai/sortModels\";\nimport { getModelsByProvider, type ModelConfig } from \"@/lib/ai/utils\";\nimport { analytics } from \"@/lib/analytics\";\nimport { CategorySidebar } from \"./CategorySidebar\";\nimport { ModelSelectorItem } from \"./ModelSelectorItem\";\nimport { SelectedModelsChips } from \"./SelectedModelsChips\";\nimport { UpgradeRequestDialog } from \"./UpgradeRequestDialog\";\n\ninterface QuickModelSwitcherProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  currentModel: string;\n  onSelectModel: (modelId: string) => void;\n  mode?: \"single\" | \"multiple\";\n  selectedModels?: string[];\n  onSelectedModelsChange?: (models: string[]) => void;\n  showTrigger?: boolean;\n}\n\nexport function QuickModelSwitcher({\n  open,\n  onOpenChange,\n  currentModel,\n  onSelectModel,\n  mode = \"single\",\n  selectedModels = [],\n  onSelectedModelsChange,\n  showTrigger = false,\n}: QuickModelSwitcherProps) {\n  const modelsByProvider = getModelsByProvider();\n  const { favorites, toggleFavorite, isFavorite } = useFavoriteModels();\n  const { recents, addRecent } = useRecentModels();\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const _user = useQuery(api.users.getCurrentUser);\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const proAccess = useQuery(api.adminSettings.getProModelAccess);\n\n  const prefDefaultModel = useUserPreference(\"defaultModel\");\n\n  // Pro model detection (explicit flag OR price threshold)\n  const isProModel = (model: ModelConfig) =>\n    model.isPro === true ||\n    (model.pricing?.input ?? 0) >= 5 ||\n    (model.pricing?.output ?? 0) >= 15;\n\n  // Check if a pro model is disabled (user can't use it)\n  const isModelDisabled = (model: ModelConfig) =>\n    isProModel(model) && proAccess && !proAccess.canUse;\n\n  // Multi-select state\n  const [internalSelected, setInternalSelected] = useState<string[]>([]);\n  const [activeCategory, setActiveCategory] = useState<string>(\"all\");\n  const [upgradeDialogOpen, setUpgradeDialogOpen] = useState(false);\n\n  // Track previous open state\n  const prevOpenRef = useRef(open);\n\n  useEffect(() => {\n    const justOpened = open && !prevOpenRef.current;\n    prevOpenRef.current = open;\n\n    if (justOpened && mode === \"multiple\") {\n      setInternalSelected(selectedModels || []);\n    }\n\n    if (justOpened) {\n      analytics.track(\"quick_switcher_opened\", { mode, currentModel });\n    }\n  }, [open, mode, selectedModels, currentModel]);\n\n  const allModels = Object.values(modelsByProvider).flat();\n  const {\n    defaultModel,\n    favorites: favModels,\n    recents: recentModels,\n    rest,\n  } = sortModels(allModels, prefDefaultModel, favorites, recents);\n\n  // Filter models by active category (pro models shown but may be disabled)\n  const filteredModels = useMemo(() => {\n    const category = MODEL_CATEGORIES.find((c) => c.id === activeCategory);\n\n    // Apply category filter only\n    if (category && category.id !== \"all\") {\n      return {\n        defaultModel:\n          defaultModel && category.filter(defaultModel)\n            ? defaultModel\n            : undefined,\n        favorites: favModels.filter(category.filter),\n        recents: recentModels.filter(category.filter),\n        rest: rest.filter(category.filter),\n      };\n    }\n\n    return {\n      defaultModel,\n      favorites: favModels,\n      recents: recentModels,\n      rest,\n    };\n  }, [activeCategory, defaultModel, favModels, recentModels, rest]);\n\n  const restByProvider = filteredModels.rest.reduce(\n    (acc, model) => {\n      // Use model.provider (actual vendor) instead of gateway prefix\n      const provider = model.provider;\n      if (!acc[provider]) acc[provider] = [];\n      acc[provider].push(model);\n      return acc;\n    },\n    {} as Record<string, ModelConfig[]>,\n  );\n\n  const handleSelect = (modelId: string) => {\n    if (mode === \"multiple\") {\n      setInternalSelected((prev) => {\n        if (prev.includes(modelId)) {\n          return prev.filter((id) => id !== modelId);\n        }\n        if (prev.length >= 4) {\n          toast.error(\"Maximum 4 models for comparison\");\n          return prev;\n        }\n        return [...prev, modelId];\n      });\n    } else {\n      addRecent(modelId);\n      onSelectModel(modelId);\n      onOpenChange(false);\n\n      analytics.track(\"model_selected\", {\n        model: modelId,\n        previousModel: currentModel,\n        source: \"quick_switcher\",\n      });\n\n      setTimeout(() => {\n        window.dispatchEvent(new CustomEvent(\"focus-chat-input\"));\n      }, 0);\n    }\n  };\n\n  const handleConfirm = () => {\n    if (internalSelected.length < 2) {\n      toast.error(\"Select at least 2 models to compare\");\n      return;\n    }\n    onSelectedModelsChange?.(internalSelected);\n    onOpenChange(false);\n\n    analytics.track(\"comparison_models_selected\", {\n      modelCount: internalSelected.length,\n      models: internalSelected.join(\",\"),\n    });\n  };\n\n  const handleCategoryChange = (category: string) => {\n    setActiveCategory(category);\n    analytics.track(\"category_filter_changed\", { category, mode });\n  };\n\n  const renderModelItem = (model: ModelConfig, showDefaultBadge = false) => {\n    const disabled = isModelDisabled(model);\n    return (\n      <ModelSelectorItem\n        key={model.id}\n        model={model}\n        isSelected={\n          mode === \"single\"\n            ? currentModel === model.id\n            : internalSelected.includes(model.id)\n        }\n        isFavorite={isFavorite(model.id)}\n        mode={mode}\n        showDefaultBadge={showDefaultBadge}\n        activeCategory={activeCategory}\n        onSelect={disabled ? () => setUpgradeDialogOpen(true) : handleSelect}\n        onToggleFavorite={toggleFavorite}\n        isPro={isProModel(model)}\n        proAccessRemaining={\n          isProModel(model) && proAccess\n            ? (proAccess.remainingDaily ?? proAccess.remainingMonthly ?? null)\n            : null\n        }\n        isDisabled={disabled}\n      />\n    );\n  };\n\n  return (\n    <>\n      {/* Trigger Button (optional) */}\n      {showTrigger && (\n        <Button\n          variant=\"ghost\"\n          onClick={() => onOpenChange(true)}\n          className=\"h-8 px-2.5 text-sm font-medium bg-transparent hover:bg-muted/50 border-0 transition-all group gap-1.5 min-w-0\"\n        >\n          <span className=\"truncate max-w-[120px] text-muted-foreground group-hover:text-foreground transition-colors\">\n            {mode === \"single\"\n              ? allModels.find((m) => m.id === currentModel)?.name ||\n                \"Select model\"\n              : `${internalSelected.length} models`}\n          </span>\n          <ChevronRight className=\"w-3 h-3 text-muted-foreground/40 group-hover:text-muted-foreground rotate-90 transition-all\" />\n        </Button>\n      )}\n\n      <CommandDialog\n        open={open}\n        onOpenChange={onOpenChange}\n        commandProps={{\n          filter: (value, search, keywords) => {\n            const extendValue = `${value} ${keywords?.join(\" \") || \"\"}`;\n            return commandScore(extendValue, search);\n          },\n        }}\n        className=\"max-w-[95vw] md:max-w-4xl h-[85vh] md:h-[600px] p-0 gap-0 overflow-hidden bg-background/95 backdrop-blur-xl border-border/50 shadow-2xl\"\n      >\n        <div className=\"flex items-center border-b px-4 py-3 shrink-0\">\n          <Search className=\"w-4 h-4 mr-2 text-muted-foreground\" />\n          <CommandInput\n            placeholder={`Search ${activeCategory === \"all\" ? \"\" : `${activeCategory} `}models...`}\n            className=\"flex-1 h-9 bg-transparent border-0 ring-0 focus:ring-0 text-sm\"\n          />\n        </div>\n\n        <div className=\"flex h-[500px] overflow-hidden\">\n          <CategorySidebar\n            activeCategory={activeCategory}\n            onCategoryChange={handleCategoryChange}\n            allModels={allModels}\n          />\n\n          <div className=\"flex-1 flex flex-col min-w-0 bg-background/50\">\n            {mode === \"multiple\" && (\n              <SelectedModelsChips\n                selectedIds={internalSelected}\n                allModels={allModels}\n                onRemove={(id) =>\n                  setInternalSelected((prev) => prev.filter((i) => i !== id))\n                }\n              />\n            )}\n\n            <CommandList className=\"max-h-[600px] overflow-y-auto p-2\">\n              <CommandEmpty>No models found.</CommandEmpty>\n\n              {filteredModels.defaultModel && (\n                <CommandGroup heading=\"Default\">\n                  {renderModelItem(filteredModels.defaultModel, true)}\n                </CommandGroup>\n              )}\n\n              {filteredModels.favorites.length > 0 && (\n                <CommandGroup heading=\"Favorites\">\n                  {filteredModels.favorites.map((model) =>\n                    renderModelItem(model),\n                  )}\n                </CommandGroup>\n              )}\n\n              {filteredModels.recents.length > 0 && (\n                <CommandGroup heading=\"Recent\">\n                  {filteredModels.recents.map((model) =>\n                    renderModelItem(model),\n                  )}\n                </CommandGroup>\n              )}\n\n              {(filteredModels.defaultModel ||\n                filteredModels.favorites.length > 0 ||\n                filteredModels.recents.length > 0) && <CommandSeparator />}\n\n              {Object.entries(restByProvider).map(([provider, models]) => (\n                <CommandGroup\n                  key={provider}\n                  heading={provider.charAt(0).toUpperCase() + provider.slice(1)}\n                  className=\"px-2\"\n                >\n                  {models.map((model) => renderModelItem(model))}\n                </CommandGroup>\n              ))}\n            </CommandList>\n\n            {proAccess && !proAccess.canUse && (\n              <div className=\"p-3 border-t text-center\">\n                <button\n                  type=\"button\"\n                  onClick={() => setUpgradeDialogOpen(true)}\n                  className=\"text-sm text-primary hover:underline\"\n                >\n                  Request pro model access â†’\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {mode === \"multiple\" && (\n          <div className=\"border-t p-3 flex justify-between items-center\">\n            <span className=\"text-sm text-muted-foreground\">\n              {internalSelected.length}/4 selected\n            </span>\n            <div className=\"flex gap-2\">\n              <Button\n                variant=\"ghost\"\n                onClick={() => onOpenChange(false)}\n                size=\"sm\"\n              >\n                Cancel\n              </Button>\n              <Button\n                onClick={handleConfirm}\n                disabled={internalSelected.length < 2}\n                size=\"sm\"\n              >\n                Compare Models\n              </Button>\n            </div>\n          </div>\n        )}\n      </CommandDialog>\n\n      <UpgradeRequestDialog\n        open={upgradeDialogOpen}\n        onOpenChange={setUpgradeDialogOpen}\n        currentTier={proAccess?.tier || \"free\"}\n      />\n    </>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport { useMutation } from \"convex/react\";\nimport { Crown, Loader2 } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\n\ninterface UpgradeRequestDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  currentTier: string;\n}\n\nexport function UpgradeRequestDialog({\n  open,\n  onOpenChange,\n  currentTier,\n}: UpgradeRequestDialogProps) {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const createFeedback = useMutation(api.feedback.createFeedback);\n\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n    try {\n      await createFeedback({\n        feedbackType: \"feature\",\n        description: `Upgrade request: User on ${currentTier} tier requesting pro model access`,\n        page: \"/chat\",\n      });\n      toast.success(\"Request sent! Admins will review your upgrade request.\");\n      onOpenChange(false);\n    } catch (_error) {\n      toast.error(\"Failed to send request\");\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-md\">\n        <DialogHeader>\n          <div className=\"flex items-center gap-2 mb-2\">\n            <div className=\"p-2 rounded-full bg-amber-500/10\">\n              <Crown className=\"w-5 h-5 text-amber-500\" />\n            </div>\n            <DialogTitle>Pro Models</DialogTitle>\n          </div>\n          <DialogDescription className=\"text-left space-y-3 pt-2\">\n            <p>\n              Pro models require an upgraded account. We haven't set up payments\n              yet, but you can request access.\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              Your request will be reviewed by an admin who can upgrade your\n              account manually.\n            </p>\n          </DialogDescription>\n        </DialogHeader>\n        <div className=\"flex justify-end gap-2 mt-2\">\n          <Button variant=\"ghost\" onClick={() => onOpenChange(false)}>\n            Cancel\n          </Button>\n          <Button onClick={handleSubmit} disabled={isSubmitting}>\n            {isSubmitting && <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />}\n            Request Access\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Brain,\n  Code,\n  DollarSign,\n  Eye,\n  Gift,\n  Globe,\n  Sparkles,\n  Zap,\n} from \"lucide-react\";\nimport { computeModelMetrics, getBenchmarkScores } from \"./benchmarks\";\nimport type { ModelConfig } from \"./models\";\nimport type { ModelCategory } from \"./types\";\n\n/**\n * Category definitions for filtering models\n * Each category has:\n * - id: unique identifier\n * - label: display name\n * - icon: Lucide icon component\n * - filter: function to determine if model belongs to category\n * - description: tooltip text\n */\nexport const MODEL_CATEGORIES: ModelCategory[] = [\n  {\n    id: \"all\",\n    label: \"All Models\",\n    filter: () => true,\n    description: \"All available models\",\n  },\n  {\n    id: \"free\",\n    label: \"Free\",\n    icon: Gift,\n    filter: (model: ModelConfig) =>\n      model.pricing.input === 0 && model.pricing.output === 0,\n    description: \"Completely free to use\",\n  },\n  {\n    id: \"speed\",\n    label: \"Speed\",\n    icon: Zap,\n    filter: (model: ModelConfig) => {\n      const metrics = computeModelMetrics(model);\n      return metrics.speedTier === \"ultra-fast\" || metrics.speedTier === \"fast\";\n    },\n    description: \"Fast models for quick answers and simple tasks\",\n  },\n  {\n    id: \"budget\",\n    label: \"Budget\",\n    icon: DollarSign,\n    filter: (model: ModelConfig) => {\n      const metrics = computeModelMetrics(model);\n      return metrics.costTier === \"budget\";\n    },\n    description: \"Cost-effective for high-volume use\",\n  },\n  {\n    id: \"coding\",\n    label: \"Coding\",\n    icon: Code,\n    filter: (model: ModelConfig) => {\n      const scores = getBenchmarkScores(model);\n      return (scores.coding ?? 0) >= 70;\n    },\n    description: \"Best for software development tasks\",\n  },\n  {\n    id: \"reasoning\",\n    label: \"Reasoning\",\n    icon: Sparkles,\n    filter: (model: ModelConfig) =>\n      model.capabilities.includes(\"extended-thinking\") ||\n      model.capabilities.includes(\"thinking\"),\n    description: \"Deep thinking for complex problems (slower/pricier)\",\n  },\n  {\n    id: \"intelligence\",\n    label: \"Intelligence\",\n    icon: Brain,\n    filter: (model: ModelConfig) => {\n      const scores = getBenchmarkScores(model);\n      return (scores.intelligence ?? 0) >= 85;\n    },\n    description: \"Highest capability for sophisticated tasks (expensive)\",\n  },\n  {\n    id: \"vision\",\n    label: \"Vision\",\n    icon: Eye,\n    filter: (model: ModelConfig) => model.capabilities.includes(\"vision\"),\n    description: \"Image analysis and multimodal understanding\",\n  },\n  {\n    id: \"web-search\",\n    label: \"Web Search\",\n    icon: Globe,\n    filter: (model: ModelConfig) =>\n      model.provider === \"perplexity\" ||\n      (model.knowledgeCutoff?.includes(\"Real-time\") ?? false),\n    description: \"Real-time internet access\",\n  },\n];\n\n/**\n * Get all category IDs that a model belongs to\n * Excludes \"all\" category\n *\n * @param model - Model configuration to categorize\n * @returns Array of category IDs (e.g., [\"speed\", \"coding\"])\n */\nexport function getModelCategories(model: ModelConfig): string[] {\n  return MODEL_CATEGORIES.filter(\n    (cat) => cat.id !== \"all\" && cat.filter(model),\n  ).map((cat) => cat.id);\n}\n\n/**\n * Count how many models belong to a specific category\n *\n * @param categoryId - Category ID to count\n * @param allModels - Full list of models to check\n * @returns Number of models in category\n */\nexport function countModelsInCategory(\n  categoryId: string,\n  allModels: ModelConfig[],\n): number {\n  const category = MODEL_CATEGORIES.find((c) => c.id === categoryId);\n  if (!category) return 0;\n  return allModels.filter(category.filter).length;\n}\n","\"use client\";\n\nimport { countModelsInCategory, MODEL_CATEGORIES } from \"@/lib/ai/categories\";\nimport type { ModelConfig } from \"@/lib/ai/utils\";\nimport { cn } from \"@/lib/utils\";\n\ninterface CategorySidebarProps {\n  activeCategory: string;\n  onCategoryChange: (category: string) => void;\n  allModels: ModelConfig[];\n}\n\n/**\n * Sidebar for filtering models by category.\n */\nexport function CategorySidebar({\n  activeCategory,\n  onCategoryChange,\n  allModels,\n}: CategorySidebarProps) {\n  return (\n    <div className=\"w-[180px] border-r bg-muted/30 p-2 flex flex-col gap-1 shrink-0 overflow-y-auto\">\n      <div className=\"px-2 py-1.5 text-xs font-medium text-muted-foreground uppercase tracking-wider mb-1\">\n        Categories\n      </div>\n      {MODEL_CATEGORIES.map((cat) => {\n        const count = countModelsInCategory(cat.id, allModels);\n        const Icon = cat.icon;\n        const isActive = activeCategory === cat.id;\n\n        return (\n          <button\n            key={cat.id}\n            onClick={() => onCategoryChange(cat.id)}\n            className={cn(\n              \"w-full flex items-center justify-between px-2.5 py-2 rounded-md text-sm transition-colors\",\n              isActive\n                ? \"bg-primary/10 text-primary font-medium\"\n                : \"text-muted-foreground hover:bg-muted/50 hover:text-foreground\",\n            )}\n          >\n            <div className=\"flex items-center gap-2.5\">\n              {Icon && <Icon className=\"w-4 h-4\" />}\n              <span>{cat.label}</span>\n            </div>\n            {count > 0 && (\n              <span\n                className={cn(\n                  \"text-[10px] tabular-nums px-1.5 py-0.5 rounded-full\",\n                  isActive\n                    ? \"bg-primary/20 text-primary\"\n                    : \"bg-muted text-muted-foreground\",\n                )}\n              >\n                {count}\n              </span>\n            )}\n          </button>\n        );\n      })}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Info } from \"lucide-react\";\nimport { Progress } from \"@/components/ui/progress\";\nimport {\n  getBenchmarkScores,\n  getCostText,\n  getIntelligenceText,\n  getSpeedText,\n} from \"@/lib/ai/benchmarks\";\nimport type { ModelConfig } from \"@/lib/ai/models\";\nimport type { ComputedMetrics } from \"@/lib/ai/types\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MetricBarProps {\n  label: string;\n  value: number; // 0-100\n  comparative: string;\n  inverted?: boolean;\n}\n\nfunction MetricBar({\n  label,\n  value,\n  comparative,\n  inverted = false,\n}: MetricBarProps) {\n  return (\n    <div className=\"space-y-1.5\">\n      <div className=\"flex items-center justify-between text-xs\">\n        <span className=\"font-medium text-muted-foreground\">{label}</span>\n        <span className=\"text-foreground font-medium\">{comparative}</span>\n      </div>\n      <Progress\n        value={inverted ? 100 - value : value}\n        className=\"h-1.5 bg-muted/40\"\n        indicatorClassName=\"bg-foreground/80\"\n      />\n    </div>\n  );\n}\n\ninterface ModelMetricsBadgeProps {\n  model: ModelConfig;\n  metrics: ComputedMetrics;\n  compact?: boolean;\n}\n\nexport function ModelMetricsBadge({\n  model,\n  metrics,\n  compact = false,\n}: ModelMetricsBadgeProps) {\n  const scores = getBenchmarkScores(model);\n\n  // Speed tier to visual value (0-100)\n  const speedTierToValue = (tier: string): number => {\n    switch (tier) {\n      case \"ultra-fast\":\n        return 100;\n      case \"fast\":\n        return 75;\n      case \"medium\":\n        return 50;\n      case \"slow\":\n        return 25;\n      default:\n        return 50;\n    }\n  };\n\n  // Cost tier to value (inverted - lower cost = higher bar)\n  const costTierToValue = (tier: string): number => {\n    switch (tier) {\n      case \"budget\":\n        return 25; // Will be inverted to 75\n      case \"balanced\":\n        return 50; // Will be inverted to 50\n      case \"premium\":\n        return 75; // Will be inverted to 25\n      default:\n        return 50;\n    }\n  };\n\n  return (\n    <div className={cn(\"grid gap-4 pt-1\", compact && \"gap-3\")}>\n      {/* Speed bar */}\n      <MetricBar\n        label=\"Speed\"\n        value={speedTierToValue(metrics.speedTier)}\n        comparative={getSpeedText(metrics)}\n      />\n\n      {/* Cost bar (inverted - lower is better) */}\n      <MetricBar\n        label=\"Cost Efficiency\"\n        value={costTierToValue(metrics.costTier)}\n        comparative={getCostText(metrics)}\n        inverted\n      />\n\n      {/* Intelligence bar */}\n      <MetricBar\n        label=\"Intelligence\"\n        value={metrics.intelligencePercentile ?? scores.intelligence ?? 50}\n        comparative={getIntelligenceText(metrics.intelligencePercentile)}\n      />\n\n      {/* Disclaimer if estimated */}\n      {!metrics.hasPublicBenchmarks && (\n        <div className=\"text-[10px] text-muted-foreground/50 pt-1 flex items-center gap-1.5\">\n          <Info className=\"w-2.5 h-2.5\" />\n          <span>Estimated metrics based on provider data</span>\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Eye, FunctionSquare, Image, Sparkles, Zap } from \"lucide-react\";\nimport { useMemo } from \"react\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { getProviderIcon } from \"@/lib/ai/icons\";\nimport { getModelMetrics } from \"@/lib/ai/models\";\nimport { getModelConfig } from \"@/lib/ai/utils\";\nimport { ModelMetricsBadge } from \"./model-metrics-badge\";\n\ninterface ModelDetailCardProps {\n  modelId: string;\n  variant?: \"popover\" | \"sidebar\";\n}\n\nexport function ModelDetailCard({\n  modelId,\n  variant = \"popover\",\n}: ModelDetailCardProps) {\n  const config = getModelConfig(modelId);\n  const showModelProvider = useUserPreference(\"showModelProvider\");\n  if (!config) return null;\n\n  const ProviderIcon = getProviderIcon(config.provider);\n  const contextDisplay = formatContextWindow(config.contextWindow);\n\n  // Compute metrics for visual comparison\n  const metrics = useMemo(() => getModelMetrics(config.id), [config.id]);\n\n  return (\n    <div className=\"space-y-4 text-sm\">\n      {/* Header */}\n      <div className=\"flex items-start gap-3\">\n        <div className=\"bg-muted p-1.5 rounded-md mt-0.5\">\n          <ProviderIcon className=\"w-5 h-5 text-foreground/80\" />\n        </div>\n        <div>\n          <h3 className=\"font-semibold text-base leading-none mb-1\">\n            {config.name}\n          </h3>\n          <p className=\"text-xs text-muted-foreground capitalize\">\n            {config.provider} â€¢ {config.isLocal ? \"Local\" : \"Cloud\"}\n          </p>\n          {showModelProvider && !config.isLocal && (\n            <span className=\"text-[10px] text-muted-foreground/60 block\">\n              via{\" \"}\n              {config.gateway === \"openrouter\"\n                ? \"OpenRouter\"\n                : \"Vercel AI Gateway\"}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* User-Friendly Description (PRIMARY - for all users) */}\n      {config.userFriendlyDescription && (\n        <div className=\"text-muted-foreground leading-relaxed\">\n          {config.userFriendlyDescription}\n        </div>\n      )}\n\n      {/* Capability Badges (Minimal) */}\n      {config.capabilities.length > 0 && (\n        <div className=\"flex flex-wrap gap-2 text-xs text-muted-foreground/80\">\n          {config.capabilities.map((cap) => (\n            <span\n              key={cap}\n              className=\"flex items-center gap-1.5 bg-muted/50 px-2.5 py-1 rounded-md border border-border/50\"\n            >\n              {getCapabilityIcon(cap)}\n              <span className=\"capitalize\">{cap.replace(\"-\", \" \")}</span>\n            </span>\n          ))}\n        </div>\n      )}\n\n      {/* Technical Specs (Grid) */}\n      <div className=\"pt-3 border-t grid grid-cols-2 gap-y-3 gap-x-2 text-xs\">\n        <div>\n          <span className=\"text-muted-foreground block mb-0.5 font-medium\">\n            Context Window\n          </span>\n          <span className=\"font-medium text-foreground\">{contextDisplay}</span>\n        </div>\n\n        {config.knowledgeCutoff && (\n          <div>\n            <span className=\"text-muted-foreground block mb-0.5 font-medium\">\n              Knowledge Access\n            </span>\n            <span>{config.knowledgeCutoff}</span>\n          </div>\n        )}\n\n        {!config.isLocal && (\n          <div className=\"col-span-2\">\n            <span className=\"text-muted-foreground block mb-0.5 font-medium\">\n              Pricing (Input / Output)\n            </span>\n            <div className=\"font-mono text-muted-foreground\">\n              <span className=\"text-foreground\">${config.pricing.input}</span> /\n              <span className=\"text-foreground\"> ${config.pricing.output}</span>\n              <span className=\"opacity-50 ml-1\">per million tokens</span>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Model Metrics (VISUAL - relative comparisons) */}\n      {metrics && (\n        <div className=\"pt-3 border-t\">\n          <ModelMetricsBadge model={config} metrics={metrics} compact />\n        </div>\n      )}\n\n      {/* Technical Summary (for power users who want more) */}\n      {config.bestFor && (\n        <div className=\"pt-3 border-t bg-muted/20 -mx-4 px-4 pb-1\">\n          <span className=\"text-[10px] uppercase tracking-wider text-muted-foreground font-semibold mb-1 block\">\n            Best Used For\n          </span>\n          <p className=\"text-xs text-foreground/80 italic\">{config.bestFor}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction getCapabilityIcon(capability: string) {\n  switch (capability) {\n    case \"vision\":\n      return <Eye className=\"w-3.5 h-3.5\" />;\n    case \"function-calling\":\n      return <FunctionSquare className=\"w-3.5 h-3.5\" />;\n    case \"thinking\":\n      return <Sparkles className=\"w-3.5 h-3.5 text-purple-500\" />;\n    case \"extended-thinking\":\n      return <Zap className=\"w-3.5 h-3.5 text-purple-600\" />;\n    case \"image-generation\":\n      return <Image className=\"w-3.5 h-3.5\" />;\n    default:\n      return null;\n  }\n}\n\n// Helper\nfunction formatContextWindow(tokens: number): string {\n  if (tokens >= 1000000) return `${(tokens / 1000000).toFixed(1)}M tokens`;\n  if (tokens >= 1000) return `${(tokens / 1000).toFixed(0)}K tokens`;\n  return `${tokens} tokens`;\n}\n","\"use client\";\n\nimport { Check, ChevronRight, Crown, Star, Zap } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { CommandItem } from \"@/components/ui/command\";\nimport {\n  HoverCard,\n  HoverCardContent,\n  HoverCardTrigger,\n} from \"@/components/ui/hover-card\";\nimport { getModelCategories } from \"@/lib/ai/categories\";\nimport type { ModelConfig } from \"@/lib/ai/utils\";\nimport { cn } from \"@/lib/utils\";\nimport { ModelDetailCard } from \"./ModelDetailCard\";\n\ninterface ModelSelectorItemProps {\n  model: ModelConfig;\n  isSelected: boolean;\n  isFavorite: boolean;\n  mode: \"single\" | \"multiple\";\n  showDefaultBadge?: boolean;\n  activeCategory: string;\n  onSelect: (modelId: string) => void;\n  onToggleFavorite: (modelId: string) => void;\n  isPro?: boolean;\n  proAccessRemaining?: number | null;\n  isDisabled?: boolean;\n}\n\n/**\n * Format context window tokens to human-readable string\n */\nfunction formatContextWindow(tokens: number): string {\n  if (tokens >= 1000000) return `${(tokens / 1000000).toFixed(1)}M`;\n  if (tokens >= 1000) return `${(tokens / 1000).toFixed(0)}K`;\n  return `${tokens}`;\n}\n\n/**\n * Individual model item in the model selector.\n * Displays model info with selection state, favorite toggle, and optional HoverCard.\n */\nexport function ModelSelectorItem({\n  model,\n  isSelected,\n  isFavorite,\n  mode,\n  showDefaultBadge = false,\n  activeCategory,\n  onSelect,\n  onToggleFavorite,\n  isPro = false,\n  proAccessRemaining = null,\n  isDisabled = false,\n}: ModelSelectorItemProps) {\n  // Get model categories (only for \"All\" view)\n  const _categories = activeCategory === \"all\" ? getModelCategories(model) : [];\n\n  const itemContent = (\n    <CommandItem\n      key={model.id}\n      value={model.id}\n      keywords={[model.name, model.provider, model.description || \"\"]}\n      onSelect={() => onSelect(model.id)}\n      className={cn(\n        \"group flex items-center justify-between px-3 py-3 rounded-lg cursor-pointer aria-selected:bg-muted/50 data-[selected=true]:bg-muted/50 transition-colors\",\n        isSelected ? \"bg-primary/5\" : \"\",\n        isDisabled && \"opacity-50 cursor-not-allowed\",\n      )}\n    >\n      <div className=\"flex items-center gap-3 min-w-0 flex-1\">\n        {/* Selection Indicator */}\n        <div\n          className={cn(\n            \"flex items-center justify-center w-4 h-4 rounded-full border transition-all\",\n            isSelected\n              ? \"bg-primary border-primary text-primary-foreground\"\n              : \"border-muted-foreground/30 group-hover:border-primary/50\",\n          )}\n        >\n          {isSelected && <Check className=\"w-2.5 h-2.5\" />}\n        </div>\n\n        <div className=\"flex flex-col min-w-0 gap-0.5\">\n          <div className=\"flex items-center gap-2\">\n            <span\n              className={cn(\n                \"font-medium text-sm truncate\",\n                isSelected ? \"text-primary\" : \"text-foreground\",\n              )}\n            >\n              {model.name}\n            </span>\n            {/* Essential Badges Only */}\n            {showDefaultBadge && (\n              <span className=\"text-[10px] px-1.5 py-0.5 rounded-full bg-primary/10 text-primary font-medium\">\n                Default\n              </span>\n            )}\n            {model.reasoning && (\n              <span className=\"text-[10px] px-1.5 py-0.5 rounded-full bg-purple-500/10 text-purple-600 dark:text-purple-400 font-medium flex items-center gap-0.5\">\n                <Zap className=\"w-2.5 h-2.5\" />\n                Reasoning\n              </span>\n            )}\n            {isPro && (\n              <span className=\"text-[10px] px-1.5 py-0.5 rounded-full bg-amber-500/10 text-amber-600 dark:text-amber-400 font-medium flex items-center gap-0.5\">\n                <Crown className=\"w-2.5 h-2.5\" />\n                Pro\n              </span>\n            )}\n            {isPro && isDisabled && (\n              <span className=\"text-[10px] text-amber-600 dark:text-amber-400\">\n                Upgrade\n              </span>\n            )}\n            {isPro &&\n              !isDisabled &&\n              proAccessRemaining !== null &&\n              proAccessRemaining !== undefined &&\n              proAccessRemaining !== Number.POSITIVE_INFINITY && (\n                <span className=\"text-[10px] text-muted-foreground\">\n                  {proAccessRemaining === 0\n                    ? \"Limit reached\"\n                    : `${proAccessRemaining} left`}\n                </span>\n              )}\n          </div>\n\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n            <span className=\"capitalize\">{model.provider}</span>\n            <span className=\"text-muted-foreground/30\">â€¢</span>\n            <span>{formatContextWindow(model.contextWindow)}</span>\n            {model.capabilities?.includes(\"vision\") && (\n              <>\n                <span className=\"text-muted-foreground/30\">â€¢</span>\n                <span>Vision</span>\n              </>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Right Side: Cost & Actions */}\n      <div className=\"flex items-center gap-3 pl-2\">\n        {!model.isLocal && (\n          <div className=\"hidden sm:flex flex-col items-end text-[10px] text-muted-foreground/50 tabular-nums leading-tight\">\n            <span>In: ${model.pricing.input}</span>\n            <span>Out: ${model.pricing.output}</span>\n          </div>\n        )}\n\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"h-8 w-8 hover:bg-transparent -mr-2 opacity-0 group-hover:opacity-100 transition-opacity focus:opacity-100\"\n          onClick={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n            onToggleFavorite(model.id);\n          }}\n        >\n          <Star\n            className={cn(\n              \"h-4 w-4 transition-colors\",\n              isFavorite\n                ? \"fill-amber-400 text-amber-400 opacity-100\"\n                : \"text-muted-foreground hover:text-amber-400\",\n            )}\n          />\n        </Button>\n\n        {mode === \"single\" && (\n          <ChevronRight className=\"w-4 h-4 text-muted-foreground/30\" />\n        )}\n      </div>\n    </CommandItem>\n  );\n\n  // Only show HoverCard in single selection mode\n  if (mode === \"single\") {\n    return (\n      <HoverCard key={model.id} openDelay={200}>\n        <HoverCardTrigger asChild>{itemContent}</HoverCardTrigger>\n        <HoverCardContent\n          side=\"right\"\n          align=\"start\"\n          className=\"w-80 p-4\"\n          sideOffset={10}\n        >\n          <ModelDetailCard modelId={model.id} variant=\"sidebar\" />\n        </HoverCardContent>\n      </HoverCard>\n    );\n  }\n\n  return itemContent;\n}\n","\"use client\";\n\nimport { X } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport type { ModelConfig } from \"@/lib/ai/utils\";\n\ninterface SelectedModelsChipsProps {\n  selectedIds: string[];\n  allModels: ModelConfig[];\n  onRemove: (modelId: string) => void;\n}\n\n/**\n * Chips showing selected models in multi-select mode.\n */\nexport function SelectedModelsChips({\n  selectedIds,\n  allModels,\n  onRemove,\n}: SelectedModelsChipsProps) {\n  if (selectedIds.length === 0) return null;\n\n  return (\n    <div className=\"flex gap-2 px-3 py-2 border-b flex-wrap bg-background/50 backdrop-blur-sm\">\n      {selectedIds.map((id) => {\n        const model = allModels.find((m) => m.id === id);\n        return (\n          <Badge\n            key={id}\n            variant=\"secondary\"\n            className=\"gap-1 pl-2 pr-1 py-1 h-7\"\n          >\n            {model?.name}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-4 w-4 ml-1 hover:bg-destructive/10 hover:text-destructive rounded-full\"\n              onClick={() => onRemove(id)}\n            >\n              <X className=\"h-3 w-3\" />\n            </Button>\n          </Badge>\n        );\n      })}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport { useMutation } from \"convex/react\";\nimport { useEffect, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { useUserPreference } from \"./useUserPreference\";\n\nexport function useFavoriteModels() {\n  const favoriteModels = useUserPreference(\"favoriteModels\");\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const updatePrefs = useMutation(api.users.updatePreferences);\n\n  const [localFavorites, setLocalFavorites] = useState<string[]>([]);\n\n  // Sync from Convex on load\n  useEffect(() => {\n    setLocalFavorites(favoriteModels);\n  }, [favoriteModels]);\n\n  const toggleFavorite = async (modelId: string) => {\n    const current = localFavorites;\n    const updated = current.includes(modelId)\n      ? current.filter((id) => id !== modelId)\n      : [...current, modelId];\n\n    // Optimistic update\n    setLocalFavorites(updated);\n\n    // Persist\n    try {\n      await updatePrefs({ preferences: { favoriteModels: updated } });\n    } catch (_err) {\n      setLocalFavorites(current); // Rollback\n      toast.error(\"Failed to update favorites\");\n    }\n  };\n\n  const isFavorite = (modelId: string) => localFavorites.includes(modelId);\n\n  return { favorites: localFavorites, toggleFavorite, isFavorite };\n}\n","import type { ModelConfig } from \"@/lib/ai/utils\";\n\nexport function sortModels(\n  models: ModelConfig[],\n  defaultModelId: string | undefined,\n  favoriteIds: string[],\n  recentIds: string[] = [],\n) {\n  const defaultModel = models.find((m) => m.id === defaultModelId);\n\n  const favorites = models\n    .filter((m) => favoriteIds.includes(m.id) && m.id !== defaultModelId)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const recents = models\n    .filter(\n      (m) =>\n        recentIds.includes(m.id) &&\n        m.id !== defaultModelId &&\n        !favoriteIds.includes(m.id),\n    )\n    .sort((a, b) => {\n      // Sort by index in recentIds to maintain recency order\n      return recentIds.indexOf(a.id) - recentIds.indexOf(b.id);\n    });\n\n  const rest = models.filter(\n    (m) =>\n      m.id !== defaultModelId &&\n      !favoriteIds.includes(m.id) &&\n      !recentIds.includes(m.id),\n  );\n\n  return { defaultModel, favorites, recents, rest };\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '18', height: '18', x: '3', y: '3', rx: '2', ry: '2', key: '1m3agn' }],\n  ['path', { d: 'M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3', key: 'm1af9g' }],\n  ['path', { d: 'M9 11.2h5.7', key: '3zgcl2' }],\n];\n\n/**\n * @component @name SquareFunction\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHg9IjMiIHk9IjMiIHJ4PSIyIiByeT0iMiIgLz4KICA8cGF0aCBkPSJNOSAxN2MyIDAgMi44LTEgMi44LTIuOFYxMGMwLTIgMS0zLjMgMy4yLTMiIC8+CiAgPHBhdGggZD0iTTkgMTEuMmg1LjciIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/square-function\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SquareFunction = createLucideIcon('square-function', __iconNode);\n\nexport default SquareFunction;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { x: '3', y: '8', width: '18', height: '4', rx: '1', key: 'bkv52' }],\n  ['path', { d: 'M12 8v13', key: '1c76mn' }],\n  ['path', { d: 'M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7', key: '6wjy6b' }],\n  [\n    'path',\n    {\n      d: 'M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5',\n      key: '1ihvrl',\n    },\n  ],\n];\n\n/**\n * @component @name Gift\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB4PSIzIiB5PSI4IiB3aWR0aD0iMTgiIGhlaWdodD0iNCIgcng9IjEiIC8+CiAgPHBhdGggZD0iTTEyIDh2MTMiIC8+CiAgPHBhdGggZD0iTTE5IDEydjdhMiAyIDAgMCAxLTIgMkg3YTIgMiAwIDAgMS0yLTJ2LTciIC8+CiAgPHBhdGggZD0iTTcuNSA4YTIuNSAyLjUgMCAwIDEgMC01QTQuOCA4IDAgMCAxIDEyIDhhNC44IDggMCAwIDEgNC41LTUgMi41IDIuNSAwIDAgMSAwIDUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/gift\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Gift = createLucideIcon('gift', __iconNode);\n\nexport default Gift;\n","\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\n\ninterface UseLazyMathRendererOptions {\n  /**\n   * How much of the element must be visible to trigger render\n   * @default 0.01 (1%)\n   */\n  threshold?: number;\n  /**\n   * Margin around viewport to preload before element enters\n   * @default \"50px 0px\"\n   */\n  rootMargin?: string;\n  /**\n   * Enable only on mobile devices\n   * @default true\n   */\n  mobileOnly?: boolean;\n}\n\ninterface UseLazyMathRendererReturn {\n  /** Ref to attach to the math container element */\n  observeRef: React.RefObject<HTMLDivElement | null>;\n  /** Whether the math should be rendered (visible or will be soon) */\n  isRendered: boolean;\n  /** Whether we're on mobile (for conditional logic) */\n  isMobile: boolean;\n}\n\n/**\n * Lazy render math equations using IntersectionObserver\n * Reduces initial mobile render cost by ~60%\n *\n * Phase 4A: Mobile performance optimization\n * - Only activates on mobile devices (< 768px)\n * - Preloads 50px before entering viewport\n * - Uses 1% threshold for early trigger\n * - Disconnects observer after first render (no memory leaks)\n */\nexport function useLazyMathRenderer(\n  options: UseLazyMathRendererOptions = {},\n): UseLazyMathRendererReturn {\n  const {\n    threshold = 0.01,\n    rootMargin = \"50px 0px\",\n    mobileOnly = true,\n  } = options;\n\n  const observeRef = useRef<HTMLDivElement>(null);\n  const [isRendered, setIsRendered] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  // Detect mobile viewport\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n\n    checkMobile();\n    window.addEventListener(\"resize\", checkMobile);\n    return () => window.removeEventListener(\"resize\", checkMobile);\n  }, []);\n\n  // IntersectionObserver for lazy rendering\n  useEffect(() => {\n    // Skip observer if not mobile (when mobileOnly is true)\n    if (mobileOnly && !isMobile) {\n      setIsRendered(true);\n      return;\n    }\n\n    // Skip if no ref\n    if (!observeRef.current) return;\n\n    // Check for IntersectionObserver support\n    if (!(\"IntersectionObserver\" in window)) {\n      // Fallback: render immediately\n      setIsRendered(true);\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsRendered(true);\n            // Disconnect after first render (performance + memory)\n            observer.disconnect();\n          }\n        });\n      },\n      {\n        threshold,\n        rootMargin,\n      },\n    );\n\n    observer.observe(observeRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [threshold, rootMargin, isMobile, mobileOnly]);\n\n  return {\n    observeRef,\n    isRendered,\n    isMobile,\n  };\n}\n","\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { trackMathRendering } from \"@/lib/analytics/mathMetrics\";\nimport { getDescription } from \"@/lib/math/descriptions\";\n\n/**\n * Enhances KaTeX-rendered math elements with ARIA accessibility attributes\n * Works with Streamdown's built-in math rendering (rehype-katex)\n *\n * Phase 4C enhancements:\n * - 50+ semantic patterns (vs original 27)\n * - Inline math support\n * - Streaming aria-live regions\n * - MathML enhancement layer\n */\nexport function useMathAccessibility<T extends HTMLElement = HTMLElement>(\n  containerRef: React.RefObject<T | null>,\n  isStreaming = false,\n) {\n  const processedElementsRef = useRef<Set<Element>>(new Set());\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Find all KaTeX rendered elements (both inline and display)\n    const mathElements = containerRef.current.querySelectorAll(\n      \".katex-display, .katex:not(.katex-display)\",\n    );\n\n    mathElements.forEach((element) => {\n      // Skip if already processed\n      if (processedElementsRef.current.has(element)) return;\n\n      // Extract LaTeX from MathML annotation if available\n      const annotation = element.querySelector(\n        'annotation[encoding=\"application/x-tex\"]',\n      );\n      const latex = annotation?.textContent || \"\";\n\n      // Determine display mode\n      const displayMode = element.classList.contains(\"katex-display\");\n\n      // Start performance tracking\n      const endTracking = trackMathRendering(latex, displayMode, isStreaming);\n\n      // Get semantic description (50+ patterns)\n      const description = getDescription(latex);\n\n      // Add ARIA attributes\n      element.setAttribute(\"role\", \"math\");\n      element.setAttribute(\"aria-label\", description);\n\n      // Add streaming support (NEW in Phase 4C)\n      if (isStreaming) {\n        element.setAttribute(\"aria-live\", \"polite\");\n        element.setAttribute(\"aria-atomic\", \"true\");\n      }\n\n      // Validate MathML presence (critical for screen readers)\n      const hasMathML = element.querySelector(\"math\");\n      if (!hasMathML) {\n        console.warn(\n          \"[Accessibility] MathML not found - ensure KaTeX output: 'htmlAndMathml' is set\",\n        );\n      }\n\n      // MathML enhancement for browsers that support it (NEW in Phase 4C)\n      if (\"MathMLElement\" in window && !hasMathML && latex) {\n        try {\n          // Create visible MathML for enhanced screen reader support using safe DOM methods\n          const mathWrapper = document.createElement(\"span\");\n          mathWrapper.setAttribute(\"aria-hidden\", \"true\");\n          mathWrapper.style.position = \"absolute\";\n          mathWrapper.style.clip = \"rect(1px, 1px, 1px, 1px)\";\n\n          const mathElement = document.createElementNS(\n            \"http://www.w3.org/1998/Math/MathML\",\n            \"math\",\n          );\n          const annotationElement = document.createElementNS(\n            \"http://www.w3.org/1998/Math/MathML\",\n            \"annotation\",\n          );\n          annotationElement.setAttribute(\"encoding\", \"application/x-tex\");\n          annotationElement.textContent = latex; // Safe - using textContent\n\n          mathElement.appendChild(annotationElement);\n          mathWrapper.appendChild(mathElement);\n          element.appendChild(mathWrapper);\n        } catch (error) {\n          // MathML enhancement errors are non-critical\n          console.debug(\"[Accessibility] MathML enhancement failed\", error);\n        }\n      }\n\n      processedElementsRef.current.add(element);\n\n      // End tracking (measure total processing time)\n      endTracking();\n    });\n  }, [containerRef, isStreaming]);\n}\n","import { analytics } from \"@/lib/analytics\";\n\n/**\n * Performance tracking wrapper for math rendering\n * Returns cleanup function to call when rendering completes\n *\n * Tracks:\n * - Render duration (time to paint)\n * - Equation complexity (length)\n * - Display mode (inline vs block)\n * - Streaming state\n *\n * Warns if rendering exceeds 50ms threshold\n */\nexport function trackMathRendering(\n  latex: string,\n  displayMode: boolean,\n  isStreaming: boolean,\n) {\n  const start = performance.now();\n\n  return () => {\n    const duration = performance.now() - start;\n\n    analytics.track(\"math_rendered\", {\n      displayMode,\n      equationLength: latex.length,\n      renderTimeMs: Math.round(duration),\n      isStreaming,\n    });\n\n    // Performance warning for slow renders\n    if (duration > 50) {\n      console.warn(\n        `[Math] Slow render: ${Math.round(duration)}ms for ${latex.length} chars`,\n        { latex: latex.slice(0, 50) },\n      );\n    }\n  };\n}\n","/**\n * Semantic pattern library for math accessibility\n * Generates human-readable descriptions from LaTeX source\n *\n * Coverage: 50+ patterns across calculus, linear algebra, statistics, physics\n * Fallback chain: pattern â†’ heuristic â†’ generic\n */\n\ninterface MathPattern {\n  regex: RegExp;\n  describe: (matches: RegExpMatchArray) => string;\n}\n\n/**\n * Semantic pattern database - ordered by specificity (most specific first)\n */\nexport const mathPatterns: MathPattern[] = [\n  // ========== CALCULUS ==========\n\n  // Definite integrals\n  {\n    regex: /\\\\int_\\{(.+?)\\}\\^\\{(.+?)\\}(.+?)d([a-z])/,\n    describe: (m) =>\n      `Integral from ${m[1]} to ${m[2]} of ${m[3]} with respect to ${m[4]}`,\n  },\n\n  // Indefinite integrals\n  {\n    regex: /\\\\int\\s*(.+?)d([a-z])/,\n    describe: (m) => `Integral of ${m[1]} with respect to ${m[2]}`,\n  },\n\n  // Contour integrals\n  {\n    regex: /\\\\oint/,\n    describe: () => \"Contour integral\",\n  },\n\n  // Derivatives - Leibniz notation\n  {\n    regex: /\\\\frac\\{d\\}\\{d([a-z])\\}/,\n    describe: (m) => `Derivative with respect to ${m[1]}`,\n  },\n\n  {\n    regex: /\\\\frac\\{d(.+?)\\}\\{d([a-z])\\}/,\n    describe: (m) => `Derivative of ${m[1]} with respect to ${m[2]}`,\n  },\n\n  // Partial derivatives\n  {\n    regex: /\\\\frac\\{\\\\partial\\}\\{\\\\partial\\s*([a-z])\\}/,\n    describe: (m) => `Partial derivative with respect to ${m[1]}`,\n  },\n\n  {\n    regex: /\\\\frac\\{\\\\partial(.+?)\\}\\{\\\\partial\\s*([a-z])\\}/,\n    describe: (m) => `Partial derivative of ${m[1]} with respect to ${m[2]}`,\n  },\n\n  // Gradient\n  {\n    regex: /\\\\nabla/,\n    describe: () => \"Gradient or del operator\",\n  },\n\n  // Limits\n  {\n    regex: /\\\\lim_\\{(.+?)\\\\to\\s*(.+?)\\}/,\n    describe: (m) => `Limit as ${m[1]} approaches ${m[2]}`,\n  },\n\n  // ========== SUMMATION & PRODUCTS ==========\n\n  // Summation with bounds\n  {\n    regex: /\\\\sum_\\{(.+?)\\}\\^\\{(.+?)\\}/,\n    describe: (m) => `Sum from ${m[1]} to ${m[2]}`,\n  },\n\n  // Infinite summation\n  {\n    regex: /\\\\sum_\\{(.+?)\\}\\^\\{\\\\infty\\}/,\n    describe: (m) => `Infinite sum starting from ${m[1]}`,\n  },\n\n  // Product with bounds\n  {\n    regex: /\\\\prod_\\{(.+?)\\}\\^\\{(.+?)\\}/,\n    describe: (m) => `Product from ${m[1]} to ${m[2]}`,\n  },\n\n  // ========== LINEAR ALGEBRA ==========\n\n  // Matrices\n  {\n    regex: /\\\\begin\\{(b|p|v|B|V|small)?matrix\\}/,\n    describe: (m) => {\n      const type = m[1] || \"\";\n      const prefix =\n        type === \"b\"\n          ? \"square-bracketed\"\n          : type === \"p\"\n            ? \"parenthesized\"\n            : type === \"v\"\n              ? \"bar-bracketed\"\n              : \"\";\n      return `${prefix ? `${prefix} ` : \"\"}Matrix`.trim();\n    },\n  },\n\n  // Determinant\n  {\n    regex: /\\\\det\\s*\\((.+?)\\)|\\\\begin\\{vmatrix\\}/,\n    describe: () => \"Determinant\",\n  },\n\n  // Vector\n  {\n    regex: /\\\\vec\\{(.+?)\\}/,\n    describe: (m) => `Vector ${m[1]}`,\n  },\n\n  // Dot product\n  {\n    regex: /\\\\cdot/,\n    describe: () => \"Dot product\",\n  },\n\n  // Cross product\n  {\n    regex: /\\\\times/,\n    describe: () => \"Cross product or Cartesian product\",\n  },\n\n  // Norm\n  {\n    regex: /\\\\lVert(.+?)\\\\rVert|\\\\norm\\{(.+?)\\}/,\n    describe: (m) => `Norm of ${m[1] || m[2]}`,\n  },\n\n  // ========== STATISTICS & PROBABILITY ==========\n\n  // Expected value\n  {\n    regex: /\\\\mathbb\\{E\\}\\[(.+?)\\]/,\n    describe: (m) => `Expected value of ${m[1]}`,\n  },\n\n  // Variance\n  {\n    regex: /\\\\text\\{Var\\}\\[(.+?)\\]/,\n    describe: (m) => `Variance of ${m[1]}`,\n  },\n\n  // Probability\n  {\n    regex: /P\\((.+?)\\)/,\n    describe: (m) => `Probability of ${m[1]}`,\n  },\n\n  // Conditional probability\n  {\n    regex: /P\\((.+?)\\|(.+?)\\)/,\n    describe: (m) => `Probability of ${m[1]} given ${m[2]}`,\n  },\n\n  // Normal distribution\n  {\n    regex: /\\\\mathcal\\{N\\}\\((.+?),\\s*(.+?)\\)/,\n    describe: (m) =>\n      `Normal distribution with mean ${m[1]} and variance ${m[2]}`,\n  },\n\n  // ========== FRACTIONS & ROOTS ==========\n\n  // Fractions\n  {\n    regex: /\\\\frac\\{(.+?)\\}\\{(.+?)\\}/,\n    describe: (m) => `Fraction: ${m[1]} over ${m[2]}`,\n  },\n\n  // Square root\n  {\n    regex: /\\\\sqrt\\{(.+?)\\}/,\n    describe: (m) => `Square root of ${m[1]}`,\n  },\n\n  // nth root\n  {\n    regex: /\\\\sqrt\\[(.+?)\\]\\{(.+?)\\}/,\n    describe: (m) => `${m[1]}-th root of ${m[2]}`,\n  },\n\n  // ========== SET THEORY ==========\n\n  // Union\n  {\n    regex: /\\\\cup/,\n    describe: () => \"Set union\",\n  },\n\n  // Intersection\n  {\n    regex: /\\\\cap/,\n    describe: () => \"Set intersection\",\n  },\n\n  // Subset\n  {\n    regex: /\\\\subset/,\n    describe: () => \"Subset relation\",\n  },\n\n  // Element of\n  {\n    regex: /\\\\in/,\n    describe: () => \"Element of\",\n  },\n\n  // Empty set\n  {\n    regex: /\\\\emptyset/,\n    describe: () => \"Empty set\",\n  },\n\n  // ========== LOGIC ==========\n\n  // Universal quantifier\n  {\n    regex: /\\\\forall/,\n    describe: () => \"For all\",\n  },\n\n  // Existential quantifier\n  {\n    regex: /\\\\exists/,\n    describe: () => \"There exists\",\n  },\n\n  // Implication\n  {\n    regex: /\\\\Rightarrow|\\\\implies/,\n    describe: () => \"Implies\",\n  },\n\n  // Equivalence\n  {\n    regex: /\\\\Leftrightarrow|\\\\iff/,\n    describe: () => \"If and only if\",\n  },\n\n  // Negation\n  {\n    regex: /\\\\neg/,\n    describe: () => \"Not\",\n  },\n\n  // ========== GREEK LETTERS (contextual) ==========\n\n  // Statistical expressions\n  {\n    regex: /\\\\(mu|sigma|alpha|beta|gamma|delta)/,\n    describe: (m) => {\n      const letter = m[1];\n      if (letter === \"mu\") return \"Statistical parameter mu\";\n      if (letter === \"sigma\") return \"Standard deviation sigma\";\n      if (letter === \"alpha\" || letter === \"beta\")\n        return \"Statistical parameter\";\n      return \"Greek letter expression\";\n    },\n  },\n\n  // Angles\n  {\n    regex: /\\\\(theta|phi|psi)/,\n    describe: () => \"Angle expression\",\n  },\n\n  // ========== CHEMISTRY (mhchem) ==========\n\n  // Chemical formula\n  {\n    regex: /\\\\ce\\{(.+?)\\}/,\n    describe: (m) => `Chemical formula: ${m[1]}`,\n  },\n\n  // Physical unit\n  {\n    regex: /\\\\pu\\{(.+?)\\}/,\n    describe: (m) => `Physical unit: ${m[1]}`,\n  },\n\n  // ========== SPECIAL SYMBOLS ==========\n\n  // Infinity\n  {\n    regex: /\\\\infty/,\n    describe: () => \"Expression involving infinity\",\n  },\n\n  // Approximately equal\n  {\n    regex: /\\\\approx/,\n    describe: () => \"Approximately equal to\",\n  },\n\n  // Proportional\n  {\n    regex: /\\\\propto/,\n    describe: () => \"Proportional to\",\n  },\n];\n\n/**\n * Heuristic fallback patterns (simpler, broader matching)\n */\nconst heuristicPatterns: { test: (latex: string) => boolean; label: string }[] =\n  [\n    { test: (s) => s.includes(\"\\\\int\"), label: \"Integral expression\" },\n    { test: (s) => s.includes(\"\\\\sum\"), label: \"Summation\" },\n    { test: (s) => s.includes(\"\\\\prod\"), label: \"Product\" },\n    { test: (s) => s.includes(\"\\\\frac\"), label: \"Fraction\" },\n    { test: (s) => s.includes(\"\\\\sqrt\"), label: \"Root expression\" },\n    {\n      test: (s) => s.includes(\"matrix\"),\n      label: \"Matrix or array expression\",\n    },\n    { test: (s) => s.includes(\"\\\\lim\"), label: \"Limit expression\" },\n    { test: (s) => s.includes(\"\\\\partial\"), label: \"Partial derivative\" },\n    {\n      test: (s) =>\n        s.includes(\"\\\\mathbb{E}\") ||\n        s.includes(\"\\\\text{Var}\") ||\n        s.includes(\"\\\\sigma\"),\n      label: \"Statistical expression\",\n    },\n    {\n      test: (s) =>\n        s.includes(\"\\\\Rightarrow\") ||\n        s.includes(\"\\\\Leftarrow\") ||\n        s.includes(\"\\\\iff\"),\n      label: \"Logical implication\",\n    },\n    {\n      test: (s) => s.includes(\"\\\\cup\") || s.includes(\"\\\\cap\"),\n      label: \"Set operation\",\n    },\n  ];\n\n/**\n * Generate semantic description for LaTeX expression\n * Falls back through: pattern â†’ heuristic â†’ generic\n */\nexport function getDescription(latex: string): string {\n  if (!latex) return \"Mathematical expression\";\n\n  // Try semantic patterns first (most specific)\n  for (const pattern of mathPatterns) {\n    const match = latex.match(pattern.regex);\n    if (match) {\n      return pattern.describe(match);\n    }\n  }\n\n  // Try heuristic patterns (broader)\n  for (const heuristic of heuristicPatterns) {\n    if (heuristic.test(latex)) {\n      return heuristic.label;\n    }\n  }\n\n  // Final fallback\n  return \"Mathematical expression\";\n}\n\n/**\n * Check if LaTeX likely contains display math (for context)\n */\nexport function isDisplayMath(latex: string): boolean {\n  return (\n    latex.includes(\"\\\\[\") ||\n    latex.includes(\"\\\\begin{\") ||\n    latex.includes(\"\\\\int\") ||\n    latex.includes(\"\\\\sum\") ||\n    latex.includes(\"matrix\")\n  );\n}\n","\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport { analytics } from \"@/lib/analytics\";\n\n/**\n * Enhances KaTeX-rendered math elements with copy-to-clipboard buttons\n * Works with Streamdown's built-in math rendering (rehype-katex)\n *\n * Phase 4D enhancements:\n * - Keyboard shortcuts (Cmd/Ctrl+C on focused equation)\n * - Inline math support (not just display)\n * - Multi-format clipboard (LaTeX + clean HTML + MathML)\n */\nexport function useMathCopyButtons<T extends HTMLElement = HTMLElement>(\n  containerRef: React.RefObject<T | null>,\n) {\n  const addedButtonsRef = useRef<Set<Element>>(new Set());\n\n  // Keyboard shortcut handler\n  useEffect(() => {\n    const handleKeydown = (e: KeyboardEvent) => {\n      // Cmd/Ctrl+C on focused math element\n      if ((e.metaKey || e.ctrlKey) && e.key === \"c\") {\n        const target = e.target as HTMLElement;\n        if (\n          target.classList.contains(\"katex\") ||\n          target.classList.contains(\"katex-display\")\n        ) {\n          const annotation = target.querySelector(\n            'annotation[encoding=\"application/x-tex\"]',\n          );\n          const latex = annotation?.textContent;\n          if (latex) {\n            e.preventDefault();\n            copyToClipboard(latex, target);\n          }\n        }\n      }\n    };\n\n    document.addEventListener(\"keydown\", handleKeydown);\n    return () => document.removeEventListener(\"keydown\", handleKeydown);\n  }, []);\n\n  useEffect(() => {\n    if (!containerRef.current) return;\n\n    // Find all math elements (display + inline)\n    const displayMath = containerRef.current.querySelectorAll(\".katex-display\");\n    const inlineMath = containerRef.current.querySelectorAll(\n      \".katex:not(.katex-display)\",\n    );\n\n    // Process display math with visible buttons\n    displayMath.forEach((mathElement) => {\n      if (addedButtonsRef.current.has(mathElement)) return;\n\n      const annotation = mathElement.querySelector(\n        'annotation[encoding=\"application/x-tex\"]',\n      );\n      const latexSource = annotation?.textContent || \"\";\n      if (!latexSource) return;\n\n      // Wrap in interactive container\n      const wrapper = document.createElement(\"div\");\n      wrapper.className = \"group relative\";\n\n      mathElement.parentNode?.insertBefore(wrapper, mathElement);\n      wrapper.appendChild(mathElement);\n\n      // Create copy button\n      const button = document.createElement(\"button\");\n      button.className =\n        \"absolute right-2 top-2 h-8 w-8 flex items-center justify-center rounded-md border border-border bg-background opacity-0 transition-opacity group-hover:opacity-100 focus-visible:opacity-100 hover:bg-accent hover:text-accent-foreground\";\n      button.setAttribute(\"aria-label\", \"Copy LaTeX source\");\n      button.setAttribute(\"type\", \"button\");\n\n      const copyIcon = createCopyIcon();\n      const checkIcon = createCheckIcon();\n      button.appendChild(copyIcon);\n      button.appendChild(checkIcon);\n\n      button.addEventListener(\"click\", async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        await handleCopy(latexSource, mathElement, copyIcon, checkIcon, true);\n      });\n\n      wrapper.appendChild(button);\n      addedButtonsRef.current.add(mathElement);\n    });\n\n    // Process inline math with focus support\n    inlineMath.forEach((mathElement) => {\n      if (addedButtonsRef.current.has(mathElement)) return;\n\n      const annotation = mathElement.querySelector(\n        'annotation[encoding=\"application/x-tex\"]',\n      );\n      const latexSource = annotation?.textContent || \"\";\n      if (!latexSource) return;\n\n      // Make inline math focusable for keyboard copy\n      mathElement.setAttribute(\"tabindex\", \"0\");\n      mathElement.setAttribute(\"role\", \"button\");\n      mathElement.setAttribute(\"aria-label\", `Math: ${latexSource}`);\n\n      // Add inline copy button (shows on hover/focus)\n      const button = document.createElement(\"button\");\n      button.className = \"inline-math-copy\";\n      button.setAttribute(\"aria-label\", \"Copy LaTeX\");\n      button.setAttribute(\"type\", \"button\");\n\n      const copyIcon = createCopyIcon();\n      button.appendChild(copyIcon);\n\n      button.addEventListener(\"click\", async (e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        await copyToClipboard(latexSource, mathElement);\n      });\n\n      mathElement.appendChild(button);\n      addedButtonsRef.current.add(mathElement);\n    });\n  }, [containerRef]);\n}\n\n/**\n * Copy LaTeX to clipboard with multi-format support\n */\nasync function copyToClipboard(latex: string, element: Element): Promise<void> {\n  const isDisplay = element.classList.contains(\"katex-display\");\n\n  try {\n    // Prepare formats\n    const wrappedLatex = isDisplay ? `$$${latex}$$` : `\\\\(${latex}\\\\)`;\n\n    // Clean HTML (remove background gradients, keep structure)\n    const katexHtml = element.querySelector(\".katex-html\");\n    const cleanHtml = katexHtml\n      ? isDisplay\n        ? `<div class=\"math-display\">${katexHtml.innerHTML}</div>`\n        : `<span class=\"math-inline\">${katexHtml.innerHTML}</span>`\n      : \"\";\n\n    // Multi-format clipboard\n    if (navigator.clipboard && ClipboardItem) {\n      const items: Record<string, Blob> = {\n        \"text/plain\": new Blob([wrappedLatex], { type: \"text/plain\" }),\n      };\n\n      if (cleanHtml) {\n        items[\"text/html\"] = new Blob([cleanHtml], { type: \"text/html\" });\n      }\n\n      // Optional: MathML for compatible apps\n      if (\"MathMLElement\" in window && latex) {\n        try {\n          const mathml = `<math><annotation encoding=\"application/x-tex\">${latex}</annotation></math>`;\n          items[\"application/mathml+xml\"] = new Blob([mathml], {\n            type: \"application/mathml+xml\",\n          });\n        } catch {\n          // MathML generation failed - non-critical\n        }\n      }\n\n      await navigator.clipboard.write([new ClipboardItem(items)]);\n    } else {\n      // Fallback to plain text\n      await navigator.clipboard.writeText(wrappedLatex);\n    }\n\n    // Track analytics\n    analytics.track(\"math_copied\", {\n      format: cleanHtml ? \"both\" : \"latex\",\n      equationLength: latex.length,\n    });\n  } catch (error) {\n    console.error(\"Failed to copy math:\", error);\n    // Final fallback\n    try {\n      await navigator.clipboard.writeText(\n        isDisplay ? `$$${latex}$$` : `\\\\(${latex}\\\\)`,\n      );\n    } catch (fallbackError) {\n      console.error(\"Fallback copy failed:\", fallbackError);\n    }\n  }\n}\n\n/**\n * Handle copy with visual feedback\n */\nasync function handleCopy(\n  latex: string,\n  element: Element,\n  copyIcon: SVGSVGElement,\n  checkIcon: SVGSVGElement,\n  _isDisplay: boolean,\n): Promise<void> {\n  await copyToClipboard(latex, element);\n\n  // Visual feedback\n  copyIcon.classList.add(\"hidden\");\n  checkIcon.classList.remove(\"hidden\");\n\n  setTimeout(() => {\n    copyIcon.classList.remove(\"hidden\");\n    checkIcon.classList.add(\"hidden\");\n  }, 2000);\n}\n\n/**\n * Create copy icon SVG using safe DOM methods\n */\nfunction createCopyIcon(): SVGSVGElement {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  svg.setAttribute(\"width\", \"16\");\n  svg.setAttribute(\"height\", \"16\");\n  svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n  svg.setAttribute(\"fill\", \"none\");\n  svg.setAttribute(\"stroke\", \"currentColor\");\n  svg.setAttribute(\"stroke-width\", \"2\");\n  svg.setAttribute(\"stroke-linecap\", \"round\");\n  svg.setAttribute(\"stroke-linejoin\", \"round\");\n  svg.classList.add(\"copy-icon\");\n\n  const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n  rect.setAttribute(\"width\", \"14\");\n  rect.setAttribute(\"height\", \"14\");\n  rect.setAttribute(\"x\", \"8\");\n  rect.setAttribute(\"y\", \"8\");\n  rect.setAttribute(\"rx\", \"2\");\n  rect.setAttribute(\"ry\", \"2\");\n\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  path.setAttribute(\n    \"d\",\n    \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\",\n  );\n\n  svg.appendChild(rect);\n  svg.appendChild(path);\n\n  return svg;\n}\n\n/**\n * Create check icon SVG using safe DOM methods\n */\nfunction createCheckIcon(): SVGSVGElement {\n  const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n  svg.setAttribute(\"width\", \"16\");\n  svg.setAttribute(\"height\", \"16\");\n  svg.setAttribute(\"viewBox\", \"0 0 24 24\");\n  svg.setAttribute(\"fill\", \"none\");\n  svg.setAttribute(\"stroke\", \"currentColor\");\n  svg.setAttribute(\"stroke-width\", \"2\");\n  svg.setAttribute(\"stroke-linecap\", \"round\");\n  svg.setAttribute(\"stroke-linejoin\", \"round\");\n  svg.classList.add(\"check-icon\", \"hidden\", \"text-green-500\");\n\n  const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n  path.setAttribute(\"d\", \"M20 6 9 17l-5-5\");\n\n  svg.appendChild(path);\n\n  return svg;\n}\n","import { useEffect, useRef, useState } from \"react\";\nimport { getNextCompleteToken } from \"@/lib/utils/markdownTokens\";\n\nexport interface StreamBufferOptions {\n  /**\n   * Characters per second for normal streaming.\n   * @default 200\n   */\n  charsPerSecond?: number;\n\n  /**\n   * Minimum token size (prevents splitting mid-word).\n   * @default 3\n   */\n  minTokenSize?: number;\n\n  /**\n   * Buffer size threshold (bytes) to trigger faster drain.\n   * When buffer exceeds this, speed doubles.\n   * @default 5000\n   */\n  adaptiveThreshold?: number;\n}\n\nexport interface StreamBufferResult {\n  /**\n   * The content to display (smoothly revealed).\n   */\n  displayContent: string;\n\n  /**\n   * Whether there's still content buffered (not yet displayed).\n   * Useful for showing cursor even after streaming stops.\n   */\n  hasBufferedContent: boolean;\n}\n\n/**\n * Buffers streaming content and reveals it smoothly character-by-character.\n *\n * Decouples network timing (chunky server updates) from visual timing\n * (smooth RAF-based character reveal). Prevents layout shifts and jarring\n * text appearance during streaming.\n *\n * @param serverContent - The full content from the server (grows over time)\n * @param isStreaming - Whether content is actively streaming\n * @param options - Configuration options\n *\n * @example\n * const { displayContent, hasBufferedContent } = useStreamBuffer(\n *   message.partialContent || message.content || \"\",\n *   message.status === \"generating\"\n * );\n */\nexport function useStreamBuffer(\n  serverContent: string,\n  isStreaming: boolean,\n  options?: StreamBufferOptions,\n): StreamBufferResult {\n  const [displayContent, setDisplayContent] = useState(\"\");\n\n  // Configuration\n  const baseSpeed = options?.charsPerSecond ?? 200;\n  const minTokenSize = options?.minTokenSize ?? 3;\n  const adaptiveThreshold = options?.adaptiveThreshold ?? 5000;\n\n  // Internal state (refs to avoid triggering re-renders)\n  const bufferRef = useRef(\"\");\n  const lastServerContentRef = useRef(\"\");\n  const rafIdRef = useRef<number | undefined>(undefined);\n  const lastTickRef = useRef(Date.now());\n\n  // Track whether buffer has content\n  const hasBufferedContent = bufferRef.current.length > 0;\n\n  useEffect(() => {\n    // Detect new content from server\n    if (serverContent !== lastServerContentRef.current) {\n      if (\n        serverContent.length > lastServerContentRef.current.length &&\n        serverContent.startsWith(lastServerContentRef.current)\n      ) {\n        // Server sent new chunk - add to buffer\n        const newChunk = serverContent.slice(\n          lastServerContentRef.current.length,\n        );\n        bufferRef.current += newChunk;\n      } else {\n        // Content replaced or changed non-monotonically (e.g. edits, citation expansion)\n        // Reset everything\n        setDisplayContent(serverContent);\n        bufferRef.current = \"\";\n        lastTickRef.current = Date.now();\n      }\n\n      lastServerContentRef.current = serverContent;\n    }\n\n    // If not streaming, flush buffer immediately and stop RAF\n    if (!isStreaming) {\n      if (bufferRef.current.length > 0) {\n        // Drain remaining buffer\n        setDisplayContent(serverContent);\n        bufferRef.current = \"\";\n      } else if (displayContent !== serverContent) {\n        // Ensure display syncs with server (edge case)\n        setDisplayContent(serverContent);\n      }\n\n      if (rafIdRef.current) {\n        cancelAnimationFrame(rafIdRef.current);\n        rafIdRef.current = undefined;\n      }\n      return;\n    }\n\n    // RAF loop: smoothly release characters from buffer\n    const tick = () => {\n      const now = Date.now();\n      const elapsed = now - lastTickRef.current;\n\n      // Adaptive speed: faster drain when buffer is large\n      const currentSpeed =\n        bufferRef.current.length > adaptiveThreshold\n          ? baseSpeed * 2\n          : baseSpeed;\n\n      const charsToRelease = Math.floor((elapsed / 1000) * currentSpeed);\n\n      if (charsToRelease > 0 && bufferRef.current.length > 0) {\n        // Get token-aware chunk (respects word boundaries and markdown)\n        const nextChunk = getNextCompleteToken(\n          bufferRef.current,\n          charsToRelease,\n          minTokenSize,\n        );\n\n        if (nextChunk.length > 0) {\n          setDisplayContent((prev) => prev + nextChunk);\n          bufferRef.current = bufferRef.current.slice(nextChunk.length);\n          lastTickRef.current = now;\n        }\n      }\n\n      // Continue RAF loop\n      rafIdRef.current = requestAnimationFrame(tick);\n    };\n\n    // Start RAF if not already running\n    if (!rafIdRef.current) {\n      lastTickRef.current = Date.now();\n      rafIdRef.current = requestAnimationFrame(tick);\n    }\n\n    // Cleanup on unmount or when streaming stops\n    return () => {\n      if (rafIdRef.current) {\n        cancelAnimationFrame(rafIdRef.current);\n        rafIdRef.current = undefined;\n      }\n    };\n  }, [\n    serverContent,\n    isStreaming,\n    baseSpeed,\n    minTokenSize,\n    adaptiveThreshold,\n    displayContent,\n  ]);\n\n  return {\n    displayContent,\n    hasBufferedContent,\n  };\n}\n","/**\n * Markdown Token Parser\n * Ensures we don't show incomplete markdown syntax during streaming.\n * Prevents \"Flash of Incomplete Markdown\" (FOIM).\n */\n\n/**\n * Returns the longest complete markdown prefix from the given text.\n * Incomplete tokens (unclosed code blocks, bold, links, etc.) are held back.\n *\n * @example\n * getCompleteMarkdownPrefix(\"**bold te\") â†’ \"\" (waits for closing **)\n * getCompleteMarkdownPrefix(\"**bold text**\") â†’ \"**bold text**\"\n * getCompleteMarkdownPrefix(\"```js\\nconst\") â†’ \"\" (waits for closing ```)\n */\nexport function getCompleteMarkdownPrefix(text: string): string {\n  if (!text) return \"\";\n\n  let result = text;\n\n  // 1. Check for incomplete code blocks (``` must be paired)\n  const codeBlockMatches = text.match(/```/g);\n  const codeBlockCount = codeBlockMatches?.length ?? 0;\n\n  if (codeBlockCount % 2 !== 0) {\n    // Odd number of ``` - incomplete block\n    const lastBlockStart = text.lastIndexOf(\"```\");\n    result = text.slice(0, lastBlockStart);\n  }\n\n  // 2. Check for incomplete inline code (` must be paired)\n  // Only check the portion after code blocks to avoid false positives\n  const afterCodeBlocks = result;\n  const backtickMatches = afterCodeBlocks.match(/(?<!`)`(?!`)/g); // Single backticks only\n  const backtickCount = backtickMatches?.length ?? 0;\n\n  if (backtickCount % 2 !== 0) {\n    // Odd number of ` - incomplete inline code\n    const lastTick = afterCodeBlocks.lastIndexOf(\"`\");\n    result = afterCodeBlocks.slice(0, lastTick);\n  }\n\n  // 3. Check for incomplete bold/italic (**, *, __, _)\n  // Look at last 20 chars to avoid expensive full-text regex\n  const trailing = result.slice(-20);\n  const incompleteEmphasis =\n    trailing.match(/(\\*\\*(?!\\*\\*)(?:[^*]|(?!\\*\\*)\\*)*$)/) || // Unclosed **\n    trailing.match(/((?<!\\*)\\*(?!\\*)(?:[^*])*$)/) || // Unclosed *\n    trailing.match(/(__(?!__)(?:[^_]|(?!__)_)*$)/) || // Unclosed __\n    trailing.match(/((?<!_)_(?!_)(?:[^_])*$)/); // Unclosed _\n\n  if (incompleteEmphasis) {\n    const matchLength = incompleteEmphasis[0].length;\n    result = result.slice(0, -matchLength);\n  }\n\n  // 4. Check for incomplete links/images\n  // Pattern: ![text or [text with no closing ]\n  const incompleteLinkOrImage = result.match(/(!?\\[[^\\]]*?)$/);\n  if (incompleteLinkOrImage) {\n    const matchLength = incompleteLinkOrImage[0].length;\n    result = result.slice(0, -matchLength);\n  }\n\n  // 5. Check for link with text but no URL: [text](\n  const incompleteLinkUrl = result.match(/\\[[^\\]]+\\]\\((?:[^)]*?)$/);\n  if (incompleteLinkUrl) {\n    const matchLength = incompleteLinkUrl[0].length;\n    result = result.slice(0, -matchLength);\n  }\n\n  return result;\n}\n\n/**\n * Get the next complete token-aware chunk from a buffer.\n * Prefers breaking at word boundaries (whitespace, punctuation).\n *\n * @param buffer - The text buffer to chunk\n * @param maxChars - Maximum characters to return\n * @param minTokenSize - Minimum chunk size (prevents single-char splits)\n * @returns A chunk of text that respects word boundaries\n */\nexport function getNextCompleteToken(\n  buffer: string,\n  maxChars: number,\n  minTokenSize = 3,\n): string {\n  if (buffer.length <= maxChars) {\n    // Entire buffer fits, but check for incomplete markdown\n    return getCompleteMarkdownPrefix(buffer);\n  }\n\n  // Look for safe break points (whitespace, punctuation)\n  // Start from maxChars and scan backwards for word boundary\n  for (let i = maxChars; i >= minTokenSize; i--) {\n    const char = buffer[i];\n    if (/[\\s.,;:!?)\\]}>]/.test(char)) {\n      // Found a break point - return chunk up to and including this char\n      const chunk = buffer.slice(0, i + 1);\n      return getCompleteMarkdownPrefix(chunk);\n    }\n  }\n\n  // No break point found - respect minTokenSize as fallback\n  const chunk = buffer.slice(0, Math.max(maxChars, minTokenSize));\n  return getCompleteMarkdownPrefix(chunk);\n}\n","import katex from '../katex.mjs';\n\n/* eslint-disable */\n\n/* -*- Mode: JavaScript; indent-tabs-mode:nil; js-indent-level: 2 -*- */\n\n/* vim: set ts=2 et sw=2 tw=80: */\n\n/*************************************************************\n *\n *  KaTeX mhchem.js\n *\n *  This file implements a KaTeX version of mhchem version 3.3.0.\n *  It is adapted from MathJax/extensions/TeX/mhchem.js\n *  It differs from the MathJax version as follows:\n *    1. The interface is changed so that it can be called from KaTeX, not MathJax.\n *    2. \\rlap and \\llap are replaced with \\mathrlap and \\mathllap.\n *    3. Four lines of code are edited in order to use \\raisebox instead of \\raise.\n *    4. The reaction arrow code is simplified. All reaction arrows are rendered\n *       using KaTeX extensible arrows instead of building non-extensible arrows.\n *    5. \\tripledash vertical alignment is slightly adjusted.\n *\n *    This code, as other KaTeX code, is released under the MIT license.\n * \n * /*************************************************************\n *\n *  MathJax/extensions/TeX/mhchem.js\n *\n *  Implements the \\ce command for handling chemical formulas\n *  from the mhchem LaTeX package.\n *\n *  ---------------------------------------------------------------------\n *\n *  Copyright (c) 2011-2015 The MathJax Consortium\n *  Copyright (c) 2015-2018 Martin Hensel\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n//\n// Coding Style\n//   - use '' for identifiers that can by minified/uglified\n//   - use \"\" for strings that need to stay untouched\n// version: \"3.3.0\" for MathJax and KaTeX\n// Add \\ce, \\pu, and \\tripledash to the KaTeX macros.\nkatex.__defineMacro(\"\\\\ce\", function (context) {\n  return chemParse(context.consumeArgs(1)[0], \"ce\");\n});\n\nkatex.__defineMacro(\"\\\\pu\", function (context) {\n  return chemParse(context.consumeArgs(1)[0], \"pu\");\n}); //  Needed for \\bond for the ~ forms\n//  Raise by 2.56mu, not 2mu. We're raising a hyphen-minus, U+002D, not \n//  a mathematical minus, U+2212. So we need that extra 0.56.\n\n\nkatex.__defineMacro(\"\\\\tripledash\", \"{\\\\vphantom{-}\\\\raisebox{2.56mu}{$\\\\mkern2mu\" + \"\\\\tiny\\\\text{-}\\\\mkern1mu\\\\text{-}\\\\mkern1mu\\\\text{-}\\\\mkern2mu$}}\");\n//  This is the main function for handing the \\ce and \\pu commands.\n//  It takes the argument to \\ce or \\pu and returns the corresponding TeX string.\n//\n\nvar chemParse = function chemParse(tokens, stateMachine) {\n  // Recreate the argument string from KaTeX's array of tokens.\n  var str = \"\";\n  var expectedLoc = tokens.length && tokens[tokens.length - 1].loc.start;\n\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    if (tokens[i].loc.start > expectedLoc) {\n      // context.consumeArgs has eaten a space.\n      str += \" \";\n      expectedLoc = tokens[i].loc.start;\n    }\n\n    str += tokens[i].text;\n    expectedLoc += tokens[i].text.length;\n  }\n\n  var tex = texify.go(mhchemParser.go(str, stateMachine));\n  return tex;\n}; //\n// Core parser for mhchem syntax  (recursive)\n//\n\n/** @type {MhchemParser} */\n\n\nvar mhchemParser = {\n  //\n  // Parses mchem \\ce syntax\n  //\n  // Call like\n  //   go(\"H2O\");\n  //\n  go: function go(input, stateMachine) {\n    if (!input) {\n      return [];\n    }\n\n    if (stateMachine === undefined) {\n      stateMachine = 'ce';\n    }\n\n    var state = '0'; //\n    // String buffers for parsing:\n    //\n    // buffer.a == amount\n    // buffer.o == element\n    // buffer.b == left-side superscript\n    // buffer.p == left-side subscript\n    // buffer.q == right-side subscript\n    // buffer.d == right-side superscript\n    //\n    // buffer.r == arrow\n    // buffer.rdt == arrow, script above, type\n    // buffer.rd == arrow, script above, content\n    // buffer.rqt == arrow, script below, type\n    // buffer.rq == arrow, script below, content\n    //\n    // buffer.text_\n    // buffer.rm\n    // etc.\n    //\n    // buffer.parenthesisLevel == int, starting at 0\n    // buffer.sb == bool, space before\n    // buffer.beginsWithBond == bool\n    //\n    // These letters are also used as state names.\n    //\n    // Other states:\n    // 0 == begin of main part (arrow/operator unlikely)\n    // 1 == next entity\n    // 2 == next entity (arrow/operator unlikely)\n    // 3 == next atom\n    // c == macro\n    //\n\n    /** @type {Buffer} */\n\n    var buffer = {};\n    buffer['parenthesisLevel'] = 0;\n    input = input.replace(/\\n/g, \" \");\n    input = input.replace(/[\\u2212\\u2013\\u2014\\u2010]/g, \"-\");\n    input = input.replace(/[\\u2026]/g, \"...\"); //\n    // Looks through mhchemParser.transitions, to execute a matching action\n    // (recursive)\n    //\n\n    var lastInput;\n    var watchdog = 10;\n    /** @type {ParserOutput[]} */\n\n    var output = [];\n\n    while (true) {\n      if (lastInput !== input) {\n        watchdog = 10;\n        lastInput = input;\n      } else {\n        watchdog--;\n      } //\n      // Find actions in transition table\n      //\n\n\n      var machine = mhchemParser.stateMachines[stateMachine];\n      var t = machine.transitions[state] || machine.transitions['*'];\n\n      iterateTransitions: for (var i = 0; i < t.length; i++) {\n        var matches = mhchemParser.patterns.match_(t[i].pattern, input);\n\n        if (matches) {\n          //\n          // Execute actions\n          //\n          var task = t[i].task;\n\n          for (var iA = 0; iA < task.action_.length; iA++) {\n            var o; //\n            // Find and execute action\n            //\n\n            if (machine.actions[task.action_[iA].type_]) {\n              o = machine.actions[task.action_[iA].type_](buffer, matches.match_, task.action_[iA].option);\n            } else if (mhchemParser.actions[task.action_[iA].type_]) {\n              o = mhchemParser.actions[task.action_[iA].type_](buffer, matches.match_, task.action_[iA].option);\n            } else {\n              throw [\"MhchemBugA\", \"mhchem bug A. Please report. (\" + task.action_[iA].type_ + \")\"]; // Trying to use non-existing action\n            } //\n            // Add output\n            //\n\n\n            mhchemParser.concatArray(output, o);\n          } //\n          // Set next state,\n          // Shorten input,\n          // Continue with next character\n          //   (= apply only one transition per position)\n          //\n\n\n          state = task.nextState || state;\n\n          if (input.length > 0) {\n            if (!task.revisit) {\n              input = matches.remainder;\n            }\n\n            if (!task.toContinue) {\n              break iterateTransitions;\n            }\n          } else {\n            return output;\n          }\n        }\n      } //\n      // Prevent infinite loop\n      //\n\n\n      if (watchdog <= 0) {\n        throw [\"MhchemBugU\", \"mhchem bug U. Please report.\"]; // Unexpected character\n      }\n    }\n  },\n  concatArray: function concatArray(a, b) {\n    if (b) {\n      if (Array.isArray(b)) {\n        for (var iB = 0; iB < b.length; iB++) {\n          a.push(b[iB]);\n        }\n      } else {\n        a.push(b);\n      }\n    }\n  },\n  patterns: {\n    //\n    // Matching patterns\n    // either regexps or function that return null or {match_:\"a\", remainder:\"bc\"}\n    //\n    patterns: {\n      // property names must not look like integers (\"2\") for correct property traversal order, later on\n      'empty': /^$/,\n      'else': /^./,\n      'else2': /^./,\n      'space': /^\\s/,\n      'space A': /^\\s(?=[A-Z\\\\$])/,\n      'space$': /^\\s$/,\n      'a-z': /^[a-z]/,\n      'x': /^x/,\n      'x$': /^x$/,\n      'i$': /^i$/,\n      'letters': /^(?:[a-zA-Z\\u03B1-\\u03C9\\u0391-\\u03A9?@]|(?:\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\\s+|\\{\\}|(?![a-zA-Z]))))+/,\n      '\\\\greek': /^\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)(?:\\s+|\\{\\}|(?![a-zA-Z]))/,\n      'one lowercase latin letter $': /^(?:([a-z])(?:$|[^a-zA-Z]))$/,\n      '$one lowercase latin letter$ $': /^\\$(?:([a-z])(?:$|[^a-zA-Z]))\\$$/,\n      'one lowercase greek letter $': /^(?:\\$?[\\u03B1-\\u03C9]\\$?|\\$?\\\\(?:alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|xi|omicron|pi|rho|sigma|tau|upsilon|phi|chi|psi|omega)\\s*\\$?)(?:\\s+|\\{\\}|(?![a-zA-Z]))$/,\n      'digits': /^[0-9]+/,\n      '-9.,9': /^[+\\-]?(?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))/,\n      '-9.,9 no missing 0': /^[+\\-]?[0-9]+(?:[.,][0-9]+)?/,\n      '(-)(9.,9)(e)(99)': function e99(input) {\n        var m = input.match(/^(\\+\\-|\\+\\/\\-|\\+|\\-|\\\\pm\\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))?(\\((?:[0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+))\\))?(?:([eE]|\\s*(\\*|x|\\\\times|\\u00D7)\\s*10\\^)([+\\-]?[0-9]+|\\{[+\\-]?[0-9]+\\}))?/);\n\n        if (m && m[0]) {\n          return {\n            match_: m.splice(1),\n            remainder: input.substr(m[0].length)\n          };\n        }\n\n        return null;\n      },\n      '(-)(9)^(-9)': function _(input) {\n        var m = input.match(/^(\\+\\-|\\+\\/\\-|\\+|\\-|\\\\pm\\s?)?([0-9]+(?:[,.][0-9]+)?|[0-9]*(?:\\.[0-9]+)?)\\^([+\\-]?[0-9]+|\\{[+\\-]?[0-9]+\\})/);\n\n        if (m && m[0]) {\n          return {\n            match_: m.splice(1),\n            remainder: input.substr(m[0].length)\n          };\n        }\n\n        return null;\n      },\n      'state of aggregation $': function stateOfAggregation$(input) {\n        // ... or crystal system\n        var a = mhchemParser.patterns.findObserveGroups(input, \"\", /^\\([a-z]{1,3}(?=[\\),])/, \")\", \"\"); // (aq), (aq,$\\infty$), (aq, sat)\n\n        if (a && a.remainder.match(/^($|[\\s,;\\)\\]\\}])/)) {\n          return a;\n        } //  AND end of 'phrase'\n\n\n        var m = input.match(/^(?:\\((?:\\\\ca\\s?)?\\$[amothc]\\$\\))/); // OR crystal system ($o$) (\\ca$c$)\n\n        if (m) {\n          return {\n            match_: m[0],\n            remainder: input.substr(m[0].length)\n          };\n        }\n\n        return null;\n      },\n      '_{(state of aggregation)}$': /^_\\{(\\([a-z]{1,3}\\))\\}/,\n      '{[(': /^(?:\\\\\\{|\\[|\\()/,\n      ')]}': /^(?:\\)|\\]|\\\\\\})/,\n      ', ': /^[,;]\\s*/,\n      ',': /^[,;]/,\n      '.': /^[.]/,\n      '. ': /^([.\\u22C5\\u00B7\\u2022])\\s*/,\n      '...': /^\\.\\.\\.(?=$|[^.])/,\n      '* ': /^([*])\\s*/,\n      '^{(...)}': function _(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"^{\", \"\", \"\", \"}\");\n      },\n      '^($...$)': function $$(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"^\", \"$\", \"$\", \"\");\n      },\n      '^a': /^\\^([0-9]+|[^\\\\_])/,\n      '^\\\\x{}{}': function x(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"^\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\", \"\", \"{\", \"}\", \"\", true);\n      },\n      '^\\\\x{}': function x(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"^\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\");\n      },\n      '^\\\\x': /^\\^(\\\\[a-zA-Z]+)\\s*/,\n      '^(-1)': /^\\^(-?\\d+)/,\n      '\\'': /^'/,\n      '_{(...)}': function _(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"_{\", \"\", \"\", \"}\");\n      },\n      '_($...$)': function _$$(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"_\", \"$\", \"$\", \"\");\n      },\n      '_9': /^_([+\\-]?[0-9]+|[^\\\\])/,\n      '_\\\\x{}{}': function _X(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"_\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\", \"\", \"{\", \"}\", \"\", true);\n      },\n      '_\\\\x{}': function _X(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"_\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\");\n      },\n      '_\\\\x': /^_(\\\\[a-zA-Z]+)\\s*/,\n      '^_': /^(?:\\^(?=_)|\\_(?=\\^)|[\\^_]$)/,\n      '{}': /^\\{\\}/,\n      '{...}': function _(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\", \"{\", \"}\", \"\");\n      },\n      '{(...)}': function _(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"{\", \"\", \"\", \"}\");\n      },\n      '$...$': function $$(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\", \"$\", \"$\", \"\");\n      },\n      '${(...)}$': function $$(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"${\", \"\", \"\", \"}$\");\n      },\n      '$(...)$': function $$(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"$\", \"\", \"\", \"$\");\n      },\n      '=<>': /^[=<>]/,\n      '#': /^[#\\u2261]/,\n      '+': /^\\+/,\n      '-$': /^-(?=[\\s_},;\\]/]|$|\\([a-z]+\\))/,\n      // -space -, -; -] -/ -$ -state-of-aggregation\n      '-9': /^-(?=[0-9])/,\n      '- orbital overlap': /^-(?=(?:[spd]|sp)(?:$|[\\s,;\\)\\]\\}]))/,\n      '-': /^-/,\n      'pm-operator': /^(?:\\\\pm|\\$\\\\pm\\$|\\+-|\\+\\/-)/,\n      'operator': /^(?:\\+|(?:[\\-=<>]|<<|>>|\\\\approx|\\$\\\\approx\\$)(?=\\s|$|-?[0-9]))/,\n      'arrowUpDown': /^(?:v|\\(v\\)|\\^|\\(\\^\\))(?=$|[\\s,;\\)\\]\\}])/,\n      '\\\\bond{(...)}': function bond(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\bond{\", \"\", \"\", \"}\");\n      },\n      '->': /^(?:<->|<-->|->|<-|<=>>|<<=>|<=>|[\\u2192\\u27F6\\u21CC])/,\n      'CMT': /^[CMT](?=\\[)/,\n      '[(...)]': function _(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"[\", \"\", \"\", \"]\");\n      },\n      '1st-level escape': /^(&|\\\\\\\\|\\\\hline)\\s*/,\n      '\\\\,': /^(?:\\\\[,\\ ;:])/,\n      // \\\\x - but output no space before\n      '\\\\x{}{}': function x(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\", \"\", \"{\", \"}\", \"\", true);\n      },\n      '\\\\x{}': function x(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\", /^\\\\[a-zA-Z]+\\{/, \"}\", \"\");\n      },\n      '\\\\ca': /^\\\\ca(?:\\s+|(?![a-zA-Z]))/,\n      '\\\\x': /^(?:\\\\[a-zA-Z]+\\s*|\\\\[_&{}%])/,\n      'orbital': /^(?:[0-9]{1,2}[spdfgh]|[0-9]{0,2}sp)(?=$|[^a-zA-Z])/,\n      // only those with numbers in front, because the others will be formatted correctly anyway\n      'others': /^[\\/~|]/,\n      '\\\\frac{(...)}': function frac(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\frac{\", \"\", \"\", \"}\", \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\overset{(...)}': function overset(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\overset{\", \"\", \"\", \"}\", \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\underset{(...)}': function underset(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\underset{\", \"\", \"\", \"}\", \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\underbrace{(...)}': function underbrace(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\underbrace{\", \"\", \"\", \"}_\", \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\color{(...)}0': function color0(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\color{\", \"\", \"\", \"}\");\n      },\n      '\\\\color{(...)}{(...)}1': function color1(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\color{\", \"\", \"\", \"}\", \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\color(...){(...)}2': function color2(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\color\", \"\\\\\", \"\", /^(?=\\{)/, \"{\", \"\", \"\", \"}\");\n      },\n      '\\\\ce{(...)}': function ce(input) {\n        return mhchemParser.patterns.findObserveGroups(input, \"\\\\ce{\", \"\", \"\", \"}\");\n      },\n      'oxidation$': /^(?:[+-][IVX]+|\\\\pm\\s*0|\\$\\\\pm\\$\\s*0)$/,\n      'd-oxidation$': /^(?:[+-]?\\s?[IVX]+|\\\\pm\\s*0|\\$\\\\pm\\$\\s*0)$/,\n      // 0 could be oxidation or charge\n      'roman numeral': /^[IVX]+/,\n      '1/2$': /^[+\\-]?(?:[0-9]+|\\$[a-z]\\$|[a-z])\\/[0-9]+(?:\\$[a-z]\\$|[a-z])?$/,\n      'amount': function amount(input) {\n        var match; // e.g. 2, 0.5, 1/2, -2, n/2, +;  $a$ could be added later in parsing\n\n        match = input.match(/^(?:(?:(?:\\([+\\-]?[0-9]+\\/[0-9]+\\)|[+\\-]?(?:[0-9]+|\\$[a-z]\\$|[a-z])\\/[0-9]+|[+\\-]?[0-9]+[.,][0-9]+|[+\\-]?\\.[0-9]+|[+\\-]?[0-9]+)(?:[a-z](?=\\s*[A-Z]))?)|[+\\-]?[a-z](?=\\s*[A-Z])|\\+(?!\\s))/);\n\n        if (match) {\n          return {\n            match_: match[0],\n            remainder: input.substr(match[0].length)\n          };\n        }\n\n        var a = mhchemParser.patterns.findObserveGroups(input, \"\", \"$\", \"$\", \"\");\n\n        if (a) {\n          // e.g. $2n-1$, $-$\n          match = a.match_.match(/^\\$(?:\\(?[+\\-]?(?:[0-9]*[a-z]?[+\\-])?[0-9]*[a-z](?:[+\\-][0-9]*[a-z]?)?\\)?|\\+|-)\\$$/);\n\n          if (match) {\n            return {\n              match_: match[0],\n              remainder: input.substr(match[0].length)\n            };\n          }\n        }\n\n        return null;\n      },\n      'amount2': function amount2(input) {\n        return this['amount'](input);\n      },\n      '(KV letters),': /^(?:[A-Z][a-z]{0,2}|i)(?=,)/,\n      'formula$': function formula$(input) {\n        if (input.match(/^\\([a-z]+\\)$/)) {\n          return null;\n        } // state of aggregation = no formula\n\n\n        var match = input.match(/^(?:[a-z]|(?:[0-9\\ \\+\\-\\,\\.\\(\\)]+[a-z])+[0-9\\ \\+\\-\\,\\.\\(\\)]*|(?:[a-z][0-9\\ \\+\\-\\,\\.\\(\\)]+)+[a-z]?)$/);\n\n        if (match) {\n          return {\n            match_: match[0],\n            remainder: input.substr(match[0].length)\n          };\n        }\n\n        return null;\n      },\n      'uprightEntities': /^(?:pH|pOH|pC|pK|iPr|iBu)(?=$|[^a-zA-Z])/,\n      '/': /^\\s*(\\/)\\s*/,\n      '//': /^\\s*(\\/\\/)\\s*/,\n      '*': /^\\s*[*.]\\s*/\n    },\n    findObserveGroups: function findObserveGroups(input, begExcl, begIncl, endIncl, endExcl, beg2Excl, beg2Incl, end2Incl, end2Excl, combine) {\n      /** @type {{(input: string, pattern: string | RegExp): string | string[] | null;}} */\n      var _match = function _match(input, pattern) {\n        if (typeof pattern === \"string\") {\n          if (input.indexOf(pattern) !== 0) {\n            return null;\n          }\n\n          return pattern;\n        } else {\n          var match = input.match(pattern);\n\n          if (!match) {\n            return null;\n          }\n\n          return match[0];\n        }\n      };\n      /** @type {{(input: string, i: number, endChars: string | RegExp): {endMatchBegin: number, endMatchEnd: number} | null;}} */\n\n\n      var _findObserveGroups = function _findObserveGroups(input, i, endChars) {\n        var braces = 0;\n\n        while (i < input.length) {\n          var a = input.charAt(i);\n\n          var match = _match(input.substr(i), endChars);\n\n          if (match !== null && braces === 0) {\n            return {\n              endMatchBegin: i,\n              endMatchEnd: i + match.length\n            };\n          } else if (a === \"{\") {\n            braces++;\n          } else if (a === \"}\") {\n            if (braces === 0) {\n              throw [\"ExtraCloseMissingOpen\", \"Extra close brace or missing open brace\"];\n            } else {\n              braces--;\n            }\n          }\n\n          i++;\n        }\n\n        if (braces > 0) {\n          return null;\n        }\n\n        return null;\n      };\n\n      var match = _match(input, begExcl);\n\n      if (match === null) {\n        return null;\n      }\n\n      input = input.substr(match.length);\n      match = _match(input, begIncl);\n\n      if (match === null) {\n        return null;\n      }\n\n      var e = _findObserveGroups(input, match.length, endIncl || endExcl);\n\n      if (e === null) {\n        return null;\n      }\n\n      var match1 = input.substring(0, endIncl ? e.endMatchEnd : e.endMatchBegin);\n\n      if (!(beg2Excl || beg2Incl)) {\n        return {\n          match_: match1,\n          remainder: input.substr(e.endMatchEnd)\n        };\n      } else {\n        var group2 = this.findObserveGroups(input.substr(e.endMatchEnd), beg2Excl, beg2Incl, end2Incl, end2Excl);\n\n        if (group2 === null) {\n          return null;\n        }\n        /** @type {string[]} */\n\n\n        var matchRet = [match1, group2.match_];\n        return {\n          match_: combine ? matchRet.join(\"\") : matchRet,\n          remainder: group2.remainder\n        };\n      }\n    },\n    //\n    // Matching function\n    // e.g. match(\"a\", input) will look for the regexp called \"a\" and see if it matches\n    // returns null or {match_:\"a\", remainder:\"bc\"}\n    //\n    match_: function match_(m, input) {\n      var pattern = mhchemParser.patterns.patterns[m];\n\n      if (pattern === undefined) {\n        throw [\"MhchemBugP\", \"mhchem bug P. Please report. (\" + m + \")\"]; // Trying to use non-existing pattern\n      } else if (typeof pattern === \"function\") {\n        return mhchemParser.patterns.patterns[m](input); // cannot use cached var pattern here, because some pattern functions need this===mhchemParser\n      } else {\n        // RegExp\n        var match = input.match(pattern);\n\n        if (match) {\n          var mm;\n\n          if (match[2]) {\n            mm = [match[1], match[2]];\n          } else if (match[1]) {\n            mm = match[1];\n          } else {\n            mm = match[0];\n          }\n\n          return {\n            match_: mm,\n            remainder: input.substr(match[0].length)\n          };\n        }\n\n        return null;\n      }\n    }\n  },\n  //\n  // Generic state machine actions\n  //\n  actions: {\n    'a=': function a(buffer, m) {\n      buffer.a = (buffer.a || \"\") + m;\n    },\n    'b=': function b(buffer, m) {\n      buffer.b = (buffer.b || \"\") + m;\n    },\n    'p=': function p(buffer, m) {\n      buffer.p = (buffer.p || \"\") + m;\n    },\n    'o=': function o(buffer, m) {\n      buffer.o = (buffer.o || \"\") + m;\n    },\n    'q=': function q(buffer, m) {\n      buffer.q = (buffer.q || \"\") + m;\n    },\n    'd=': function d(buffer, m) {\n      buffer.d = (buffer.d || \"\") + m;\n    },\n    'rm=': function rm(buffer, m) {\n      buffer.rm = (buffer.rm || \"\") + m;\n    },\n    'text=': function text(buffer, m) {\n      buffer.text_ = (buffer.text_ || \"\") + m;\n    },\n    'insert': function insert(buffer, m, a) {\n      return {\n        type_: a\n      };\n    },\n    'insert+p1': function insertP1(buffer, m, a) {\n      return {\n        type_: a,\n        p1: m\n      };\n    },\n    'insert+p1+p2': function insertP1P2(buffer, m, a) {\n      return {\n        type_: a,\n        p1: m[0],\n        p2: m[1]\n      };\n    },\n    'copy': function copy(buffer, m) {\n      return m;\n    },\n    'rm': function rm(buffer, m) {\n      return {\n        type_: 'rm',\n        p1: m || \"\"\n      };\n    },\n    'text': function text(buffer, m) {\n      return mhchemParser.go(m, 'text');\n    },\n    '{text}': function text(buffer, m) {\n      var ret = [\"{\"];\n      mhchemParser.concatArray(ret, mhchemParser.go(m, 'text'));\n      ret.push(\"}\");\n      return ret;\n    },\n    'tex-math': function texMath(buffer, m) {\n      return mhchemParser.go(m, 'tex-math');\n    },\n    'tex-math tight': function texMathTight(buffer, m) {\n      return mhchemParser.go(m, 'tex-math tight');\n    },\n    'bond': function bond(buffer, m, k) {\n      return {\n        type_: 'bond',\n        kind_: k || m\n      };\n    },\n    'color0-output': function color0Output(buffer, m) {\n      return {\n        type_: 'color0',\n        color: m[0]\n      };\n    },\n    'ce': function ce(buffer, m) {\n      return mhchemParser.go(m);\n    },\n    '1/2': function _(buffer, m) {\n      /** @type {ParserOutput[]} */\n      var ret = [];\n\n      if (m.match(/^[+\\-]/)) {\n        ret.push(m.substr(0, 1));\n        m = m.substr(1);\n      }\n\n      var n = m.match(/^([0-9]+|\\$[a-z]\\$|[a-z])\\/([0-9]+)(\\$[a-z]\\$|[a-z])?$/);\n      n[1] = n[1].replace(/\\$/g, \"\");\n      ret.push({\n        type_: 'frac',\n        p1: n[1],\n        p2: n[2]\n      });\n\n      if (n[3]) {\n        n[3] = n[3].replace(/\\$/g, \"\");\n        ret.push({\n          type_: 'tex-math',\n          p1: n[3]\n        });\n      }\n\n      return ret;\n    },\n    '9,9': function _(buffer, m) {\n      return mhchemParser.go(m, '9,9');\n    }\n  },\n  //\n  // createTransitions\n  // convert  { 'letter': { 'state': { action_: 'output' } } }  to  { 'state' => [ { pattern: 'letter', task: { action_: [{type_: 'output'}] } } ] }\n  // with expansion of 'a|b' to 'a' and 'b' (at 2 places)\n  //\n  createTransitions: function createTransitions(o) {\n    var pattern, state;\n    /** @type {string[]} */\n\n    var stateArray;\n    var i; //\n    // 1. Collect all states\n    //\n\n    /** @type {Transitions} */\n\n    var transitions = {};\n\n    for (pattern in o) {\n      for (state in o[pattern]) {\n        stateArray = state.split(\"|\");\n        o[pattern][state].stateArray = stateArray;\n\n        for (i = 0; i < stateArray.length; i++) {\n          transitions[stateArray[i]] = [];\n        }\n      }\n    } //\n    // 2. Fill states\n    //\n\n\n    for (pattern in o) {\n      for (state in o[pattern]) {\n        stateArray = o[pattern][state].stateArray || [];\n\n        for (i = 0; i < stateArray.length; i++) {\n          //\n          // 2a. Normalize actions into array:  'text=' ==> [{type_:'text='}]\n          // (Note to myself: Resolving the function here would be problematic. It would need .bind (for *this*) and currying (for *option*).)\n          //\n\n          /** @type {any} */\n          var p = o[pattern][state];\n\n          if (p.action_) {\n            p.action_ = [].concat(p.action_);\n\n            for (var k = 0; k < p.action_.length; k++) {\n              if (typeof p.action_[k] === \"string\") {\n                p.action_[k] = {\n                  type_: p.action_[k]\n                };\n              }\n            }\n          } else {\n            p.action_ = [];\n          } //\n          // 2.b Multi-insert\n          //\n\n\n          var patternArray = pattern.split(\"|\");\n\n          for (var j = 0; j < patternArray.length; j++) {\n            if (stateArray[i] === '*') {\n              // insert into all\n              for (var t in transitions) {\n                transitions[t].push({\n                  pattern: patternArray[j],\n                  task: p\n                });\n              }\n            } else {\n              transitions[stateArray[i]].push({\n                pattern: patternArray[j],\n                task: p\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return transitions;\n  },\n  stateMachines: {}\n}; //\n// Definition of state machines\n//\n\nmhchemParser.stateMachines = {\n  //\n  // \\ce state machines\n  //\n  //#region ce\n  'ce': {\n    // main parser\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      'else': {\n        '0|1|2': {\n          action_: 'beginsWithBond=false',\n          revisit: true,\n          toContinue: true\n        }\n      },\n      'oxidation$': {\n        '0': {\n          action_: 'oxidation-output'\n        }\n      },\n      'CMT': {\n        'r': {\n          action_: 'rdt=',\n          nextState: 'rt'\n        },\n        'rd': {\n          action_: 'rqt=',\n          nextState: 'rdt'\n        }\n      },\n      'arrowUpDown': {\n        '0|1|2|as': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '1'\n        }\n      },\n      'uprightEntities': {\n        '0|1|2': {\n          action_: ['o=', 'output'],\n          nextState: '1'\n        }\n      },\n      'orbital': {\n        '0|1|2|3': {\n          action_: 'o=',\n          nextState: 'o'\n        }\n      },\n      '->': {\n        '0|1|2|3': {\n          action_: 'r=',\n          nextState: 'r'\n        },\n        'a|as': {\n          action_: ['output', 'r='],\n          nextState: 'r'\n        },\n        '*': {\n          action_: ['output', 'r='],\n          nextState: 'r'\n        }\n      },\n      '+': {\n        'o': {\n          action_: 'd= kv',\n          nextState: 'd'\n        },\n        'd|D': {\n          action_: 'd=',\n          nextState: 'd'\n        },\n        'q': {\n          action_: 'd=',\n          nextState: 'qd'\n        },\n        'qd|qD': {\n          action_: 'd=',\n          nextState: 'qd'\n        },\n        'dq': {\n          action_: ['output', 'd='],\n          nextState: 'd'\n        },\n        '3': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '0'\n        }\n      },\n      'amount': {\n        '0|2': {\n          action_: 'a=',\n          nextState: 'a'\n        }\n      },\n      'pm-operator': {\n        '0|1|2|a|as': {\n          action_: ['sb=false', 'output', {\n            type_: 'operator',\n            option: '\\\\pm'\n          }],\n          nextState: '0'\n        }\n      },\n      'operator': {\n        '0|1|2|a|as': {\n          action_: ['sb=false', 'output', 'operator'],\n          nextState: '0'\n        }\n      },\n      '-$': {\n        'o|q': {\n          action_: ['charge or bond', 'output'],\n          nextState: 'qd'\n        },\n        'd': {\n          action_: 'd=',\n          nextState: 'd'\n        },\n        'D': {\n          action_: ['output', {\n            type_: 'bond',\n            option: \"-\"\n          }],\n          nextState: '3'\n        },\n        'q': {\n          action_: 'd=',\n          nextState: 'qd'\n        },\n        'qd': {\n          action_: 'd=',\n          nextState: 'qd'\n        },\n        'qD|dq': {\n          action_: ['output', {\n            type_: 'bond',\n            option: \"-\"\n          }],\n          nextState: '3'\n        }\n      },\n      '-9': {\n        '3|o': {\n          action_: ['output', {\n            type_: 'insert',\n            option: 'hyphen'\n          }],\n          nextState: '3'\n        }\n      },\n      '- orbital overlap': {\n        'o': {\n          action_: ['output', {\n            type_: 'insert',\n            option: 'hyphen'\n          }],\n          nextState: '2'\n        },\n        'd': {\n          action_: ['output', {\n            type_: 'insert',\n            option: 'hyphen'\n          }],\n          nextState: '2'\n        }\n      },\n      '-': {\n        '0|1|2': {\n          action_: [{\n            type_: 'output',\n            option: 1\n          }, 'beginsWithBond=true', {\n            type_: 'bond',\n            option: \"-\"\n          }],\n          nextState: '3'\n        },\n        '3': {\n          action_: {\n            type_: 'bond',\n            option: \"-\"\n          }\n        },\n        'a': {\n          action_: ['output', {\n            type_: 'insert',\n            option: 'hyphen'\n          }],\n          nextState: '2'\n        },\n        'as': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, {\n            type_: 'bond',\n            option: \"-\"\n          }],\n          nextState: '3'\n        },\n        'b': {\n          action_: 'b='\n        },\n        'o': {\n          action_: {\n            type_: '- after o/d',\n            option: false\n          },\n          nextState: '2'\n        },\n        'q': {\n          action_: {\n            type_: '- after o/d',\n            option: false\n          },\n          nextState: '2'\n        },\n        'd|qd|dq': {\n          action_: {\n            type_: '- after o/d',\n            option: true\n          },\n          nextState: '2'\n        },\n        'D|qD|p': {\n          action_: ['output', {\n            type_: 'bond',\n            option: \"-\"\n          }],\n          nextState: '3'\n        }\n      },\n      'amount2': {\n        '1|3': {\n          action_: 'a=',\n          nextState: 'a'\n        }\n      },\n      'letters': {\n        '0|1|2|3|a|as|b|p|bp|o': {\n          action_: 'o=',\n          nextState: 'o'\n        },\n        'q|dq': {\n          action_: ['output', 'o='],\n          nextState: 'o'\n        },\n        'd|D|qd|qD': {\n          action_: 'o after d',\n          nextState: 'o'\n        }\n      },\n      'digits': {\n        'o': {\n          action_: 'q=',\n          nextState: 'q'\n        },\n        'd|D': {\n          action_: 'q=',\n          nextState: 'dq'\n        },\n        'q': {\n          action_: ['output', 'o='],\n          nextState: 'o'\n        },\n        'a': {\n          action_: 'o=',\n          nextState: 'o'\n        }\n      },\n      'space A': {\n        'b|p|bp': {}\n      },\n      'space': {\n        'a': {\n          nextState: 'as'\n        },\n        '0': {\n          action_: 'sb=false'\n        },\n        '1|2': {\n          action_: 'sb=true'\n        },\n        'r|rt|rd|rdt|rdq': {\n          action_: 'output',\n          nextState: '0'\n        },\n        '*': {\n          action_: ['output', 'sb=true'],\n          nextState: '1'\n        }\n      },\n      '1st-level escape': {\n        '1|2': {\n          action_: ['output', {\n            type_: 'insert+p1',\n            option: '1st-level escape'\n          }]\n        },\n        '*': {\n          action_: ['output', {\n            type_: 'insert+p1',\n            option: '1st-level escape'\n          }],\n          nextState: '0'\n        }\n      },\n      '[(...)]': {\n        'r|rt': {\n          action_: 'rd=',\n          nextState: 'rd'\n        },\n        'rd|rdt': {\n          action_: 'rq=',\n          nextState: 'rdq'\n        }\n      },\n      '...': {\n        'o|d|D|dq|qd|qD': {\n          action_: ['output', {\n            type_: 'bond',\n            option: \"...\"\n          }],\n          nextState: '3'\n        },\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 1\n          }, {\n            type_: 'insert',\n            option: 'ellipsis'\n          }],\n          nextState: '1'\n        }\n      },\n      '. |* ': {\n        '*': {\n          action_: ['output', {\n            type_: 'insert',\n            option: 'addition compound'\n          }],\n          nextState: '1'\n        }\n      },\n      'state of aggregation $': {\n        '*': {\n          action_: ['output', 'state of aggregation'],\n          nextState: '1'\n        }\n      },\n      '{[(': {\n        'a|as|o': {\n          action_: ['o=', 'output', 'parenthesisLevel++'],\n          nextState: '2'\n        },\n        '0|1|2|3': {\n          action_: ['o=', 'output', 'parenthesisLevel++'],\n          nextState: '2'\n        },\n        '*': {\n          action_: ['output', 'o=', 'output', 'parenthesisLevel++'],\n          nextState: '2'\n        }\n      },\n      ')]}': {\n        '0|1|2|3|b|p|bp|o': {\n          action_: ['o=', 'parenthesisLevel--'],\n          nextState: 'o'\n        },\n        'a|as|d|D|q|qd|qD|dq': {\n          action_: ['output', 'o=', 'parenthesisLevel--'],\n          nextState: 'o'\n        }\n      },\n      ', ': {\n        '*': {\n          action_: ['output', 'comma'],\n          nextState: '0'\n        }\n      },\n      '^_': {\n        // ^ and _ without a sensible argument\n        '*': {}\n      },\n      '^{(...)}|^($...$)': {\n        '0|1|2|as': {\n          action_: 'b=',\n          nextState: 'b'\n        },\n        'p': {\n          action_: 'b=',\n          nextState: 'bp'\n        },\n        '3|o': {\n          action_: 'd= kv',\n          nextState: 'D'\n        },\n        'q': {\n          action_: 'd=',\n          nextState: 'qD'\n        },\n        'd|D|qd|qD|dq': {\n          action_: ['output', 'd='],\n          nextState: 'D'\n        }\n      },\n      '^a|^\\\\x{}{}|^\\\\x{}|^\\\\x|\\'': {\n        '0|1|2|as': {\n          action_: 'b=',\n          nextState: 'b'\n        },\n        'p': {\n          action_: 'b=',\n          nextState: 'bp'\n        },\n        '3|o': {\n          action_: 'd= kv',\n          nextState: 'd'\n        },\n        'q': {\n          action_: 'd=',\n          nextState: 'qd'\n        },\n        'd|qd|D|qD': {\n          action_: 'd='\n        },\n        'dq': {\n          action_: ['output', 'd='],\n          nextState: 'd'\n        }\n      },\n      '_{(state of aggregation)}$': {\n        'd|D|q|qd|qD|dq': {\n          action_: ['output', 'q='],\n          nextState: 'q'\n        }\n      },\n      '_{(...)}|_($...$)|_9|_\\\\x{}{}|_\\\\x{}|_\\\\x': {\n        '0|1|2|as': {\n          action_: 'p=',\n          nextState: 'p'\n        },\n        'b': {\n          action_: 'p=',\n          nextState: 'bp'\n        },\n        '3|o': {\n          action_: 'q=',\n          nextState: 'q'\n        },\n        'd|D': {\n          action_: 'q=',\n          nextState: 'dq'\n        },\n        'q|qd|qD|dq': {\n          action_: ['output', 'q='],\n          nextState: 'q'\n        }\n      },\n      '=<>': {\n        '0|1|2|3|a|as|o|q|d|D|qd|qD|dq': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'bond'],\n          nextState: '3'\n        }\n      },\n      '#': {\n        '0|1|2|3|a|as|o': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, {\n            type_: 'bond',\n            option: \"#\"\n          }],\n          nextState: '3'\n        }\n      },\n      '{}': {\n        '*': {\n          action_: {\n            type_: 'output',\n            option: 1\n          },\n          nextState: '1'\n        }\n      },\n      '{...}': {\n        '0|1|2|3|a|as|b|p|bp': {\n          action_: 'o=',\n          nextState: 'o'\n        },\n        'o|d|D|q|qd|qD|dq': {\n          action_: ['output', 'o='],\n          nextState: 'o'\n        }\n      },\n      '$...$': {\n        'a': {\n          action_: 'a='\n        },\n        // 2$n$\n        '0|1|2|3|as|b|p|bp|o': {\n          action_: 'o=',\n          nextState: 'o'\n        },\n        // not 'amount'\n        'as|o': {\n          action_: 'o='\n        },\n        'q|d|D|qd|qD|dq': {\n          action_: ['output', 'o='],\n          nextState: 'o'\n        }\n      },\n      '\\\\bond{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'bond'],\n          nextState: \"3\"\n        }\n      },\n      '\\\\frac{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 1\n          }, 'frac-output'],\n          nextState: '3'\n        }\n      },\n      '\\\\overset{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'overset-output'],\n          nextState: '3'\n        }\n      },\n      '\\\\underset{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'underset-output'],\n          nextState: '3'\n        }\n      },\n      '\\\\underbrace{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'underbrace-output'],\n          nextState: '3'\n        }\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'color-output'],\n          nextState: '3'\n        }\n      },\n      '\\\\color{(...)}0': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'color0-output']\n        }\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 2\n          }, 'ce'],\n          nextState: '3'\n        }\n      },\n      '\\\\,': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 1\n          }, 'copy'],\n          nextState: '1'\n        }\n      },\n      '\\\\x{}{}|\\\\x{}|\\\\x': {\n        '0|1|2|3|a|as|b|p|bp|o|c0': {\n          action_: ['o=', 'output'],\n          nextState: '3'\n        },\n        '*': {\n          action_: ['output', 'o=', 'output'],\n          nextState: '3'\n        }\n      },\n      'others': {\n        '*': {\n          action_: [{\n            type_: 'output',\n            option: 1\n          }, 'copy'],\n          nextState: '3'\n        }\n      },\n      'else2': {\n        'a': {\n          action_: 'a to o',\n          nextState: 'o',\n          revisit: true\n        },\n        'as': {\n          action_: ['output', 'sb=true'],\n          nextState: '1',\n          revisit: true\n        },\n        'r|rt|rd|rdt|rdq': {\n          action_: ['output'],\n          nextState: '0',\n          revisit: true\n        },\n        '*': {\n          action_: ['output', 'copy'],\n          nextState: '3'\n        }\n      }\n    }),\n    actions: {\n      'o after d': function oAfterD(buffer, m) {\n        var ret;\n\n        if ((buffer.d || \"\").match(/^[0-9]+$/)) {\n          var tmp = buffer.d;\n          buffer.d = undefined;\n          ret = this['output'](buffer);\n          buffer.b = tmp;\n        } else {\n          ret = this['output'](buffer);\n        }\n\n        mhchemParser.actions['o='](buffer, m);\n        return ret;\n      },\n      'd= kv': function dKv(buffer, m) {\n        buffer.d = m;\n        buffer.dType = 'kv';\n      },\n      'charge or bond': function chargeOrBond(buffer, m) {\n        if (buffer['beginsWithBond']) {\n          /** @type {ParserOutput[]} */\n          var ret = [];\n          mhchemParser.concatArray(ret, this['output'](buffer));\n          mhchemParser.concatArray(ret, mhchemParser.actions['bond'](buffer, m, \"-\"));\n          return ret;\n        } else {\n          buffer.d = m;\n        }\n      },\n      '- after o/d': function afterOD(buffer, m, isAfterD) {\n        var c1 = mhchemParser.patterns.match_('orbital', buffer.o || \"\");\n        var c2 = mhchemParser.patterns.match_('one lowercase greek letter $', buffer.o || \"\");\n        var c3 = mhchemParser.patterns.match_('one lowercase latin letter $', buffer.o || \"\");\n        var c4 = mhchemParser.patterns.match_('$one lowercase latin letter$ $', buffer.o || \"\");\n        var hyphenFollows = m === \"-\" && (c1 && c1.remainder === \"\" || c2 || c3 || c4);\n\n        if (hyphenFollows && !buffer.a && !buffer.b && !buffer.p && !buffer.d && !buffer.q && !c1 && c3) {\n          buffer.o = '$' + buffer.o + '$';\n        }\n        /** @type {ParserOutput[]} */\n\n\n        var ret = [];\n\n        if (hyphenFollows) {\n          mhchemParser.concatArray(ret, this['output'](buffer));\n          ret.push({\n            type_: 'hyphen'\n          });\n        } else {\n          c1 = mhchemParser.patterns.match_('digits', buffer.d || \"\");\n\n          if (isAfterD && c1 && c1.remainder === '') {\n            mhchemParser.concatArray(ret, mhchemParser.actions['d='](buffer, m));\n            mhchemParser.concatArray(ret, this['output'](buffer));\n          } else {\n            mhchemParser.concatArray(ret, this['output'](buffer));\n            mhchemParser.concatArray(ret, mhchemParser.actions['bond'](buffer, m, \"-\"));\n          }\n        }\n\n        return ret;\n      },\n      'a to o': function aToO(buffer) {\n        buffer.o = buffer.a;\n        buffer.a = undefined;\n      },\n      'sb=true': function sbTrue(buffer) {\n        buffer.sb = true;\n      },\n      'sb=false': function sbFalse(buffer) {\n        buffer.sb = false;\n      },\n      'beginsWithBond=true': function beginsWithBondTrue(buffer) {\n        buffer['beginsWithBond'] = true;\n      },\n      'beginsWithBond=false': function beginsWithBondFalse(buffer) {\n        buffer['beginsWithBond'] = false;\n      },\n      'parenthesisLevel++': function parenthesisLevel(buffer) {\n        buffer['parenthesisLevel']++;\n      },\n      'parenthesisLevel--': function parenthesisLevel(buffer) {\n        buffer['parenthesisLevel']--;\n      },\n      'state of aggregation': function stateOfAggregation(buffer, m) {\n        return {\n          type_: 'state of aggregation',\n          p1: mhchemParser.go(m, 'o')\n        };\n      },\n      'comma': function comma(buffer, m) {\n        var a = m.replace(/\\s*$/, '');\n        var withSpace = a !== m;\n\n        if (withSpace && buffer['parenthesisLevel'] === 0) {\n          return {\n            type_: 'comma enumeration L',\n            p1: a\n          };\n        } else {\n          return {\n            type_: 'comma enumeration M',\n            p1: a\n          };\n        }\n      },\n      'output': function output(buffer, m, entityFollows) {\n        // entityFollows:\n        //   undefined = if we have nothing else to output, also ignore the just read space (buffer.sb)\n        //   1 = an entity follows, never omit the space if there was one just read before (can only apply to state 1)\n        //   2 = 1 + the entity can have an amount, so output a\\, instead of converting it to o (can only apply to states a|as)\n\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret;\n\n        if (!buffer.r) {\n          ret = [];\n\n          if (!buffer.a && !buffer.b && !buffer.p && !buffer.o && !buffer.q && !buffer.d && !entityFollows) ; else {\n            if (buffer.sb) {\n              ret.push({\n                type_: 'entitySkip'\n              });\n            }\n\n            if (!buffer.o && !buffer.q && !buffer.d && !buffer.b && !buffer.p && entityFollows !== 2) {\n              buffer.o = buffer.a;\n              buffer.a = undefined;\n            } else if (!buffer.o && !buffer.q && !buffer.d && (buffer.b || buffer.p)) {\n              buffer.o = buffer.a;\n              buffer.d = buffer.b;\n              buffer.q = buffer.p;\n              buffer.a = buffer.b = buffer.p = undefined;\n            } else {\n              if (buffer.o && buffer.dType === 'kv' && mhchemParser.patterns.match_('d-oxidation$', buffer.d || \"\")) {\n                buffer.dType = 'oxidation';\n              } else if (buffer.o && buffer.dType === 'kv' && !buffer.q) {\n                buffer.dType = undefined;\n              }\n            }\n\n            ret.push({\n              type_: 'chemfive',\n              a: mhchemParser.go(buffer.a, 'a'),\n              b: mhchemParser.go(buffer.b, 'bd'),\n              p: mhchemParser.go(buffer.p, 'pq'),\n              o: mhchemParser.go(buffer.o, 'o'),\n              q: mhchemParser.go(buffer.q, 'pq'),\n              d: mhchemParser.go(buffer.d, buffer.dType === 'oxidation' ? 'oxidation' : 'bd'),\n              dType: buffer.dType\n            });\n          }\n        } else {\n          // r\n\n          /** @type {ParserOutput[]} */\n          var rd;\n\n          if (buffer.rdt === 'M') {\n            rd = mhchemParser.go(buffer.rd, 'tex-math');\n          } else if (buffer.rdt === 'T') {\n            rd = [{\n              type_: 'text',\n              p1: buffer.rd || \"\"\n            }];\n          } else {\n            rd = mhchemParser.go(buffer.rd);\n          }\n          /** @type {ParserOutput[]} */\n\n\n          var rq;\n\n          if (buffer.rqt === 'M') {\n            rq = mhchemParser.go(buffer.rq, 'tex-math');\n          } else if (buffer.rqt === 'T') {\n            rq = [{\n              type_: 'text',\n              p1: buffer.rq || \"\"\n            }];\n          } else {\n            rq = mhchemParser.go(buffer.rq);\n          }\n\n          ret = {\n            type_: 'arrow',\n            r: buffer.r,\n            rd: rd,\n            rq: rq\n          };\n        }\n\n        for (var p in buffer) {\n          if (p !== 'parenthesisLevel' && p !== 'beginsWithBond') {\n            delete buffer[p];\n          }\n        }\n\n        return ret;\n      },\n      'oxidation-output': function oxidationOutput(buffer, m) {\n        var ret = [\"{\"];\n        mhchemParser.concatArray(ret, mhchemParser.go(m, 'oxidation'));\n        ret.push(\"}\");\n        return ret;\n      },\n      'frac-output': function fracOutput(buffer, m) {\n        return {\n          type_: 'frac-ce',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1])\n        };\n      },\n      'overset-output': function oversetOutput(buffer, m) {\n        return {\n          type_: 'overset',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1])\n        };\n      },\n      'underset-output': function undersetOutput(buffer, m) {\n        return {\n          type_: 'underset',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1])\n        };\n      },\n      'underbrace-output': function underbraceOutput(buffer, m) {\n        return {\n          type_: 'underbrace',\n          p1: mhchemParser.go(m[0]),\n          p2: mhchemParser.go(m[1])\n        };\n      },\n      'color-output': function colorOutput(buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1])\n        };\n      },\n      'r=': function r(buffer, m) {\n        buffer.r = m;\n      },\n      'rdt=': function rdt(buffer, m) {\n        buffer.rdt = m;\n      },\n      'rd=': function rd(buffer, m) {\n        buffer.rd = m;\n      },\n      'rqt=': function rqt(buffer, m) {\n        buffer.rqt = m;\n      },\n      'rq=': function rq(buffer, m) {\n        buffer.rq = m;\n      },\n      'operator': function operator(buffer, m, p1) {\n        return {\n          type_: 'operator',\n          kind_: p1 || m\n        };\n      }\n    }\n  },\n  'a': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      '1/2$': {\n        '0': {\n          action_: '1/2'\n        }\n      },\n      'else': {\n        '0': {\n          nextState: '1',\n          revisit: true\n        }\n      },\n      '$(...)$': {\n        '*': {\n          action_: 'tex-math tight',\n          nextState: '1'\n        }\n      },\n      ',': {\n        '*': {\n          action_: {\n            type_: 'insert',\n            option: 'commaDecimal'\n          }\n        }\n      },\n      'else2': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {}\n  },\n  'o': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      '1/2$': {\n        '0': {\n          action_: '1/2'\n        }\n      },\n      'else': {\n        '0': {\n          nextState: '1',\n          revisit: true\n        }\n      },\n      'letters': {\n        '*': {\n          action_: 'rm'\n        }\n      },\n      '\\\\ca': {\n        '*': {\n          action_: {\n            type_: 'insert',\n            option: 'circa'\n          }\n        }\n      },\n      '\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: 'copy'\n        }\n      },\n      '${(...)}$|$(...)$': {\n        '*': {\n          action_: 'tex-math'\n        }\n      },\n      '{(...)}': {\n        '*': {\n          action_: '{text}'\n        }\n      },\n      'else2': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {}\n  },\n  'text': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      '{...}': {\n        '*': {\n          action_: 'text='\n        }\n      },\n      '${(...)}$|$(...)$': {\n        '*': {\n          action_: 'tex-math'\n        }\n      },\n      '\\\\greek': {\n        '*': {\n          action_: ['output', 'rm']\n        }\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: ['output', 'copy']\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'text='\n        }\n      }\n    }),\n    actions: {\n      'output': function output(buffer) {\n        if (buffer.text_) {\n          /** @type {ParserOutput} */\n          var ret = {\n            type_: 'text',\n            p1: buffer.text_\n          };\n\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n\n          return ret;\n        }\n      }\n    }\n  },\n  'pq': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      'state of aggregation $': {\n        '*': {\n          action_: 'state of aggregation'\n        }\n      },\n      'i$': {\n        '0': {\n          nextState: '!f',\n          revisit: true\n        }\n      },\n      '(KV letters),': {\n        '0': {\n          action_: 'rm',\n          nextState: '0'\n        }\n      },\n      'formula$': {\n        '0': {\n          nextState: 'f',\n          revisit: true\n        }\n      },\n      '1/2$': {\n        '0': {\n          action_: '1/2'\n        }\n      },\n      'else': {\n        '0': {\n          nextState: '!f',\n          revisit: true\n        }\n      },\n      '${(...)}$|$(...)$': {\n        '*': {\n          action_: 'tex-math'\n        }\n      },\n      '{(...)}': {\n        '*': {\n          action_: 'text'\n        }\n      },\n      'a-z': {\n        'f': {\n          action_: 'tex-math'\n        }\n      },\n      'letters': {\n        '*': {\n          action_: 'rm'\n        }\n      },\n      '-9.,9': {\n        '*': {\n          action_: '9,9'\n        }\n      },\n      ',': {\n        '*': {\n          action_: {\n            type_: 'insert+p1',\n            option: 'comma enumeration S'\n          }\n        }\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': {\n          action_: 'color-output'\n        }\n      },\n      '\\\\color{(...)}0': {\n        '*': {\n          action_: 'color0-output'\n        }\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: 'ce'\n        }\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: 'copy'\n        }\n      },\n      'else2': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {\n      'state of aggregation': function stateOfAggregation(buffer, m) {\n        return {\n          type_: 'state of aggregation subscript',\n          p1: mhchemParser.go(m, 'o')\n        };\n      },\n      'color-output': function colorOutput(buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1], 'pq')\n        };\n      }\n    }\n  },\n  'bd': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      'x$': {\n        '0': {\n          nextState: '!f',\n          revisit: true\n        }\n      },\n      'formula$': {\n        '0': {\n          nextState: 'f',\n          revisit: true\n        }\n      },\n      'else': {\n        '0': {\n          nextState: '!f',\n          revisit: true\n        }\n      },\n      '-9.,9 no missing 0': {\n        '*': {\n          action_: '9,9'\n        }\n      },\n      '.': {\n        '*': {\n          action_: {\n            type_: 'insert',\n            option: 'electron dot'\n          }\n        }\n      },\n      'a-z': {\n        'f': {\n          action_: 'tex-math'\n        }\n      },\n      'x': {\n        '*': {\n          action_: {\n            type_: 'insert',\n            option: 'KV x'\n          }\n        }\n      },\n      'letters': {\n        '*': {\n          action_: 'rm'\n        }\n      },\n      '\\'': {\n        '*': {\n          action_: {\n            type_: 'insert',\n            option: 'prime'\n          }\n        }\n      },\n      '${(...)}$|$(...)$': {\n        '*': {\n          action_: 'tex-math'\n        }\n      },\n      '{(...)}': {\n        '*': {\n          action_: 'text'\n        }\n      },\n      '\\\\color{(...)}{(...)}1|\\\\color(...){(...)}2': {\n        '*': {\n          action_: 'color-output'\n        }\n      },\n      '\\\\color{(...)}0': {\n        '*': {\n          action_: 'color0-output'\n        }\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: 'ce'\n        }\n      },\n      '\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: 'copy'\n        }\n      },\n      'else2': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {\n      'color-output': function colorOutput(buffer, m) {\n        return {\n          type_: 'color',\n          color1: m[0],\n          color2: mhchemParser.go(m[1], 'bd')\n        };\n      }\n    }\n  },\n  'oxidation': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      'roman numeral': {\n        '*': {\n          action_: 'roman-numeral'\n        }\n      },\n      '${(...)}$|$(...)$': {\n        '*': {\n          action_: 'tex-math'\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {\n      'roman-numeral': function romanNumeral(buffer, m) {\n        return {\n          type_: 'roman numeral',\n          p1: m || \"\"\n        };\n      }\n    }\n  },\n  'tex-math': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: ['output', 'ce']\n        }\n      },\n      '{...}|\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: 'o='\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'o='\n        }\n      }\n    }),\n    actions: {\n      'output': function output(buffer) {\n        if (buffer.o) {\n          /** @type {ParserOutput} */\n          var ret = {\n            type_: 'tex-math',\n            p1: buffer.o\n          };\n\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n\n          return ret;\n        }\n      }\n    }\n  },\n  'tex-math tight': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      '\\\\ce{(...)}': {\n        '*': {\n          action_: ['output', 'ce']\n        }\n      },\n      '{...}|\\\\,|\\\\x{}{}|\\\\x{}|\\\\x': {\n        '*': {\n          action_: 'o='\n        }\n      },\n      '-|+': {\n        '*': {\n          action_: 'tight operator'\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'o='\n        }\n      }\n    }),\n    actions: {\n      'tight operator': function tightOperator(buffer, m) {\n        buffer.o = (buffer.o || \"\") + \"{\" + m + \"}\";\n      },\n      'output': function output(buffer) {\n        if (buffer.o) {\n          /** @type {ParserOutput} */\n          var ret = {\n            type_: 'tex-math',\n            p1: buffer.o\n          };\n\n          for (var p in buffer) {\n            delete buffer[p];\n          }\n\n          return ret;\n        }\n      }\n    }\n  },\n  '9,9': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {}\n      },\n      ',': {\n        '*': {\n          action_: 'comma'\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'copy'\n        }\n      }\n    }),\n    actions: {\n      'comma': function comma() {\n        return {\n          type_: 'commaDecimal'\n        };\n      }\n    }\n  },\n  //#endregion\n  //\n  // \\pu state machines\n  //\n  //#region pu\n  'pu': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      'space$': {\n        '*': {\n          action_: ['output', 'space']\n        }\n      },\n      '{[(|)]}': {\n        '0|a': {\n          action_: 'copy'\n        }\n      },\n      '(-)(9)^(-9)': {\n        '0': {\n          action_: 'number^',\n          nextState: 'a'\n        }\n      },\n      '(-)(9.,9)(e)(99)': {\n        '0': {\n          action_: 'enumber',\n          nextState: 'a'\n        }\n      },\n      'space': {\n        '0|a': {}\n      },\n      'pm-operator': {\n        '0|a': {\n          action_: {\n            type_: 'operator',\n            option: '\\\\pm'\n          },\n          nextState: '0'\n        }\n      },\n      'operator': {\n        '0|a': {\n          action_: 'copy',\n          nextState: '0'\n        }\n      },\n      '//': {\n        'd': {\n          action_: 'o=',\n          nextState: '/'\n        }\n      },\n      '/': {\n        'd': {\n          action_: 'o=',\n          nextState: '/'\n        }\n      },\n      '{...}|else': {\n        '0|d': {\n          action_: 'd=',\n          nextState: 'd'\n        },\n        'a': {\n          action_: ['space', 'd='],\n          nextState: 'd'\n        },\n        '/|q': {\n          action_: 'q=',\n          nextState: 'q'\n        }\n      }\n    }),\n    actions: {\n      'enumber': function enumber(buffer, m) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n\n        if (m[0] === \"+-\" || m[0] === \"+/-\") {\n          ret.push(\"\\\\pm \");\n        } else if (m[0]) {\n          ret.push(m[0]);\n        }\n\n        if (m[1]) {\n          mhchemParser.concatArray(ret, mhchemParser.go(m[1], 'pu-9,9'));\n\n          if (m[2]) {\n            if (m[2].match(/[,.]/)) {\n              mhchemParser.concatArray(ret, mhchemParser.go(m[2], 'pu-9,9'));\n            } else {\n              ret.push(m[2]);\n            }\n          }\n\n          m[3] = m[4] || m[3];\n\n          if (m[3]) {\n            m[3] = m[3].trim();\n\n            if (m[3] === \"e\" || m[3].substr(0, 1) === \"*\") {\n              ret.push({\n                type_: 'cdot'\n              });\n            } else {\n              ret.push({\n                type_: 'times'\n              });\n            }\n          }\n        }\n\n        if (m[3]) {\n          ret.push(\"10^{\" + m[5] + \"}\");\n        }\n\n        return ret;\n      },\n      'number^': function number(buffer, m) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n\n        if (m[0] === \"+-\" || m[0] === \"+/-\") {\n          ret.push(\"\\\\pm \");\n        } else if (m[0]) {\n          ret.push(m[0]);\n        }\n\n        mhchemParser.concatArray(ret, mhchemParser.go(m[1], 'pu-9,9'));\n        ret.push(\"^{\" + m[2] + \"}\");\n        return ret;\n      },\n      'operator': function operator(buffer, m, p1) {\n        return {\n          type_: 'operator',\n          kind_: p1 || m\n        };\n      },\n      'space': function space() {\n        return {\n          type_: 'pu-space-1'\n        };\n      },\n      'output': function output(buffer) {\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret;\n        var md = mhchemParser.patterns.match_('{(...)}', buffer.d || \"\");\n\n        if (md && md.remainder === '') {\n          buffer.d = md.match_;\n        }\n\n        var mq = mhchemParser.patterns.match_('{(...)}', buffer.q || \"\");\n\n        if (mq && mq.remainder === '') {\n          buffer.q = mq.match_;\n        }\n\n        if (buffer.d) {\n          buffer.d = buffer.d.replace(/\\u00B0C|\\^oC|\\^{o}C/g, \"{}^{\\\\circ}C\");\n          buffer.d = buffer.d.replace(/\\u00B0F|\\^oF|\\^{o}F/g, \"{}^{\\\\circ}F\");\n        }\n\n        if (buffer.q) {\n          // fraction\n          buffer.q = buffer.q.replace(/\\u00B0C|\\^oC|\\^{o}C/g, \"{}^{\\\\circ}C\");\n          buffer.q = buffer.q.replace(/\\u00B0F|\\^oF|\\^{o}F/g, \"{}^{\\\\circ}F\");\n          var b5 = {\n            d: mhchemParser.go(buffer.d, 'pu'),\n            q: mhchemParser.go(buffer.q, 'pu')\n          };\n\n          if (buffer.o === '//') {\n            ret = {\n              type_: 'pu-frac',\n              p1: b5.d,\n              p2: b5.q\n            };\n          } else {\n            ret = b5.d;\n\n            if (b5.d.length > 1 || b5.q.length > 1) {\n              ret.push({\n                type_: ' / '\n              });\n            } else {\n              ret.push({\n                type_: '/'\n              });\n            }\n\n            mhchemParser.concatArray(ret, b5.q);\n          }\n        } else {\n          // no fraction\n          ret = mhchemParser.go(buffer.d, 'pu-2');\n        }\n\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n\n        return ret;\n      }\n    }\n  },\n  'pu-2': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '*': {\n          action_: 'output'\n        }\n      },\n      '*': {\n        '*': {\n          action_: ['output', 'cdot'],\n          nextState: '0'\n        }\n      },\n      '\\\\x': {\n        '*': {\n          action_: 'rm='\n        }\n      },\n      'space': {\n        '*': {\n          action_: ['output', 'space'],\n          nextState: '0'\n        }\n      },\n      '^{(...)}|^(-1)': {\n        '1': {\n          action_: '^(-1)'\n        }\n      },\n      '-9.,9': {\n        '0': {\n          action_: 'rm=',\n          nextState: '0'\n        },\n        '1': {\n          action_: '^(-1)',\n          nextState: '0'\n        }\n      },\n      '{...}|else': {\n        '*': {\n          action_: 'rm=',\n          nextState: '1'\n        }\n      }\n    }),\n    actions: {\n      'cdot': function cdot() {\n        return {\n          type_: 'tight cdot'\n        };\n      },\n      '^(-1)': function _(buffer, m) {\n        buffer.rm += \"^{\" + m + \"}\";\n      },\n      'space': function space() {\n        return {\n          type_: 'pu-space-2'\n        };\n      },\n      'output': function output(buffer) {\n        /** @type {ParserOutput | ParserOutput[]} */\n        var ret = [];\n\n        if (buffer.rm) {\n          var mrm = mhchemParser.patterns.match_('{(...)}', buffer.rm || \"\");\n\n          if (mrm && mrm.remainder === '') {\n            ret = mhchemParser.go(mrm.match_, 'pu');\n          } else {\n            ret = {\n              type_: 'rm',\n              p1: buffer.rm\n            };\n          }\n        }\n\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n\n        return ret;\n      }\n    }\n  },\n  'pu-9,9': {\n    transitions: mhchemParser.createTransitions({\n      'empty': {\n        '0': {\n          action_: 'output-0'\n        },\n        'o': {\n          action_: 'output-o'\n        }\n      },\n      ',': {\n        '0': {\n          action_: ['output-0', 'comma'],\n          nextState: 'o'\n        }\n      },\n      '.': {\n        '0': {\n          action_: ['output-0', 'copy'],\n          nextState: 'o'\n        }\n      },\n      'else': {\n        '*': {\n          action_: 'text='\n        }\n      }\n    }),\n    actions: {\n      'comma': function comma() {\n        return {\n          type_: 'commaDecimal'\n        };\n      },\n      'output-0': function output0(buffer) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        buffer.text_ = buffer.text_ || \"\";\n\n        if (buffer.text_.length > 4) {\n          var a = buffer.text_.length % 3;\n\n          if (a === 0) {\n            a = 3;\n          }\n\n          for (var i = buffer.text_.length - 3; i > 0; i -= 3) {\n            ret.push(buffer.text_.substr(i, 3));\n            ret.push({\n              type_: '1000 separator'\n            });\n          }\n\n          ret.push(buffer.text_.substr(0, a));\n          ret.reverse();\n        } else {\n          ret.push(buffer.text_);\n        }\n\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n\n        return ret;\n      },\n      'output-o': function outputO(buffer) {\n        /** @type {ParserOutput[]} */\n        var ret = [];\n        buffer.text_ = buffer.text_ || \"\";\n\n        if (buffer.text_.length > 4) {\n          var a = buffer.text_.length - 3;\n\n          for (var i = 0; i < a; i += 3) {\n            ret.push(buffer.text_.substr(i, 3));\n            ret.push({\n              type_: '1000 separator'\n            });\n          }\n\n          ret.push(buffer.text_.substr(i));\n        } else {\n          ret.push(buffer.text_);\n        }\n\n        for (var p in buffer) {\n          delete buffer[p];\n        }\n\n        return ret;\n      }\n    }\n  } //#endregion\n\n}; //\n// texify: Take MhchemParser output and convert it to TeX\n//\n\n/** @type {Texify} */\n\nvar texify = {\n  go: function go(input, isInner) {\n    // (recursive, max 4 levels)\n    if (!input) {\n      return \"\";\n    }\n\n    var res = \"\";\n    var cee = false;\n\n    for (var i = 0; i < input.length; i++) {\n      var inputi = input[i];\n\n      if (typeof inputi === \"string\") {\n        res += inputi;\n      } else {\n        res += texify._go2(inputi);\n\n        if (inputi.type_ === '1st-level escape') {\n          cee = true;\n        }\n      }\n    }\n\n    if (!isInner && !cee && res) {\n      res = \"{\" + res + \"}\";\n    }\n\n    return res;\n  },\n  _goInner: function _goInner(input) {\n    if (!input) {\n      return input;\n    }\n\n    return texify.go(input, true);\n  },\n  _go2: function _go2(buf) {\n    /** @type {undefined | string} */\n    var res;\n\n    switch (buf.type_) {\n      case 'chemfive':\n        res = \"\";\n        var b5 = {\n          a: texify._goInner(buf.a),\n          b: texify._goInner(buf.b),\n          p: texify._goInner(buf.p),\n          o: texify._goInner(buf.o),\n          q: texify._goInner(buf.q),\n          d: texify._goInner(buf.d)\n        }; //\n        // a\n        //\n\n        if (b5.a) {\n          if (b5.a.match(/^[+\\-]/)) {\n            b5.a = \"{\" + b5.a + \"}\";\n          }\n\n          res += b5.a + \"\\\\,\";\n        } //\n        // b and p\n        //\n\n\n        if (b5.b || b5.p) {\n          res += \"{\\\\vphantom{X}}\";\n          res += \"^{\\\\hphantom{\" + (b5.b || \"\") + \"}}_{\\\\hphantom{\" + (b5.p || \"\") + \"}}\";\n          res += \"{\\\\vphantom{X}}\";\n          res += \"^{\\\\smash[t]{\\\\vphantom{2}}\\\\mathllap{\" + (b5.b || \"\") + \"}}\";\n          res += \"_{\\\\vphantom{2}\\\\mathllap{\\\\smash[t]{\" + (b5.p || \"\") + \"}}}\";\n        } //\n        // o\n        //\n\n\n        if (b5.o) {\n          if (b5.o.match(/^[+\\-]/)) {\n            b5.o = \"{\" + b5.o + \"}\";\n          }\n\n          res += b5.o;\n        } //\n        // q and d\n        //\n\n\n        if (buf.dType === 'kv') {\n          if (b5.d || b5.q) {\n            res += \"{\\\\vphantom{X}}\";\n          }\n\n          if (b5.d) {\n            res += \"^{\" + b5.d + \"}\";\n          }\n\n          if (b5.q) {\n            res += \"_{\\\\smash[t]{\" + b5.q + \"}}\";\n          }\n        } else if (buf.dType === 'oxidation') {\n          if (b5.d) {\n            res += \"{\\\\vphantom{X}}\";\n            res += \"^{\" + b5.d + \"}\";\n          }\n\n          if (b5.q) {\n            res += \"{\\\\vphantom{X}}\";\n            res += \"_{\\\\smash[t]{\" + b5.q + \"}}\";\n          }\n        } else {\n          if (b5.q) {\n            res += \"{\\\\vphantom{X}}\";\n            res += \"_{\\\\smash[t]{\" + b5.q + \"}}\";\n          }\n\n          if (b5.d) {\n            res += \"{\\\\vphantom{X}}\";\n            res += \"^{\" + b5.d + \"}\";\n          }\n        }\n\n        break;\n\n      case 'rm':\n        res = \"\\\\mathrm{\" + buf.p1 + \"}\";\n        break;\n\n      case 'text':\n        if (buf.p1.match(/[\\^_]/)) {\n          buf.p1 = buf.p1.replace(\" \", \"~\").replace(\"-\", \"\\\\text{-}\");\n          res = \"\\\\mathrm{\" + buf.p1 + \"}\";\n        } else {\n          res = \"\\\\text{\" + buf.p1 + \"}\";\n        }\n\n        break;\n\n      case 'roman numeral':\n        res = \"\\\\mathrm{\" + buf.p1 + \"}\";\n        break;\n\n      case 'state of aggregation':\n        res = \"\\\\mskip2mu \" + texify._goInner(buf.p1);\n        break;\n\n      case 'state of aggregation subscript':\n        res = \"\\\\mskip1mu \" + texify._goInner(buf.p1);\n        break;\n\n      case 'bond':\n        res = texify._getBond(buf.kind_);\n\n        if (!res) {\n          throw [\"MhchemErrorBond\", \"mhchem Error. Unknown bond type (\" + buf.kind_ + \")\"];\n        }\n\n        break;\n\n      case 'frac':\n        var c = \"\\\\frac{\" + buf.p1 + \"}{\" + buf.p2 + \"}\";\n        res = \"\\\\mathchoice{\\\\textstyle\" + c + \"}{\" + c + \"}{\" + c + \"}{\" + c + \"}\";\n        break;\n\n      case 'pu-frac':\n        var d = \"\\\\frac{\" + texify._goInner(buf.p1) + \"}{\" + texify._goInner(buf.p2) + \"}\";\n        res = \"\\\\mathchoice{\\\\textstyle\" + d + \"}{\" + d + \"}{\" + d + \"}{\" + d + \"}\";\n        break;\n\n      case 'tex-math':\n        res = buf.p1 + \" \";\n        break;\n\n      case 'frac-ce':\n        res = \"\\\\frac{\" + texify._goInner(buf.p1) + \"}{\" + texify._goInner(buf.p2) + \"}\";\n        break;\n\n      case 'overset':\n        res = \"\\\\overset{\" + texify._goInner(buf.p1) + \"}{\" + texify._goInner(buf.p2) + \"}\";\n        break;\n\n      case 'underset':\n        res = \"\\\\underset{\" + texify._goInner(buf.p1) + \"}{\" + texify._goInner(buf.p2) + \"}\";\n        break;\n\n      case 'underbrace':\n        res = \"\\\\underbrace{\" + texify._goInner(buf.p1) + \"}_{\" + texify._goInner(buf.p2) + \"}\";\n        break;\n\n      case 'color':\n        res = \"{\\\\color{\" + buf.color1 + \"}{\" + texify._goInner(buf.color2) + \"}}\";\n        break;\n\n      case 'color0':\n        res = \"\\\\color{\" + buf.color + \"}\";\n        break;\n\n      case 'arrow':\n        var b6 = {\n          rd: texify._goInner(buf.rd),\n          rq: texify._goInner(buf.rq)\n        };\n\n        var arrow = \"\\\\x\" + texify._getArrow(buf.r);\n\n        if (b6.rq) {\n          arrow += \"[{\" + b6.rq + \"}]\";\n        }\n\n        if (b6.rd) {\n          arrow += \"{\" + b6.rd + \"}\";\n        } else {\n          arrow += \"{}\";\n        }\n\n        res = arrow;\n        break;\n\n      case 'operator':\n        res = texify._getOperator(buf.kind_);\n        break;\n\n      case '1st-level escape':\n        res = buf.p1 + \" \"; // &, \\\\\\\\, \\\\hlin\n\n        break;\n\n      case 'space':\n        res = \" \";\n        break;\n\n      case 'entitySkip':\n        res = \"~\";\n        break;\n\n      case 'pu-space-1':\n        res = \"~\";\n        break;\n\n      case 'pu-space-2':\n        res = \"\\\\mkern3mu \";\n        break;\n\n      case '1000 separator':\n        res = \"\\\\mkern2mu \";\n        break;\n\n      case 'commaDecimal':\n        res = \"{,}\";\n        break;\n\n      case 'comma enumeration L':\n        res = \"{\" + buf.p1 + \"}\\\\mkern6mu \";\n        break;\n\n      case 'comma enumeration M':\n        res = \"{\" + buf.p1 + \"}\\\\mkern3mu \";\n        break;\n\n      case 'comma enumeration S':\n        res = \"{\" + buf.p1 + \"}\\\\mkern1mu \";\n        break;\n\n      case 'hyphen':\n        res = \"\\\\text{-}\";\n        break;\n\n      case 'addition compound':\n        res = \"\\\\,{\\\\cdot}\\\\,\";\n        break;\n\n      case 'electron dot':\n        res = \"\\\\mkern1mu \\\\bullet\\\\mkern1mu \";\n        break;\n\n      case 'KV x':\n        res = \"{\\\\times}\";\n        break;\n\n      case 'prime':\n        res = \"\\\\prime \";\n        break;\n\n      case 'cdot':\n        res = \"\\\\cdot \";\n        break;\n\n      case 'tight cdot':\n        res = \"\\\\mkern1mu{\\\\cdot}\\\\mkern1mu \";\n        break;\n\n      case 'times':\n        res = \"\\\\times \";\n        break;\n\n      case 'circa':\n        res = \"{\\\\sim}\";\n        break;\n\n      case '^':\n        res = \"uparrow\";\n        break;\n\n      case 'v':\n        res = \"downarrow\";\n        break;\n\n      case 'ellipsis':\n        res = \"\\\\ldots \";\n        break;\n\n      case '/':\n        res = \"/\";\n        break;\n\n      case ' / ':\n        res = \"\\\\,/\\\\,\";\n        break;\n\n      default:\n        throw [\"MhchemBugT\", \"mhchem bug T. Please report.\"];\n      // Missing texify rule or unknown MhchemParser output\n    }\n    return res;\n  },\n  _getArrow: function _getArrow(a) {\n    switch (a) {\n      case \"->\":\n        return \"rightarrow\";\n\n      case \"\\u2192\":\n        return \"rightarrow\";\n\n      case \"\\u27F6\":\n        return \"rightarrow\";\n\n      case \"<-\":\n        return \"leftarrow\";\n\n      case \"<->\":\n        return \"leftrightarrow\";\n\n      case \"<-->\":\n        return \"rightleftarrows\";\n\n      case \"<=>\":\n        return \"rightleftharpoons\";\n\n      case \"\\u21CC\":\n        return \"rightleftharpoons\";\n\n      case \"<=>>\":\n        return \"rightequilibrium\";\n\n      case \"<<=>\":\n        return \"leftequilibrium\";\n\n      default:\n        throw [\"MhchemBugT\", \"mhchem bug T. Please report.\"];\n    }\n  },\n  _getBond: function _getBond(a) {\n    switch (a) {\n      case \"-\":\n        return \"{-}\";\n\n      case \"1\":\n        return \"{-}\";\n\n      case \"=\":\n        return \"{=}\";\n\n      case \"2\":\n        return \"{=}\";\n\n      case \"#\":\n        return \"{\\\\equiv}\";\n\n      case \"3\":\n        return \"{\\\\equiv}\";\n\n      case \"~\":\n        return \"{\\\\tripledash}\";\n\n      case \"~-\":\n        return \"{\\\\mathrlap{\\\\raisebox{-.1em}{$-$}}\\\\raisebox{.1em}{$\\\\tripledash$}}\";\n\n      case \"~=\":\n        return \"{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$\\\\tripledash$}}-}\";\n\n      case \"~--\":\n        return \"{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$\\\\tripledash$}}-}\";\n\n      case \"-~-\":\n        return \"{\\\\mathrlap{\\\\raisebox{-.2em}{$-$}}\\\\mathrlap{\\\\raisebox{.2em}{$-$}}\\\\tripledash}\";\n\n      case \"...\":\n        return \"{{\\\\cdot}{\\\\cdot}{\\\\cdot}}\";\n\n      case \"....\":\n        return \"{{\\\\cdot}{\\\\cdot}{\\\\cdot}{\\\\cdot}}\";\n\n      case \"->\":\n        return \"{\\\\rightarrow}\";\n\n      case \"<-\":\n        return \"{\\\\leftarrow}\";\n\n      case \"<\":\n        return \"{<}\";\n\n      case \">\":\n        return \"{>}\";\n\n      default:\n        throw [\"MhchemBugT\", \"mhchem bug T. Please report.\"];\n    }\n  },\n  _getOperator: function _getOperator(a) {\n    switch (a) {\n      case \"+\":\n        return \" {}+{} \";\n\n      case \"-\":\n        return \" {}-{} \";\n\n      case \"=\":\n        return \" {}={} \";\n\n      case \"<\":\n        return \" {}<{} \";\n\n      case \">\":\n        return \" {}>{} \";\n\n      case \"<<\":\n        return \" {}\\\\ll{} \";\n\n      case \">>\":\n        return \" {}\\\\gg{} \";\n\n      case \"\\\\pm\":\n        return \" {}\\\\pm{} \";\n\n      case \"\\\\approx\":\n        return \" {}\\\\approx{} \";\n\n      case \"$\\\\approx$\":\n        return \" {}\\\\approx{} \";\n\n      case \"v\":\n        return \" \\\\downarrow{} \";\n\n      case \"(v)\":\n        return \" \\\\downarrow{} \";\n\n      case \"^\":\n        return \" \\\\uparrow{} \";\n\n      case \"(^)\":\n        return \" \\\\uparrow{} \";\n\n      default:\n        throw [\"MhchemBugT\", \"mhchem bug T. Please report.\"];\n    }\n  }\n}; //\n","\"use client\";\nexport{h as Block,i as Streamdown,g as StreamdownContext,e as defaultRehypePlugins,f as defaultRemarkPlugins,d as parseMarkdownIntoBlocks}from'./chunk-OGVTOU66.js';","import type { HighlighterCore } from \"shiki/core\";\nimport { createHighlighterCoreSync } from \"shiki/core\";\nimport { createJavaScriptRegexEngine } from \"shiki/engine/javascript\";\nimport bash from \"shiki/langs/bash.mjs\";\nimport css from \"shiki/langs/css.mjs\";\nimport go from \"shiki/langs/go.mjs\";\nimport html from \"shiki/langs/html.mjs\";\nimport java from \"shiki/langs/java.mjs\";\nimport javascript from \"shiki/langs/javascript.mjs\";\nimport json from \"shiki/langs/json.mjs\";\nimport jsx from \"shiki/langs/jsx.mjs\";\nimport markdown from \"shiki/langs/markdown.mjs\";\nimport python from \"shiki/langs/python.mjs\";\nimport rust from \"shiki/langs/rust.mjs\";\nimport shell from \"shiki/langs/shell.mjs\";\nimport tsx from \"shiki/langs/tsx.mjs\";\n// Import common languages\nimport typescript from \"shiki/langs/typescript.mjs\";\nimport yaml from \"shiki/langs/yaml.mjs\";\n// Import themes\nimport githubDark from \"shiki/themes/github-dark.mjs\";\n\nlet highlighter: HighlighterCore | null = null;\n\nexport function getHighlighter(): HighlighterCore {\n  if (!highlighter) {\n    highlighter = createHighlighterCoreSync({\n      themes: [githubDark],\n      langs: [\n        typescript,\n        javascript,\n        tsx,\n        jsx,\n        python,\n        rust,\n        go,\n        java,\n        html,\n        css,\n        json,\n        markdown,\n        yaml,\n        bash,\n        shell,\n      ],\n      engine: createJavaScriptRegexEngine(),\n    });\n  }\n  return highlighter;\n}\n\n// Set of languages we have loaded - used for fallback handling\nconst SUPPORTED_LANGUAGES = new Set([\n  \"typescript\",\n  \"javascript\",\n  \"tsx\",\n  \"jsx\",\n  \"python\",\n  \"rust\",\n  \"go\",\n  \"java\",\n  \"html\",\n  \"css\",\n  \"json\",\n  \"markdown\",\n  \"yaml\",\n  \"bash\",\n  \"shell\",\n  // Common aliases\n  \"ts\",\n  \"js\",\n  \"py\",\n  \"md\",\n  \"yml\",\n  \"sh\",\n]);\n\n// Language alias mapping for common variations\nconst LANGUAGE_ALIASES: Record<string, string> = {\n  ts: \"typescript\",\n  js: \"javascript\",\n  py: \"python\",\n  md: \"markdown\",\n  yml: \"yaml\",\n  sh: \"bash\",\n  zsh: \"bash\",\n  fish: \"bash\",\n};\n\n/**\n * Normalize language identifier to a supported language\n */\nfunction normalizeLanguage(lang: string): string {\n  const normalized = lang.toLowerCase().trim();\n  return LANGUAGE_ALIASES[normalized] || normalized;\n}\n\n/**\n * Check if a language is supported by the highlighter\n */\nexport function isLanguageSupported(lang: string): boolean {\n  return SUPPORTED_LANGUAGES.has(normalizeLanguage(lang));\n}\n\n/**\n * Escape HTML entities for safe rendering as plain text fallback\n */\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\n/**\n * Generate a plain text fallback HTML for code that can't be highlighted\n */\nfunction createPlainTextFallback(code: string): string {\n  return `<pre class=\"shiki\" style=\"background-color:#24292e;color:#e1e4e8\"><code>${escapeHtml(code)}</code></pre>`;\n}\n\nexport type HighlightResult = {\n  html: string;\n  error?: string;\n};\n\n/**\n * Highlight code with Shiki, with graceful error handling\n * Returns an object with the HTML and optional error message\n */\nexport function highlightCode(code: string, lang: string): HighlightResult {\n  const normalizedLang = normalizeLanguage(lang);\n\n  // Check if language is supported before attempting to highlight\n  if (!isLanguageSupported(normalizedLang)) {\n    return {\n      html: createPlainTextFallback(code),\n      error: `Language \"${lang}\" is not supported, showing as plain text`,\n    };\n  }\n\n  try {\n    const highlighter = getHighlighter();\n    const html = highlighter.codeToHtml(code, {\n      lang: normalizedLang,\n      theme: \"github-dark\",\n    });\n    return { html };\n  } catch (error) {\n    // Log the error for debugging but don't crash\n    console.warn(\n      `[Shiki] Failed to highlight code with language \"${lang}\":`,\n      error,\n    );\n\n    // Return escaped plain text as fallback\n    return {\n      html: createPlainTextFallback(code),\n      error:\n        error instanceof Error\n          ? error.message\n          : \"Unknown error during syntax highlighting\",\n    };\n  }\n}\n","\"use client\";\n\nimport { Check, Copy, UnfoldHorizontal, WrapText } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\nexport function ClientCodeControls({ code }: { code: string }) {\n  const [copied, setCopied] = useState(false);\n  const [wrapped, setWrapped] = useState(false);\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(code);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  return (\n    <>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-all duration-200\"\n        onClick={() => setWrapped(!wrapped)}\n        aria-label={wrapped ? \"Disable line wrapping\" : \"Enable line wrapping\"}\n      >\n        {wrapped ? (\n          <WrapText className=\"w-3 h-3\" />\n        ) : (\n          <UnfoldHorizontal className=\"w-3 h-3\" />\n        )}\n      </Button>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        className=\"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-all duration-200\"\n        onClick={handleCopy}\n        aria-label=\"Copy code\"\n      >\n        {copied ? (\n          <Check className=\"w-3 h-3 text-primary\" />\n        ) : (\n          <Copy className=\"w-3 h-3\" />\n        )}\n      </Button>\n    </>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M16 12h6', key: '15xry1' }],\n  ['path', { d: 'M8 12H2', key: '1jqql6' }],\n  ['path', { d: 'M12 2v2', key: 'tus03m' }],\n  ['path', { d: 'M12 8v2', key: '1woqiv' }],\n  ['path', { d: 'M12 14v2', key: '8jcxud' }],\n  ['path', { d: 'M12 20v2', key: '1lh1kg' }],\n  ['path', { d: 'm19 15 3-3-3-3', key: 'wjy7rq' }],\n  ['path', { d: 'm5 9-3 3 3 3', key: 'j64kie' }],\n];\n\n/**\n * @component @name UnfoldHorizontal\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTYgMTJoNiIgLz4KICA8cGF0aCBkPSJNOCAxMkgyIiAvPgogIDxwYXRoIGQ9Ik0xMiAydjIiIC8+CiAgPHBhdGggZD0iTTEyIDh2MiIgLz4KICA8cGF0aCBkPSJNMTIgMTR2MiIgLz4KICA8cGF0aCBkPSJNMTIgMjB2MiIgLz4KICA8cGF0aCBkPSJtMTkgMTUgMy0zLTMtMyIgLz4KICA8cGF0aCBkPSJtNSA5LTMgMyAzIDMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/unfold-horizontal\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst UnfoldHorizontal = createLucideIcon('unfold-horizontal', __iconNode);\n\nexport default UnfoldHorizontal;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm16 16-3 3 3 3', key: '117b85' }],\n  ['path', { d: 'M3 12h14.5a1 1 0 0 1 0 7H13', key: '18xa6z' }],\n  ['path', { d: 'M3 19h6', key: '1ygdsz' }],\n  ['path', { d: 'M3 5h18', key: '1u36vt' }],\n];\n\n/**\n * @component @name TextWrap\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTYgMTYtMyAzIDMgMyIgLz4KICA8cGF0aCBkPSJNMyAxMmgxNC41YTEgMSAwIDAgMSAwIDdIMTMiIC8+CiAgPHBhdGggZD0iTTMgMTloNiIgLz4KICA8cGF0aCBkPSJNMyA1aDE4IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/text-wrap\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst TextWrap = createLucideIcon('text-wrap', __iconNode);\n\nexport default TextWrap;\n","\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { type HighlightResult, highlightCode } from \"@/lib/highlighter\";\nimport { cn } from \"@/lib/utils\";\nimport { ClientCodeControls } from \"./ClientCodeControls\";\n\ninterface CodeBlockProps {\n  code: string;\n  language?: string;\n  inline?: boolean;\n}\n\n/**\n * Escape HTML for safe initial rendering before highlighting completes\n */\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/'/g, \"&#039;\");\n}\n\n/**\n * Create a safe initial fallback HTML while highlighting is in progress\n */\nfunction createInitialFallback(code: string): string {\n  return `<pre class=\"shiki\" style=\"background-color:#24292e;color:#e1e4e8\"><code>${escapeHtml(code)}</code></pre>`;\n}\n\nexport function CodeBlock({ code, language, inline }: CodeBlockProps) {\n  const [highlightResult, setHighlightResult] =\n    useState<HighlightResult | null>(null);\n  const codeRef = useRef(code);\n  const languageRef = useRef(language);\n\n  if (inline) {\n    return (\n      <code\n        className={cn(\n          \"px-1.5 py-0.5 rounded text-sm font-mono\",\n          // Light mode\n          \"bg-muted/80 text-foreground\",\n          \"border border-border/20\",\n          // Dark mode - bespoke slate/violet aesthetic\n          \"dark:bg-gradient-to-br dark:from-[oklch(28%_0.03_260)] dark:to-[oklch(25%_0.02_260)]\",\n          \"dark:text-[oklch(88%_0.02_260)]\",\n          \"dark:border-[oklch(35%_0.04_260)]\",\n          \"dark:shadow-[inset_0_1px_0_oklch(40%_0.02_260_/_0.15),_0_1px_2px_oklch(0%_0_0_/_0.2)]\",\n          // Hover states\n          \"hover:bg-muted dark:hover:from-[oklch(30%_0.03_260)] dark:hover:to-[oklch(27%_0.02_260)]\",\n          \"transition-colors\",\n        )}\n      >\n        {code}\n      </code>\n    );\n  }\n\n  // Defer syntax highlighting to avoid blocking during streaming\n  useEffect(() => {\n    // Skip re-highlighting if code hasn't changed\n    if (\n      codeRef.current === code &&\n      languageRef.current === language &&\n      highlightResult\n    ) {\n      return;\n    }\n\n    codeRef.current = code;\n    languageRef.current = language;\n\n    const runHighlight = () => {\n      // highlightCode now handles all errors internally and returns a safe result\n      const result = highlightCode(code, language || \"text\");\n      setHighlightResult(result);\n    };\n\n    // Use requestIdleCallback when available (Chrome, Firefox, Edge)\n    // Fall back to setTimeout for Safari/iOS which doesn't support requestIdleCallback\n    if (\"requestIdleCallback\" in window) {\n      const idleCallback = requestIdleCallback(runHighlight);\n      return () => cancelIdleCallback(idleCallback);\n    } else {\n      const timeout = setTimeout(runHighlight, 1);\n      return () => clearTimeout(timeout);\n    }\n  }, [code, language, highlightResult]);\n\n  // Use highlighted HTML or safe escaped fallback while loading\n  const html = highlightResult?.html || createInitialFallback(code);\n\n  // Shiki returns complete HTML with inline styles\n  // Wrap in our UI with line numbers, controls, scrolling\n  return (\n    <div className=\"relative group my-4\">\n      {/* Header with language and controls */}\n      <div className=\"flex items-center justify-between bg-muted/50 px-4 py-2 rounded-t border-b border-border\">\n        <span className=\"text-xs text-muted-foreground font-mono\">\n          {language || \"code\"}\n        </span>\n        <div className=\"flex gap-2\">\n          <ClientCodeControls code={code} />\n        </div>\n      </div>\n\n      {/* Shiki-generated code (safe HTML from highlighter) */}\n      <div className=\"relative\">\n        <div\n          className={cn(\n            \"rounded-b overflow-x-auto max-h-[600px] overflow-y-auto w-full\",\n            \"[&>pre]:m-0 [&>pre]:p-4 [&>pre]:w-full [&>pre]:overflow-x-auto\",\n          )}\n          dangerouslySetInnerHTML={{ __html: html }}\n        />\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Component, type ReactNode } from \"react\";\nimport { analytics } from \"@/lib/analytics\";\n\ninterface MathErrorBoundaryProps {\n  children: ReactNode;\n  latex?: string; // Raw LaTeX for fallback display\n}\n\ninterface MathErrorBoundaryState {\n  hasError: boolean;\n}\n\n/**\n * Specialized error boundary for math rendering\n * Shows a plain text fallback if KaTeX rendering completely fails\n */\nexport class MathErrorBoundary extends Component<\n  MathErrorBoundaryProps,\n  MathErrorBoundaryState\n> {\n  constructor(props: MathErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(): MathErrorBoundaryState {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.warn(\n      \"[MathBlock] Render error caught by boundary:\",\n      error,\n      errorInfo,\n    );\n\n    // Track error event (for specific math error tracking)\n    analytics.track(\"math_error\", {\n      error: error.message,\n      latexSnippet: this.props.latex?.slice(0, 100) || \"\",\n      isStreaming: false,\n    });\n\n    // Also capture as exception (for comprehensive error monitoring)\n    analytics.captureException(error, {\n      severity: \"warning\", // Math errors are usually recoverable\n      context: \"math_rendering\",\n      componentStack: errorInfo.componentStack ?? undefined,\n      latexSnippet: this.props.latex?.slice(0, 100) || \"\",\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Fallback: render as plain text with error message\n      return (\n        <div className=\"math-error-fallback rounded-lg border border-destructive/50 bg-destructive/10 p-4 my-2\">\n          <div className=\"flex items-center gap-2 mb-2\">\n            <span className=\"text-sm font-medium text-destructive\">\n              Math Rendering Error\n            </span>\n          </div>\n          {this.props.latex && (\n            <pre className=\"text-xs font-mono bg-background/50 p-2 rounded overflow-x-auto\">\n              {this.props.latex}\n            </pre>\n          )}\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n","import { forwardRef } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MathSkeletonProps {\n  /**\n   * Whether this is display math or inline math\n   * @default false (inline)\n   */\n  isDisplay?: boolean;\n  className?: string;\n}\n\n/**\n * Animated skeleton placeholder for lazy-rendered math equations\n * Shows while IntersectionObserver waits for equation to enter viewport\n *\n * Phase 4A: Mobile performance optimization\n */\nexport const MathSkeleton = forwardRef<HTMLDivElement, MathSkeletonProps>(\n  ({ isDisplay = false, className }, ref) => {\n    if (isDisplay) {\n      return (\n        <div\n          ref={ref}\n          className={cn(\n            \"animate-pulse rounded-lg bg-gradient-to-r from-muted/50 to-muted/30\",\n            \"h-20 w-full\", // Estimated display math height\n            className,\n          )}\n          role=\"status\"\n          aria-label=\"Loading mathematical equation\"\n        >\n          <span className=\"sr-only\">Loading equation...</span>\n        </div>\n      );\n    }\n\n    return (\n      <span\n        ref={ref}\n        className={cn(\n          \"inline-block animate-pulse rounded bg-gradient-to-r from-muted/50 to-muted/30\",\n          \"h-[1.5em] w-16\", // Estimated inline math dimensions\n          className,\n        )}\n        role=\"status\"\n        aria-label=\"Loading mathematical expression\"\n      >\n        <span className=\"sr-only\">Loading expression...</span>\n      </span>\n    );\n  },\n);\n\nMathSkeleton.displayName = \"MathSkeleton\";\n","\"use client\";\n\nimport { Copy, Download, Maximize2, Minimize2 } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface MermaidRendererProps {\n  code: string;\n  config?: {\n    theme?: \"base\" | \"default\" | \"dark\" | \"forest\" | \"neutral\";\n    themeVariables?: Record<string, string>;\n    flowchart?: Record<string, unknown>;\n    sequence?: Record<string, unknown>;\n    state?: Record<string, unknown>;\n  };\n}\n\n// Lazy-loaded mermaid instance\nlet mermaidModule: typeof import(\"mermaid\") | null = null;\nlet mermaidInitialized = false;\n\n/**\n * Load mermaid dynamically to reduce initial bundle size (~72MB -> 0 on initial load)\n */\nasync function getMermaid() {\n  if (!mermaidModule) {\n    mermaidModule = await import(\"mermaid\");\n  }\n  return mermaidModule.default;\n}\n\n/**\n * Manual Mermaid diagram renderer with custom controls\n * Provides fullscreen, download, and copy functionality matching Streamdown's design\n * Automatically adapts theme colors based on light/dark mode\n *\n * Performance: Mermaid is dynamically imported to avoid 400KB+ initial bundle cost\n */\nexport function MermaidRenderer({ code, config }: MermaidRendererProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [svg, setSvg] = useState<string>(\"\");\n  const [error, setError] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [copied, setCopied] = useState(false);\n  const { theme, resolvedTheme } = useTheme();\n\n  // Determine if we're in dark mode\n  const isDark =\n    resolvedTheme === \"dark\" ||\n    (theme === \"system\" && resolvedTheme === \"dark\");\n\n  useEffect(() => {\n    const initializeMermaid = async () => {\n      const mermaid = await getMermaid();\n      if (!mermaidInitialized) {\n        mermaid.initialize({\n          startOnLoad: false,\n          theme: config?.theme || \"base\",\n          themeVariables: config?.themeVariables || {},\n          flowchart: config?.flowchart || {\n            nodeSpacing: 50,\n            rankSpacing: 50,\n            curve: \"basis\",\n          },\n          sequence: config?.sequence || {\n            actorMargin: 50,\n            boxMargin: 10,\n            boxTextMargin: 5,\n            diagramMarginX: 50,\n            diagramMarginY: 10,\n            messageMargin: 35,\n          },\n          state: config?.state || { titleTopMargin: 25 },\n        });\n        mermaidInitialized = true;\n      }\n    };\n\n    initializeMermaid();\n  }, [config]);\n\n  useEffect(() => {\n    const renderDiagram = async () => {\n      try {\n        setError(null);\n        setIsLoading(true);\n\n        const mermaid = await getMermaid();\n\n        // Get theme-specific colors\n        const themeVars = isDark\n          ? {\n              // Dark mode colors\n              primaryColor: \"#d4a574\", // warm gold (same)\n              primaryTextColor: \"#e8dfd4\", // light beige text\n              primaryBorderColor: \"#e89f5f\", // bright orange border\n              lineColor: \"#b8b8b8\", // lighter gray lines\n              secondaryColor: \"#3d3d3d\", // dark gray\n              tertiaryColor: \"#e89f5f\", // deep orange\n              background: \"#1a1a1a\", // dark background\n              mainBkg: \"#2d2d2d\", // dark card bg\n              secondBkg: \"#3d3d3d\", // darker muted bg\n              textColor: \"#e8dfd4\", // light text\n              nodeBorder: \"#d4a574\", // gold borders\n              clusterBkg: \"#2d2d2d\", // dark cluster background\n              clusterBorder: \"#b88a5f\", // darker gold cluster border\n              edgeLabelBackground: \"#2d2d2d\", // dark edge label bg\n            }\n          : {\n              // Light mode colors\n              primaryColor: \"#d4a574\",\n              primaryTextColor: \"#2d2d2d\",\n              primaryBorderColor: \"#b88a5f\",\n              lineColor: \"#8b8b8b\",\n              secondaryColor: \"#e8dfd4\",\n              tertiaryColor: \"#e89f5f\",\n              background: \"#f0ebe5\",\n              mainBkg: \"#fdfcfb\",\n              secondBkg: \"#e8dfd4\",\n              textColor: \"#2d2d2d\",\n            };\n\n        // Re-initialize mermaid with theme-specific colors\n        mermaid.initialize({\n          startOnLoad: false,\n          theme: \"base\",\n          themeVariables: { ...themeVars, ...config?.themeVariables },\n          flowchart: config?.flowchart || {\n            nodeSpacing: 50,\n            rankSpacing: 50,\n            curve: \"basis\",\n          },\n          sequence: config?.sequence || {\n            actorMargin: 50,\n            boxMargin: 10,\n            boxTextMargin: 5,\n            diagramMarginX: 50,\n            diagramMarginY: 10,\n            messageMargin: 35,\n          },\n          state: config?.state || { titleTopMargin: 25 },\n        });\n\n        const id = `mermaid-${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\n        const { svg: renderedSvg } = await mermaid.render(id, code);\n        setSvg(renderedSvg);\n      } catch (err) {\n        console.error(\"[MermaidRenderer] Render error:\", err);\n        setError(\n          err instanceof Error ? err.message : \"Failed to render diagram\",\n        );\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    if (code) {\n      renderDiagram();\n    }\n  }, [code, isDark, config]);\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(code);\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n    } catch (err) {\n      console.error(\"[MermaidRenderer] Copy failed:\", err);\n    }\n  };\n\n  const handleDownload = () => {\n    if (!svg) return;\n\n    const blob = new Blob([svg], { type: \"image/svg+xml\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `diagram-${Date.now()}.svg`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  const toggleFullscreen = () => {\n    if (!isFullscreen) {\n      containerRef.current?.requestFullscreen?.();\n      setIsFullscreen(true);\n    } else {\n      document.exitFullscreen?.();\n      setIsFullscreen(false);\n    }\n  };\n\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n    return () =>\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n  }, []);\n\n  if (error) {\n    return (\n      <div className=\"my-4 rounded border border-destructive/50 bg-destructive/10 p-4\">\n        <div className=\"flex items-center gap-2 text-sm font-medium text-destructive mb-2\">\n          <span>Mermaid Diagram Error</span>\n        </div>\n        <pre className=\"text-xs text-muted-foreground overflow-x-auto\">\n          {error}\n        </pre>\n        <details className=\"mt-2\">\n          <summary className=\"text-xs text-muted-foreground cursor-pointer hover:text-foreground\">\n            Show diagram code\n          </summary>\n          <pre className=\"mt-2 text-xs text-muted-foreground overflow-x-auto bg-muted/50 p-2 rounded\">\n            {code}\n          </pre>\n        </details>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn(\n        \"relative group my-4 rounded border border-border bg-card\",\n        isFullscreen && \"bg-background p-8\",\n      )}\n    >\n      {/* Controls toolbar */}\n      <div\n        className={cn(\n          \"absolute top-2 right-2 z-10 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity\",\n          isFullscreen && \"opacity-100\",\n        )}\n      >\n        <button\n          type=\"button\"\n          onClick={handleCopy}\n          className=\"p-1.5 rounded bg-background/90 hover:bg-background border border-border text-muted-foreground hover:text-foreground transition-colors\"\n          title={copied ? \"Copied!\" : \"Copy code\"}\n        >\n          <Copy className=\"w-4 h-4\" />\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleDownload}\n          className=\"p-1.5 rounded bg-background/90 hover:bg-background border border-border text-muted-foreground hover:text-foreground transition-colors\"\n          title=\"Download as SVG\"\n        >\n          <Download className=\"w-4 h-4\" />\n        </button>\n        <button\n          type=\"button\"\n          onClick={toggleFullscreen}\n          className=\"p-1.5 rounded bg-background/90 hover:bg-background border border-border text-muted-foreground hover:text-foreground transition-colors\"\n          title={isFullscreen ? \"Exit fullscreen\" : \"Fullscreen\"}\n        >\n          {isFullscreen ? (\n            <Minimize2 className=\"w-4 h-4\" />\n          ) : (\n            <Maximize2 className=\"w-4 h-4\" />\n          )}\n        </button>\n      </div>\n\n      {/* Diagram container */}\n      <div\n        className={cn(\n          \"flex items-center justify-center p-6 overflow-auto min-h-[100px]\",\n          isFullscreen && \"h-full\",\n        )}\n      >\n        {isLoading ? (\n          <div className=\"flex items-center gap-2 text-muted-foreground text-sm\">\n            <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\n            Loading diagram...\n          </div>\n        ) : (\n          <div dangerouslySetInnerHTML={{ __html: svg }} />\n        )}\n      </div>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm14 10 7-7', key: 'oa77jy' }],\n  ['path', { d: 'M20 10h-6V4', key: 'mjg0md' }],\n  ['path', { d: 'm3 21 7-7', key: 'tjx5ai' }],\n  ['path', { d: 'M4 14h6v6', key: 'rmj7iw' }],\n];\n\n/**\n * @component @name Minimize2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTQgMTAgNy03IiAvPgogIDxwYXRoIGQ9Ik0yMCAxMGgtNlY0IiAvPgogIDxwYXRoIGQ9Im0zIDIxIDctNyIgLz4KICA8cGF0aCBkPSJNNCAxNGg2djYiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/minimize-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minimize2 = createLucideIcon('minimize-2', __iconNode);\n\nexport default Minimize2;\n","\"use client\";\n\nimport { useLazyMathRenderer } from \"@/hooks/useLazyMathRenderer\";\nimport { useMathAccessibility } from \"@/hooks/useMathAccessibility\";\nimport { useMathCopyButtons } from \"@/hooks/useMathCopyButtons\";\nimport { useStreamBuffer } from \"@/hooks/useStreamBuffer\";\nimport { cn } from \"@/lib/utils\";\nimport \"katex/dist/contrib/mhchem.mjs\"; // Chemistry notation support\nimport { Component, memo, type ReactNode, useRef } from \"react\";\nimport { Streamdown } from \"streamdown\";\nimport { CodeBlock } from \"./CodeBlock\";\nimport { MathErrorBoundary } from \"./MathErrorBoundary\";\nimport { MathSkeleton } from \"./MathSkeleton\";\nimport { MermaidRenderer } from \"./MermaidRenderer\";\n\ninterface CodeBlockErrorBoundaryProps {\n  children: ReactNode;\n  code: string;\n  language?: string;\n}\n\ninterface CodeBlockErrorBoundaryState {\n  hasError: boolean;\n}\n\n/**\n * Specialized error boundary for code blocks\n * Shows a plain text fallback if syntax highlighting completely fails\n */\nclass CodeBlockErrorBoundary extends Component<\n  CodeBlockErrorBoundaryProps,\n  CodeBlockErrorBoundaryState\n> {\n  constructor(props: CodeBlockErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(): CodeBlockErrorBoundaryState {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.warn(\n      \"[CodeBlock] Render error caught by boundary:\",\n      error,\n      errorInfo,\n    );\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // Fallback: render as plain preformatted text\n      return (\n        <div className=\"relative group my-4\">\n          <div className=\"flex items-center justify-between bg-muted/50 px-4 py-2 rounded-t border-b border-border\">\n            <span className=\"text-xs text-muted-foreground font-mono\">\n              {this.props.language || \"code\"}\n            </span>\n          </div>\n          <pre className=\"rounded-b overflow-x-auto max-h-[600px] overflow-y-auto w-full p-4 bg-[#24292e] text-[#e1e4e8]\">\n            <code>{this.props.code}</code>\n          </pre>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\ninterface MarkdownContentProps {\n  content: string;\n  isStreaming?: boolean;\n}\n\n/**\n * KaTeX configuration for rehype-katex plugin\n * Note: displayMode and throwOnError are omitted (handled by rehype-katex)\n * Chemistry notation (\\ce, \\pu) enabled via mhchem import above\n */\nconst _katexOptions = {\n  errorColor: \"hsl(var(--destructive))\",\n  output: \"htmlAndMathml\" as const, // Both visual HTML + accessible MathML\n  strict: \"ignore\" as const, // Continue rendering on unsupported commands (resilient for streaming)\n  // Common math shortcuts\n  macros: {\n    \"\\\\RR\": \"\\\\mathbb{R}\",\n    \"\\\\NN\": \"\\\\mathbb{N}\",\n    \"\\\\ZZ\": \"\\\\mathbb{Z}\",\n    \"\\\\QQ\": \"\\\\mathbb{Q}\",\n    \"\\\\CC\": \"\\\\mathbb{C}\",\n    \"\\\\abs\": \"\\\\left|#1\\\\right|\",\n    \"\\\\norm\": \"\\\\left\\\\|#1\\\\right\\\\|\",\n  },\n};\n\n/**\n * Standard components for Streamdown\n *\n * Math support via Streamdown's built-in remark-math + rehype-katex:\n * - Inline: $$x = 5$$ (keep $$ on same line as text)\n * - Block/Display: $$ on separate lines\n * - Chemistry: $$\\ce{H2O}$$ (mhchem extension loaded above)\n * NOTE: Single $ delimiters are NOT supported (to avoid currency conflicts)\n *\n * Code handling:\n * - Mermaid diagrams: Use custom MermaidRenderer with fullscreen/download/copy controls (theme-aware)\n * - All other code: Use custom CodeBlock with copy/wrap buttons and syntax highlighting\n *\n * Note: This is now created inside MarkdownContent component to access theme\n */\nconst createMarkdownComponents = () => ({\n  // Custom code component - routes mermaid to MermaidRenderer, everything else to CodeBlock\n  code: ({ className, children, ...props }: any) => {\n    const match = /language-(\\w+)/.exec(className || \"\");\n    const language = match?.[1];\n    const code = String(children).replace(/\\n$/, \"\");\n\n    // Route mermaid diagrams to MermaidRenderer\n    // Theme colors are now handled inside MermaidRenderer via useTheme\n    if (language === \"mermaid\") {\n      return (\n        <MermaidRenderer\n          code={code}\n          config={{\n            flowchart: { nodeSpacing: 50, rankSpacing: 50, curve: \"basis\" },\n            sequence: {\n              actorMargin: 50,\n              boxMargin: 10,\n              boxTextMargin: 5,\n              diagramMarginX: 50,\n              diagramMarginY: 10,\n              messageMargin: 35,\n            },\n            state: { titleTopMargin: 25 },\n          }}\n        />\n      );\n    }\n    const inline = !match && !className;\n    if (inline) {\n      return <CodeBlock code={code} inline />;\n    }\n\n    // All other code blocks use CodeBlock component\n    return (\n      <CodeBlockErrorBoundary code={code} language={language}>\n        <CodeBlock code={code} language={language} />\n      </CodeBlockErrorBoundary>\n    );\n  },\n  // Custom image component for proper sizing and error handling\n  img: ({ src, alt, ...props }: any) => {\n    return (\n      // eslint-disable-next-line @next/next/no-img-element\n      <img\n        src={src}\n        alt={alt || \"Image\"}\n        className=\"rounded-lg max-w-full h-auto my-4 block\"\n        style={{ maxHeight: \"600px\", backgroundColor: \"#fff\" }}\n        loading=\"lazy\"\n        onError={(e) => {\n          console.error(\"[Markdown] Image failed to load:\", src);\n          // Replace with error placeholder\n          (e.target as HTMLImageElement).src =\n            \"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='100'%3E%3Crect fill='%23f0f0f0' width='200' height='100'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23666'%3EImage failed to load%3C/text%3E%3C/svg%3E\";\n        }}\n        {...props}\n      />\n    );\n  },\n  a: ({ href, children, ...props }: any) => {\n    // Handle citation links [1] -> #source-1\n    if (href?.startsWith(\"#source-\")) {\n      return (\n        <a\n          href={href}\n          className=\"citation-link\"\n          onClick={(e) => {\n            e.preventDefault();\n            const element = document.querySelector(href);\n            if (element) {\n              element.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n            }\n          }}\n          {...props}\n        >\n          {children}\n        </a>\n      );\n    }\n\n    // Default external link\n    return (\n      <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...props}>\n        {children}\n      </a>\n    );\n  },\n});\n\n/**\n * Markdown content renderer with smooth character-by-character streaming\n *\n * Uses useStreamBuffer to decouple network timing from visual timing:\n * - Server sends chunky updates (200ms intervals)\n * - Buffer smoothly reveals characters at 200 chars/sec via RAF\n * - Prevents layout shifts and jarring appearance during streaming\n */\n\n/**\n * Normalize LaTeX delimiters to Streamdown's expected format.\n * AI models often use \\(...\\) for inline and \\[...\\] for block math,\n * but Streamdown expects $$...$$ for both (inline on same line, block on separate lines).\n * Skips code blocks to avoid breaking LaTeX source display.\n */\nfunction normalizeLatexDelimiters(text: string): string {\n  // Fast path: skip if no LaTeX-style delimiters present\n  if (!text.includes(\"\\\\(\") && !text.includes(\"\\\\[\")) return text;\n\n  // Split by code blocks (fenced and inline) to avoid processing code\n  const parts = text.split(/(`{3}[\\s\\S]*?`{3}|`[^`\\n]+`)/);\n\n  return parts\n    .map((part) => {\n      // If it starts with ` it's code, return unchanged\n      if (part.startsWith(\"`\")) return part;\n\n      // Convert \\(...\\) to inline $$...$$\n      let result = part.replace(/\\\\\\(([^)]*?)\\\\\\)/g, \"$$$$$1$$$$\");\n\n      // Convert \\[...\\] to block $$...$$ (with newlines for display mode)\n      result = result.replace(/\\\\\\[([^\\]]*?)\\\\\\]/g, \"\\n$$$$$1$$\\n\");\n\n      return result;\n    })\n    .join(\"\");\n}\n\n/**\n * Process text to linkify citations [n] -> [[n]](#source-n)\n * Skips code blocks to avoid breaking code.\n */\nfunction processCitations(text: string): string {\n  // fast path\n  if (!text.includes(\"[\")) return text;\n\n  // Split by code blocks\n  const parts = text.split(/(`{3}[\\s\\S]*?`{3}|`[^`\\n]+`)/);\n\n  return parts\n    .map((part) => {\n      // If it starts with ` it's code, return distinct\n      if (part.startsWith(\"`\")) return part;\n\n      // Replace [1], [2] etc with link\n      return part.replace(/\\[(\\d+)\\]/g, \"[$1](#source-$1)\");\n    })\n    .join(\"\");\n}\n\nexport function MarkdownContent({\n  content,\n  isStreaming = false,\n}: MarkdownContentProps) {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Create markdown components (including theme-aware Mermaid)\n  const markdownComponents = createMarkdownComponents();\n\n  // Normalize LaTeX delimiters before other processing\n  // AI models often output \\(...\\) but Streamdown expects $$...$$\n  const normalizedContent = normalizeLatexDelimiters(content);\n\n  // Process citations before buffering\n  // This ensures the buffer sees the \"final\" linkified version\n  // If a [1] appears, the processed content will change non-monotonically\n  // prompting useStreamBuffer to reset buffer and show the new content immediately\n  const processedContent = processCitations(normalizedContent);\n\n  // Buffer hook smoothly reveals characters from server chunks\n  const { displayContent, hasBufferedContent } = useStreamBuffer(\n    processedContent,\n    isStreaming,\n    {\n      charsPerSecond: 200,\n      minTokenSize: 3,\n      adaptiveThreshold: 5000,\n    },\n  );\n\n  // Phase 4A: Lazy rendering for mobile performance\n  const { observeRef, isRendered, isMobile } = useLazyMathRenderer({\n    threshold: 0.01,\n    rootMargin: \"50px 0px\",\n    mobileOnly: true,\n  });\n\n  // Enhance math blocks with copy buttons (Phase 4D)\n  useMathCopyButtons(containerRef);\n\n  // Add ARIA accessibility to math elements (Phase 4C - enhanced)\n  useMathAccessibility(containerRef, isStreaming);\n\n  // Show cursor while streaming OR buffer is draining\n  const showCursor = isStreaming || hasBufferedContent;\n\n  // Detect if content has math (simple heuristic)\n  const hasMath =\n    displayContent.includes(\"$$\") || displayContent.includes(\"\\\\(\");\n\n  // Show skeleton on mobile while waiting for intersection\n  if (isMobile && hasMath && !isRendered) {\n    return (\n      <div ref={observeRef} className=\"markdown-content prose\">\n        <MathSkeleton isDisplay />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      ref={containerRef}\n      className={cn(\"markdown-content prose\", showCursor && \"streaming\")}\n    >\n      <MathErrorBoundary>\n        <Streamdown\n          components={markdownComponents}\n          parseIncompleteMarkdown={isStreaming}\n          controls={{\n            code: false, // We handle code controls via custom CodeBlock component\n            mermaid: false, // We handle mermaid controls via custom MermaidRenderer\n          }}\n        >\n          {displayContent}\n        </Streamdown>\n      </MathErrorBoundary>\n      {showCursor && <span className=\"streaming-cursor\" aria-hidden=\"true\" />}\n    </div>\n  );\n}\n\n/**\n * Memoized version of MarkdownContent to prevent unnecessary re-renders\n * Only re-renders when content or streaming state changes\n */\nexport const MarkdownContentMemo = memo(\n  MarkdownContent,\n  (prev, next) =>\n    prev.content === next.content && prev.isStreaming === next.isStreaming,\n);\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc, Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation } from \"convex/react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Eye, Lightbulb, X } from \"lucide-react\";\nimport { useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { MODEL_CONFIG } from \"@/lib/ai/models\";\nimport { analytics } from \"@/lib/analytics\";\n\ninterface Props {\n  recommendation: NonNullable<Doc<\"conversations\">[\"modelRecommendation\"]>;\n  conversationId: Id<\"conversations\">;\n  onSwitch: (modelId: string) => void;\n  onPreview: (modelId: string) => void;\n}\n\nexport function ModelRecommendationBanner({\n  recommendation,\n  conversationId,\n  onSwitch,\n  onPreview,\n}: Props) {\n  const dismiss = useMutation(api.conversations.dismissModelRecommendation);\n  const updatePreferences = useMutation(api.users.updatePreferences);\n\n  // Track when banner shows\n  useEffect(() => {\n    analytics.track(\"recommendation_shown\", {\n      conversationId,\n      currentModel: recommendation.currentModelId,\n      suggestedModel: recommendation.suggestedModelId,\n      percentSaved: recommendation.estimatedSavings.percentSaved,\n      timestamp: Date.now(),\n    });\n  }, [conversationId, recommendation]);\n\n  if (recommendation.dismissed) return null;\n\n  const suggestedModel = MODEL_CONFIG[recommendation.suggestedModelId];\n  if (!suggestedModel) return null;\n\n  const handleDismiss = () => {\n    analytics.track(\"recommendation_dismissed\", {\n      conversationId,\n      currentModel: recommendation.currentModelId,\n      suggestedModel: recommendation.suggestedModelId,\n      secondsVisible: (Date.now() - recommendation.createdAt) / 1000,\n      timestamp: Date.now(),\n    });\n    dismiss({ conversationId });\n  };\n\n  const handleSwitch = async () => {\n    analytics.track(\"recommendation_accepted\", {\n      conversationId,\n      from: recommendation.currentModelId,\n      to: recommendation.suggestedModelId,\n      savings: recommendation.estimatedSavings.percentSaved,\n      viaPreview: false,\n      timestamp: Date.now(),\n    });\n\n    // 1. Switch the local conversation model\n    onSwitch(recommendation.suggestedModelId);\n\n    // 2. Dismiss the banner\n    dismiss({ conversationId });\n\n    // 3. Update global settings (same as modal)\n    try {\n      await updatePreferences({\n        preferences: {\n          newChatModelSelection: \"fixed\",\n          defaultModel: recommendation.suggestedModelId,\n        },\n      });\n    } catch (err) {\n      console.error(\n        \"[ModelRecommendationBanner] Failed to update global preference:\",\n        err,\n      );\n    }\n\n    // 4. Refocus input for seamless continuation\n    window.dispatchEvent(new CustomEvent(\"focus-chat-input\"));\n  };\n\n  const handlePreview = () => {\n    analytics.track(\"recommendation_preview_clicked\", {\n      conversationId,\n      currentModel: recommendation.currentModelId,\n      suggestedModel: recommendation.suggestedModelId,\n      timestamp: Date.now(),\n    });\n    onPreview(recommendation.suggestedModelId);\n  };\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        initial={{ opacity: 0, y: -10, scale: 0.95 }}\n        animate={{ opacity: 1, y: 0, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.95 }}\n        transition={{ duration: 0.3, ease: \"easeOut\" }}\n        className=\"mx-auto mb-4 max-w-3xl rounded-xl border border-border bg-card p-6 shadow-sm\"\n      >\n        <div className=\"space-y-4\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"rounded-full bg-blue-500/10 p-2\">\n                <Lightbulb className=\"h-5 w-5 text-blue-500\" />\n              </div>\n              <h3 className=\"font-semibold\">Model Recommendation</h3>\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={handleDismiss}\n              className=\"h-8 w-8\"\n            >\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n\n          {/* Content */}\n          <div className=\"space-y-2\">\n            <p className=\"text-base leading-relaxed\">\n              {recommendation.reasoning}\n            </p>\n            <div className=\"flex items-center gap-2\">\n              <p className=\"text-sm text-muted-foreground\">\n                {recommendation.estimatedSavings.costReduction}\n              </p>\n              <span className=\"text-xs font-semibold text-green-500\">\n                {recommendation.estimatedSavings.percentSaved}% less\n              </span>\n            </div>\n          </div>\n\n          {/* Actions */}\n          <div className=\"flex flex-col sm:flex-row gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={handlePreview}\n              className=\"flex-1 justify-center border-border/60 hover:border-border\"\n            >\n              <Eye className=\"h-4 w-4 mr-2\" />\n              Preview Comparison\n            </Button>\n            <Button\n              onClick={handleSwitch}\n              className=\"flex-1 justify-center bg-primary/90 hover:bg-primary text-primary-foreground\"\n            >\n              Switch to {suggestedModel.name}\n            </Button>\n          </div>\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n}\n","\"use client\";\n\nimport {\n  createContext,\n  type ReactNode,\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n} from \"react\";\nimport { toast } from \"sonner\";\nimport { useTTSAudioPlayer } from \"@/hooks/useTTSAudioPlayer\";\nimport { analytics } from \"@/lib/analytics\";\nimport { markdownToSpeechText } from \"@/lib/utils/markdownToSpeech\";\nimport { chunkText, clamp, getTTSUrl } from \"@/lib/utils/ttsUtils\";\n\ninterface TTSState {\n  isVisible: boolean;\n  isLoading: boolean;\n  isPlaying: boolean;\n  duration: number;\n  currentTime: number;\n  speed: number;\n  sourceMessageId?: string;\n  previewText?: string;\n  totalChunks: number;\n  currentChunk: number;\n  isStreaming: boolean;\n}\n\ninterface TTSContextValue {\n  state: TTSState;\n  playFromText: (options: {\n    text: string;\n    messageId?: string;\n  }) => Promise<void>;\n  pause: () => void;\n  resume: () => Promise<void>;\n  stop: () => void;\n  seekBy: (seconds: number) => void;\n  seekTo: (time: number) => void;\n  setSpeed: (speed: number) => void;\n  close: () => void;\n}\n\nconst TTSContext = createContext<TTSContextValue | null>(null);\n\nexport function TTSProvider({\n  children,\n  defaultSpeed = 1,\n}: {\n  children: ReactNode;\n  defaultSpeed?: number;\n}) {\n  const [state, setState] = useState<TTSState>({\n    isVisible: false,\n    isLoading: false,\n    isPlaying: false,\n    duration: 0,\n    currentTime: 0,\n    speed: clamp(defaultSpeed ?? 1, 0.5, 2),\n    sourceMessageId: undefined,\n    previewText: \"\",\n    totalChunks: 0,\n    currentChunk: 0,\n    isStreaming: false,\n  });\n\n  const audioPlayer = useTTSAudioPlayer({\n    defaultSpeed,\n    onTimeUpdate: (currentTime, duration) => {\n      setState((prev) => ({ ...prev, currentTime, duration }));\n    },\n    onEnded: () => {\n      setState((prev) => ({ ...prev, isPlaying: false, isStreaming: false }));\n      analytics.track(\"tts_playback_completed\", {\n        playbackDurationMs: state.duration * 1000,\n      });\n    },\n    onError: (e) => {\n      console.error(\"Audio error\", e);\n    },\n  });\n\n  useEffect(() => {\n    const clamped = clamp(defaultSpeed ?? 1, 0.5, 2);\n    audioPlayer.setSpeed(clamped);\n    setState((prev) => ({ ...prev, speed: clamped }));\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [defaultSpeed, audioPlayer.setSpeed]);\n\n  // Cleanup on unmount\n  useEffect(() => {\n    return () => {\n      audioPlayer.cleanupAudio();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [audioPlayer.cleanupAudio]);\n\n  const close = useCallback(() => {\n    audioPlayer.cleanupAudio();\n    setState((prev) => ({\n      ...prev,\n      isVisible: false,\n      isPlaying: false,\n      isLoading: false,\n      currentTime: 0,\n      duration: 0,\n      sourceMessageId: undefined,\n      previewText: \"\",\n      totalChunks: 0,\n      currentChunk: 0,\n      isStreaming: false,\n    }));\n  }, [audioPlayer]);\n\n  const playFromText = useCallback(\n    async ({ text, messageId }: { text: string; messageId?: string }) => {\n      const speechText = markdownToSpeechText(text);\n      if (!speechText) {\n        toast.error(\"This message is empty after removing formatting.\");\n        return;\n      }\n\n      const chunks = chunkText(speechText);\n      const totalChunks = chunks.length;\n\n      setState((prev) => ({\n        ...prev,\n        isVisible: true,\n        isLoading: true,\n        isPlaying: false,\n        sourceMessageId: messageId,\n        previewText: speechText.slice(0, 220),\n        currentTime: 0,\n        duration: 0,\n        totalChunks,\n        currentChunk: 0,\n        isStreaming: totalChunks > 1,\n      }));\n\n      const audio = await audioPlayer.initializeAudio();\n      if (!audio) {\n        toast.error(\"Browser does not support streaming audio playback.\");\n        return;\n      }\n\n      try {\n        await audioPlayer.play();\n        setState((prev) => ({ ...prev, isPlaying: true }));\n\n        analytics.track(\"tts_initiated\", {\n          messageLength: speechText.length,\n          voiceUsed: \"default\",\n        });\n\n        // Fetch and append chunks\n        for (let i = 0; i < chunks.length; i++) {\n          if (audioPlayer.isAborted()) break;\n\n          setState((prev) => ({ ...prev, currentChunk: i + 1 }));\n\n          const chunk = chunks[i];\n          const ttsUrl = getTTSUrl(\n            chunk,\n            undefined,\n            audioPlayer.speedRef.current,\n          );\n\n          const response = await fetch(ttsUrl, {\n            signal: audioPlayer.getAbortSignal(),\n          });\n\n          if (!response.ok) {\n            console.error(\n              \"TTS Fetch failed\",\n              response.status,\n              response.statusText,\n            );\n            continue;\n          }\n\n          const arrayBuffer = await response.arrayBuffer();\n          if (audioPlayer.isAborted()) break;\n\n          audioPlayer.appendBuffer(arrayBuffer);\n\n          if (i === 0) {\n            setState((prev) => ({ ...prev, isLoading: false }));\n          }\n        }\n\n        audioPlayer.endStream();\n        setState((prev) => ({ ...prev, isLoading: false }));\n      } catch (error) {\n        if (audioPlayer.isAborted()) return;\n        console.error(\"TTS error:\", error);\n        toast.error(\"Failed to stream audio\");\n        audioPlayer.cleanupAudio();\n      }\n    },\n    [audioPlayer],\n  );\n\n  const pause = useCallback(() => {\n    audioPlayer.pause();\n    setState((prev) => ({ ...prev, isPlaying: false }));\n  }, [audioPlayer]);\n\n  const resume = useCallback(async () => {\n    await audioPlayer.resume();\n    setState((prev) => ({ ...prev, isPlaying: true }));\n  }, [audioPlayer]);\n\n  const stop = useCallback(() => {\n    audioPlayer.stop();\n    setState((prev) => ({\n      ...prev,\n      isPlaying: false,\n      currentTime: 0,\n      currentChunk: 0,\n      isStreaming: false,\n    }));\n  }, [audioPlayer]);\n\n  const seekBy = useCallback(\n    (seconds: number) => {\n      audioPlayer.seekBy(seconds);\n    },\n    [audioPlayer],\n  );\n\n  const seekTo = useCallback(\n    (time: number) => {\n      audioPlayer.seekTo(time);\n    },\n    [audioPlayer],\n  );\n\n  const setSpeed = useCallback(\n    (speed: number) => {\n      const clamped = audioPlayer.setSpeed(speed);\n      setState((prev) => ({ ...prev, speed: clamped }));\n    },\n    [audioPlayer],\n  );\n\n  return (\n    <TTSContext.Provider\n      value={{\n        state,\n        playFromText,\n        pause,\n        resume,\n        stop,\n        seekBy,\n        seekTo,\n        setSpeed,\n        close,\n      }}\n    >\n      {children}\n    </TTSContext.Provider>\n  );\n}\n\nexport function useTTSPlayer() {\n  const context = useContext(TTSContext);\n  if (!context) {\n    throw new Error(\"useTTSPlayer must be used within TTSProvider\");\n  }\n  return context;\n}\n","/**\n * TTS utility functions for text processing and URL construction.\n */\n\n/**\n * Clamp a number between min and max values.\n */\nexport function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\n// Low latency: chunk at individual sentences (~150-200 chars)\nconst CHUNK_LIMIT = 200;\n\n/**\n * Chunk text into smaller pieces for TTS processing.\n * Splits at sentence boundaries when possible.\n */\nexport function chunkText(\n  text: string,\n  maxChars: number = CHUNK_LIMIT,\n): string[] {\n  if (text.length <= maxChars) return [text];\n\n  const chunks: string[] = [];\n  let remaining = text;\n\n  while (remaining.length > 0) {\n    if (remaining.length <= maxChars) {\n      chunks.push(remaining);\n      break;\n    }\n\n    let splitIndex = maxChars;\n    const searchArea = remaining.slice(0, maxChars);\n\n    // Look for sentence endings\n    const lastPeriod = Math.max(\n      searchArea.lastIndexOf(\". \"),\n      searchArea.lastIndexOf(\"! \"),\n      searchArea.lastIndexOf(\"? \"),\n      searchArea.lastIndexOf(\".\\n\"),\n      searchArea.lastIndexOf(\"!\\n\"),\n      searchArea.lastIndexOf(\"?\\n\"),\n    );\n\n    if (lastPeriod > maxChars * 0.3) {\n      // Found a reasonable sentence boundary\n      splitIndex = lastPeriod + 1;\n    } else {\n      // Fall back to comma or space\n      const lastComma = searchArea.lastIndexOf(\", \");\n      if (lastComma > maxChars * 0.3) {\n        splitIndex = lastComma + 1;\n      } else {\n        const lastSpace = searchArea.lastIndexOf(\" \");\n        if (lastSpace > maxChars * 0.3) {\n          splitIndex = lastSpace;\n        }\n      }\n    }\n\n    chunks.push(remaining.slice(0, splitIndex).trim());\n    remaining = remaining.slice(splitIndex).trim();\n  }\n\n  return chunks.filter((c) => c.length > 0);\n}\n\n/**\n * Construct TTS API URL with parameters.\n */\nexport function getTTSUrl(\n  text: string,\n  voice?: string,\n  speed?: number,\n): string {\n  const convexUrl = process.env.NEXT_PUBLIC_CONVEX_URL || \"\";\n  let baseUrl = \"\";\n\n  if (convexUrl) {\n    if (convexUrl.includes(\".convex.cloud\")) {\n      baseUrl = convexUrl.replace(\".convex.cloud\", \".convex.site\");\n    } else {\n      baseUrl = convexUrl;\n    }\n  }\n\n  const finalUrl = baseUrl ? `${baseUrl}/tts` : \"/tts\";\n\n  // URL constructor requires base if path is relative\n  const base =\n    typeof window !== \"undefined\" ? window.location.origin : \"http://localhost\";\n  const url = new URL(finalUrl, base);\n\n  url.searchParams.set(\"text\", text);\n  if (voice) url.searchParams.set(\"voice\", voice);\n  if (speed) url.searchParams.set(\"speed\", speed.toString());\n\n  return url.toString();\n}\n\nexport { CHUNK_LIMIT };\n","\"use client\";\n\nimport { useCallback, useRef } from \"react\";\nimport { clamp } from \"@/lib/utils/ttsUtils\";\n\nexport interface TTSAudioState {\n  currentTime: number;\n  duration: number;\n  isPlaying: boolean;\n}\n\ninterface UseTTSAudioPlayerOptions {\n  defaultSpeed?: number;\n  onTimeUpdate?: (currentTime: number, duration: number) => void;\n  onEnded?: () => void;\n  onError?: (error: Event) => void;\n}\n\n/**\n * Hook for managing MSE (Media Source Extensions) audio playback.\n * Handles audio element, MediaSource, SourceBuffer, and buffer queue.\n */\nexport function useTTSAudioPlayer(options: UseTTSAudioPlayerOptions = {}) {\n  const { defaultSpeed = 1, onTimeUpdate, onEnded, onError } = options;\n\n  // MSE Refs\n  const currentAudioRef = useRef<HTMLAudioElement | null>(null);\n  const mediaSourceRef = useRef<MediaSource | null>(null);\n  const sourceBufferRef = useRef<SourceBuffer | null>(null);\n  const bufferQueueRef = useRef<ArrayBuffer[]>([]);\n  const isAppendingRef = useRef(false);\n  const objectUrlRef = useRef<string | null>(null);\n  const speedRef = useRef(clamp(defaultSpeed, 0.5, 2));\n  const abortControllerRef = useRef<AbortController | null>(null);\n\n  /**\n   * Process the buffer queue safely - appends next buffer when ready.\n   */\n  const processBufferQueue = useCallback(() => {\n    if (\n      !sourceBufferRef.current ||\n      sourceBufferRef.current.updating ||\n      bufferQueueRef.current.length === 0\n    ) {\n      return;\n    }\n\n    const buffer = bufferQueueRef.current.shift();\n    if (buffer) {\n      try {\n        sourceBufferRef.current.appendBuffer(buffer);\n      } catch (e) {\n        console.error(\"MSE appendBuffer failed\", e);\n      }\n    }\n  }, []);\n\n  /**\n   * Cleanup all audio resources.\n   */\n  const cleanupAudio = useCallback(() => {\n    if (currentAudioRef.current) {\n      currentAudioRef.current.pause();\n      currentAudioRef.current.removeAttribute(\"src\");\n      currentAudioRef.current.load();\n    }\n\n    // Revoke Object URL\n    if (objectUrlRef.current) {\n      URL.revokeObjectURL(objectUrlRef.current);\n      objectUrlRef.current = null;\n    }\n\n    // MSE Cleanup\n    if (mediaSourceRef.current) {\n      try {\n        if (mediaSourceRef.current.readyState === \"open\") {\n          mediaSourceRef.current.endOfStream();\n        }\n      } catch (_e) {\n        // ignore\n      }\n      mediaSourceRef.current = null;\n    }\n    sourceBufferRef.current = null;\n    bufferQueueRef.current = [];\n    isAppendingRef.current = false;\n\n    if (abortControllerRef.current) {\n      abortControllerRef.current.abort();\n      abortControllerRef.current = null;\n    }\n  }, []);\n\n  /**\n   * Initialize MSE audio playback with a new MediaSource.\n   */\n  const initializeAudio =\n    useCallback(async (): Promise<HTMLAudioElement | null> => {\n      cleanupAudio();\n      abortControllerRef.current = new AbortController();\n\n      // Setup MSE\n      const mediaSource = new MediaSource();\n      mediaSourceRef.current = mediaSource;\n      const objectUrl = URL.createObjectURL(mediaSource);\n      objectUrlRef.current = objectUrl;\n\n      // Create Audio Element\n      const audio = new Audio();\n      audio.src = objectUrl;\n      currentAudioRef.current = audio;\n      audio.playbackRate = speedRef.current;\n      if (\"preservesPitch\" in audio) {\n        audio.preservesPitch = true;\n      }\n\n      // Event Listeners\n      audio.ontimeupdate = () => {\n        onTimeUpdate?.(audio.currentTime, audio.duration);\n      };\n\n      audio.onended = () => {\n        onEnded?.();\n      };\n\n      audio.onerror = (e: Event | string) => {\n        console.error(\"Audio error\", e);\n        if (typeof e !== \"string\" && e instanceof Event) {\n          onError?.(e);\n        }\n      };\n\n      // Wait for sourceopen\n      await new Promise<void>((resolve) => {\n        mediaSource.addEventListener(\n          \"sourceopen\",\n          () => {\n            try {\n              const sourceBuffer = mediaSource.addSourceBuffer(\"audio/mpeg\");\n              sourceBufferRef.current = sourceBuffer;\n\n              sourceBuffer.addEventListener(\"updateend\", () => {\n                processBufferQueue();\n              });\n              resolve();\n            } catch (e) {\n              console.error(\"MSE addSourceBuffer failed\", e);\n              resolve();\n            }\n          },\n          { once: true },\n        );\n      });\n\n      return sourceBufferRef.current ? audio : null;\n    }, [cleanupAudio, processBufferQueue, onTimeUpdate, onEnded, onError]);\n\n  /**\n   * Append audio buffer to the queue.\n   */\n  const appendBuffer = useCallback(\n    (buffer: ArrayBuffer) => {\n      bufferQueueRef.current.push(buffer);\n      processBufferQueue();\n    },\n    [processBufferQueue],\n  );\n\n  /**\n   * Signal end of stream when all buffers are processed.\n   */\n  const endStream = useCallback(() => {\n    const checkQueue = setInterval(() => {\n      if (abortControllerRef.current?.signal.aborted) {\n        clearInterval(checkQueue);\n        return;\n      }\n      if (\n        bufferQueueRef.current.length === 0 &&\n        sourceBufferRef.current &&\n        !sourceBufferRef.current.updating\n      ) {\n        if (\n          mediaSourceRef.current &&\n          mediaSourceRef.current.readyState === \"open\"\n        ) {\n          try {\n            mediaSourceRef.current.endOfStream();\n          } catch (_e) {\n            /* ignore */\n          }\n        }\n        clearInterval(checkQueue);\n      }\n    }, 500);\n  }, []);\n\n  /**\n   * Play the audio element.\n   */\n  const play = useCallback(async () => {\n    if (currentAudioRef.current) {\n      await currentAudioRef.current.play();\n    }\n  }, []);\n\n  /**\n   * Pause playback.\n   */\n  const pause = useCallback(() => {\n    if (currentAudioRef.current) {\n      currentAudioRef.current.pause();\n    }\n  }, []);\n\n  /**\n   * Resume playback.\n   */\n  const resume = useCallback(async () => {\n    if (currentAudioRef.current) {\n      await currentAudioRef.current.play();\n    }\n  }, []);\n\n  /**\n   * Stop and reset playback.\n   */\n  const stop = useCallback(() => {\n    cleanupAudio();\n  }, [cleanupAudio]);\n\n  /**\n   * Seek by a relative amount of seconds.\n   */\n  const seekBy = useCallback((seconds: number) => {\n    if (!currentAudioRef.current) return;\n    const target = clamp(\n      (currentAudioRef.current.currentTime || 0) + seconds,\n      0,\n      currentAudioRef.current.duration || Number.POSITIVE_INFINITY,\n    );\n    if (Number.isFinite(target)) {\n      currentAudioRef.current.currentTime = target;\n    }\n  }, []);\n\n  /**\n   * Seek to an absolute time.\n   */\n  const seekTo = useCallback((time: number) => {\n    if (!currentAudioRef.current) return;\n    const target = clamp(\n      time,\n      0,\n      currentAudioRef.current.duration || Number.POSITIVE_INFINITY,\n    );\n    if (Number.isFinite(target)) {\n      currentAudioRef.current.currentTime = target;\n    }\n  }, []);\n\n  /**\n   * Set playback speed.\n   */\n  const setSpeed = useCallback((speed: number) => {\n    const clamped = clamp(speed, 0.5, 2);\n    speedRef.current = clamped;\n    if (currentAudioRef.current) {\n      currentAudioRef.current.playbackRate = clamped;\n      if (\"preservesPitch\" in currentAudioRef.current) {\n        currentAudioRef.current.preservesPitch = true;\n      }\n    }\n    return clamped;\n  }, []);\n\n  /**\n   * Get the abort signal for fetch operations.\n   */\n  const getAbortSignal = useCallback(() => {\n    return abortControllerRef.current?.signal;\n  }, []);\n\n  /**\n   * Check if playback was aborted.\n   */\n  const isAborted = useCallback(() => {\n    return abortControllerRef.current?.signal.aborted ?? false;\n  }, []);\n\n  return {\n    initializeAudio,\n    appendBuffer,\n    endStream,\n    play,\n    pause,\n    resume,\n    stop,\n    seekBy,\n    seekTo,\n    setSpeed,\n    cleanupAudio,\n    getAbortSignal,\n    isAborted,\n    speedRef,\n  };\n}\n","\"use client\";\n\nimport { marked } from \"marked\";\n\n/**\n * Convert markdown into plain text that is friendlier for TTS playback.\n * Removes formatting characters and collapses whitespace so the reader\n * doesn't narrate markdown syntax like asterisks or backticks.\n */\nexport function markdownToSpeechText(markdown: string): string {\n  const raw = markdown ?? \"\";\n  if (!raw.trim()) return \"\";\n\n  // Prefer a DOM-based strip so we preserve natural sentence breaks.\n  try {\n    const html = marked.parse(raw);\n    const container =\n      typeof document !== \"undefined\" ? document.createElement(\"div\") : null;\n\n    if (container) {\n      container.innerHTML = typeof html === \"string\" ? html : String(html);\n      const text =\n        container.textContent || container.innerText || container.innerHTML;\n      return text.replace(/\\s+/g, \" \").trim();\n    }\n  } catch (error) {\n    // Fall through to regex-based stripping below\n    console.error(\"Failed to strip markdown for TTS:\", error);\n  }\n\n  // Fallback: simple markdown token removal\n  return raw\n    .replace(/[`*_>#[\\]()-]/g, \" \")\n    .replace(/\\s+/g, \" \")\n    .trim();\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation } from \"convex/react\";\nimport { type RefObject, useEffect } from \"react\";\nimport { toast } from \"sonner\";\n\ninterface UseMessageKeyboardShortcutsOptions {\n  messageId: Id<\"messages\">;\n  conversationId: Id<\"conversations\">;\n  content: string;\n  isFocused: boolean;\n  isUser: boolean;\n  isGenerating: boolean;\n  readOnly?: boolean;\n  messageRef: RefObject<HTMLDivElement | null>;\n}\n\n/**\n * Hook to handle keyboard shortcuts for focused messages.\n *\n * Shortcuts:\n * - r: Regenerate (assistant messages only)\n * - b: Bookmark\n * - c: Copy to clipboard\n * - n: Save as note\n * - delete/backspace: Delete message\n */\nexport function useMessageKeyboardShortcuts({\n  messageId,\n  conversationId,\n  content,\n  isFocused,\n  isUser,\n  isGenerating,\n  readOnly,\n  messageRef,\n}: UseMessageKeyboardShortcutsOptions) {\n  const deleteMsg = useMutation(api.chat.deleteMessage);\n  const createBookmark = useMutation(api.bookmarks.create);\n\n  useEffect(() => {\n    if (!isFocused || readOnly) return;\n\n    const handleKeyDown = async (e: KeyboardEvent) => {\n      // Don't interfere with typing\n      const target = e.target as HTMLElement;\n      if (\n        target.tagName === \"INPUT\" ||\n        target.tagName === \"TEXTAREA\" ||\n        target.getAttribute(\"contenteditable\") === \"true\"\n      ) {\n        return;\n      }\n\n      const isMod = e.metaKey || e.ctrlKey;\n\n      switch (e.key.toLowerCase()) {\n        case \"r\":\n          // Regenerate (assistant messages only, no modifier) - opens model selector\n          if (!isUser && !isGenerating && !isMod) {\n            e.preventDefault();\n            const event = new CustomEvent(\"open-regenerate-model-selector\", {\n              detail: { messageId },\n            });\n            window.dispatchEvent(event);\n          }\n          break;\n\n        case \"b\":\n          // Bookmark (no modifier)\n          if (!isMod) {\n            e.preventDefault();\n            try {\n              await createBookmark({\n                conversationId,\n                messageId,\n              });\n              toast.success(\"Message bookmarked\");\n            } catch (_error) {\n              toast.error(\"Failed to bookmark\");\n            }\n          }\n          break;\n\n        case \"c\":\n          // Copy (no modifier - Cmd+C is native)\n          if (!isMod) {\n            e.preventDefault();\n            await navigator.clipboard.writeText(content);\n            toast.success(\"Copied to clipboard\");\n          }\n          break;\n\n        case \"n\":\n          // Save as note (no modifier)\n          if (!isMod) {\n            e.preventDefault();\n            const event = new CustomEvent(\"save-message-as-note\", {\n              detail: { messageId },\n            });\n            window.dispatchEvent(event);\n          }\n          break;\n\n        case \"delete\":\n        case \"backspace\":\n          // Delete message and focus next\n          if (!isMod) {\n            e.preventDefault();\n            try {\n              await deleteMsg({ messageId });\n              // Focus next message sibling\n              const nextSibling =\n                messageRef.current?.parentElement?.nextElementSibling?.querySelector(\n                  '[tabindex=\"0\"]',\n                ) as HTMLElement;\n              nextSibling?.focus();\n              toast.success(\"Message deleted\");\n            } catch (_error) {\n              toast.error(\"Failed to delete\");\n            }\n          }\n          break;\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [\n    isFocused,\n    readOnly,\n    isUser,\n    isGenerating,\n    messageId,\n    conversationId,\n    content,\n    createBookmark,\n    deleteMsg,\n    messageRef,\n  ]);\n}\n","/**\n * Format Time To First Token for display\n * <100ms: \"45ms\"\n * <1s: \"0.45s\"\n * <10s: \"2.3s\"\n * >10s: \"15s\"\n */\nexport function formatTTFT(milliseconds: number): string {\n  if (milliseconds < 100) {\n    return `${Math.round(milliseconds)}ms`;\n  }\n  if (milliseconds < 1000) {\n    return `${(milliseconds / 1000).toFixed(2)}s`;\n  }\n  if (milliseconds < 10000) {\n    return `${(milliseconds / 1000).toFixed(1)}s`;\n  }\n  return `${Math.round(milliseconds / 1000)}s`;\n}\n\n/**\n * Format duration in milliseconds for display\n * <1ms: \"<1ms\"\n * <1000ms: \"234ms\"\n * <10s: \"1.2s\", \"5.3s\"\n * <60s: \"15s\", \"45s\"\n * >=60s: \"1m 23s\", \"5m 12s\"\n */\nexport function formatDuration(milliseconds: number): string {\n  if (milliseconds < 1) {\n    return \"<1ms\";\n  }\n  if (milliseconds < 1000) {\n    return `${Math.round(milliseconds)}ms`;\n  }\n\n  const seconds = milliseconds / 1000;\n\n  if (seconds < 10) {\n    return `${seconds.toFixed(1)}s`;\n  }\n  if (seconds < 60) {\n    return `${Math.round(seconds)}s`;\n  }\n\n  // Minutes + seconds\n  const minutes = Math.floor(seconds / 60);\n  const remainingSeconds = Math.round(seconds % 60);\n\n  if (remainingSeconds === 0) {\n    return `${minutes}m`;\n  }\n  return `${minutes}m ${remainingSeconds}s`;\n}\n\n/**\n * Detect if response was cached (very fast TTFT)\n */\nexport function isCachedResponse(ttft: number): boolean {\n  return ttft < 50; // <50ms indicates cached\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z',\n      key: '1oefj6',\n    },\n  ],\n  ['path', { d: 'M14 2v5a1 1 0 0 0 1 1h5', key: 'wfsgrz' }],\n  ['path', { d: 'M10 12.5 8 15l2 2.5', key: '1tg20x' }],\n  ['path', { d: 'm14 12.5 2 2.5-2 2.5', key: 'yinavb' }],\n];\n\n/**\n * @component @name FileCode\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAyMmEyIDIgMCAwIDEtMi0yVjRhMiAyIDAgMCAxIDItMmg4YTIuNCAyLjQgMCAwIDEgMS43MDQuNzA2bDMuNTg4IDMuNTg4QTIuNCAyLjQgMCAwIDEgMjAgOHYxMmEyIDIgMCAwIDEtMiAyeiIgLz4KICA8cGF0aCBkPSJNMTQgMnY1YTEgMSAwIDAgMCAxIDFoNSIgLz4KICA8cGF0aCBkPSJNMTAgMTIuNSA4IDE1bDIgMi41IiAvPgogIDxwYXRoIGQ9Im0xNCAxMi41IDIgMi41LTIgMi41IiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-code\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileCode = createLucideIcon('file-code', __iconNode);\n\nexport default FileCode;\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { useMemo } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { ArtifactCard } from \"./ArtifactCard\";\n\ninterface ArtifactListProps {\n  messageId: Id<\"messages\">;\n  className?: string;\n}\n\n/**\n * Displays artifact cards for canvas documents created/updated in a message.\n * Renders in the message body, separate from the collapsible tool call area.\n */\nexport function ArtifactList({ messageId, className }: ArtifactListProps) {\n  // Skip query for temporary optimistic messages\n  const isTempMessage =\n    typeof messageId === \"string\" && messageId.startsWith(\"temp-\");\n\n  // Query tool calls for this message\n  const toolCalls = useQuery(\n    // @ts-ignore - Type depth exceeded with complex Convex query\n    api.messages.toolCalls.getToolCalls,\n    isTempMessage ? \"skip\" : { messageId },\n  );\n\n  // Filter for document-related tools with successful results\n  const documentArtifacts = useMemo(() => {\n    if (!toolCalls) return [];\n\n    return toolCalls\n      .filter((tc: any) => {\n        // Only createDocument and updateDocument tools\n        if (![\"createDocument\", \"updateDocument\"].includes(tc.name)) {\n          return false;\n        }\n\n        // Parse result and check for success\n        try {\n          const result = tc.result ? JSON.parse(tc.result) : null;\n          return result?.success && result?.documentId;\n        } catch {\n          return false;\n        }\n      })\n      .map((tc: any) => {\n        const args = tc.arguments ? JSON.parse(tc.arguments) : {};\n        const result = tc.result ? JSON.parse(tc.result) : {};\n\n        return {\n          id: tc.id,\n          toolName: tc.name,\n          documentId: result.documentId as Id<\"canvasDocuments\">,\n          title: args.title ?? \"Document\",\n          documentType: args.documentType ?? \"prose\",\n          language: args.language,\n          version: result.newVersion ?? 1,\n          lineCount: result.lineCount,\n        };\n      });\n  }, [toolCalls]);\n\n  if (documentArtifacts.length === 0) return null;\n\n  return (\n    <div className={cn(\"mt-3 flex flex-wrap gap-2\", className)}>\n      {documentArtifacts.map((artifact) => (\n        <ArtifactCard\n          key={artifact.id}\n          documentId={artifact.documentId}\n          title={artifact.title}\n          documentType={artifact.documentType}\n          language={artifact.language}\n          version={artifact.version}\n          lineCount={artifact.lineCount}\n        />\n      ))}\n    </div>\n  );\n}\n","\"use client\";\n\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { ChevronRight, FileCode, FileText } from \"lucide-react\";\nimport { useCanvasContext } from \"@/contexts/CanvasContext\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ArtifactCardProps {\n  documentId: Id<\"canvasDocuments\">;\n  title: string;\n  documentType: \"code\" | \"prose\";\n  language?: string;\n  version?: number;\n  lineCount?: number;\n  className?: string;\n}\n\n/**\n * Claude-style artifact card that appears at the bottom of messages.\n * Clicking opens/closes the canvas panel.\n */\nexport function ArtifactCard({\n  documentId,\n  title,\n  documentType,\n  language,\n  version,\n  lineCount,\n  className,\n}: ArtifactCardProps) {\n  const { documentId: openDocumentId, setDocumentId } = useCanvasContext();\n  const isOpen = openDocumentId === documentId;\n\n  const handleToggle = () => {\n    if (isOpen) {\n      setDocumentId(null);\n    } else {\n      setDocumentId(documentId);\n    }\n  };\n\n  const Icon = documentType === \"code\" ? FileCode : FileText;\n  const subtitle = language ?? (documentType === \"code\" ? \"Code\" : \"Document\");\n\n  return (\n    <button\n      type=\"button\"\n      onClick={handleToggle}\n      className={cn(\n        \"flex items-center gap-3 p-3 rounded-lg border bg-card\",\n        \"hover:bg-accent/50 transition-colors w-full max-w-sm text-left\",\n        isOpen && \"ring-2 ring-primary/50 border-primary/50\",\n        className,\n      )}\n    >\n      <div\n        className={cn(\n          \"p-2 rounded-md\",\n          documentType === \"code\" ? \"bg-blue-500/10\" : \"bg-amber-500/10\",\n        )}\n      >\n        <Icon\n          className={cn(\n            \"h-4 w-4\",\n            documentType === \"code\" ? \"text-blue-500\" : \"text-amber-500\",\n          )}\n        />\n      </div>\n\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"font-medium text-sm truncate\">{title}</div>\n        <div className=\"text-xs text-muted-foreground flex items-center gap-1.5\">\n          <span>{subtitle}</span>\n          {version && (\n            <>\n              <span className=\"text-muted-foreground/50\">Â·</span>\n              <span>v{version}</span>\n            </>\n          )}\n          {lineCount && (\n            <>\n              <span className=\"text-muted-foreground/50\">Â·</span>\n              <span>{lineCount} lines</span>\n            </>\n          )}\n        </div>\n      </div>\n\n      <ChevronRight\n        className={cn(\n          \"h-4 w-4 text-muted-foreground transition-transform shrink-0\",\n          isOpen && \"rotate-90\",\n        )}\n      />\n    </button>\n  );\n}\n","import { FileIcon, ImageIcon } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\n\ninterface Attachment {\n  type: \"file\" | \"image\" | \"audio\";\n  name: string;\n  size: number;\n  mimeType: string;\n}\n\ninterface AttachmentIndicatorsProps {\n  attachments: Attachment[];\n}\n\nexport function AttachmentIndicators({\n  attachments,\n}: AttachmentIndicatorsProps) {\n  if (!attachments || attachments.length === 0) return null;\n\n  return (\n    <div className=\"flex gap-2 mt-2 flex-wrap\">\n      {attachments.map((attachment, idx) => (\n        <Badge\n          key={idx}\n          variant=\"secondary\"\n          className=\"flex items-center gap-1.5 py-1 px-2\"\n        >\n          {attachment.type === \"image\" ? (\n            <ImageIcon className=\"w-3 h-3\" />\n          ) : (\n            <FileIcon className=\"w-3 h-3\" />\n          )}\n          <span className=\"text-xs truncate max-w-[120px]\">\n            {attachment.name}\n          </span>\n          <span className=\"text-xs text-muted-foreground\">\n            ({(attachment.size / 1024).toFixed(0)}KB)\n          </span>\n        </Badge>\n      ))}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ImageThumbnailProps {\n  url: string;\n  alt: string;\n  onClick: () => void;\n}\n\nexport function ImageThumbnail({ url, alt, onClick }: ImageThumbnailProps) {\n  const [isLoaded, setIsLoaded] = useState(false);\n\n  return (\n    <button\n      type=\"button\"\n      onClick={onClick}\n      className={cn(\n        \"relative overflow-hidden rounded-md\",\n        \"w-48 h-48 aspect-square\",\n        \"bg-surface-glass border border-border/20\",\n        \"hover:border-border/40 hover:scale-105\",\n        \"transition-all duration-200\",\n        \"cursor-pointer\",\n        \"focus:outline-none focus:ring-2 focus:ring-primary/50\",\n      )}\n      aria-label={`View ${alt}`}\n    >\n      {!isLoaded && (\n        <div className=\"absolute inset-0 bg-surface-glass animate-pulse\" />\n      )}\n      <img\n        src={url}\n        alt={alt}\n        loading=\"lazy\"\n        className={cn(\n          \"w-full h-full object-cover\",\n          \"transition-opacity duration-200\",\n          isLoaded ? \"opacity-100\" : \"opacity-0\",\n        )}\n        onLoad={() => setIsLoaded(true)}\n      />\n    </button>\n  );\n}\n","\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ImageThumbnail } from \"./ImageThumbnail\";\n\ninterface ImageGalleryItem {\n  storageId: string;\n  url: string;\n  name: string;\n}\n\ninterface ImageGalleryProps {\n  images: ImageGalleryItem[];\n  onImageClick: (index: number) => void;\n}\n\nconst MAX_VISIBLE = 4;\n\nexport function ImageGallery({ images, onImageClick }: ImageGalleryProps) {\n  const [showAll, setShowAll] = useState(false);\n\n  const visibleImages = showAll ? images : images.slice(0, MAX_VISIBLE);\n  const remainingCount = images.length - MAX_VISIBLE;\n\n  return (\n    <div className=\"space-y-2\">\n      <motion.div\n        className={`grid gap-2 ${images.length >= 3 ? \"grid-cols-1 sm:grid-cols-2\" : \"grid-cols-1\"}`}\n        variants={{\n          container: {\n            transition: { staggerChildren: 0.05 },\n          },\n        }}\n        initial=\"container\"\n        animate=\"container\"\n      >\n        {visibleImages.map((image, index) => (\n          <motion.div\n            key={image.storageId}\n            variants={{\n              container: {\n                opacity: 0,\n                scale: 0.8,\n              },\n              item: {\n                opacity: 1,\n                scale: 1,\n              },\n            }}\n            initial=\"container\"\n            animate=\"item\"\n            transition={{ duration: 0.2 }}\n          >\n            <ImageThumbnail\n              url={image.url}\n              alt={image.name}\n              onClick={() => onImageClick(index)}\n            />\n          </motion.div>\n        ))}\n      </motion.div>\n\n      {!showAll && remainingCount > 0 && (\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowAll(true)}\n          className=\"w-full text-xs\"\n        >\n          Show {remainingCount} more {remainingCount === 1 ? \"image\" : \"images\"}\n        </Button>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  ChevronLeft,\n  ChevronRight,\n  Download,\n  Minus,\n  Plus,\n  X,\n} from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Dialog, DialogContent, DialogTitle } from \"@/components/ui/dialog\";\nimport { cn } from \"@/lib/utils\";\n\ninterface ImageLightboxProps {\n  images: Array<{ url: string; name: string }>;\n  initialIndex: number;\n  open: boolean;\n  onClose: () => void;\n}\n\nconst ZOOM_LEVELS = [100, 150, 200];\n\nexport function ImageLightbox({\n  images,\n  initialIndex,\n  open,\n  onClose,\n}: ImageLightboxProps) {\n  const [currentIndex, setCurrentIndex] = useState(initialIndex);\n  const [zoomLevel, setZoomLevel] = useState(0); // Index in ZOOM_LEVELS\n  const [direction, setDirection] = useState(0);\n\n  const currentImage = images[currentIndex];\n  const hasMultiple = images.length > 1;\n\n  // Reset zoom when image changes\n  const navigateNext = () => {\n    setDirection(1);\n    setCurrentIndex((prev) => (prev + 1) % images.length);\n  };\n\n  const navigatePrev = () => {\n    setDirection(-1);\n    setCurrentIndex((prev) => (prev - 1 + images.length) % images.length);\n  };\n\n  const zoomIn = () => {\n    setZoomLevel((prev) => Math.min(prev + 1, ZOOM_LEVELS.length - 1));\n  };\n\n  const zoomOut = () => {\n    setZoomLevel((prev) => Math.max(prev - 1, 0));\n  };\n\n  useEffect(() => {\n    setZoomLevel(0);\n  }, []);\n\n  // Update index when initialIndex changes\n  useEffect(() => {\n    setCurrentIndex(initialIndex);\n  }, [initialIndex]);\n\n  // Keyboard navigation\n  useEffect(() => {\n    if (!open) return;\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        onClose();\n      } else if (e.key === \"ArrowLeft\" && hasMultiple) {\n        navigatePrev();\n      } else if (e.key === \"ArrowRight\" && hasMultiple) {\n        navigateNext();\n      } else if (e.key === \"+\" || e.key === \"=\") {\n        zoomIn();\n      } else if (e.key === \"-\" || e.key === \"_\") {\n        zoomOut();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handleKeyDown);\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\n  }, [open, hasMultiple, navigateNext, navigatePrev, onClose, zoomIn, zoomOut]);\n\n  const handleDownload = async () => {\n    try {\n      const response = await fetch(currentImage.url);\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = currentImage.name;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      window.URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error(\"Download failed:\", error);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent\n        className={cn(\n          \"!max-w-none w-screen h-screen max-h-screen\",\n          \"p-0 border-0 rounded-none\",\n          \"bg-black/95 backdrop-blur-md\",\n        )}\n        showCloseButton={false}\n      >\n        <DialogTitle className=\"sr-only\">Image Viewer</DialogTitle>\n\n        {/* Close button */}\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={onClose}\n          className=\"absolute top-4 right-4 z-50 text-white hover:bg-white/10\"\n          aria-label=\"Close\"\n        >\n          <X className=\"w-5 h-5\" />\n        </Button>\n\n        {/* Zoom controls */}\n        <div className=\"absolute top-4 right-16 z-50 flex gap-2\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={zoomOut}\n            disabled={zoomLevel === 0}\n            className=\"text-white hover:bg-white/10 disabled:opacity-30\"\n            aria-label=\"Zoom out\"\n          >\n            <Minus className=\"w-5 h-5\" />\n          </Button>\n          <div className=\"flex items-center px-3 text-white text-sm bg-white/10 rounded-md\">\n            {ZOOM_LEVELS[zoomLevel]}%\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={zoomIn}\n            disabled={zoomLevel === ZOOM_LEVELS.length - 1}\n            className=\"text-white hover:bg-white/10 disabled:opacity-30\"\n            aria-label=\"Zoom in\"\n          >\n            <Plus className=\"w-5 h-5\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={handleDownload}\n            className=\"text-white hover:bg-white/10\"\n            aria-label=\"Download\"\n          >\n            <Download className=\"w-5 h-5\" />\n          </Button>\n        </div>\n\n        {/* Image container - scrollable when zoomed */}\n        <div className=\"flex items-center justify-center w-full h-full overflow-auto p-4\">\n          <AnimatePresence mode=\"wait\" custom={direction}>\n            <motion.div\n              key={currentIndex}\n              className=\"flex items-center justify-center min-w-full min-h-full\"\n              custom={direction}\n              initial={{ opacity: 0, x: direction * 100 }}\n              animate={{ opacity: 1, x: 0 }}\n              exit={{ opacity: 0, x: direction * -100 }}\n              transition={{ duration: 0.2 }}\n            >\n              <img\n                src={currentImage.url}\n                alt={currentImage.name}\n                className=\"object-contain\"\n                style={{\n                  maxWidth: zoomLevel === 0 ? \"100%\" : \"none\",\n                  maxHeight: zoomLevel === 0 ? \"100%\" : \"none\",\n                  width: zoomLevel > 0 ? `${ZOOM_LEVELS[zoomLevel]}%` : \"auto\",\n                  height: zoomLevel > 0 ? \"auto\" : \"auto\",\n                  transition: \"all 0.2s ease-out\",\n                }}\n              />\n            </motion.div>\n          </AnimatePresence>\n        </div>\n\n        {/* Navigation arrows */}\n        {hasMultiple && (\n          <>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={navigatePrev}\n              className=\"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/10 w-12 h-12\"\n              aria-label=\"Previous image\"\n            >\n              <ChevronLeft className=\"w-8 h-8\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={navigateNext}\n              className=\"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:bg-white/10 w-12 h-12\"\n              aria-label=\"Next image\"\n            >\n              <ChevronRight className=\"w-8 h-8\" />\n            </Button>\n          </>\n        )}\n\n        {/* Image counter */}\n        {hasMultiple && (\n          <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/10 backdrop-blur-sm rounded-full text-white text-sm\">\n            {currentIndex + 1} / {images.length}\n          </div>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { AttachmentIndicators } from \"./AttachmentIndicators\";\nimport { ImageGallery } from \"./ImageGallery\";\nimport { ImageLightbox } from \"./ImageLightbox\";\n\ninterface AttachmentRendererProps {\n  attachments: Array<{\n    type: \"file\" | \"image\" | \"audio\";\n    name: string;\n    storageId: string;\n    mimeType: string;\n    size: number;\n    metadata?: any;\n  }>;\n  urls: Map<string, string>;\n}\n\nexport function AttachmentRenderer({\n  attachments,\n  urls,\n}: AttachmentRendererProps) {\n  const [lightboxOpen, setLightboxOpen] = useState(false);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n\n  // Split attachments by type\n  const images = attachments.filter((a: any) => a.type === \"image\");\n  const files = attachments.filter((a: any) => a.type !== \"image\");\n\n  // Prepare images with URLs for gallery and lightbox\n  const imagesWithUrls = images\n    .map((img: any) => ({\n      storageId: img.storageId,\n      url: urls.get(img.storageId) || \"\",\n      name: img.name,\n    }))\n    .filter((img: any) => img.url); // Only include images with valid URLs\n\n  const handleImageClick = (index: number) => {\n    setSelectedImageIndex(index);\n    setLightboxOpen(true);\n  };\n\n  return (\n    <>\n      {imagesWithUrls.length > 0 && (\n        <ImageGallery images={imagesWithUrls} onImageClick={handleImageClick} />\n      )}\n\n      {files.length > 0 && <AttachmentIndicators attachments={files} />}\n\n      {imagesWithUrls.length > 0 && (\n        <ImageLightbox\n          images={imagesWithUrls}\n          initialIndex={selectedImageIndex}\n          open={lightboxOpen}\n          onClose={() => setLightboxOpen(false)}\n        />\n      )}\n    </>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [['path', { d: 'M5 12h14', key: '1ays0h' }]];\n\n/**\n * @component @name Minus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNSAxMmgxNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/minus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Minus = createLucideIcon('minus', __iconNode);\n\nexport default Minus;\n","\"use client\";\n\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  AlertCircle,\n  BookmarkPlus,\n  Calculator,\n  Calendar,\n  CheckCircle2,\n  CheckSquare,\n  ChevronDown,\n  ChevronRight,\n  Cloud,\n  Code,\n  ExternalLink,\n  Eye,\n  FileEdit,\n  FileText,\n  FolderTree,\n  Globe,\n  Loader2,\n  MessageSquare,\n  RefreshCw,\n  Search,\n} from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport {\n  DefaultToolRenderer,\n  getCallState,\n  type ToolCall,\n  toolRenderers,\n} from \"./toolRenderers\";\n\ninterface ToolCallDisplayProps {\n  toolCalls?: ToolCall[];\n  partialToolCalls?: (Omit<ToolCall, \"result\"> & { result?: string })[];\n}\n\n/**\n * Get the icon for a tool by name.\n */\nfunction getToolIcon(toolName: string) {\n  switch (toolName) {\n    case \"saveMemory\":\n      return BookmarkPlus;\n    case \"searchMemories\":\n      return Search;\n    case \"calculator\":\n      return Calculator;\n    case \"datetime\":\n      return Calendar;\n    case \"webSearch\":\n    case \"tavilySearch\":\n    case \"tavilyAdvancedSearch\":\n      return Globe;\n    case \"urlReader\":\n      return ExternalLink;\n    case \"fileDocument\":\n      return FileText;\n    case \"codeExecution\":\n      return Code;\n    case \"weather\":\n      return Cloud;\n    case \"projectContext\":\n      return FolderTree;\n    case \"manageTasks\":\n      return CheckSquare;\n    // Canvas tools\n    case \"createDocument\":\n      return FileText;\n    case \"updateDocument\":\n      return RefreshCw;\n    case \"readDocument\":\n      return Eye;\n    // Document mode tools\n    case \"enterDocumentMode\":\n      return FileEdit;\n    case \"exitDocumentMode\":\n      return MessageSquare;\n    default:\n      return Search;\n  }\n}\n\n/**\n * Get a human-readable label for a tool call state.\n */\nfunction getToolLabel(\n  toolName: string,\n  isExecuting: boolean,\n  result: any,\n): string {\n  switch (toolName) {\n    case \"saveMemory\":\n      if (isExecuting) return \"Saving to memory...\";\n      if (result?.success === false) return \"Failed to save\";\n      if (result?.duplicate) return \"Already saved\";\n      return \"Saved to memory\";\n    case \"searchMemories\":\n      if (isExecuting) return \"Searching memories...\";\n      return `Memory search (${result?.found || 0} result${result?.found !== 1 ? \"s\" : \"\"})`;\n    case \"calculator\":\n      if (isExecuting) return \"Calculating...\";\n      if (result?.success === false) return \"Calculation error\";\n      return `= ${result?.result}`;\n    case \"datetime\":\n      if (isExecuting) return \"Getting date/time...\";\n      if (result?.success === false) return \"Date error\";\n      if (result?.formatted) return result.formatted;\n      if (result?.readable) return result.readable;\n      return \"Date/time\";\n    case \"webSearch\":\n    case \"tavilySearch\":\n    case \"tavilyAdvancedSearch\":\n      if (isExecuting) return \"Searching the web...\";\n      if (result?.success === false) return \"Search failed\";\n      return `Web search (${result?.results?.length || 0} result${result?.results?.length !== 1 ? \"s\" : \"\"})`;\n    case \"urlReader\":\n      if (isExecuting) return \"Reading URL...\";\n      if (result?.success === false) return \"Failed to read URL\";\n      return `Read ${result?.url || \"URL\"} (${result?.wordCount || 0} words)`;\n    case \"fileDocument\":\n      if (isExecuting) return \"Processing document...\";\n      if (result?.success === false) return \"Failed to process file\";\n      return `${result?.fileName || \"Document\"} (${result?.wordCount || 0} words)`;\n    case \"codeExecution\":\n      if (isExecuting) return \"Executing code...\";\n      if (result?.success === false) return \"Execution failed\";\n      return `${result?.language || \"Code\"} executed (${result?.executionTime || 0}ms)`;\n    case \"weather\": {\n      if (isExecuting) return \"Fetching weather...\";\n      if (result?.success === false) return \"Weather unavailable\";\n      const temp = result?.current?.temperature;\n      const units = result?.units === \"fahrenheit\" ? \"Â°F\" : \"Â°C\";\n      return result?.location\n        ? `${result.location} â€¢ ${temp}${units}`\n        : \"Weather Forecast\";\n    }\n    case \"projectContext\": {\n      if (isExecuting) return \"Loading project context...\";\n      if (result?.success === false) return \"Project not found\";\n      const section = result?.section || \"context\";\n      if (section === \"context\") {\n        return `Project: ${result?.project?.name || \"Unknown\"}`;\n      } else if (section === \"notes\") {\n        return `${result?.totalCount || 0} project note${result?.totalCount !== 1 ? \"s\" : \"\"}`;\n      } else if (section === \"files\") {\n        return `${result?.totalCount || 0} project file${result?.totalCount !== 1 ? \"s\" : \"\"}`;\n      } else if (section === \"history\") {\n        return `${result?.totalCount || 0} conversation${result?.totalCount !== 1 ? \"s\" : \"\"}`;\n      }\n      return \"Project context\";\n    }\n    case \"manageTasks\": {\n      if (isExecuting) return \"Managing tasks...\";\n      if (result?.success === false)\n        return result?.message || \"Task operation failed\";\n      const op = result?.operation;\n      if (op === \"create\") return `Created: ${result?.task?.title || \"task\"}`;\n      if (op === \"complete\")\n        return `Completed: ${result?.task?.title || \"task\"}`;\n      if (op === \"delete\")\n        return result?.deleted ? \"Task deleted\" : \"Ready to delete\";\n      if (op === \"update\") return `Updated: ${result?.task?.title || \"task\"}`;\n      if (op === \"list\")\n        return `${result?.totalCount || 0} task${result?.totalCount !== 1 ? \"s\" : \"\"}`;\n      return \"Task manager\";\n    }\n    // Canvas tools\n    case \"createDocument\":\n      if (isExecuting) return \"Creating document...\";\n      if (result?.success === false) return \"Failed to create\";\n      return `Created \"${result?.title || \"document\"}\"`;\n    case \"updateDocument\":\n      if (isExecuting) return \"Updating document...\";\n      if (result?.success === false) return \"Update failed\";\n      return `Updated to v${result?.newVersion}`;\n    case \"readDocument\":\n      if (isExecuting) return \"Reading document...\";\n      if (!result?.hasDocument) return \"No document\";\n      return `Read (${result?.lineCount} lines)`;\n    case \"enterDocumentMode\":\n      if (isExecuting) return \"Entering document mode...\";\n      if (result?.success === false) return \"Mode switch failed\";\n      return \"Document mode\";\n    case \"exitDocumentMode\":\n      if (isExecuting) return \"Exiting...\";\n      if (result?.success === false) return \"Exit failed\";\n      return \"Back to chat\";\n    default:\n      if (isExecuting) return \"Processing...\";\n      return \"Done\";\n  }\n}\n\nexport function ToolCallDisplay({\n  toolCalls,\n  partialToolCalls,\n}: ToolCallDisplayProps) {\n  const [expanded, setExpanded] = useState<Record<string, boolean>>({});\n\n  // Merge partial (loading) and complete calls\n  const uniqueCalls = useMemo(() => {\n    const combined = [...(toolCalls || [])];\n\n    if (partialToolCalls) {\n      for (const partial of partialToolCalls) {\n        if (!combined.some((c) => c.id === partial.id)) {\n          combined.push(partial as ToolCall);\n        }\n      }\n    }\n    return combined;\n  }, [toolCalls, partialToolCalls]);\n\n  if (uniqueCalls.length === 0) return null;\n\n  const anyExecuting = uniqueCalls.some((c) => getCallState(c) === \"executing\");\n  const hasError = uniqueCalls.some((c) => getCallState(c) === \"error\");\n  const isAnyExpanded = Object.values(expanded).some(Boolean);\n\n  // Get summary info for collapsed view\n  const getSummaryInfo = () => {\n    const searchCalls = uniqueCalls.filter((c) => c.name === \"searchMemories\");\n    const saveCalls = uniqueCalls.filter((c) => c.name === \"saveMemory\");\n\n    // Calculate total search results\n    const totalResults = searchCalls.reduce((sum, call) => {\n      if (call.result) {\n        try {\n          const parsed = JSON.parse(call.result);\n          return sum + (parsed.found || 0);\n        } catch {}\n      }\n      return sum;\n    }, 0);\n\n    // Count successful saves\n    const savedCount = saveCalls.filter((c) => {\n      try {\n        const parsed = JSON.parse(c.result || \"{}\");\n        return parsed.success === true;\n      } catch {\n        return false;\n      }\n    }).length;\n\n    if (anyExecuting) {\n      const executingCall = uniqueCalls.find(\n        (c) => getCallState(c) === \"executing\",\n      );\n      return getToolLabel(executingCall?.name || \"\", true, null);\n    }\n\n    const parts = [];\n    if (searchCalls.length > 0) {\n      parts.push(\n        `${totalResults} memor${totalResults !== 1 ? \"ies\" : \"y\"} found`,\n      );\n    }\n    if (saveCalls.length > 0) {\n      parts.push(`${savedCount} saved`);\n    }\n    return parts.join(\", \") || \"Tool calls\";\n  };\n\n  const toggleExpand = () => {\n    const newState = !isAnyExpanded;\n    const newExpanded: Record<string, boolean> = {};\n    for (const call of uniqueCalls) {\n      newExpanded[call.id] = newState;\n    }\n    setExpanded(newExpanded);\n  };\n\n  return (\n    <div className=\"my-3\">\n      {/* Collapsed summary view */}\n      <div\n        className=\"flex items-center gap-2 cursor-pointer group\"\n        onClick={toggleExpand}\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            toggleExpand();\n          }\n        }}\n        aria-expanded={isAnyExpanded}\n        aria-label={`${uniqueCalls.length} tool call${uniqueCalls.length === 1 ? \"\" : \"s\"}`}\n      >\n        {/* Status indicator */}\n        {anyExecuting ? (\n          <Loader2 className=\"h-3 w-3 text-blue-500 animate-spin\" />\n        ) : hasError ? (\n          <AlertCircle className=\"h-3 w-3 text-red-500\" />\n        ) : (\n          <CheckCircle2 className=\"h-3 w-3 text-green-500\" />\n        )}\n\n        <span className=\"text-xs text-muted-foreground group-hover:text-foreground transition-colors\">\n          {getSummaryInfo()}\n        </span>\n\n        <div className=\"flex-1 border-t border-dashed border-border/40 group-hover:border-border/60 transition-colors\" />\n\n        {isAnyExpanded ? (\n          <ChevronDown className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        ) : (\n          <ChevronRight className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        )}\n      </div>\n\n      {/* Expanded details */}\n      <AnimatePresence>\n        {isAnyExpanded && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.2, ease: [0.2, 0, 0, 1] }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"mt-2 space-y-2 pl-2\">\n              {uniqueCalls.map((call) => {\n                const state = getCallState(call);\n                const ToolIcon = getToolIcon(call.name);\n\n                let parsedArgs: any;\n                let parsedResult: any;\n                try {\n                  parsedArgs = JSON.parse(call.arguments);\n                  parsedResult = call.result ? JSON.parse(call.result) : null;\n                } catch {\n                  parsedArgs = call.arguments;\n                  parsedResult = call.result;\n                }\n\n                // Get the renderer for this tool, or use the default\n                const Renderer =\n                  toolRenderers[call.name] || DefaultToolRenderer;\n\n                return (\n                  <Renderer\n                    key={call.id}\n                    call={call}\n                    parsedArgs={parsedArgs}\n                    parsedResult={parsedResult}\n                    state={state}\n                    ToolIcon={ToolIcon}\n                  />\n                );\n              })}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import { Check, FileCode, FileText, Loader2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the createDocument tool.\n * Shows compact tool info. Artifact card appears in message body via ArtifactList.\n */\nexport function CreateDocumentRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n}: ToolRendererProps) {\n  const Icon = parsedArgs?.documentType === \"code\" ? FileCode : FileText;\n\n  // Show loading state while executing\n  if (state === \"executing\") {\n    return (\n      <div className=\"text-xs flex items-center gap-2 text-muted-foreground py-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        <span>Creating \"{parsedArgs?.title}\"...</span>\n      </div>\n    );\n  }\n\n  // Show error if failed\n  if (parsedResult && !parsedResult.success) {\n    return (\n      <div className=\"text-xs text-destructive py-1\">\n        Failed: {parsedResult.error}\n      </div>\n    );\n  }\n\n  // Show success info\n  if (parsedResult?.success) {\n    return (\n      <div className=\"text-xs flex items-center gap-2 py-1\">\n        <div className=\"flex items-center gap-1.5 text-green-500\">\n          <Check className=\"h-3 w-3\" />\n          <span>Created</span>\n        </div>\n        <span className=\"text-muted-foreground/50\">Â·</span>\n        <Icon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground truncate max-w-[200px]\">\n          {parsedArgs?.title ?? \"Document\"}\n        </span>\n        {parsedArgs?.language && (\n          <Badge variant=\"secondary\" className=\"h-4 text-[10px] px-1\">\n            {parsedArgs.language}\n          </Badge>\n        )}\n        {parsedResult.lineCount && (\n          <>\n            <span className=\"text-muted-foreground/50\">Â·</span>\n            <span className=\"text-muted-foreground\">\n              {parsedResult.lineCount} lines\n            </span>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  return null;\n}\n","import {\n  AlertCircle,\n  AlertTriangle,\n  HelpCircle,\n  RefreshCw,\n} from \"lucide-react\";\nimport type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the resolveConflict tool.\n * Shows conflict resolution strategy and status.\n */\nexport function ResolveConflictRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n}: ToolRendererProps) {\n  const strategy = parsedArgs?.strategy;\n\n  const getStrategyIcon = () => {\n    switch (strategy) {\n      case \"retry_with_read\":\n        return <RefreshCw className=\"h-3 w-3 text-blue-500\" />;\n      case \"force_replace\":\n        return <AlertCircle className=\"h-3 w-3 text-orange-500\" />;\n      case \"ask_user\":\n        return <HelpCircle className=\"h-3 w-3 text-purple-500\" />;\n      default:\n        return <AlertTriangle className=\"h-3 w-3 text-yellow-500\" />;\n    }\n  };\n\n  const getStrategyLabel = () => {\n    switch (strategy) {\n      case \"retry_with_read\":\n        return \"Retrying with fresh read\";\n      case \"force_replace\":\n        return \"Force replacing\";\n      case \"ask_user\":\n        return \"Asking for user input\";\n      default:\n        return \"Resolving conflict\";\n    }\n  };\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-yellow-500/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        {getStrategyIcon()}\n        <span className=\"font-mono text-muted-foreground\">\n          {getStrategyLabel()}\n        </span>\n      </div>\n\n      {parsedArgs?.conflictDescription && (\n        <div className=\"text-muted-foreground/80 text-[10px]\">\n          {parsedArgs.conflictDescription}\n        </div>\n      )}\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"text-muted-foreground\">\n          {parsedResult.success ? (\n            <span className=\"text-[10px]\">{parsedResult.message}</span>\n          ) : (\n            <span className=\"text-destructive\">{parsedResult.error}</span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\nexport function EnterDocumentModeRenderer({\n  parsedArgs,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">\n          {state === \"executing\"\n            ? \"Entering document mode...\"\n            : \"Document mode active\"}\n        </span>\n      </div>\n      {parsedArgs?.reason && state !== \"executing\" && (\n        <div className=\"text-muted-foreground/80 text-[10px]\">\n          {parsedArgs.reason}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\nexport function ExitDocumentModeRenderer({\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">\n          {state === \"executing\" ? \"Exiting...\" : \"Returned to chat\"}\n        </span>\n      </div>\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the codeExecution tool.\n * Displays code, output (stdout/stderr), errors, images, and execution time.\n */\nexport function CodeExecutionRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  // Combine stdout and stderr for display, or show error if failed\n  const getOutputContent = () => {\n    if (!parsedResult) return null;\n\n    // If execution failed, show the error\n    if (parsedResult.success === false && parsedResult.error) {\n      return parsedResult.error;\n    }\n\n    // Combine stdout and stderr\n    const outputs: string[] = [];\n    if (parsedResult.stdout) outputs.push(parsedResult.stdout);\n    if (parsedResult.stderr) outputs.push(parsedResult.stderr);\n\n    // Add result value if present\n    if (parsedResult.result) {\n      const resultStr =\n        typeof parsedResult.result === \"string\"\n          ? parsedResult.result\n          : JSON.stringify(parsedResult.result, null, 2);\n      if (resultStr && resultStr !== outputs.join(\"\\n\")) {\n        outputs.push(`Result: ${resultStr}`);\n      }\n    }\n\n    return outputs.join(\"\\n\") || \"(no output)\";\n  };\n\n  const hasError = parsedResult?.success === false;\n  const images = parsedResult?.images as\n    | Array<{ url: string; storageId: string }>\n    | undefined;\n\n  return (\n    <div className=\"text-xs space-y-2 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">\n          {parsedArgs?.language || \"Code\"}\n        </span>\n        {hasError && <span className=\"text-red-500 text-[10px]\">Failed</span>}\n      </div>\n      {parsedArgs?.code && (\n        <pre className=\"bg-muted p-2 rounded text-[11px] overflow-x-auto max-h-32 overflow-y-auto\">\n          <code>{parsedArgs.code}</code>\n        </pre>\n      )}\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-2\">\n          {/* Images from code execution (matplotlib plots, etc.) */}\n          {images && images.length > 0 && (\n            <div className=\"space-y-2\">\n              {images.map((img, idx) => {\n                // Debug log\n                console.log(\"[CodeExecution] Rendering image:\", img);\n\n                if (!img.url) {\n                  return (\n                    <div\n                      key={idx}\n                      className=\"p-2 bg-yellow-500/10 text-yellow-600 rounded text-[11px]\"\n                    >\n                      Image {idx + 1}: URL not available\n                    </div>\n                  );\n                }\n\n                return (\n                  <div\n                    key={img.storageId || idx}\n                    className=\"rounded overflow-hidden border border-border/40 bg-white\"\n                  >\n                    {/* eslint-disable-next-line @next/next/no-img-element */}\n                    <img\n                      src={img.url}\n                      alt={`Code execution output ${idx + 1}`}\n                      className=\"w-full h-auto block\"\n                      loading=\"lazy\"\n                      onError={(e) => {\n                        console.error(\n                          \"[CodeExecution] Image failed to load:\",\n                          img.url,\n                        );\n                        (e.target as HTMLImageElement).style.display = \"none\";\n                      }}\n                    />\n                  </div>\n                );\n              })}\n            </div>\n          )}\n\n          {/* Text output */}\n          <div className=\"text-muted-foreground\">\n            {hasError ? \"Error:\" : \"Output:\"}\n          </div>\n          <pre\n            className={`p-2 rounded text-[11px] max-h-48 overflow-y-auto ${\n              hasError ? \"bg-red-500/10 text-red-500\" : \"bg-muted\"\n            }`}\n          >\n            <code>{getOutputContent()}</code>\n          </pre>\n          {parsedResult.executionTime && !hasError && (\n            <div className=\"text-muted-foreground text-[11px]\">\n              Executed in {parsedResult.executionTime}ms\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the fileDocument tool.\n * Displays file name, word count, and content.\n */\nexport function FileDocumentRenderer({\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-medium\">\n          {parsedResult?.fileName || \"Document\"}\n        </span>\n      </div>\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1\">\n          <div className=\"text-muted-foreground text-[11px]\">\n            {parsedResult.wordCount} words\n          </div>\n          {parsedResult.content && (\n            <div className=\"max-h-48 overflow-y-auto bg-muted p-2 rounded\">\n              <pre className=\"whitespace-pre-wrap font-sans text-[11px]\">\n                {parsedResult.content}\n              </pre>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the projectContext tool.\n * Displays project info and context items.\n */\nexport function ProjectContextRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const section = parsedArgs?.section || \"context\";\n  const items = parsedResult?.items || [];\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">\n          {parsedResult?.project?.name} â€¢ {section}\n        </span>\n      </div>\n      {items.length > 0 && state !== \"executing\" && (\n        <div className=\"max-h-48 overflow-y-auto space-y-1\">\n          {items.map((item: any, i: number) => (\n            <div key={i} className=\"text-muted-foreground\">\n              â€¢ {item.title || item.name || item.content?.substring(0, 50)}\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the queryHistory tool.\n * Displays conversation history search results with message snippets.\n */\nexport function QueryHistoryRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const results = parsedResult?.results || [];\n\n  const getRoleLabel = (role: string) => {\n    switch (role) {\n      case \"user\":\n        return \"You\";\n      case \"assistant\":\n        return \"Assistant\";\n      case \"system\":\n        return \"System\";\n      default:\n        return role;\n    }\n  };\n\n  const getRoleColor = (role: string) => {\n    switch (role) {\n      case \"user\":\n        return \"text-blue-500\";\n      case \"assistant\":\n        return \"text-green-500\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n        {parsedResult?.totalResults !== undefined && state !== \"executing\" && (\n          <span className=\"text-muted-foreground text-[10px]\">\n            ({parsedResult.totalResults} found)\n          </span>\n        )}\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {results.slice(0, 5).map((r: any, i: number) => (\n            <div key={i} className=\"py-1\">\n              <div className=\"flex items-center gap-2\">\n                <a\n                  href={r.url}\n                  className=\"font-medium text-primary hover:underline truncate max-w-[200px]\"\n                >\n                  {r.conversationTitle || \"Untitled conversation\"}\n                </a>\n                <span className={`text-[10px] ${getRoleColor(r.role)}`}>\n                  {getRoleLabel(r.role)}\n                </span>\n                {r.timestamp && (\n                  <span className=\"text-[10px] text-muted-foreground\">\n                    {new Date(r.timestamp).toLocaleDateString()}\n                  </span>\n                )}\n              </div>\n              <p className=\"text-muted-foreground text-[11px] line-clamp-2\">\n                {r.content?.substring(0, 150)}\n                {r.content && r.content.length > 150 ? \"...\" : \"\"}\n              </p>\n            </div>\n          ))}\n          {results.length === 0 && (\n            <div className=\"text-muted-foreground\">No conversations found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the saveMemory tool.\n * Displays the saved content and status.\n */\nexport function SaveMemoryRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-medium text-muted-foreground\">\n          {state === \"executing\"\n            ? \"Saving...\"\n            : parsedResult?.success\n              ? \"Saved\"\n              : parsedResult?.duplicate\n                ? \"Already exists\"\n                : \"Failed\"}\n        </span>\n      </div>\n      <div className=\"text-muted-foreground\">\n        {parsedArgs?.content && (\n          <span className=\"italic\">\"{parsedArgs.content}\"</span>\n        )}\n      </div>\n      {parsedResult?.message && state !== \"executing\" && (\n        <div\n          className={parsedResult.success ? \"text-green-500\" : \"text-amber-500\"}\n        >\n          {parsedResult.message}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the searchAll tool.\n * Displays aggregated search results across notes, tasks, files, and conversations.\n */\nexport function SearchAllRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const getTypeColor = (type: string) => {\n    switch (type) {\n      case \"notes\":\n        return \"bg-purple-500/20 text-purple-500\";\n      case \"tasks\":\n        return \"bg-blue-500/20 text-blue-500\";\n      case \"files\":\n        return \"bg-green-500/20 text-green-500\";\n      case \"conversations\":\n        return \"bg-orange-500/20 text-orange-500\";\n      default:\n        return \"bg-muted text-muted-foreground\";\n    }\n  };\n\n  const getTypeLabel = (type: string) => {\n    switch (type) {\n      case \"notes\":\n        return \"Note\";\n      case \"tasks\":\n        return \"Task\";\n      case \"files\":\n        return \"File\";\n      case \"conversations\":\n        return \"Chat\";\n      default:\n        return type;\n    }\n  };\n\n  // Aggregate all results with type labels\n  const allResults: Array<{ type: string; item: any }> = [];\n\n  if (parsedResult?.notes?.results) {\n    parsedResult.notes.results.forEach((item: any) => {\n      allResults.push({ type: \"notes\", item });\n    });\n  }\n  if (parsedResult?.tasks?.results) {\n    parsedResult.tasks.results.forEach((item: any) => {\n      allResults.push({ type: \"tasks\", item });\n    });\n  }\n  if (parsedResult?.files?.results) {\n    parsedResult.files.results.forEach((item: any) => {\n      allResults.push({ type: \"files\", item });\n    });\n  }\n  if (parsedResult?.conversations?.results) {\n    parsedResult.conversations.results.forEach((item: any) => {\n      allResults.push({ type: \"conversations\", item });\n    });\n  }\n\n  // Count totals per type\n  const totals = {\n    notes: parsedResult?.notes?.totalResults || 0,\n    tasks: parsedResult?.tasks?.totalResults || 0,\n    files: parsedResult?.files?.totalResults || 0,\n    conversations: parsedResult?.conversations?.totalResults || 0,\n  };\n  const totalCount =\n    totals.notes + totals.tasks + totals.files + totals.conversations;\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2 flex-wrap\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n        {state !== \"executing\" && totalCount > 0 && (\n          <span className=\"text-muted-foreground text-[10px]\">\n            ({totalCount} total)\n          </span>\n        )}\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {allResults.slice(0, 8).map(({ type, item }, i) => (\n            <div key={i} className=\"py-1\">\n              <div className=\"flex items-center gap-2\">\n                <span\n                  className={`text-[9px] px-1.5 py-0.5 rounded ${getTypeColor(type)}`}\n                >\n                  {getTypeLabel(type)}\n                </span>\n                {item.url ? (\n                  <a\n                    href={item.url}\n                    className=\"font-medium text-primary hover:underline truncate max-w-[200px]\"\n                  >\n                    {item.title ||\n                      item.filename ||\n                      item.conversationTitle ||\n                      \"Untitled\"}\n                  </a>\n                ) : (\n                  <span className=\"font-medium text-foreground truncate max-w-[200px]\">\n                    {item.title ||\n                      item.filename ||\n                      item.conversationTitle ||\n                      \"Untitled\"}\n                  </span>\n                )}\n              </div>\n              <p className=\"text-muted-foreground text-[11px] line-clamp-1 pl-10\">\n                {(\n                  item.preview ||\n                  item.content ||\n                  item.description ||\n                  \"\"\n                )?.substring(0, 100)}\n              </p>\n            </div>\n          ))}\n          {allResults.length === 0 && (\n            <div className=\"text-muted-foreground\">No results found</div>\n          )}\n          {allResults.length > 8 && (\n            <div className=\"text-muted-foreground text-[10px] pt-1\">\n              +{allResults.length - 8} more results\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the searchFiles tool.\n * Displays file chunk search results with content snippets.\n */\nexport function SearchFilesRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const results = parsedResult?.results || [];\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n        {parsedResult?.totalResults !== undefined && state !== \"executing\" && (\n          <span className=\"text-muted-foreground text-[10px]\">\n            ({parsedResult.totalResults} found)\n          </span>\n        )}\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {results.slice(0, 5).map((r: any, i: number) => (\n            <div key={i} className=\"py-1\">\n              <div className=\"flex items-center gap-2\">\n                {r.url ? (\n                  <a\n                    href={r.url}\n                    className=\"font-medium text-primary hover:underline\"\n                  >\n                    {r.filename}\n                  </a>\n                ) : (\n                  <span className=\"font-medium text-foreground\">\n                    {r.filename}\n                  </span>\n                )}\n                {r.page !== undefined && (\n                  <span className=\"text-[10px] text-muted-foreground bg-muted px-1 rounded\">\n                    p.{r.page}\n                  </span>\n                )}\n                {r.score && (\n                  <span className=\"text-[10px] text-muted-foreground\">\n                    {(parseFloat(r.score) * 100).toFixed(0)}%\n                  </span>\n                )}\n              </div>\n              <p className=\"text-muted-foreground text-[11px] line-clamp-2 font-mono bg-muted/50 p-1 rounded mt-0.5\">\n                {r.content?.substring(0, 200)}\n                {r.content && r.content.length > 200 ? \"...\" : \"\"}\n              </p>\n            </div>\n          ))}\n          {results.length === 0 && (\n            <div className=\"text-muted-foreground\">No files found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the searchMemories tool.\n * Displays search query and found memories.\n */\nexport function SearchMemoriesRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          {parsedArgs?.query}\n        </span>\n      </div>\n\n      {parsedResult && (\n        <div className=\"space-y-1 max-h-48 overflow-y-auto\">\n          {parsedResult.memories?.map((mem: any, i: number) => (\n            <div key={i} className=\"py-0.5\">\n              <span className=\"font-medium text-primary\">[{mem.category}]</span>{\" \"}\n              <span className=\"text-muted-foreground\">{mem.content}</span>\n            </div>\n          ))}\n          {parsedResult.found === 0 && (\n            <div className=\"text-muted-foreground\">No memories found</div>\n          )}\n          {state === \"error\" && (\n            <div className=\"text-red-500\">\n              {parsedResult.error || \"Tool execution failed\"}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the searchNotes tool.\n * Displays note search results with clickable links.\n */\nexport function SearchNotesRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const results = parsedResult?.results || [];\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n        {parsedResult?.totalResults !== undefined && state !== \"executing\" && (\n          <span className=\"text-muted-foreground text-[10px]\">\n            ({parsedResult.totalResults} found)\n          </span>\n        )}\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {results.slice(0, 5).map((r: any, i: number) => (\n            <div key={i} className=\"py-1\">\n              <a\n                href={r.url}\n                className=\"font-medium text-primary hover:underline\"\n              >\n                {r.title || \"Untitled\"}\n              </a>\n              {r.tags?.length > 0 && (\n                <span className=\"ml-2 text-[10px] text-muted-foreground\">\n                  {r.tags\n                    .slice(0, 3)\n                    .map((tag: string) => `#${tag}`)\n                    .join(\" \")}\n                </span>\n              )}\n              <p className=\"text-muted-foreground text-[11px] line-clamp-2\">\n                {r.preview?.substring(0, 150)}\n                {r.preview && r.preview.length > 150 ? \"...\" : \"\"}\n              </p>\n            </div>\n          ))}\n          {results.length === 0 && (\n            <div className=\"text-muted-foreground\">No notes found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the calculator tool.\n * Displays expression and result.\n */\nexport function CalculatorRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          {parsedArgs?.expression}\n        </span>\n      </div>\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"font-semibold text-primary\">\n          = {parsedResult.result}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the searchTasks tool.\n * Displays task search results with status badges and links.\n */\nexport function SearchTasksRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const results = parsedResult?.results || [];\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"text-green-500\";\n      case \"in_progress\":\n        return \"text-blue-500\";\n      case \"blocked\":\n        return \"text-red-500\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const getUrgencyBadge = (urgency: string) => {\n    switch (urgency) {\n      case \"urgent\":\n        return \"bg-red-500/20 text-red-500\";\n      case \"high\":\n        return \"bg-orange-500/20 text-orange-500\";\n      case \"medium\":\n        return \"bg-yellow-500/20 text-yellow-500\";\n      default:\n        return \"bg-muted text-muted-foreground\";\n    }\n  };\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n        {parsedResult?.totalResults !== undefined && state !== \"executing\" && (\n          <span className=\"text-muted-foreground text-[10px]\">\n            ({parsedResult.totalResults} found)\n          </span>\n        )}\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {results.slice(0, 5).map((r: any, i: number) => (\n            <div key={i} className=\"py-1\">\n              <div className=\"flex items-center gap-2\">\n                <a\n                  href={r.url}\n                  className=\"font-medium text-primary hover:underline\"\n                >\n                  {r.title}\n                </a>\n                <span className={`text-[10px] ${getStatusColor(r.status)}`}>\n                  {r.status?.replace(\"_\", \" \")}\n                </span>\n                {r.urgency && r.urgency !== \"medium\" && (\n                  <span\n                    className={`text-[9px] px-1 rounded ${getUrgencyBadge(r.urgency)}`}\n                  >\n                    {r.urgency}\n                  </span>\n                )}\n              </div>\n              {r.deadline && (\n                <span className=\"text-[10px] text-muted-foreground\">\n                  Due: {new Date(r.deadline).toLocaleDateString()}\n                </span>\n              )}\n              {r.description && (\n                <p className=\"text-muted-foreground text-[11px] line-clamp-1\">\n                  {r.description}\n                </p>\n              )}\n            </div>\n          ))}\n          {results.length === 0 && (\n            <div className=\"text-muted-foreground\">No tasks found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the manageTasks tool.\n * Displays operation-specific UI for task management.\n */\nexport function TaskManagerRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const operation = parsedArgs?.operation || \"unknown\";\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"text-green-500\";\n      case \"in_progress\":\n        return \"text-blue-500\";\n      case \"cancelled\":\n        return \"text-red-500\";\n      default:\n        return \"text-muted-foreground\";\n    }\n  };\n\n  const getUrgencyBadge = (urgency: string) => {\n    switch (urgency) {\n      case \"urgent\":\n        return \"bg-red-500/20 text-red-500\";\n      case \"high\":\n        return \"bg-orange-500/20 text-orange-500\";\n      case \"medium\":\n        return \"bg-yellow-500/20 text-yellow-500\";\n      default:\n        return \"bg-muted text-muted-foreground\";\n    }\n  };\n\n  const getOperationLabel = () => {\n    if (state === \"executing\") {\n      switch (operation) {\n        case \"create\":\n          return \"Creating task...\";\n        case \"update\":\n          return \"Updating task...\";\n        case \"complete\":\n          return \"Completing task...\";\n        case \"delete\":\n          return parsedArgs?.confirmDelete\n            ? \"Deleting task...\"\n            : \"Finding task...\";\n        case \"list\":\n          return \"Loading tasks...\";\n        default:\n          return \"Processing...\";\n      }\n    }\n\n    if (!parsedResult?.success) {\n      if (parsedResult?.ambiguous) {\n        return \"Multiple matches found\";\n      }\n      return parsedResult?.message || \"Failed\";\n    }\n\n    switch (operation) {\n      case \"create\":\n        return \"Created task\";\n      case \"update\":\n        return \"Updated task\";\n      case \"complete\":\n        return \"Completed\";\n      case \"delete\":\n        return parsedResult?.deleted ? \"Deleted\" : \"Found (confirm to delete)\";\n      case \"list\":\n        return `${parsedResult?.totalCount || 0} tasks`;\n      default:\n        return \"Done\";\n    }\n  };\n\n  // Render single task\n  const renderTask = (task: any, showLink = true) => (\n    <div className=\"py-1\">\n      <div className=\"flex items-center gap-2\">\n        {showLink && task.url ? (\n          <a\n            href={task.url}\n            className={`font-medium ${\n              task.status === \"completed\"\n                ? \"line-through text-muted-foreground\"\n                : \"text-primary hover:underline\"\n            }`}\n          >\n            {task.title}\n          </a>\n        ) : (\n          <span\n            className={`font-medium ${\n              task.status === \"completed\"\n                ? \"line-through text-muted-foreground\"\n                : \"\"\n            }`}\n          >\n            {task.title}\n          </span>\n        )}\n        <span className={`text-[10px] ${getStatusColor(task.status)}`}>\n          {task.status?.replace(\"_\", \" \")}\n        </span>\n        {task.urgency && task.urgency !== \"medium\" && (\n          <span\n            className={`text-[9px] px-1 rounded ${getUrgencyBadge(task.urgency)}`}\n          >\n            {task.urgency}\n          </span>\n        )}\n      </div>\n      {task.deadline && (\n        <span className=\"text-[10px] text-muted-foreground\">\n          Due: {new Date(task.deadline).toLocaleDateString()}\n        </span>\n      )}\n    </div>\n  );\n\n  // Render candidates for disambiguation\n  const renderCandidates = () => {\n    const candidates = parsedResult?.candidates || [];\n    if (candidates.length === 0) return null;\n\n    return (\n      <div className=\"space-y-1 mt-1\">\n        <div className=\"text-[10px] text-muted-foreground\">\n          Please specify which task:\n        </div>\n        {candidates.slice(0, 5).map((task: any, i: number) => (\n          <div key={i}>{renderTask(task)}</div>\n        ))}\n      </div>\n    );\n  };\n\n  // Render task list\n  const renderTaskList = () => {\n    const tasks = parsedResult?.tasks || [];\n    if (tasks.length === 0) {\n      return (\n        <div className=\"text-muted-foreground text-[11px] mt-1\">\n          {parsedResult?.message || \"No tasks found\"}\n        </div>\n      );\n    }\n\n    return (\n      <div className=\"space-y-1.5 max-h-48 overflow-y-auto mt-1\">\n        {tasks.slice(0, 10).map((task: any, i: number) => (\n          <div key={i}>{renderTask(task)}</div>\n        ))}\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      {/* Header */}\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span\n          className={`font-medium ${\n            state === \"executing\"\n              ? \"text-muted-foreground\"\n              : parsedResult?.success\n                ? operation === \"complete\" || operation === \"delete\"\n                  ? \"text-green-500\"\n                  : \"text-muted-foreground\"\n                : \"text-amber-500\"\n          }`}\n        >\n          {getOperationLabel()}\n        </span>\n      </div>\n\n      {/* Operation-specific content */}\n      {state !== \"executing\" && (\n        <>\n          {/* Create/Update/Complete/Delete - show single task */}\n          {(operation === \"create\" ||\n            operation === \"update\" ||\n            operation === \"complete\" ||\n            (operation === \"delete\" && !parsedResult?.ambiguous)) &&\n            parsedResult?.task && (\n              <div className=\"mt-1\">{renderTask(parsedResult.task)}</div>\n            )}\n\n          {/* Pending delete confirmation */}\n          {operation === \"delete\" && parsedResult?.pendingDelete && (\n            <div className=\"text-[10px] text-amber-500 mt-1\">\n              Awaiting confirmation...\n            </div>\n          )}\n\n          {/* Ambiguous - show candidates */}\n          {parsedResult?.ambiguous && renderCandidates()}\n\n          {/* List - show tasks */}\n          {operation === \"list\" && renderTaskList()}\n\n          {/* Error message */}\n          {!parsedResult?.success && parsedResult?.error && (\n            <div className=\"text-amber-500 text-[11px]\">\n              {parsedResult.message}\n            </div>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the datetime tool.\n * Displays date/time operation and result.\n */\nexport function DateTimeRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">\n          {parsedArgs?.operation}\n          {parsedArgs?.timezone && ` (${parsedArgs.timezone})`}\n        </span>\n      </div>\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"font-medium\">\n          {parsedResult.formatted || parsedResult.readable}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the urlReader tool.\n * Displays URL, word count, and content preview.\n */\nexport function UrlReaderRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const content = parsedResult?.content || \"\";\n  const truncated = content.substring(0, 500);\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <a\n          href={parsedArgs?.url}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-primary hover:underline truncate\"\n        >\n          {parsedArgs?.url}\n        </a>\n      </div>\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1\">\n          <div className=\"text-muted-foreground text-[11px]\">\n            {parsedResult.wordCount} words\n          </div>\n          <div className=\"max-h-48 overflow-y-auto text-muted-foreground\">\n            <pre className=\"whitespace-pre-wrap font-sans text-[11px]\">\n              {content.length > 500 ? `${truncated}...` : content}\n            </pre>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the weather tool.\n * Displays current weather and forecast.\n */\nexport function WeatherRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const current = parsedResult?.current;\n  const units = parsedResult?.units === \"fahrenheit\" ? \"Â°F\" : \"Â°C\";\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"text-muted-foreground\">{parsedArgs?.location}</span>\n      </div>\n      {current && state !== \"executing\" && (\n        <div className=\"space-y-1\">\n          <div className=\"font-semibold\">\n            {current.temperature}\n            {units} â€¢ {current.condition}\n          </div>\n          {current.feelsLike && (\n            <div className=\"text-muted-foreground\">\n              Feels like {current.feelsLike}\n              {units}\n            </div>\n          )}\n          {parsedResult.forecast && (\n            <div className=\"text-muted-foreground text-[11px]\">\n              {parsedResult.forecast}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Default renderer for unknown/unsupported tools.\n * Displays raw arguments and results as JSON.\n */\nexport function DefaultToolRenderer({\n  call,\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-medium text-muted-foreground\">\n          {call.name || \"Unknown tool\"}\n        </span>\n      </div>\n\n      {/* Show parsed arguments */}\n      {parsedArgs && (\n        <div className=\"text-muted-foreground\">\n          <div className=\"text-[11px] font-medium mb-1\">Arguments:</div>\n          <pre className=\"text-[10px] bg-muted p-2 rounded overflow-x-auto whitespace-pre-wrap\">\n            {JSON.stringify(parsedArgs, null, 2)}\n          </pre>\n        </div>\n      )}\n\n      {/* Show parsed results */}\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"text-muted-foreground\">\n          <div className=\"text-[11px] font-medium mb-1\">Result:</div>\n          <pre className=\"text-[10px] bg-muted p-2 rounded max-h-48 overflow-y-auto whitespace-pre-wrap\">\n            {JSON.stringify(parsedResult, null, 2)}\n          </pre>\n        </div>\n      )}\n    </div>\n  );\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the deleteMemory tool.\n * Displays deletion status and message.\n */\nexport function DeleteMemoryRenderer({\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span\n          className={parsedResult?.success ? \"text-green-500\" : \"text-red-500\"}\n        >\n          {parsedResult?.success ? \"Deleted\" : \"Failed to delete\"}\n        </span>\n      </div>\n      {parsedResult?.message && state !== \"executing\" && (\n        <div className=\"text-muted-foreground\">{parsedResult.message}</div>\n      )}\n    </div>\n  );\n}\n","import { Eye } from \"lucide-react\";\nimport type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the readDocument tool.\n * Shows document read status.\n */\nexport function ReadDocumentRenderer({\n  parsedResult,\n  state,\n}: ToolRendererProps) {\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"text-[10px] font-medium text-muted-foreground/70 uppercase tracking-wide mb-0.5\">\n        Read Document\n      </div>\n      <div className=\"flex items-center gap-2\">\n        <Eye className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          Reading document...\n        </span>\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"text-muted-foreground\">\n          {parsedResult.hasDocument ? (\n            <span>\n              {parsedResult.title || \"Document\"} â€¢ {parsedResult.lineCount}{\" \"}\n              lines\n            </span>\n          ) : (\n            <span>No document open</span>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import { Check, Loader2, RefreshCw } from \"lucide-react\";\nimport type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for the updateDocument tool.\n * Shows compact update status. Artifact card appears in message body via ArtifactList.\n */\nexport function UpdateDocumentRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n}: ToolRendererProps) {\n  // Loading state\n  if (state === \"executing\") {\n    return (\n      <div className=\"text-xs flex items-center gap-2 text-muted-foreground py-1\">\n        <Loader2 className=\"h-3 w-3 animate-spin\" />\n        <span>{parsedArgs?.changeDescription || \"Updating document...\"}</span>\n      </div>\n    );\n  }\n\n  // Error state\n  if (parsedResult && !parsedResult.success) {\n    return (\n      <div className=\"text-xs text-destructive py-1\">\n        Failed: {parsedResult.error}\n      </div>\n    );\n  }\n\n  // Success state - compact inline display\n  if (parsedResult?.success) {\n    return (\n      <div className=\"text-xs flex items-center gap-2 py-1\">\n        <div className=\"flex items-center gap-1.5 text-green-500\">\n          <Check className=\"h-3 w-3\" />\n          <span>Updated to v{parsedResult.newVersion}</span>\n        </div>\n        {parsedArgs?.changeDescription && (\n          <>\n            <span className=\"text-muted-foreground/50\">Â·</span>\n            <RefreshCw className=\"h-3 w-3 text-muted-foreground\" />\n            <span className=\"text-muted-foreground truncate max-w-[200px]\">\n              {parsedArgs.changeDescription}\n            </span>\n          </>\n        )}\n      </div>\n    );\n  }\n\n  return null;\n}\n","import type { ToolRendererProps } from \"./types\";\n\n/**\n * Renderer for webSearch and tavilySearch tools.\n * Displays search results with links and snippets.\n * Shows AI-generated answer from Tavily when available.\n */\nexport function WebSearchRenderer({\n  parsedArgs,\n  parsedResult,\n  state,\n  ToolIcon,\n}: ToolRendererProps) {\n  const results = parsedResult?.results || [];\n  const answer = parsedResult?.answer; // Tavily's AI-generated answer\n\n  return (\n    <div className=\"text-xs space-y-1 border-l-2 border-border/40 pl-3\">\n      <div className=\"flex items-center gap-2\">\n        <ToolIcon className=\"h-3 w-3 text-muted-foreground\" />\n        <span className=\"font-mono text-muted-foreground\">\n          \"{parsedArgs?.query}\"\n        </span>\n      </div>\n\n      {parsedResult && state !== \"executing\" && (\n        <div className=\"space-y-1.5 max-h-48 overflow-y-auto\">\n          {/* Show AI answer if available (from Tavily's includeAnswer option) */}\n          {answer && (\n            <div className=\"py-1.5 px-2 bg-muted/50 rounded-md border border-border/50\">\n              <p className=\"text-muted-foreground text-[11px] leading-relaxed\">\n                {answer}\n              </p>\n            </div>\n          )}\n\n          {results.slice(0, 5).map((r: any, i: number) => (\n            <div key={i} className=\"py-1\">\n              <a\n                href={r.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"font-medium text-primary hover:underline\"\n              >\n                {r.title}\n              </a>\n              <p className=\"text-muted-foreground text-[11px] line-clamp-2\">\n                {r.content?.substring(0, 150)}\n                {r.content && r.content.length > 150 ? \"...\" : \"\"}\n              </p>\n            </div>\n          ))}\n          {results.length === 0 && !answer && (\n            <div className=\"text-muted-foreground\">No results found</div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z',\n      key: 'hod4my',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z',\n      key: 'w4yl2u',\n    },\n  ],\n  ['path', { d: 'M3 5a2 2 0 0 0 2 2h3', key: 'f2jnh7' }],\n  ['path', { d: 'M3 3v13a2 2 0 0 0 2 2h3', key: 'k8epm1' }],\n];\n\n/**\n * @component @name FolderTree\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMjAgMTBhMSAxIDAgMCAwIDEtMVY2YTEgMSAwIDAgMC0xLTFoLTIuNWExIDEgMCAwIDEtLjgtLjRsLS45LTEuMkExIDEgMCAwIDAgMTUgM2gtMmExIDEgMCAwIDAtMSAxdjVhMSAxIDAgMCAwIDEgMVoiIC8+CiAgPHBhdGggZD0iTTIwIDIxYTEgMSAwIDAgMCAxLTF2LTNhMSAxIDAgMCAwLTEtMWgtMi45YTEgMSAwIDAgMS0uODgtLjU1bC0uNDItLjg1YTEgMSAwIDAgMC0uOTItLjZIMTNhMSAxIDAgMCAwLTEgMXY1YTEgMSAwIDAgMCAxIDFaIiAvPgogIDxwYXRoIGQ9Ik0zIDVhMiAyIDAgMCAwIDIgMmgzIiAvPgogIDxwYXRoIGQ9Ik0zIDN2MTNhMiAyIDAgMCAwIDIgMmgzIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/folder-tree\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FolderTree = createLucideIcon('folder-tree', __iconNode);\n\nexport default FolderTree;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z', key: '1fy3hk' }],\n  ['line', { x1: '12', x2: '12', y1: '7', y2: '13', key: '1cppfj' }],\n  ['line', { x1: '15', x2: '9', y1: '10', y2: '10', key: '1gty7f' }],\n];\n\n/**\n * @component @name BookmarkPlus\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTkgMjEtNy00LTcgNFY1YTIgMiAwIDAgMSAyLTJoMTBhMiAyIDAgMCAxIDIgMnYxNnoiIC8+CiAgPGxpbmUgeDE9IjEyIiB4Mj0iMTIiIHkxPSI3IiB5Mj0iMTMiIC8+CiAgPGxpbmUgeDE9IjE1IiB4Mj0iOSIgeTE9IjEwIiB5Mj0iMTAiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/bookmark-plus\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookmarkPlus = createLucideIcon('bookmark-plus', __iconNode);\n\nexport default BookmarkPlus;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['rect', { width: '16', height: '20', x: '4', y: '2', rx: '2', key: '1nb95v' }],\n  ['line', { x1: '8', x2: '16', y1: '6', y2: '6', key: 'x4nwl0' }],\n  ['line', { x1: '16', x2: '16', y1: '14', y2: '18', key: 'wjye3r' }],\n  ['path', { d: 'M16 10h.01', key: '1m94wz' }],\n  ['path', { d: 'M12 10h.01', key: '1nrarc' }],\n  ['path', { d: 'M8 10h.01', key: '19clt8' }],\n  ['path', { d: 'M12 14h.01', key: '1etili' }],\n  ['path', { d: 'M8 14h.01', key: '6423bh' }],\n  ['path', { d: 'M12 18h.01', key: 'mhygvu' }],\n  ['path', { d: 'M8 18h.01', key: 'lrp35t' }],\n];\n\n/**\n * @component @name Calculator\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cmVjdCB3aWR0aD0iMTYiIGhlaWdodD0iMjAiIHg9IjQiIHk9IjIiIHJ4PSIyIiAvPgogIDxsaW5lIHgxPSI4IiB4Mj0iMTYiIHkxPSI2IiB5Mj0iNiIgLz4KICA8bGluZSB4MT0iMTYiIHgyPSIxNiIgeTE9IjE0IiB5Mj0iMTgiIC8+CiAgPHBhdGggZD0iTTE2IDEwaC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMTBoLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDEwaC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMTRoLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDE0aC4wMSIgLz4KICA8cGF0aCBkPSJNMTIgMThoLjAxIiAvPgogIDxwYXRoIGQ9Ik04IDE4aC4wMSIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/calculator\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Calculator = createLucideIcon('calculator', __iconNode);\n\nexport default Calculator;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z', key: 'p7xjir' }],\n];\n\n/**\n * @component @name Cloud\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTcuNSAxOUg5YTcgNyAwIDEgMSA2LjcxLTloMS43OWE0LjUgNC41IDAgMSAxIDAgOVoiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/cloud\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Cloud = createLucideIcon('cloud', __iconNode);\n\nexport default Cloud;\n","import type { LucideIcon } from \"lucide-react\";\n\nexport interface ToolCall {\n  id: string;\n  name: string;\n  arguments: string;\n  result?: string;\n  timestamp: number;\n}\n\nexport type ToolCallState = \"executing\" | \"complete\" | \"error\";\n\nexport interface ToolRendererProps {\n  call: ToolCall;\n  parsedArgs: any;\n  parsedResult: any;\n  state: ToolCallState;\n  ToolIcon: LucideIcon;\n}\n\n/**\n * Determine the state of a tool call based on its result\n */\nexport function getCallState(call: ToolCall): ToolCallState {\n  if (!call.result) {\n    // Check if tool has been \"executing\" too long (> 30s = likely stuck)\n    const elapsed = Date.now() - call.timestamp;\n    if (elapsed > 30000) return \"error\";\n    return \"executing\";\n  }\n\n  try {\n    const parsed = JSON.parse(call.result);\n    if (parsed.error || parsed.success === false) return \"error\";\n  } catch {}\n\n  return \"complete\";\n}\n","import type { ComponentType } from \"react\";\nimport type { ToolRendererProps } from \"./types\";\n\nexport type { ToolCall, ToolCallState, ToolRendererProps } from \"./types\";\n// Export types and utilities\nexport { getCallState } from \"./types\";\n\n// Import all renderers\nimport { CalculatorRenderer } from \"./CalculatorRenderer\";\nimport { CodeExecutionRenderer } from \"./CodeExecutionRenderer\";\nimport { CreateDocumentRenderer } from \"./CreateDocumentRenderer\";\nimport { DateTimeRenderer } from \"./DateTimeRenderer\";\nimport { DefaultToolRenderer } from \"./DefaultToolRenderer\";\nimport { DeleteMemoryRenderer } from \"./DeleteMemoryRenderer\";\nimport { EnterDocumentModeRenderer } from \"./EnterDocumentModeRenderer\";\nimport { ExitDocumentModeRenderer } from \"./ExitDocumentModeRenderer\";\nimport { FileDocumentRenderer } from \"./FileDocumentRenderer\";\nimport { ProjectContextRenderer } from \"./ProjectContextRenderer\";\nimport { QueryHistoryRenderer } from \"./QueryHistoryRenderer\";\nimport { ReadDocumentRenderer } from \"./ReadDocumentRenderer\";\nimport { ResolveConflictRenderer } from \"./ResolveConflictRenderer\";\nimport { SaveMemoryRenderer } from \"./SaveMemoryRenderer\";\nimport { SearchAllRenderer } from \"./SearchAllRenderer\";\nimport { SearchFilesRenderer } from \"./SearchFilesRenderer\";\nimport { SearchMemoriesRenderer } from \"./SearchMemoriesRenderer\";\nimport { SearchNotesRenderer } from \"./SearchNotesRenderer\";\nimport { SearchTasksRenderer } from \"./SearchTasksRenderer\";\nimport { TaskManagerRenderer } from \"./TaskManagerRenderer\";\nimport { UpdateDocumentRenderer } from \"./UpdateDocumentRenderer\";\nimport { UrlReaderRenderer } from \"./UrlReaderRenderer\";\nimport { WeatherRenderer } from \"./WeatherRenderer\";\nimport { WebSearchRenderer } from \"./WebSearchRenderer\";\n\n/**\n * Registry mapping tool names to their renderer components.\n * To add a new tool, create a XyzRenderer.tsx file and add it here.\n */\nexport const toolRenderers: Record<string, ComponentType<ToolRendererProps>> = {\n  saveMemory: SaveMemoryRenderer,\n  searchMemories: SearchMemoriesRenderer,\n  webSearch: WebSearchRenderer,\n  tavilySearch: WebSearchRenderer,\n  tavilyAdvancedSearch: WebSearchRenderer,\n  calculator: CalculatorRenderer,\n  datetime: DateTimeRenderer,\n  urlReader: UrlReaderRenderer,\n  codeExecution: CodeExecutionRenderer,\n  weather: WeatherRenderer,\n  fileDocument: FileDocumentRenderer,\n  projectContext: ProjectContextRenderer,\n  deleteMemory: DeleteMemoryRenderer,\n  // Search tools\n  searchNotes: SearchNotesRenderer,\n  searchTasks: SearchTasksRenderer,\n  searchFiles: SearchFilesRenderer,\n  queryHistory: QueryHistoryRenderer,\n  searchAll: SearchAllRenderer,\n  // Task management\n  manageTasks: TaskManagerRenderer,\n  // Canvas tools\n  createDocument: CreateDocumentRenderer,\n  updateDocument: UpdateDocumentRenderer,\n  readDocument: ReadDocumentRenderer,\n  // Document mode tools\n  enterDocumentMode: EnterDocumentModeRenderer,\n  exitDocumentMode: ExitDocumentModeRenderer,\n  // Conflict resolution\n  resolveConflict: ResolveConflictRenderer,\n};\n\n// Export the default as a named export for explicit usage\nexport { DefaultToolRenderer };\n","\"use client\";\n\nimport { useMemo } from \"react\";\nimport { MarkdownContent } from \"./MarkdownContent\";\nimport { ToolCallDisplay } from \"./ToolCallDisplay\";\n\ninterface ToolCall {\n  id: string;\n  name: string;\n  arguments: string;\n  result?: string;\n  timestamp: number;\n  textPosition?: number;\n}\n\ninterface InlineToolCallContentProps {\n  content: string;\n  toolCalls?: ToolCall[];\n  partialToolCalls?: ToolCall[];\n  isStreaming?: boolean;\n}\n\ninterface ContentSegment {\n  type: \"text\" | \"tool\";\n  content?: string;\n  toolCalls?: ToolCall[];\n}\n\n/**\n * Renders message content with tool calls inline at their actual positions.\n * Splits content at textPosition markers and interleaves tool call displays.\n */\nexport function InlineToolCallContent({\n  content,\n  toolCalls,\n  partialToolCalls,\n  isStreaming = false,\n}: InlineToolCallContentProps) {\n  // Merge and dedupe tool calls\n  const allToolCalls = useMemo(() => {\n    const combined = [...(toolCalls || [])];\n    if (partialToolCalls) {\n      for (const partial of partialToolCalls) {\n        if (!combined.some((c) => c.id === partial.id)) {\n          combined.push(partial);\n        }\n      }\n    }\n    return combined;\n  }, [toolCalls, partialToolCalls]);\n\n  // Build segments: interleave text and tool calls based on textPosition\n  const segments = useMemo<ContentSegment[]>(() => {\n    if (allToolCalls.length === 0) {\n      // No tool calls, just render content\n      return content ? [{ type: \"text\", content }] : [];\n    }\n\n    // Sort tool calls by position (or timestamp as fallback)\n    const sortedCalls = [...allToolCalls].sort((a, b) => {\n      const posA = a.textPosition ?? Infinity;\n      const posB = b.textPosition ?? Infinity;\n      if (posA !== posB) return posA - posB;\n      return a.timestamp - b.timestamp;\n    });\n\n    // Check if any tool calls have position info\n    const hasPositionInfo = sortedCalls.some(\n      (tc) => tc.textPosition !== undefined && tc.textPosition !== null,\n    );\n\n    if (!hasPositionInfo) {\n      // No position info - fall back to showing tool calls at top (legacy behavior)\n      return [\n        { type: \"tool\", toolCalls: sortedCalls },\n        ...(content ? [{ type: \"text\" as const, content }] : []),\n      ];\n    }\n\n    // Build segments by splitting content at tool call positions\n    const result: ContentSegment[] = [];\n    let lastPosition = 0;\n\n    // Group consecutive tool calls at the same position\n    const positionGroups = new Map<number, ToolCall[]>();\n    for (const tc of sortedCalls) {\n      const pos = tc.textPosition ?? content.length;\n      const existing = positionGroups.get(pos) || [];\n      existing.push(tc);\n      positionGroups.set(pos, existing);\n    }\n\n    // Sort positions and create segments\n    const positions = Array.from(positionGroups.keys()).sort((a, b) => a - b);\n\n    for (const pos of positions) {\n      // Add text before this position\n      if (pos > lastPosition) {\n        const textSegment = content.slice(lastPosition, pos);\n        if (textSegment.trim()) {\n          result.push({ type: \"text\", content: textSegment });\n        }\n      }\n\n      // Add tool calls at this position\n      const callsAtPosition = positionGroups.get(pos)!;\n      result.push({ type: \"tool\", toolCalls: callsAtPosition });\n\n      lastPosition = pos;\n    }\n\n    // Add remaining text after last tool call\n    if (lastPosition < content.length) {\n      const remainingText = content.slice(lastPosition);\n      if (remainingText.trim()) {\n        result.push({ type: \"text\", content: remainingText });\n      }\n    }\n\n    return result;\n  }, [content, allToolCalls]);\n\n  // Handle empty state\n  if (segments.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"inline-tool-content space-y-2\">\n      {segments.map((segment, index) => {\n        if (segment.type === \"text\" && segment.content) {\n          return (\n            <MarkdownContent\n              key={`text-${index}`}\n              content={segment.content}\n              isStreaming={isStreaming && index === segments.length - 1}\n            />\n          );\n        }\n\n        if (segment.type === \"tool\" && segment.toolCalls) {\n          return (\n            <ToolCallDisplay\n              key={`tool-${index}`}\n              toolCalls={segment.toolCalls}\n              partialToolCalls={[]}\n            />\n          );\n        }\n\n        return null;\n      })}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { useMutation, useQuery } from \"convex/react\";\nimport { Bookmark, BookmarkCheck } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { analytics } from \"@/lib/analytics\";\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\n\ninterface BookmarkButtonProps {\n  messageId: Id<\"messages\">;\n  conversationId: Id<\"conversations\">;\n}\n\nexport function BookmarkButton({\n  messageId,\n  conversationId,\n}: BookmarkButtonProps) {\n  const [showDialog, setShowDialog] = useState(false);\n  const [note, setNote] = useState(\"\");\n  const [tags, setTags] = useState(\"\");\n\n  // Check if this is a temporary optimistic message (not yet persisted)\n  const isTempMessage =\n    typeof messageId === \"string\" && messageId.startsWith(\"temp-\");\n\n  // Skip query for temporary optimistic messages\n  const existingBookmark = useQuery(\n    // @ts-ignore - Type depth exceeded with complex Convex query\n    api.bookmarks.getByMessage,\n    isTempMessage ? \"skip\" : { messageId },\n  );\n  const createBookmark = useMutation(api.bookmarks.create);\n  const removeBookmark = useMutation(api.bookmarks.remove);\n  const updateBookmark = useMutation(api.bookmarks.update);\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const recordAction = useMutation(api.usage.mutations.recordAction);\n\n  const isBookmarked = !!existingBookmark;\n\n  const handleToggleBookmark = async () => {\n    if (isBookmarked && existingBookmark) {\n      try {\n        await removeBookmark({ bookmarkId: existingBookmark._id });\n        toast.success(\"Bookmark removed\");\n\n        // Track bookmark deletion\n        analytics.track(\"bookmark_deleted\", {\n          source: \"message\",\n        });\n      } catch (_error) {\n        toast.error(\"Failed to remove bookmark\");\n      }\n    } else {\n      setShowDialog(true);\n    }\n  };\n\n  const handleSaveBookmark = async () => {\n    try {\n      const tagList = tags\n        ? tags.split(\",\").map((t: any) => t.trim())\n        : undefined;\n\n      if (isBookmarked && existingBookmark) {\n        await updateBookmark({\n          bookmarkId: existingBookmark._id,\n          note: note || undefined,\n          tags: tagList,\n        });\n        toast.success(\"Bookmark updated\");\n\n        // Track bookmark update\n        analytics.track(\"bookmark_updated\", {\n          hasNote: !!note,\n          tagCount: tagList?.length || 0,\n        });\n      } else {\n        await createBookmark({\n          messageId,\n          conversationId,\n          note: note || undefined,\n          tags: tagList,\n        });\n        toast.success(\"Bookmark created\");\n\n        // Track bookmark creation\n        analytics.track(\"bookmark_created\", {\n          source: \"message\",\n          hasNote: !!note,\n          tagCount: tagList?.length || 0,\n        });\n        recordAction({ actionType: \"bookmark_message\", resourceId: messageId });\n      }\n      setShowDialog(false);\n      setNote(\"\");\n      setTags(\"\");\n    } catch (_error) {\n      toast.error(\"Failed to save bookmark\");\n    }\n  };\n\n  return (\n    <>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n            onClick={handleToggleBookmark}\n          >\n            {isBookmarked ? (\n              <BookmarkCheck className=\"h-4 w-4 text-primary\" />\n            ) : (\n              <Bookmark className=\"h-4 w-4\" />\n            )}\n            <span className=\"sr-only\">\n              {isBookmarked ? \"Remove bookmark\" : \"Bookmark message\"}\n            </span>\n          </Button>\n        </TooltipTrigger>\n        <TooltipContent>\n          <p>{isBookmarked ? \"Remove bookmark (B)\" : \"Bookmark message (B)\"}</p>\n        </TooltipContent>\n      </Tooltip>\n\n      <Dialog open={showDialog} onOpenChange={setShowDialog}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>\n              {isBookmarked ? \"Edit Bookmark\" : \"Add Bookmark\"}\n            </DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 py-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"note\">Note (optional)</Label>\n              <Textarea\n                id=\"note\"\n                placeholder=\"Add a note about why you bookmarked this...\"\n                value={note}\n                onChange={(e) => setNote(e.target.value)}\n                rows={3}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"tags\">Tags (optional)</Label>\n              <Input\n                id=\"tags\"\n                placeholder=\"important, code, reference (comma-separated)\"\n                value={tags}\n                onChange={(e) => setTags(e.target.value)}\n              />\n              <p className=\"text-xs text-muted-foreground\">\n                Separate tags with commas\n              </p>\n            </div>\n          </div>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setShowDialog(false)}>\n              Cancel\n            </Button>\n            <Button onClick={handleSaveBookmark}>\n              {isBookmarked ? \"Update\" : \"Save\"} Bookmark\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc, Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation } from \"convex/react\";\nimport { MoreHorizontal, Trash2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { analytics } from \"@/lib/analytics\";\nimport type { OptimisticMessage } from \"@/types/optimistic\";\n\ninterface MessageActionsMenuProps {\n  message: Doc<\"messages\"> | OptimisticMessage;\n  isGenerating: boolean;\n  isUser: boolean;\n}\n\nexport function MessageActionsMenu({ message }: MessageActionsMenuProps) {\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const deleteMsg = useMutation(api.chat.deleteMessage);\n\n  const handleDelete = async () => {\n    try {\n      await deleteMsg({ messageId: message._id as Id<\"messages\"> });\n\n      // Track message deletion\n      analytics.track(\"message_deleted\", {\n        messageId: message._id,\n        conversationId: message.conversationId,\n      });\n    } catch (error) {\n      console.error(\"Failed to delete:\", error);\n    }\n  };\n\n  return (\n    <DropdownMenu>\n      <Tooltip>\n        <TooltipTrigger asChild>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n            >\n              <MoreHorizontal className=\"h-3.5 w-3.5\" />\n              <span className=\"sr-only\">More actions</span>\n            </Button>\n          </DropdownMenuTrigger>\n        </TooltipTrigger>\n        <TooltipContent>\n          <p>More actions</p>\n        </TooltipContent>\n      </Tooltip>\n\n      <DropdownMenuContent align=\"end\" className=\"w-48\">\n        {/* Delete - now the only action in overflow menu */}\n        <DropdownMenuItem\n          onClick={handleDelete}\n          className=\"text-destructive focus:text-destructive\"\n        >\n          <Trash2 className=\"mr-2 h-4 w-4\" />\n          <span>Delete</span>\n        </DropdownMenuItem>\n      </DropdownMenuContent>\n    </DropdownMenu>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc, Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation } from \"convex/react\";\nimport {\n  Bookmark,\n  Copy,\n  FileText,\n  GitBranch,\n  MoreHorizontal,\n  Presentation,\n  RotateCcw,\n  Trash2,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport type { OptimisticMessage } from \"@/types/optimistic\";\nimport { QuickModelSwitcher } from \"./QuickModelSwitcher\";\n\ninterface MessageActionsMenuMobileProps {\n  message: Doc<\"messages\"> | OptimisticMessage;\n  isGenerating: boolean;\n  isUser: boolean;\n  onCopy: () => void;\n  onSaveAsNote?: () => void;\n  onBookmark?: () => void;\n  onCreatePresentation?: () => void;\n}\n\nexport function MessageActionsMenuMobile({\n  message,\n  isGenerating,\n  isUser,\n  onCopy,\n  onSaveAsNote,\n  onBookmark,\n  onCreatePresentation,\n}: MessageActionsMenuMobileProps) {\n  const [modelSelectorOpen, setModelSelectorOpen] = useState(false);\n  const router = useRouter();\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const regenerate = useMutation(api.chat.regenerate);\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const deleteMsg = useMutation(api.chat.deleteMessage);\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const branchFromMessage = useMutation(api.chat.branchFromMessage);\n\n  const handleRegenerate = async (modelId?: string) => {\n    try {\n      await regenerate({\n        messageId: message._id as Id<\"messages\">,\n        modelId,\n      });\n    } catch (error) {\n      console.error(\"Failed to regenerate:\", error);\n    }\n  };\n\n  const handleBranch = async () => {\n    try {\n      const newConversationId = await branchFromMessage({\n        messageId: message._id as Id<\"messages\">,\n      });\n      router.push(`/chat/${newConversationId}`);\n    } catch (error) {\n      console.error(\"Failed to branch:\", error);\n    }\n  };\n\n  const handleDelete = async () => {\n    try {\n      await deleteMsg({ messageId: message._id as Id<\"messages\"> });\n    } catch (error) {\n      console.error(\"Failed to delete:\", error);\n    }\n  };\n\n  return (\n    <>\n      <DropdownMenu>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n              >\n                <MoreHorizontal className=\"h-3.5 w-3.5\" />\n                <span className=\"sr-only\">Actions</span>\n              </Button>\n            </DropdownMenuTrigger>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>Actions</p>\n          </TooltipContent>\n        </Tooltip>\n\n        <DropdownMenuContent align=\"end\" className=\"w-48\">\n          {/* Copy */}\n          <DropdownMenuItem onClick={onCopy}>\n            <Copy className=\"mr-2 h-4 w-4\" />\n            <span>Copy</span>\n          </DropdownMenuItem>\n\n          {/* Bookmark */}\n          {onBookmark && (\n            <DropdownMenuItem onClick={onBookmark}>\n              <Bookmark className=\"mr-2 h-4 w-4\" />\n              <span>Bookmark</span>\n            </DropdownMenuItem>\n          )}\n\n          {/* Save as Note */}\n          {onSaveAsNote && (\n            <DropdownMenuItem onClick={onSaveAsNote}>\n              <FileText className=\"mr-2 h-4 w-4\" />\n              <span>Save as Note</span>\n            </DropdownMenuItem>\n          )}\n\n          {/* Create Presentation */}\n          {onCreatePresentation && (\n            <DropdownMenuItem onClick={onCreatePresentation}>\n              <Presentation className=\"mr-2 h-4 w-4\" />\n              <span>Create Presentation</span>\n            </DropdownMenuItem>\n          )}\n\n          {/* Separator after optional actions */}\n          {(onBookmark || onSaveAsNote || onCreatePresentation) && (\n            <DropdownMenuSeparator />\n          )}\n\n          {/* Regenerate - only for assistant messages when not generating */}\n          {!isUser && !isGenerating && (\n            <>\n              <DropdownMenuItem onClick={() => setModelSelectorOpen(true)}>\n                <RotateCcw className=\"mr-2 h-4 w-4\" />\n                <span>Regenerate</span>\n              </DropdownMenuItem>\n              <DropdownMenuSeparator />\n            </>\n          )}\n\n          {/* Branch */}\n          <DropdownMenuItem onClick={handleBranch}>\n            <GitBranch className=\"mr-2 h-4 w-4\" />\n            <span>Branch conversation</span>\n          </DropdownMenuItem>\n\n          <DropdownMenuSeparator />\n\n          {/* Delete */}\n          <DropdownMenuItem\n            onClick={handleDelete}\n            className=\"text-destructive focus:text-destructive\"\n          >\n            <Trash2 className=\"mr-2 h-4 w-4\" />\n            <span>Delete</span>\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n\n      <QuickModelSwitcher\n        open={modelSelectorOpen}\n        onOpenChange={setModelSelectorOpen}\n        currentModel={message.model || \"\"}\n        onSelectModel={(modelId) => {\n          handleRegenerate(modelId);\n        }}\n        mode=\"single\"\n        showTrigger={false}\n      />\n    </>\n  );\n}\n","\"use client\";\n\nimport { Loader2, Volume2, VolumeX } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useTTSPlayer } from \"@/contexts/TTSContext\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TTSButtonProps {\n  text: string;\n  messageId?: string;\n  className?: string;\n}\n\nexport function TTSButton({ text, messageId, className }: TTSButtonProps) {\n  const { state, playFromText, pause, resume, seekTo } = useTTSPlayer();\n  const isCurrent = state.sourceMessageId === messageId;\n  const isLoading = state.isLoading && isCurrent;\n  const isPlaying = state.isPlaying && isCurrent;\n\n  const handlePlay = async () => {\n    if (!text.trim()) return;\n\n    // Toggle play/pause when clicking the same message\n    if (isCurrent && !state.isLoading) {\n      if (isPlaying) {\n        pause();\n        return;\n      }\n\n      // If we reached the end, restart from the beginning\n      if (state.duration && state.currentTime >= state.duration - 0.25) {\n        seekTo(0);\n      }\n      await resume();\n      return;\n    }\n\n    await playFromText({ text, messageId });\n  };\n\n  return (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={handlePlay}\n      disabled={isLoading || !text.trim()}\n      className={cn(\n        \"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\",\n        className,\n      )}\n      title={isPlaying ? \"Pause text-to-speech\" : \"Play with text-to-speech\"}\n    >\n      {isLoading ? (\n        <Loader2 className=\"w-3.5 h-3.5 animate-spin\" />\n      ) : isPlaying ? (\n        <VolumeX className=\"w-3.5 h-3.5\" />\n      ) : (\n        <Volume2 className=\"w-3.5 h-3.5\" />\n      )}\n      <span className=\"sr-only\">\n        {isLoading ? \"Generating...\" : isPlaying ? \"Stop\" : \"Play\"}\n      </span>\n    </Button>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc, Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport {\n  Check,\n  Copy,\n  FileText,\n  GitBranch,\n  Pencil,\n  Presentation,\n  RotateCcw,\n  Square,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useEffect, useState } from \"react\";\nimport { CreateNoteDialog } from \"@/components/notes/CreateNoteDialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useFeatureToggles } from \"@/hooks/useFeatureToggles\";\nimport { useMobileDetect } from \"@/hooks/useMobileDetect\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { cn } from \"@/lib/utils\";\nimport type { OptimisticMessage } from \"@/types/optimistic\";\nimport { BookmarkButton } from \"./BookmarkButton\";\nimport { MessageActionsMenu } from \"./MessageActionsMenu\";\nimport { MessageActionsMenuMobile } from \"./MessageActionsMenuMobile\";\nimport { QuickModelSwitcher } from \"./QuickModelSwitcher\";\nimport { TTSButton } from \"./TTSButton\";\n\ninterface MessageActionsProps {\n  message: Doc<\"messages\"> | OptimisticMessage;\n  nextMessage?: Doc<\"messages\"> | OptimisticMessage;\n  readOnly?: boolean;\n  onEdit?: () => void;\n}\n\nexport function MessageActions({\n  message,\n  nextMessage,\n  readOnly,\n  onEdit,\n}: MessageActionsProps) {\n  const [copied, setCopied] = useState(false);\n  const [showCreateNote, setShowCreateNote] = useState(false);\n  const [modelSelectorOpen, setModelSelectorOpen] = useState(false);\n  const router = useRouter();\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const _user = useQuery(api.users.getCurrentUser as any);\n  const retryMessage = useMutation(api.chat.retryMessage);\n  const stop = useMutation(api.chat.stopGeneration);\n  const regenerate = useMutation(api.chat.regenerate);\n  const branchFromMessage = useMutation(api.chat.branchFromMessage);\n  // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n  const recordAction = useMutation(api.usage.mutations.recordAction);\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const sources = useQuery(\n    api.sources.operations.getSources,\n    message.role === \"assistant\" && !message._id.startsWith(\"temp_\")\n      ? { messageId: message._id as Id<\"messages\"> }\n      : \"skip\",\n  );\n  const { isMobile } = useMobileDetect();\n  const features = useFeatureToggles();\n\n  // Phase 4: Use new preference hooks\n  const prefAlwaysShowActions = useUserPreference(\"alwaysShowMessageActions\");\n  const prefTtsEnabled = useUserPreference(\"ttsEnabled\");\n\n  const isUser = message.role === \"user\";\n  const isGenerating = [\"pending\", \"generating\"].includes(message.status);\n  const _alwaysShow = prefAlwaysShowActions;\n  const ttsEnabled = prefTtsEnabled;\n  const shouldShowRetry =\n    isUser && nextMessage?.status === \"error\" && !isGenerating;\n\n  // Listen for keyboard shortcut to trigger save as note\n  useEffect(() => {\n    const handleSaveAsNote = (e: Event) => {\n      const customEvent = e as CustomEvent<{ messageId: string }>;\n      if (customEvent.detail.messageId === message._id) {\n        setShowCreateNote(true);\n      }\n    };\n\n    window.addEventListener(\"save-message-as-note\", handleSaveAsNote);\n    return () => {\n      window.removeEventListener(\"save-message-as-note\", handleSaveAsNote);\n    };\n  }, [message._id]);\n\n  // Listen for keyboard shortcut to open regenerate model selector\n  useEffect(() => {\n    const handleOpenRegenerateSelector = (e: Event) => {\n      const customEvent = e as CustomEvent<{ messageId: string }>;\n      if (\n        customEvent.detail.messageId === message._id &&\n        !isUser &&\n        !isGenerating\n      ) {\n        setModelSelectorOpen(true);\n      }\n    };\n\n    window.addEventListener(\n      \"open-regenerate-model-selector\",\n      handleOpenRegenerateSelector,\n    );\n    return () => {\n      window.removeEventListener(\n        \"open-regenerate-model-selector\",\n        handleOpenRegenerateSelector,\n      );\n    };\n  }, [message._id, isUser, isGenerating]);\n\n  const handleCopy = async () => {\n    let text = message.content || message.partialContent || \"\";\n\n    // Append sources for assistant messages\n    if (message.role === \"assistant\" && sources?.length) {\n      text += \"\\n\\n**Sources:**\\n\";\n      for (const src of sources) {\n        text += `- [${src.position}] [${src.title || src.url}](${src.url})\\n`;\n      }\n    }\n\n    await navigator.clipboard.writeText(text);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n    recordAction({ actionType: \"copy_message\", resourceId: message._id });\n  };\n\n  const handleBranch = async () => {\n    try {\n      const newConversationId = await branchFromMessage({\n        messageId: message._id as Id<\"messages\">,\n      });\n      recordAction({ actionType: \"branch_message\", resourceId: message._id });\n      router.push(`/chat/${newConversationId}`);\n    } catch (error) {\n      console.error(\"Failed to branch:\", error);\n    }\n  };\n\n  const handleRegenerate = async (modelId?: string) => {\n    try {\n      await regenerate({\n        messageId: message._id as Id<\"messages\">,\n        modelId,\n      });\n      recordAction({\n        actionType: \"regenerate_message\",\n        resourceId: message._id,\n      });\n    } catch (error) {\n      console.error(\"Failed to regenerate:\", error);\n    }\n  };\n\n  const handleCreatePresentation = () => {\n    recordAction({\n      actionType: \"create_presentation\",\n      resourceId: message._id,\n    });\n    router.push(\n      `/slides/new?conversationId=${message.conversationId}&messageId=${message._id}`,\n    );\n  };\n\n  const [_bookmarkDialogOpen, setBookmarkDialogOpen] = useState(false);\n\n  const handleBookmark = () => {\n    setBookmarkDialogOpen(true);\n  };\n\n  const handleSaveAsNoteClick = () => {\n    recordAction({ actionType: \"save_as_note\", resourceId: message._id });\n    setShowCreateNote(true);\n  };\n\n  // Mobile: Single menu with all actions\n  if (isMobile && !readOnly) {\n    return (\n      <>\n        <div className=\"flex items-center gap-2\">\n          <MessageActionsMenuMobile\n            message={message}\n            isGenerating={isGenerating}\n            isUser={isUser}\n            onCopy={handleCopy}\n            onSaveAsNote={\n              features.showNotes ? handleSaveAsNoteClick : undefined\n            }\n            onBookmark={features.showBookmarks ? handleBookmark : undefined}\n            onCreatePresentation={\n              features.showSlides &&\n              !isUser &&\n              (message.content || message.partialContent)\n                ? handleCreatePresentation\n                : undefined\n            }\n          />\n        </div>\n\n        <CreateNoteDialog\n          open={showCreateNote}\n          onOpenChange={setShowCreateNote}\n          initialContent={message.content || message.partialContent || \"\"}\n          sourceMessageId={message._id as Id<\"messages\">}\n          sourceConversationId={message.conversationId}\n        />\n\n        {features.showBookmarks && (\n          <BookmarkButton\n            messageId={message._id as Id<\"messages\">}\n            conversationId={message.conversationId}\n          />\n        )}\n      </>\n    );\n  }\n\n  // Desktop: Visible buttons + overflow menu\n  return (\n    <>\n      <div\n        className={cn(\"flex items-center gap-2\", \"transition-all duration-200\")}\n      >\n        {/* Copy Button */}\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n              onClick={handleCopy}\n            >\n              {copied ? (\n                <Check className=\"w-3.5 h-3.5\" />\n              ) : (\n                <Copy className=\"w-3.5 h-3.5\" />\n              )}\n              <span className=\"sr-only\">{copied ? \"Copied\" : \"Copy\"}</span>\n            </Button>\n          </TooltipTrigger>\n          <TooltipContent>\n            <p>{copied ? \"Copied!\" : \"Copy message (C)\"}</p>\n          </TooltipContent>\n        </Tooltip>\n\n        {!readOnly && (\n          <>\n            {/* Edit Button - only for user messages */}\n            {isUser && onEdit && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                    onClick={onEdit}\n                  >\n                    <Pencil className=\"w-3.5 h-3.5\" />\n                    <span className=\"sr-only\">Edit</span>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Edit message (E)</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n\n            {/* Conditional: Retry or Stop */}\n            {shouldShowRetry && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                    onClick={() =>\n                      retryMessage({ messageId: message._id as Id<\"messages\"> })\n                    }\n                  >\n                    <RotateCcw className=\"w-3.5 h-3.5\" />\n                    <span className=\"sr-only\">Retry</span>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Retry message</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n\n            {isGenerating && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                    onClick={() =>\n                      stop({ conversationId: message.conversationId })\n                    }\n                  >\n                    <Square className=\"w-3.5 h-3.5\" />\n                    <span className=\"sr-only\">Stop</span>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Stop generation</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n\n            {/* Bookmark Button */}\n            {features.showBookmarks && (\n              <BookmarkButton\n                messageId={message._id as Id<\"messages\">}\n                conversationId={message.conversationId}\n              />\n            )}\n\n            {/* Save as Note Button */}\n            {features.showNotes && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                    onClick={handleSaveAsNoteClick}\n                  >\n                    <FileText className=\"w-3.5 h-3.5\" />\n                    <span className=\"sr-only\">Save as Note</span>\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Save as note (N)</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n\n            {/* Create Presentation Button - only for assistant messages with content */}\n            {features.showSlides &&\n              !isUser &&\n              (message.content || message.partialContent) && (\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                      onClick={handleCreatePresentation}\n                    >\n                      <Presentation className=\"w-3.5 h-3.5\" />\n                      <span className=\"sr-only\">Create Presentation</span>\n                    </Button>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <p>Create presentation</p>\n                  </TooltipContent>\n                </Tooltip>\n              )}\n\n            {/* Branch Button */}\n            <Tooltip>\n              <TooltipTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                  onClick={handleBranch}\n                >\n                  <GitBranch className=\"w-3.5 h-3.5\" />\n                  <span className=\"sr-only\">Branch</span>\n                </Button>\n              </TooltipTrigger>\n              <TooltipContent>\n                <p>Branch conversation (B)</p>\n              </TooltipContent>\n            </Tooltip>\n\n            {/* Regenerate Button - only for assistant messages when not generating */}\n            {!isUser && !isGenerating && (\n              <>\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      className=\"h-6 w-6 p-0 text-muted-foreground/70 hover:bg-background/20 hover:text-foreground\"\n                      onClick={() => setModelSelectorOpen(true)}\n                    >\n                      <RotateCcw className=\"w-3.5 h-3.5\" />\n                      <span className=\"sr-only\">Regenerate</span>\n                    </Button>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <p>Regenerate response (R)</p>\n                  </TooltipContent>\n                </Tooltip>\n                <QuickModelSwitcher\n                  open={modelSelectorOpen}\n                  onOpenChange={setModelSelectorOpen}\n                  currentModel={message.model || \"\"}\n                  onSelectModel={(modelId) => {\n                    handleRegenerate(modelId);\n                  }}\n                  mode=\"single\"\n                  showTrigger={false}\n                />\n              </>\n            )}\n\n            {/* TTS Button - only for complete assistant messages when TTS is enabled */}\n            {!isUser &&\n              message.status === \"complete\" &&\n              ttsEnabled &&\n              (message.content || message.partialContent) && (\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <TTSButton\n                      text={message.content || message.partialContent || \"\"}\n                      messageId={message._id}\n                    />\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <p>Play with text-to-speech</p>\n                  </TooltipContent>\n                </Tooltip>\n              )}\n\n            {/* Overflow Menu (Delete only now) */}\n            <MessageActionsMenu\n              message={message}\n              isGenerating={isGenerating}\n              isUser={isUser}\n            />\n          </>\n        )}\n      </div>\n\n      {/* CreateNoteDialog */}\n      <CreateNoteDialog\n        open={showCreateNote}\n        onOpenChange={setShowCreateNote}\n        initialContent={message.content || message.partialContent || \"\"}\n        sourceMessageId={message._id as Id<\"messages\">}\n        sourceConversationId={message.conversationId}\n      />\n    </>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z',\n      key: 'uqj9uw',\n    },\n  ],\n  ['line', { x1: '22', x2: '16', y1: '9', y2: '15', key: '1ewh16' }],\n  ['line', { x1: '16', x2: '22', y1: '9', y2: '15', key: '5ykzw1' }],\n];\n\n/**\n * @component @name VolumeX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNC43MDJhLjcwNS43MDUgMCAwIDAtMS4yMDMtLjQ5OEw2LjQxMyA3LjU4N0ExLjQgMS40IDAgMCAxIDUuNDE2IDhIM2ExIDEgMCAwIDAtMSAxdjZhMSAxIDAgMCAwIDEgMWgyLjQxNmExLjQgMS40IDAgMCAxIC45OTcuNDEzbDMuMzgzIDMuMzg0QS43MDUuNzA1IDAgMCAwIDExIDE5LjI5OHoiIC8+CiAgPGxpbmUgeDE9IjIyIiB4Mj0iMTYiIHkxPSI5IiB5Mj0iMTUiIC8+CiAgPGxpbmUgeDE9IjE2IiB4Mj0iMjIiIHkxPSI5IiB5Mj0iMTUiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/volume-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst VolumeX = createLucideIcon('volume-x', __iconNode);\n\nexport default VolumeX;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z', key: '169p4p' }],\n  ['path', { d: 'm9 10 2 2 4-4', key: '1gnqz4' }],\n];\n\n/**\n * @component @name BookmarkCheck\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTkgMjEtNy00LTcgNFY1YTIgMiAwIDAgMSAyLTJoMTBhMiAyIDAgMCAxIDIgMloiIC8+CiAgPHBhdGggZD0ibTkgMTAgMiAyIDQtNCIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/bookmark-check\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst BookmarkCheck = createLucideIcon('bookmark-check', __iconNode);\n\nexport default BookmarkCheck;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z',\n      key: 'uqj9uw',\n    },\n  ],\n  ['path', { d: 'M16 9a5 5 0 0 1 0 6', key: '1q6k2b' }],\n  ['path', { d: 'M19.364 18.364a9 9 0 0 0 0-12.728', key: 'ijwkga' }],\n];\n\n/**\n * @component @name Volume2\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTEgNC43MDJhLjcwNS43MDUgMCAwIDAtMS4yMDMtLjQ5OEw2LjQxMyA3LjU4N0ExLjQgMS40IDAgMCAxIDUuNDE2IDhIM2ExIDEgMCAwIDAtMSAxdjZhMSAxIDAgMCAwIDEgMWgyLjQxNmExLjQgMS40IDAgMCAxIC45OTcuNDEzbDMuMzgzIDMuMzg0QS43MDUuNzA1IDAgMCAwIDExIDE5LjI5OHoiIC8+CiAgPHBhdGggZD0iTTE2IDlhNSA1IDAgMCAxIDAgNiIgLz4KICA8cGF0aCBkPSJNMTkuMzY0IDE4LjM2NGE5IDkgMCAwIDAgMC0xMi43MjgiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/volume-2\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Volume2 = createLucideIcon('volume-2', __iconNode);\n\nexport default Volume2;\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ChevronDown, ChevronRight, GitBranch } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface MessageBranchIndicatorProps {\n  messageId: Id<\"messages\">;\n}\n\nexport function MessageBranchIndicator({\n  messageId,\n}: MessageBranchIndicatorProps) {\n  const router = useRouter();\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  // Check if this is a temporary optimistic message (not yet persisted)\n  const isTempMessage =\n    typeof messageId === \"string\" && messageId.startsWith(\"temp-\");\n\n  // Skip query for temporary optimistic messages\n  // @ts-ignore - Type depth exceeded with complex Convex query\n  const childBranches = useQuery(\n    api.conversations.getChildBranchesFromMessage,\n    isTempMessage ? \"skip\" : { messageId },\n  );\n\n  // Don't render if no branches\n  if (!childBranches || childBranches.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"my-3\">\n      {/* Divider with branch count */}\n      <div\n        className=\"flex items-center gap-2 cursor-pointer group\"\n        onClick={() => setIsExpanded(!isExpanded)}\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setIsExpanded(!isExpanded);\n          }\n        }}\n        aria-expanded={isExpanded}\n        aria-label={`${childBranches.length} branch${childBranches.length === 1 ? \"\" : \"es\"} from this message`}\n      >\n        <span className=\"text-xs text-muted-foreground group-hover:text-foreground transition-colors\">\n          Branches ({childBranches.length})\n        </span>\n        <div className=\"flex-1 border-t border-dashed border-border/40 group-hover:border-border/60 transition-colors\" />\n        {isExpanded ? (\n          <ChevronDown className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        ) : (\n          <ChevronRight className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        )}\n      </div>\n\n      {/* Expandable list of child branches */}\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.2, ease: [0.2, 0, 0, 1] }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"mt-2 space-y-1 pl-2\">\n              {childBranches.map(\n                (branch: { _id: string; title: string; createdAt: number }) => (\n                  <Button\n                    key={branch._id}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"w-full justify-start h-auto py-2 px-2 text-left font-normal hover:bg-accent/50\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      router.push(`/chat/${branch._id}`);\n                    }}\n                  >\n                    <div className=\"flex items-start gap-2 w-full min-w-0\">\n                      <GitBranch className=\"h-3.5 w-3.5 mt-0.5 flex-shrink-0 text-muted-foreground\" />\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm truncate\">{branch.title}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(branch.createdAt).toLocaleDateString(\n                            undefined,\n                            {\n                              month: \"short\",\n                              day: \"numeric\",\n                              hour: \"2-digit\",\n                              minute: \"2-digit\",\n                            },\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                  </Button>\n                ),\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","import { type RefCallback, useCallback, useRef } from \"react\";\n\nexport function useSyncedScroll(enabled = true) {\n  const refs = useRef<Set<HTMLElement>>(new Set());\n  const syncing = useRef(false);\n\n  const register: RefCallback<HTMLElement> = useCallback(\n    (el) => {\n      if (!el) return;\n\n      refs.current.add(el);\n\n      const handleScroll = () => {\n        if (!enabled || syncing.current) return;\n\n        syncing.current = true;\n\n        // Calculate scroll percentage\n        const scrollPercent =\n          el.scrollTop / (el.scrollHeight - el.clientHeight);\n\n        // Sync to other panels via RAF (60fps throttle)\n        requestAnimationFrame(() => {\n          for (const other of refs.current) {\n            if (other !== el) {\n              other.scrollTop =\n                scrollPercent * (other.scrollHeight - other.clientHeight);\n            }\n          }\n          syncing.current = false;\n        });\n      };\n\n      // Passive listener for mobile performance\n      el.addEventListener(\"scroll\", handleScroll, { passive: true });\n\n      return () => {\n        el.removeEventListener(\"scroll\", handleScroll);\n        refs.current.delete(el);\n      };\n    },\n    [enabled],\n  );\n\n  return { register };\n}\n","\"use client\";\n\nimport { Check } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface VotingControlsProps {\n  onVote: () => void;\n  isVoted?: boolean;\n  hasVoted?: boolean;\n  label: string;\n}\n\nexport function VotingControls({\n  onVote,\n  isVoted,\n  hasVoted,\n  label,\n}: VotingControlsProps) {\n  return (\n    <div className=\"flex gap-2\">\n      {hasVoted ? (\n        isVoted ? (\n          <div className=\"flex-1 flex items-center justify-center gap-2 text-sm font-medium text-primary py-2 border rounded-md bg-primary/10 border-primary/20\">\n            <Check className=\"w-4 h-4\" />\n            Voted\n          </div>\n        ) : null\n      ) : (\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          onClick={onVote}\n          className=\"flex-1 hover:bg-primary hover:text-primary-foreground transition-all duration-200\"\n        >\n          {label}\n        </Button>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport type { Doc } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { forwardRef } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { MarkdownContent } from \"./MarkdownContent\";\nimport { VotingControls } from \"./VotingControls\";\n\ninterface ComparisonPanelProps {\n  message: Doc<\"messages\">;\n  index: number;\n  showModelName: boolean;\n  showStats: boolean;\n  onVote: () => void;\n  isVoted?: boolean;\n  hasVoted?: boolean;\n  duration?: number | null;\n}\n\nexport const ComparisonPanel = forwardRef<HTMLDivElement, ComparisonPanelProps>(\n  (\n    {\n      message,\n      index,\n      showModelName,\n      showStats,\n      onVote,\n      isVoted,\n      hasVoted,\n      duration,\n    },\n    ref,\n  ) => {\n    const isGenerating = [\"pending\", \"generating\"].includes(message.status);\n    const displayContent = message.partialContent || message.content || \"\";\n    const modelName = message.model?.split(\":\")[1] || message.model;\n\n    // Format duration helper\n    const formatDuration = (ms: number | null) => {\n      if (ms === null) return \"â€”\";\n      if (ms < 1000) return `${ms}ms`;\n      return `${(ms / 1000).toFixed(1)}s`;\n    };\n\n    return (\n      <div\n        ref={ref}\n        className=\"flex flex-col h-full border rounded-lg overflow-hidden\"\n      >\n        {/* Header */}\n        <div className=\"flex flex-col items-start gap-2 p-3 border-b bg-muted/30\">\n          <div>\n            {showModelName ? (\n              <Badge variant=\"secondary\">{modelName}</Badge>\n            ) : (\n              <Badge variant=\"outline\">Model {index + 1}</Badge>\n            )}\n          </div>\n          {showStats && (\n            <div className=\"text-xs text-muted-foreground flex gap-2 w-full overflow-hidden text-ellipsis whitespace-nowrap pl-2\">\n              <span>{message.inputTokens?.toLocaleString() || 0} in</span>\n              <span>â€¢</span>\n              <span>{message.outputTokens?.toLocaleString() || 0} out</span>\n              <span>â€¢</span>\n              <span className=\"font-mono\">\n                ${message.cost?.toFixed(4) || \"0.0000\"}\n              </span>\n              {duration !== undefined && (\n                <>\n                  <span>â€¢</span>\n                  <span className=\"font-mono\">{formatDuration(duration)}</span>\n                </>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Content */}\n        <div className=\"flex-1 overflow-y-auto p-4\">\n          {displayContent ? (\n            <MarkdownContent\n              content={displayContent}\n              isStreaming={isGenerating}\n            />\n          ) : (\n            <div className=\"flex gap-1 items-center h-6\">\n              <span className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce\" />\n              <span className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce delay-150\" />\n              <span className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce delay-300\" />\n            </div>\n          )}\n        </div>\n\n        {/* Footer - Voting */}\n        {message.status === \"complete\" && (\n          <div className=\"p-3 border-t\">\n            <VotingControls\n              onVote={onVote}\n              isVoted={isVoted}\n              hasVoted={hasVoted}\n              label=\"This is better\"\n            />\n          </div>\n        )}\n      </div>\n    );\n  },\n);\n\nComparisonPanel.displayName = \"ComparisonPanel\";\n","\"use client\";\n\nimport type { Doc } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMemo, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { MODEL_CONFIG } from \"@/lib/ai/models\";\n\ntype ConsolidationMode = \"same-chat\" | \"new-chat\";\n\ninterface ConsolidateDialogProps {\n  open: boolean;\n  comparisonGroupId: string;\n  messages: Doc<\"messages\">[];\n  onConfirm: (model: string, mode: ConsolidationMode) => void;\n  onClose: () => void;\n}\n\nexport function ConsolidateDialog({\n  open,\n  messages,\n  onConfirm,\n  onClose,\n}: ConsolidateDialogProps) {\n  const availableModels = Object.values(MODEL_CONFIG).filter((m) => !m.isLocal);\n  const [selectedModel, setSelectedModel] = useState<string>(\n    availableModels[0]?.id || \"\",\n  );\n  const [mode, setMode] = useState<ConsolidationMode>(\"same-chat\");\n\n  // Estimate input tokens (rough calculation)\n  const estimatedTokens = useMemo(() => {\n    const fullContent = messages.map((m) => m.content).join(\"\\n\\n\");\n    // Rough estimate: ~4 chars per token\n    return Math.ceil(fullContent.length / 4);\n  }, [messages]);\n\n  const estimatedCost = (estimatedTokens / 1000) * 0.003; // Rough estimate\n\n  const handleConfirm = () => {\n    onConfirm(selectedModel, mode);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onClose}>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Consolidate Responses</DialogTitle>\n          <DialogDescription>\n            Synthesize all {messages.length} responses into one comprehensive\n            answer.\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4 py-4\">\n          <div className=\"space-y-3\">\n            <label className=\"text-sm font-medium\">Consolidation mode</label>\n            <RadioGroup\n              value={mode}\n              onValueChange={(v) => setMode(v as ConsolidationMode)}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <RadioGroupItem value=\"same-chat\" id=\"same-chat\" />\n                <Label htmlFor=\"same-chat\" className=\"cursor-pointer\">\n                  <div className=\"font-medium\">Same chat</div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    Replace comparison with consolidated response\n                  </div>\n                </Label>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <RadioGroupItem value=\"new-chat\" id=\"new-chat\" />\n                <Label htmlFor=\"new-chat\" className=\"cursor-pointer\">\n                  <div className=\"font-medium\">New chat</div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    Create separate conversation with consolidated response\n                  </div>\n                </Label>\n              </div>\n            </RadioGroup>\n          </div>\n\n          <div>\n            <label className=\"text-sm font-medium mb-2 block\">\n              Which model should consolidate?\n            </label>\n            <Select value={selectedModel} onValueChange={setSelectedModel}>\n              <SelectTrigger>\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {availableModels.map((model) => (\n                  <SelectItem key={model.id} value={model.id}>\n                    {model.name}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"bg-muted p-3 rounded space-y-1 text-sm\">\n            <div className=\"flex justify-between\">\n              <span>Estimated input tokens:</span>\n              <span className=\"font-mono\">\n                {estimatedTokens.toLocaleString()}\n              </span>\n            </div>\n            <div className=\"flex justify-between\">\n              <span>Estimated cost:</span>\n              <span className=\"font-mono\">${estimatedCost.toFixed(4)}</span>\n            </div>\n          </div>\n        </div>\n\n        <DialogFooter>\n          <Button variant=\"outline\" onClick={onClose}>\n            Cancel\n          </Button>\n          <Button onClick={handleConfirm}>\n            Consolidate with{\" \"}\n            {availableModels.find((m) => m.id === selectedModel)?.name}\n          </Button>\n        </DialogFooter>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { Eye, EyeOff, Sparkles, X } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport { useMediaQuery } from \"usehooks-ts\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { useSyncedScroll } from \"@/hooks/useSyncedScroll\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { analytics } from \"@/lib/analytics\";\nimport { cn } from \"@/lib/utils\";\nimport { ComparisonPanel } from \"./ComparisonPanel\";\nimport { ConsolidateDialog } from \"./ConsolidateDialog\";\n\ntype ConsolidationMode = \"same-chat\" | \"new-chat\";\n\ninterface ComparisonViewProps {\n  assistantMessages: Doc<\"messages\">[];\n  comparisonGroupId: string;\n  showModelNames: boolean;\n  onVote: (winnerId: string, rating: string) => void;\n  onConsolidate: (model: string, mode: ConsolidationMode) => void;\n  onToggleModelNames: () => void;\n  onExit?: () => void;\n  hideConsolidateButton?: boolean;\n}\n\nexport function ComparisonView({\n  assistantMessages,\n  comparisonGroupId,\n  showModelNames,\n  onVote,\n  onConsolidate,\n  onToggleModelNames,\n  onExit,\n  hideConsolidateButton = false,\n}: ComparisonViewProps) {\n  const [syncEnabled, setSyncEnabled] = useState(true);\n  const [showConsolidateDialog, setShowConsolidateDialog] = useState(false);\n  const [votedMessageId, setVotedMessageId] = useState<string | undefined>();\n\n  // Get user preferences for statistics display\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const _user = useQuery(api.users.getCurrentUser);\n\n  // Phase 4: Use new preference hook\n  const showStats = useUserPreference(\"showComparisonStatistics\");\n\n  const { register } = useSyncedScroll(syncEnabled);\n  const isMobile = useMediaQuery(\"(max-width: 1024px)\");\n\n  // Sort messages by creation time\n  const sortedMessages = useMemo(() => {\n    return [...assistantMessages].sort((a, b) => a.createdAt - b.createdAt);\n  }, [assistantMessages]);\n\n  // Calculate aggregate stats\n  const totalCost = useMemo(() => {\n    return assistantMessages.reduce((sum, m) => sum + (m.cost || 0), 0);\n  }, [assistantMessages]);\n\n  const totalInputTokens = useMemo(() => {\n    return assistantMessages.reduce((sum, m) => sum + (m.inputTokens || 0), 0);\n  }, [assistantMessages]);\n\n  const totalOutputTokens = useMemo(() => {\n    return assistantMessages.reduce((sum, m) => sum + (m.outputTokens || 0), 0);\n  }, [assistantMessages]);\n\n  // Calculate generation durations (ms)\n  const generationDurations = useMemo(() => {\n    return sortedMessages.map((msg) => {\n      if (!msg.generationCompletedAt) return null; // Still generating or pending\n      const duration = msg.generationCompletedAt - msg.createdAt;\n      return duration;\n    });\n  }, [sortedMessages]);\n\n  // Format duration helper\n  const formatDuration = (ms: number | null) => {\n    if (ms === null) return \"â€”\";\n    if (ms < 1000) return `${ms}ms`;\n    return `${(ms / 1000).toFixed(1)}s`;\n  };\n\n  const allComplete = assistantMessages.every((m) => m.status === \"complete\");\n\n  const handleVote = (winnerId: string, messageIndex: number) => {\n    setVotedMessageId(winnerId);\n    // Determine rating based on message position\n    let rating: \"left_better\" | \"right_better\" | \"tie\" | \"both_bad\";\n    if (sortedMessages.length === 2) {\n      rating = messageIndex === 0 ? \"left_better\" : \"right_better\";\n    } else {\n      // For 3-4 models, just mark as winner (could add tie/both_bad buttons)\n      rating = \"left_better\"; // Placeholder - winner concept\n    }\n    onVote(winnerId, rating);\n\n    // Track comparison vote\n    const winnerMessage = sortedMessages.find((m) => m._id === winnerId);\n    analytics.track(\"comparison_voted\", {\n      rating,\n      winnerModel: winnerMessage?.model,\n      modelCount: sortedMessages.length,\n      comparisonGroupId,\n    });\n  };\n\n  const handleConsolidate = (model: string, mode: ConsolidationMode) => {\n    setShowConsolidateDialog(false);\n    onConsolidate(model, mode);\n\n    // Track consolidation\n    analytics.track(\"consolidation_created\", {\n      mode,\n      model,\n      modelCount: sortedMessages.length,\n    });\n  };\n\n  // Mobile: Tabs\n  if (isMobile) {\n    return (\n      <div className=\"flex flex-col h-full\">\n        <div className=\"flex items-center justify-between p-3 border-b\">\n          {!hideConsolidateButton && (\n            <h3 className=\"font-medium\">\n              Comparing {assistantMessages.length} models\n            </h3>\n          )}\n          <div className=\"flex items-center gap-1 ml-auto\">\n            {!hideConsolidateButton && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button\n                    size=\"icon\"\n                    variant=\"ghost\"\n                    onClick={onToggleModelNames}\n                    className=\"h-8 w-8\"\n                  >\n                    {showModelNames ? (\n                      <EyeOff className=\"w-4 h-4\" />\n                    ) : (\n                      <Eye className=\"w-4 h-4\" />\n                    )}\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>{showModelNames ? \"Hide\" : \"Show\"} model names</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n            {onExit && (\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Button size=\"icon\" variant=\"ghost\" onClick={onExit}>\n                    <X className=\"w-4 h-4\" />\n                  </Button>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p>Exit comparison (Esc)</p>\n                </TooltipContent>\n              </Tooltip>\n            )}\n          </div>\n        </div>\n\n        <Tabs defaultValue={sortedMessages[0]._id} className=\"flex-1\">\n          <TabsList className=\"w-full justify-start overflow-x-auto sticky top-0 z-10 no-scrollbar px-1\">\n            {sortedMessages.map((msg, idx) => (\n              <TabsTrigger\n                key={msg._id}\n                value={msg._id}\n                className=\"flex-shrink-0 min-w-[100px]\"\n              >\n                {showModelNames\n                  ? msg.model?.split(\":\")[1] || msg.model\n                  : `Model ${idx + 1}`}\n              </TabsTrigger>\n            ))}\n          </TabsList>\n\n          {sortedMessages.map((msg, idx) => (\n            <TabsContent key={msg._id} value={msg._id} className=\"flex-1\">\n              <ComparisonPanel\n                message={msg}\n                index={idx}\n                showModelName={showModelNames}\n                showStats={showStats}\n                onVote={() => handleVote(msg._id, idx)}\n                isVoted={votedMessageId === msg._id}\n                hasVoted={votedMessageId !== undefined}\n                duration={generationDurations[idx]}\n              />\n            </TabsContent>\n          ))}\n        </Tabs>\n\n        {/* Footer */}\n        <div className=\"p-3 border-t space-y-2\">\n          {showStats && (\n            <>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"font-medium\">Total Cost</span>\n                <span className=\"font-mono\">${totalCost.toFixed(4)}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"font-medium\">Avg Response Time</span>\n                <span className=\"font-mono\">\n                  {formatDuration(\n                    generationDurations.filter((d) => d !== null).length > 0\n                      ? generationDurations\n                          .filter((d) => d !== null)\n                          .reduce((a, b) => a! + b!, 0)! /\n                          generationDurations.filter((d) => d !== null).length\n                      : null,\n                  )}\n                </span>\n              </div>\n            </>\n          )}\n          {allComplete && !hideConsolidateButton && (\n            <Button\n              onClick={() => setShowConsolidateDialog(true)}\n              className=\"w-full\"\n              variant=\"secondary\"\n            >\n              <Sparkles className=\"w-4 h-4 mr-2\" />\n              Consolidate Responses\n            </Button>\n          )}\n        </div>\n\n        <ConsolidateDialog\n          open={showConsolidateDialog}\n          comparisonGroupId={comparisonGroupId}\n          messages={sortedMessages}\n          onConfirm={handleConsolidate}\n          onClose={() => setShowConsolidateDialog(false)}\n        />\n      </div>\n    );\n  }\n\n  // Desktop: Side-by-side grid\n  return (\n    <div className=\"flex flex-col h-full\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-3 border-b\">\n        <div className=\"flex items-center gap-3\">\n          {!hideConsolidateButton && (\n            <>\n              <h3 className=\"font-medium\">\n                Comparing {assistantMessages.length} models\n              </h3>\n              <Badge variant=\"outline\">\n                {syncEnabled ? \"Sync On\" : \"Sync Off\"}\n              </Badge>\n            </>\n          )}\n        </div>\n        <div className=\"flex items-center gap-2 ml-auto\">\n          {!hideConsolidateButton && (\n            <>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                onClick={() => setSyncEnabled(!syncEnabled)}\n              >\n                Toggle Sync\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"ghost\"\n                onClick={onToggleModelNames}\n                className=\"gap-2\"\n              >\n                {showModelNames ? (\n                  <>\n                    <EyeOff className=\"w-4 h-4\" />\n                    Hide Names\n                  </>\n                ) : (\n                  <>\n                    <Eye className=\"w-4 h-4\" />\n                    Show Names\n                  </>\n                )}\n              </Button>\n            </>\n          )}\n          {onExit && (\n            <Button size=\"icon\" variant=\"ghost\" onClick={onExit}>\n              <X className=\"w-4 h-4\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Grid */}\n      <div\n        className={cn(\n          \"flex-1 grid gap-4 p-4 overflow-hidden\",\n          assistantMessages.length === 2 && \"grid-cols-2\",\n          assistantMessages.length === 3 && \"grid-cols-3\",\n          assistantMessages.length === 4 && \"grid-cols-2 lg:grid-cols-4\",\n        )}\n      >\n        {sortedMessages.map((msg, idx) => (\n          <ComparisonPanel\n            key={msg._id}\n            ref={register}\n            message={msg}\n            index={idx}\n            showModelName={showModelNames}\n            showStats={showStats}\n            onVote={() => handleVote(msg._id, idx)}\n            isVoted={votedMessageId === msg._id}\n            hasVoted={votedMessageId !== undefined}\n            duration={generationDurations[idx]}\n          />\n        ))}\n      </div>\n\n      {/* Footer */}\n      <div className=\"flex items-center justify-between p-3 border-t\">\n        {showStats && (\n          <div className=\"space-y-1\">\n            <div className=\"flex items-center gap-4\">\n              <span className=\"text-sm font-medium\">Total Cost:</span>\n              <span className=\"font-mono text-lg\">${totalCost.toFixed(4)}</span>\n            </div>\n            <div className=\"text-xs text-muted-foreground\">\n              {totalInputTokens.toLocaleString()} input +{\" \"}\n              {totalOutputTokens.toLocaleString()} output tokens\n            </div>\n            <div className=\"text-xs text-muted-foreground\">\n              Avg response:{\" \"}\n              {formatDuration(\n                generationDurations.filter((d) => d !== null).length > 0\n                  ? generationDurations\n                      .filter((d) => d !== null)\n                      .reduce((a, b) => a! + b!, 0)! /\n                      generationDurations.filter((d) => d !== null).length\n                  : null,\n              )}\n            </div>\n          </div>\n        )}\n\n        {allComplete && !hideConsolidateButton && (\n          <Button\n            onClick={() => setShowConsolidateDialog(true)}\n            variant=\"secondary\"\n            className={!showStats ? \"ml-auto\" : \"\"}\n          >\n            <Sparkles className=\"w-4 h-4 mr-2\" />\n            Consolidate Responses\n          </Button>\n        )}\n      </div>\n\n      <ConsolidateDialog\n        open={showConsolidateDialog}\n        comparisonGroupId={comparisonGroupId}\n        messages={sortedMessages}\n        onConfirm={handleConsolidate}\n        onClose={() => setShowConsolidateDialog(false)}\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport type { Doc } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { ChevronDown } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\nimport { ComparisonView } from \"./ComparisonView\";\n\ninterface MessageConsolidationToggleProps {\n  originalResponses: Doc<\"messages\">[];\n  showOriginals: boolean;\n  onToggle: () => void;\n}\n\n/**\n * Toggle for consolidated messages to show/hide original responses.\n * Displays a collapsible section with the original AI responses.\n */\nexport function MessageConsolidationToggle({\n  originalResponses,\n  showOriginals,\n  onToggle,\n}: MessageConsolidationToggleProps) {\n  if (originalResponses.length === 0) return null;\n\n  return (\n    <div className=\"mt-4 border-t border-border/10 pt-4\">\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={onToggle}\n        className=\"gap-2 text-xs\"\n      >\n        <ChevronDown\n          className={cn(\n            \"w-3 h-3 transition-transform\",\n            showOriginals && \"rotate-180\",\n          )}\n        />\n        {showOriginals ? \"Hide\" : \"Show\"} original {originalResponses.length}{\" \"}\n        response{originalResponses.length !== 1 ? \"s\" : \"\"}\n      </Button>\n\n      {showOriginals && (\n        <div className=\"mt-4\">\n          <ComparisonView\n            assistantMessages={originalResponses}\n            comparisonGroupId={originalResponses[0]?.comparisonGroupId || \"\"}\n            showModelNames={true}\n            onVote={() => {}}\n            onConsolidate={() => {}}\n            onToggleModelNames={() => {}}\n            hideConsolidateButton={true}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Check, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\n\ninterface MessageEditModeProps {\n  editedContent: string;\n  onContentChange: (content: string) => void;\n  onSave: () => void;\n  onCancel: () => void;\n}\n\n/**\n * Edit mode UI for user messages.\n * Displays a textarea with the message content and save/cancel buttons.\n */\nexport function MessageEditMode({\n  editedContent,\n  onContentChange,\n  onSave,\n  onCancel,\n}: MessageEditModeProps) {\n  return (\n    <div className=\"space-y-3\">\n      <Textarea\n        value={editedContent}\n        onChange={(e) => onContentChange(e.target.value)}\n        className=\"min-h-[100px] resize-none font-normal\"\n        autoFocus\n      />\n      <div className=\"flex items-center gap-2\">\n        <Button\n          size=\"sm\"\n          onClick={onSave}\n          className=\"h-8\"\n          disabled={!editedContent.trim()}\n        >\n          <Check className=\"w-3.5 h-3.5 mr-1.5\" />\n          Save\n        </Button>\n        <Button size=\"sm\" variant=\"outline\" onClick={onCancel} className=\"h-8\">\n          <X className=\"w-3.5 h-3.5 mr-1.5\" />\n          Cancel\n        </Button>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Loader2 } from \"lucide-react\";\n\ninterface MessageLoadingStateProps {\n  isThinkingModel: boolean;\n}\n\n/**\n * Loading state indicators for AI message generation.\n * Shows either a \"Thinking...\" label with spinner for reasoning models,\n * or bouncing dots for standard models.\n */\nexport function MessageLoadingState({\n  isThinkingModel,\n}: MessageLoadingStateProps) {\n  if (isThinkingModel) {\n    return (\n      <div className=\"flex items-center gap-2 h-6 text-xs font-medium text-muted-foreground uppercase tracking-widest\">\n        <Loader2 className=\"w-3 h-3 animate-spin text-primary\" />\n        <span>Thinking...</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex gap-1 items-center h-6\">\n      <span\n        className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce\"\n        style={{ animationDelay: \"0ms\" }}\n      />\n      <span\n        className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce\"\n        style={{ animationDelay: \"150ms\" }}\n      />\n      <span\n        className=\"w-2 h-2 bg-primary/40 rounded-full animate-bounce\"\n        style={{ animationDelay: \"300ms\" }}\n      />\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { ChevronDown, ChevronRight, FileText } from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface MessageNotesIndicatorProps {\n  messageId: Id<\"messages\">;\n}\n\nexport function MessageNotesIndicator({\n  messageId,\n}: MessageNotesIndicatorProps) {\n  const router = useRouter();\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  // Check if this is a temporary optimistic message (not yet persisted)\n  const isTempMessage =\n    typeof messageId === \"string\" && messageId.startsWith(\"temp-\");\n\n  // Skip query for temporary optimistic messages\n  const notes = useQuery(\n    api.notes.getNotesFromMessage,\n    isTempMessage ? \"skip\" : { messageId },\n  );\n\n  if (!notes || notes.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className=\"my-3\">\n      <div\n        className=\"flex items-center gap-2 cursor-pointer group\"\n        onClick={() => setIsExpanded(!isExpanded)}\n        role=\"button\"\n        tabIndex={0}\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" || e.key === \" \") {\n            e.preventDefault();\n            setIsExpanded(!isExpanded);\n          }\n        }}\n        aria-expanded={isExpanded}\n        aria-label={`${notes.length} note${notes.length === 1 ? \"\" : \"s\"} from this message`}\n      >\n        <span className=\"text-xs text-muted-foreground group-hover:text-foreground transition-colors\">\n          Notes ({notes.length})\n        </span>\n        <div className=\"flex-1 border-t border-dashed border-border/40 group-hover:border-border/60 transition-colors\" />\n        {isExpanded ? (\n          <ChevronDown className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        ) : (\n          <ChevronRight className=\"h-3 w-3 text-muted-foreground group-hover:text-foreground transition-colors\" />\n        )}\n      </div>\n\n      <AnimatePresence>\n        {isExpanded && (\n          <motion.div\n            initial={{ opacity: 0, height: 0 }}\n            animate={{ opacity: 1, height: \"auto\" }}\n            exit={{ opacity: 0, height: 0 }}\n            transition={{ duration: 0.2, ease: [0.2, 0, 0, 1] }}\n            className=\"overflow-hidden\"\n          >\n            <div className=\"mt-2 space-y-1 pl-2\">\n              {notes.map(\n                (note: { _id: string; title: string; createdAt: number }) => (\n                  <Button\n                    key={note._id}\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    className=\"w-full justify-start h-auto py-2 px-2 text-left font-normal hover:bg-accent/50\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      router.push(`/notes?note=${note._id}`);\n                    }}\n                  >\n                    <div className=\"flex items-start gap-2 w-full min-w-0\">\n                      <FileText className=\"h-3.5 w-3.5 mt-0.5 flex-shrink-0 text-muted-foreground\" />\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"text-sm truncate\">{note.title}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {new Date(note.createdAt).toLocaleDateString(\n                            undefined,\n                            {\n                              month: \"short\",\n                              day: \"numeric\",\n                              hour: \"2-digit\",\n                              minute: \"2-digit\",\n                            },\n                          )}\n                        </p>\n                      </div>\n                    </div>\n                  </Button>\n                ),\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { Square, Zap } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { formatTTFT } from \"@/lib/utils/formatMetrics\";\n\ninterface MessageStatsBadgesProps {\n  modelName: string;\n  ttft: number | null;\n  isCached: boolean;\n  tokensPerSecond?: number;\n  inputTokens?: number;\n  outputTokens?: number;\n  status: string;\n  showStats: boolean;\n}\n\n/**\n * Statistics badges for assistant messages.\n * Displays model name, TTFT, TPS, and token counts with tooltips.\n */\nexport function MessageStatsBadges({\n  modelName,\n  ttft,\n  isCached,\n  tokensPerSecond,\n  inputTokens,\n  outputTokens,\n  status,\n  showStats,\n}: MessageStatsBadgesProps) {\n  return (\n    <div className=\"mt-3 pt-3 border-t border-border/10 flex flex-wrap items-center gap-2 transition-opacity duration-300\">\n      {/* Model name - ALWAYS visible */}\n      <Badge\n        variant=\"outline\"\n        className=\"text-[10px] h-5 bg-background/50 backdrop-blur border-border/50 text-muted-foreground\"\n      >\n        {modelName}\n      </Badge>\n\n      {/* Stopped indicator */}\n      {status === \"stopped\" && (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger asChild>\n              <Badge\n                variant=\"outline\"\n                className=\"text-[10px] h-5 bg-amber-500/10 backdrop-blur border-amber-500/30 text-amber-600 dark:text-amber-400\"\n              >\n                <Square className=\"w-2.5 h-2.5 mr-1 fill-current\" />\n                Stopped\n              </Badge>\n            </TooltipTrigger>\n            <TooltipContent>\n              <div className=\"text-xs\">\n                <div className=\"font-semibold\">Generation Stopped</div>\n                <div className=\"text-muted-foreground\">\n                  You stopped this response\n                </div>\n              </div>\n            </TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      )}\n\n      {/* Statistics - conditional based on user preference */}\n      {showStats && (\n        <>\n          {/* TTFT badge */}\n          {ttft !== null && (\n            <TooltipProvider>\n              {isCached ? (\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Badge\n                      variant=\"outline\"\n                      className=\"text-[10px] h-5 bg-background/50 backdrop-blur border-border/50 text-muted-foreground\"\n                    >\n                      <Zap className=\"w-3 h-3 mr-1\" />\n                      cached\n                    </Badge>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <div className=\"text-xs\">\n                      <div className=\"font-semibold\">Cached Response</div>\n                      <div className=\"text-muted-foreground\">\n                        Served instantly from cache\n                      </div>\n                    </div>\n                  </TooltipContent>\n                </Tooltip>\n              ) : (\n                <Tooltip>\n                  <TooltipTrigger asChild>\n                    <Badge\n                      variant=\"outline\"\n                      className={cn(\n                        \"text-[10px] h-5 font-mono tabular-nums cursor-help bg-background/50 backdrop-blur border-border/50 text-muted-foreground\",\n                        status === \"generating\" && \"animate-pulse\",\n                      )}\n                    >\n                      TTFT: {formatTTFT(ttft)}\n                    </Badge>\n                  </TooltipTrigger>\n                  <TooltipContent>\n                    <div className=\"text-xs\">\n                      <div className=\"font-semibold\">Time to First Token</div>\n                      <div className=\"text-muted-foreground\">\n                        {status === \"generating\"\n                          ? \"AI started responding\"\n                          : \"How long until AI started responding\"}\n                      </div>\n                    </div>\n                  </TooltipContent>\n                </Tooltip>\n              )}\n            </TooltipProvider>\n          )}\n\n          {/* TPS badge (completed only) */}\n          {tokensPerSecond && status === \"complete\" && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge\n                    variant=\"outline\"\n                    className=\"text-[10px] h-5 font-mono tabular-nums cursor-help bg-background/50 backdrop-blur border-border/50 text-muted-foreground\"\n                  >\n                    TPS: {Math.round(tokensPerSecond)} t/s\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <div className=\"text-xs\">\n                    <div className=\"font-semibold\">Tokens Per Second</div>\n                    <div className=\"text-muted-foreground\">\n                      Generation speed: {Math.round(tokensPerSecond)} tokens/sec\n                    </div>\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n\n          {/* Token count badge */}\n          {(inputTokens !== undefined || outputTokens !== undefined) && (\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <Badge\n                    variant=\"outline\"\n                    className=\"text-[10px] h-5 font-mono tabular-nums cursor-help bg-background/50 backdrop-blur border-border/50 text-muted-foreground\"\n                  >\n                    {inputTokens || 0}/{outputTokens || 0}\n                  </Badge>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <div className=\"text-xs\">\n                    <div className=\"font-semibold\">Token Count</div>\n                    <div className=\"text-muted-foreground\">\n                      Input: {inputTokens?.toLocaleString() || 0}\n                    </div>\n                    <div className=\"text-muted-foreground\">\n                      Output: {outputTokens?.toLocaleString() || 0}\n                    </div>\n                    <div className=\"text-muted-foreground font-semibold mt-1\">\n                      Total:{\" \"}\n                      {(\n                        (inputTokens || 0) + (outputTokens || 0)\n                      ).toLocaleString()}\n                    </div>\n                  </div>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          )}\n        </>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport { useQuery } from \"convex/react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport { Brain, ChevronDown, Loader2 } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { cn } from \"@/lib/utils\";\nimport { formatDuration } from \"@/lib/utils/formatMetrics\";\n\ninterface ReasoningBlockProps {\n  reasoning?: string;\n  partialReasoning?: string;\n  thinkingStartedAt?: number;\n  thinkingCompletedAt?: number;\n  reasoningTokens?: number;\n  isThinking?: boolean;\n}\n\nexport function ReasoningBlock({\n  reasoning,\n  partialReasoning,\n  thinkingStartedAt,\n  thinkingCompletedAt,\n  reasoningTokens,\n  isThinking = false,\n}: ReasoningBlockProps) {\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const _user = useQuery(api.users.getCurrentUser);\n\n  // Phase 4: Use new preference hook\n  const reasoningPrefs = useUserPreference(\"reasoning\");\n\n  const [isExpanded, setIsExpanded] = useState<boolean>(\n    reasoningPrefs.autoExpand,\n  );\n\n  // Update isExpanded when preferences change\n  useEffect(() => {\n    setIsExpanded(reasoningPrefs.autoExpand);\n  }, [reasoningPrefs.autoExpand]);\n\n  const displayReasoning = reasoning || partialReasoning;\n  const hasReasoningMetadata = thinkingCompletedAt && thinkingStartedAt;\n\n  // Don't render if user disabled reasoning display\n  if (!reasoningPrefs.showByDefault) return null;\n\n  // Don't show during streaming if user disabled\n  if (isThinking && !reasoningPrefs.showDuringStreaming) return null;\n\n  if (!displayReasoning && !hasReasoningMetadata && !isThinking) return null;\n\n  const thinkingDurationMs =\n    thinkingCompletedAt && thinkingStartedAt\n      ? thinkingCompletedAt - thinkingStartedAt\n      : null;\n\n  return (\n    <div className=\"mb-4\">\n      {/* Collapsed trigger */}\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        className={cn(\n          \"w-full flex items-center gap-2 px-4 py-2.5\",\n          \"bg-muted/20 hover:bg-muted/30\",\n          \"backdrop-blur-xl rounded-xl\",\n          \"transition-colors duration-200\",\n          \"text-sm text-muted-foreground\",\n          isThinking && \"animate-pulse\",\n        )}\n      >\n        {isThinking ? (\n          <>\n            <Loader2 className=\"w-4 h-4 animate-spin\" />\n            <span>Thinking...</span>\n          </>\n        ) : (\n          <>\n            <Brain className=\"w-4 h-4\" />\n            <span>\n              {thinkingDurationMs !== null ? (\n                <>Thought for {formatDuration(thinkingDurationMs)}</>\n              ) : (\n                \"Reasoning\"\n              )}\n              {reasoningTokens && ` (${reasoningTokens} tokens)`}\n            </span>\n          </>\n        )}\n        <ChevronDown\n          className={cn(\n            \"w-4 h-4 ml-auto transition-transform duration-200\",\n            isExpanded && \"rotate-180\",\n          )}\n        />\n      </button>\n\n      {/* Expanded reasoning */}\n      <AnimatePresence>\n        {isExpanded && displayReasoning && (\n          <motion.div\n            initial={{ height: 0, opacity: 0 }}\n            animate={{ height: \"auto\", opacity: 1 }}\n            exit={{ height: 0, opacity: 0 }}\n            transition={{ duration: 0.2 }}\n            className=\"overflow-hidden\"\n          >\n            <div\n              className={cn(\n                \"mt-2 p-4 rounded-xl\",\n                \"bg-muted/10 backdrop-blur-xl\",\n                \"border border-border/50\",\n                \"max-h-[400px] overflow-y-auto\",\n                \"font-mono text-sm text-foreground/80\",\n                \"whitespace-pre-wrap break-words\",\n              )}\n            >\n              {displayReasoning ? (\n                <>\n                  {displayReasoning}\n                  {isThinking && (\n                    <span className=\"inline-block w-2 h-4 ml-1 bg-primary/50 animate-pulse\" />\n                  )}\n                </>\n              ) : (\n                <p className=\"text-xs text-muted-foreground italic\">\n                  Full reasoning hidden by provider. Model used{\" \"}\n                  {reasoningTokens || 0} reasoning tokens.\n                </p>\n              )}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { ChevronDown, ChevronUp, ExternalLink } from \"lucide-react\";\nimport { useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card } from \"@/components/ui/card\";\nimport {\n  HoverCard,\n  HoverCardContent,\n  HoverCardTrigger,\n} from \"@/components/ui/hover-card\";\nimport { cn } from \"@/lib/utils\";\n\ntype SourceWithMetadata = {\n  position: number;\n  provider: string;\n  title?: string;\n  snippet?: string;\n  url: string;\n  isPartial: boolean;\n  createdAt: number;\n  metadata: {\n    title?: string;\n    description?: string;\n    ogImage?: string;\n    favicon?: string;\n    siteName?: string;\n    enriched: boolean;\n  } | null;\n};\n\ninterface SourceListProps {\n  messageId: Id<\"messages\">;\n  className?: string;\n}\n\nexport function SourceList({ messageId, className }: SourceListProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  // Check if this is a temporary optimistic message (not yet persisted)\n  const isTempMessage =\n    typeof messageId === \"string\" && messageId.startsWith(\"temp-\");\n\n  // Fetch sources from normalized tables (Phase 2 migration complete)\n  // Skip query for temporary optimistic messages\n  const sources = useQuery(\n    // @ts-ignore - Type depth exceeded with complex Convex query\n    api.sources.operations.getSources,\n    isTempMessage ? \"skip\" : { messageId },\n  );\n\n  // Hide if no sources\n  if (!sources || sources.length === 0) return null;\n\n  const count = sources.length;\n\n  return (\n    <div className={cn(\"mt-4 space-y-2\", className)}>\n      {/* Toggle Button - Perplexity Style */}\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={() => setIsExpanded(!isExpanded)}\n        className=\"gap-2 text-muted-foreground hover:text-foreground\"\n      >\n        {isExpanded ? (\n          <ChevronUp className=\"h-4 w-4\" />\n        ) : (\n          <ChevronDown className=\"h-4 w-4\" />\n        )}\n        <span>\n          Used {count} {count === 1 ? \"source\" : \"sources\"}\n        </span>\n      </Button>\n\n      {/* Expandable Sources Grid */}\n      {isExpanded && (\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          {sources.map((source: SourceWithMetadata, idx: number) => (\n            <SourceCard\n              key={source.position || idx}\n              source={source}\n              position={source.position || idx + 1}\n            />\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n\ninterface SourceCardProps {\n  source: SourceWithMetadata;\n  position: number;\n}\n\nfunction SourceCard({ source, position }: SourceCardProps) {\n  // Prefer enriched OG title over provider title\n  const displayTitle = source.metadata?.title || source.title || source.url;\n  const snippet = source.snippet || source.metadata?.description || \"\";\n  const favicon = source.metadata?.favicon;\n\n  let domain: string;\n  try {\n    domain = new URL(source.url).hostname.replace(\"www.\", \"\");\n  } catch {\n    domain = source.url;\n  }\n\n  const card = (\n    <Card className=\"group relative overflow-hidden p-3 transition-all hover:border-primary/50 hover:shadow-md cursor-pointer\">\n      <a\n        href={source.url}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className=\"flex gap-3\"\n        onClick={(_e) => {\n          // Let hover card handle desktop, direct link for mobile\n          if (window.innerWidth < 640) {\n            return; // Allow default link behavior\n          }\n        }}\n      >\n        {/* Citation Number Badge */}\n        <Badge\n          variant=\"secondary\"\n          className=\"h-6 w-6 shrink-0 items-center justify-center rounded-full p-0 text-xs font-semibold\"\n        >\n          {position}\n        </Badge>\n\n        <div className=\"min-w-0 flex-1 space-y-1\">\n          {/* Favicon + Domain */}\n          <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n            {favicon && (\n              <img\n                src={favicon}\n                alt=\"\"\n                className=\"h-4 w-4 rounded\"\n                onError={(e) => {\n                  e.currentTarget.style.display = \"none\";\n                }}\n              />\n            )}\n            <span className=\"truncate\">{domain}</span>\n          </div>\n\n          {/* Title */}\n          <h4 className=\"line-clamp-2 text-sm font-medium leading-tight group-hover:underline\">\n            {displayTitle}\n          </h4>\n\n          {/* Snippet */}\n          {snippet && (\n            <p className=\"line-clamp-2 text-xs text-muted-foreground\">\n              {snippet.slice(0, 120)}\n              {snippet.length > 120 ? \"...\" : \"\"}\n            </p>\n          )}\n        </div>\n\n        {/* External Link Icon */}\n        <div className=\"shrink-0 text-muted-foreground opacity-0 transition-opacity group-hover:opacity-100\">\n          <ExternalLink className=\"h-4 w-4\" />\n        </div>\n      </a>\n    </Card>\n  );\n\n  // Desktop: wrap in hover card for preview\n  return (\n    <HoverCard openDelay={300}>\n      <HoverCardTrigger asChild>{card}</HoverCardTrigger>\n      <HoverCardContent side=\"top\" className=\"w-80\">\n        <div className=\"space-y-2\">\n          <p className=\"text-xs text-muted-foreground\">{domain}</p>\n          <h4 className=\"font-semibold\">{displayTitle}</h4>\n          {snippet && (\n            <p className=\"text-sm text-muted-foreground\">{snippet}</p>\n          )}\n          <Button asChild size=\"sm\" variant=\"outline\" className=\"w-full gap-2\">\n            <a href={source.url} target=\"_blank\" rel=\"noopener noreferrer\">\n              Open source\n              <ExternalLink className=\"h-3 w-3\" />\n            </a>\n          </Button>\n        </div>\n      </HoverCardContent>\n    </HoverCard>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Doc, Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport { AlertCircle } from \"lucide-react\";\nimport { memo, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { useFeatureToggles } from \"@/hooks/useFeatureToggles\";\nimport { useMessageKeyboardShortcuts } from \"@/hooks/useMessageKeyboardShortcuts\";\nimport { useUserPreference } from \"@/hooks/useUserPreference\";\nimport { MODEL_CONFIG } from \"@/lib/ai/models\";\nimport { getModelConfig } from \"@/lib/ai/utils\";\nimport { cn } from \"@/lib/utils\";\nimport { formatTTFT, isCachedResponse } from \"@/lib/utils/formatMetrics\";\nimport type { OptimisticMessage } from \"@/types/optimistic\";\nimport { FeedbackModal } from \"../feedback/FeedbackModal\";\nimport { ArtifactList } from \"./ArtifactList\";\nimport { AttachmentRenderer } from \"./AttachmentRenderer\";\nimport { InlineToolCallContent } from \"./InlineToolCallContent\";\nimport { MessageActions } from \"./MessageActions\";\nimport { MessageBranchIndicator } from \"./MessageBranchIndicator\";\nimport { MessageConsolidationToggle } from \"./MessageConsolidationToggle\";\nimport { MessageEditMode } from \"./MessageEditMode\";\nimport { MessageLoadingState } from \"./MessageLoadingState\";\nimport { MessageNotesIndicator } from \"./MessageNotesIndicator\";\nimport { MessageStatsBadges } from \"./MessageStatsBadges\";\nimport { ModelRecommendationBanner } from \"./ModelRecommendationBanner\";\nimport { ReasoningBlock } from \"./ReasoningBlock\";\nimport { SourceList } from \"./SourceList\";\n\n// Error display component with feedback modal integration\nfunction ErrorDisplay({ error }: { error?: string }) {\n  const [feedbackOpen, setFeedbackOpen] = useState(false);\n\n  return (\n    <div className=\"flex flex-col gap-3 p-1\">\n      <div className=\"flex items-center gap-2 text-amber-500/90 dark:text-amber-400/90\">\n        <AlertCircle className=\"w-4 h-4\" />\n        <span className=\"font-medium text-sm\">Unable to generate response</span>\n      </div>\n      <div className=\"bg-muted/30 rounded-md p-3 border border-border/50\">\n        <p className=\"text-sm leading-relaxed opacity-90 break-words\">\n          {error}\n        </p>\n      </div>\n      <div className=\"flex items-center gap-1 text-xs text-muted-foreground\">\n        <span>Try a different model or</span>\n        <button\n          type=\"button\"\n          onClick={() => setFeedbackOpen(true)}\n          className=\"underline hover:text-foreground transition-colors cursor-pointer\"\n        >\n          contact support\n        </button>\n      </div>\n      <FeedbackModal open={feedbackOpen} onOpenChange={setFeedbackOpen} />\n    </div>\n  );\n}\n\ninterface ChatMessageProps {\n  message: Doc<\"messages\"> | OptimisticMessage;\n  nextMessage?: Doc<\"messages\"> | OptimisticMessage;\n  readOnly?: boolean;\n  isCollaborative?: boolean;\n  senderUser?: { name?: string; imageUrl?: string } | null;\n}\n\nexport const ChatMessage = memo(\n  function ChatMessage({\n    message,\n    nextMessage,\n    readOnly,\n    isCollaborative,\n    senderUser,\n  }: ChatMessageProps) {\n    const [showOriginals, setShowOriginals] = useState(false);\n    const [isFocused, setIsFocused] = useState(false);\n    const [isEditing, setIsEditing] = useState(false);\n    const [editedContent, setEditedContent] = useState(\"\");\n    const messageRef = useRef<HTMLDivElement>(null);\n\n    const isUser = message.role === \"user\";\n    const isGenerating = [\"pending\", \"generating\"].includes(message.status);\n    const isError = message.status === \"error\";\n    const _isStopped = message.status === \"stopped\";\n\n    // Check if this is a temporary optimistic message (not yet persisted)\n    const isTempMessage =\n      typeof message._id === \"string\" && message._id.startsWith(\"temp-\");\n\n    // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n    const editMessage = useMutation(api.chat.editMessage);\n\n    // @ts-ignore - Type depth exceeded with complex Convex mutation (85+ modules)\n    const updateModel = useMutation(api.conversations.updateModel);\n\n    // Phase 4: Use new preference hooks\n    const prefAlwaysShowActions = useUserPreference(\"alwaysShowMessageActions\");\n    const prefShowStats = useUserPreference(\"showMessageStatistics\");\n\n    const alwaysShow = prefAlwaysShowActions;\n    const showStats = prefShowStats;\n    const features = useFeatureToggles();\n\n    // Query for original responses if this is a consolidated message\n    const originalResponses = useQuery(\n      api.messages.getOriginalResponses,\n      message.isConsolidation && !isTempMessage\n        ? { consolidatedMessageId: message._id as Id<\"messages\"> }\n        : \"skip\",\n    );\n\n    // Query conversation for model recommendation (cost optimization)\n    const conversation = useQuery(api.conversations.get, {\n      conversationId: message.conversationId,\n    });\n\n    const displayContent = message.partialContent || message.content || \"\";\n\n    // Check if this is a thinking/reasoning model\n    const modelConfig = message.model ? getModelConfig(message.model) : null;\n    const modelName =\n      modelConfig?.name || message.model?.split(\":\")[1] || message.model;\n    const isThinkingModel =\n      !!modelConfig?.reasoning ||\n      modelConfig?.capabilities?.includes(\"extended-thinking\") ||\n      modelConfig?.capabilities?.includes(\"thinking\") ||\n      false;\n\n    // Calculate performance metrics\n    const ttft =\n      message.firstTokenAt && message.generationStartedAt\n        ? message.firstTokenAt - message.generationStartedAt\n        : null;\n    const isCached = ttft !== null && isCachedResponse(ttft);\n\n    // Phase 1: Fetch attachments from new table (dual-read)\n    // Skip query for temporary optimistic messages\n    const attachments = useQuery(\n      api.messages.getAttachments,\n      isTempMessage ? \"skip\" : { messageId: message._id as Id<\"messages\"> },\n    );\n\n    // Fetch URLs for attachments\n    const attachmentStorageIds =\n      attachments?.map((a: any) => a.storageId) || [];\n    const attachmentUrls = useQuery(\n      api.files.getAttachmentUrls,\n      attachmentStorageIds.length > 0\n        ? { storageIds: attachmentStorageIds }\n        : \"skip\",\n    );\n\n    const urlMap = new Map<string, string>(\n      attachmentUrls\n        ?.map((a: any) => [a.storageId, a.url] as [string, string])\n        .filter((pair: any): pair is [string, string] => pair[1] !== null) ||\n        [],\n    );\n\n    // Phase 1: Fetch tool calls from new table (dual-read)\n    // Skip query for temporary optimistic messages\n    const allToolCalls = useQuery(\n      api.messages.getToolCalls,\n      isTempMessage\n        ? \"skip\"\n        : { messageId: message._id as Id<\"messages\">, includePartial: true },\n    );\n\n    // Split into complete and partial for backward compatibility\n    const toolCalls = allToolCalls?.filter((tc: any) => !tc.isPartial);\n    const partialToolCalls = allToolCalls?.filter((tc: any) => tc.isPartial);\n\n    // Model recommendation handlers\n    const handleModelSwitch = async (modelId: string) => {\n      try {\n        await updateModel({\n          conversationId: message.conversationId,\n          model: modelId,\n        });\n        toast.success(`Switched to ${MODEL_CONFIG[modelId]?.name || modelId}`);\n      } catch (error) {\n        toast.error(\"Failed to switch model\");\n        console.error(\"[ChatMessage] Model switch error:\", error);\n      }\n    };\n\n    const handleModelPreview = (modelId: string) => {\n      // Dispatch event for page-level modal (ModelPreviewModal is at page level)\n      const event = new CustomEvent(\"open-model-preview\", {\n        detail: { modelId },\n      });\n      window.dispatchEvent(event);\n    };\n\n    // Edit handlers\n    const handleEdit = () => {\n      setEditedContent(message.content || \"\");\n      setIsEditing(true);\n    };\n\n    const handleSaveEdit = async () => {\n      try {\n        await editMessage({\n          messageId: message._id as Id<\"messages\">,\n          content: editedContent,\n        });\n        setIsEditing(false);\n        toast.success(\"Message updated\");\n      } catch (error) {\n        toast.error(\"Failed to update message\");\n        console.error(\"[ChatMessage] Edit error:\", error);\n      }\n    };\n\n    const handleCancelEdit = () => {\n      setIsEditing(false);\n      setEditedContent(\"\");\n    };\n\n    // Keyboard shortcuts for focused messages\n    useMessageKeyboardShortcuts({\n      messageId: message._id as Id<\"messages\">,\n      conversationId: message.conversationId,\n      content: displayContent,\n      isFocused,\n      isUser,\n      isGenerating,\n      readOnly,\n      messageRef,\n    });\n\n    // User message styling: Very subtle, transparent, glassmorphic\n    const userMessageClass = cn(\n      \"relative rounded-[2rem] rounded-tr-sm\",\n      \"px-5 py-3 sm:px-6 sm:py-4 text-sm sm:text-base leading-relaxed\",\n      \"bg-primary/10 text-foreground backdrop-blur-sm\",\n      \"border border-primary/20\",\n      \"shadow-sm hover:shadow-md\",\n      \"transition-all duration-300\",\n      \"[&_.prose]:text-foreground\",\n      \"font-medium tracking-wide\",\n    );\n\n    // Assistant message styling: Glassmorphic, clean, distinct\n    const assistantMessageClass = cn(\n      \"relative rounded-[2rem] rounded-tl-sm\",\n      \"px-5 py-3 sm:px-6 sm:py-4 text-sm sm:text-base leading-relaxed\",\n      \"bg-surface-glass border border-surface-glass-border backdrop-blur-xl\",\n      \"shadow-sm hover:shadow-md hover:border-primary/20\",\n      \"transition-all duration-300\",\n      \"[&_.prose]:text-foreground\",\n    );\n\n    // Wrapper classes handle alignment and max-width\n    const wrapperClass = cn(\n      \"relative group\",\n      isUser\n        ? \"ml-auto mr-4 max-w-[90%] sm:max-w-[75%]\"\n        : \"mr-auto ml-4 max-w-[95%] sm:max-w-[85%]\",\n    );\n\n    return (\n      <div\n        className={cn(\n          \"flex w-full mb-10\",\n          isUser ? \"justify-end\" : \"justify-start\",\n        )}\n      >\n        <div className={wrapperClass}>\n          <div\n            ref={messageRef}\n            id={`message-${message._id}`}\n            onFocus={() => setIsFocused(true)}\n            onBlur={() => setIsFocused(false)}\n            className={cn(\n              \"chat-message\",\n              isUser ? userMessageClass : assistantMessageClass,\n              isFocused && \"ring-2 ring-primary/50\",\n            )}\n            data-testid=\"message\"\n            data-message-id={message._id}\n            data-message-role={message.role}\n            data-status={message.status}\n            aria-label={`${isUser ? \"Your\" : \"Assistant\"} message`}\n            aria-keyshortcuts=\"r b c delete\"\n          >\n            {isError ? (\n              <ErrorDisplay error={message.error} />\n            ) : (\n              <>\n                {/* Sender attribution for collaborative conversations */}\n                {isCollaborative && senderUser && (\n                  <div className=\"flex items-center gap-2 mb-2 pb-2 border-b border-border/20\">\n                    <Avatar className=\"h-5 w-5\">\n                      <AvatarImage src={senderUser.imageUrl} />\n                      <AvatarFallback className=\"text-[10px]\">\n                        {senderUser.name?.[0]?.toUpperCase() || \"?\"}\n                      </AvatarFallback>\n                    </Avatar>\n                    <span className=\"text-xs text-muted-foreground font-medium\">\n                      {isUser\n                        ? senderUser.name || \"User\"\n                        : `Triggered by ${senderUser.name || \"User\"}`}\n                    </span>\n                  </div>\n                )}\n\n                {/* Reasoning block - only shows when reasoning is active or has content */}\n                {/* Don't render for \"No Reasoning\" - requires thinkingStartedAt or actual reasoning content */}\n                {message.role === \"assistant\" &&\n                  (message.reasoning ||\n                    message.partialReasoning ||\n                    message.thinkingStartedAt) && (\n                    <ReasoningBlock\n                      reasoning={message.reasoning}\n                      partialReasoning={message.partialReasoning}\n                      thinkingStartedAt={message.thinkingStartedAt}\n                      thinkingCompletedAt={message.thinkingCompletedAt}\n                      reasoningTokens={message.reasoningTokens}\n                      isThinking={isGenerating && !!message.partialReasoning}\n                    />\n                  )}\n\n                {/* Edit mode */}\n                {isEditing ? (\n                  <MessageEditMode\n                    editedContent={editedContent}\n                    onContentChange={setEditedContent}\n                    onSave={handleSaveEdit}\n                    onCancel={handleCancelEdit}\n                  />\n                ) : (\n                  <>\n                    {/* Inline tool calls and content - renders tool calls at their positions */}\n                    {displayContent ||\n                    toolCalls?.length ||\n                    partialToolCalls?.length ? (\n                      <div data-testid=\"message-content\">\n                        <InlineToolCallContent\n                          content={displayContent || \"\"}\n                          toolCalls={toolCalls}\n                          partialToolCalls={partialToolCalls}\n                          isStreaming={isGenerating}\n                        />\n                      </div>\n                    ) : isGenerating ? (\n                      <MessageLoadingState\n                        isThinkingModel={\n                          isThinkingModel && !!message.thinkingStartedAt\n                        }\n                      />\n                    ) : null}\n                  </>\n                )}\n\n                {/* Canvas document artifact cards (message body, not inside tool calls) */}\n                <ArtifactList messageId={message._id as Id<\"messages\">} />\n\n                {/* Source citations (Phase 2: from normalized tables) */}\n                <SourceList messageId={message._id as Id<\"messages\">} />\n\n                {attachments && attachments.length > 0 && urlMap.size > 0 && (\n                  <div className=\"mt-3 pt-3 border-t border-border/10\">\n                    <AttachmentRenderer\n                      attachments={attachments}\n                      urls={urlMap}\n                    />\n                  </div>\n                )}\n\n                {/* Toggle for consolidated messages */}\n                {message.isConsolidation && originalResponses && (\n                  <MessageConsolidationToggle\n                    originalResponses={originalResponses}\n                    showOriginals={showOriginals}\n                    onToggle={() => setShowOriginals(!showOriginals)}\n                  />\n                )}\n\n                {/* Enhanced status announcements */}\n                {!isUser && (\n                  <>\n                    {/* Generating */}\n                    {message.status === \"generating\" && (\n                      <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n                        {isThinkingModel && message.thinkingStartedAt\n                          ? \"AI is thinking about your question\"\n                          : \"AI is generating a response\"}\n                      </div>\n                    )}\n\n                    {/* Complete */}\n                    {message.status === \"complete\" && (\n                      <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n                        {ttft && `Response generated in ${formatTTFT(ttft)}`}\n                        {message.tokensPerSecond &&\n                          ` at ${Math.round(message.tokensPerSecond)} tokens per second`}\n                      </div>\n                    )}\n\n                    {/* Error - assertive for immediate attention */}\n                    {message.status === \"error\" && (\n                      <div\n                        role=\"alert\"\n                        aria-live=\"assertive\"\n                        className=\"sr-only\"\n                      >\n                        Error generating response: {message.error}\n                      </div>\n                    )}\n\n                    {/* Stopped */}\n                    {message.status === \"stopped\" && (\n                      <div role=\"status\" aria-live=\"polite\" className=\"sr-only\">\n                        Generation was stopped by user\n                      </div>\n                    )}\n                  </>\n                )}\n\n                {/* Branch indicator */}\n                {!readOnly && (\n                  <MessageBranchIndicator\n                    messageId={message._id as Id<\"messages\">}\n                  />\n                )}\n                {!readOnly && features.showNotes && (\n                  <MessageNotesIndicator\n                    messageId={message._id as Id<\"messages\">}\n                  />\n                )}\n\n                {/* Status indicator removed - optimistic updates should feel instant */}\n\n                {/* Model and statistics badges - INSIDE bubble */}\n                {!isUser &&\n                  (message.status === \"complete\" ||\n                    message.status === \"generating\" ||\n                    message.status === \"stopped\") &&\n                  modelName && (\n                    <MessageStatsBadges\n                      modelName={modelName}\n                      ttft={ttft}\n                      isCached={isCached}\n                      tokensPerSecond={message.tokensPerSecond}\n                      inputTokens={message.inputTokens}\n                      outputTokens={message.outputTokens}\n                      status={message.status}\n                      showStats={showStats}\n                    />\n                  )}\n              </>\n            )}\n          </div>\n\n          {/* Model Recommendation Banner - cost optimization */}\n          {!readOnly &&\n            !isUser &&\n            message.status === \"complete\" &&\n            conversation?.modelRecommendation &&\n            !conversation.modelRecommendation.dismissed && (\n              <div className=\"mt-4\">\n                <ModelRecommendationBanner\n                  recommendation={conversation.modelRecommendation}\n                  conversationId={message.conversationId}\n                  onSwitch={handleModelSwitch}\n                  onPreview={handleModelPreview}\n                />\n              </div>\n            )}\n\n          {/* Action buttons - absolutely positioned, no layout shift */}\n          {!isGenerating && (\n            <div\n              className={cn(\n                \"absolute z-10\",\n                isUser ? \"right-5 sm:right-6\" : \"left-5 sm:left-6\",\n                \"-bottom-8\",\n                \"flex justify-end\",\n                \"transition-opacity duration-200 ease-out\",\n                alwaysShow\n                  ? \"opacity-100\"\n                  : \"opacity-0 group-hover:opacity-100\",\n                !alwaysShow &&\n                  \"pointer-events-none group-hover:pointer-events-auto\",\n              )}\n            >\n              <MessageActions\n                message={message}\n                nextMessage={nextMessage}\n                readOnly={readOnly}\n                onEdit={isUser ? handleEdit : undefined}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  },\n  (prev, next) => {\n    return (\n      prev.message._id === next.message._id &&\n      prev.message.partialContent === next.message.partialContent &&\n      prev.message.status === next.message.status &&\n      prev.nextMessage?.status === next.nextMessage?.status &&\n      prev.isCollaborative === next.isCollaborative &&\n      prev.senderUser?.name === next.senderUser?.name\n    );\n  },\n);\n"],"names":[],"mappings":"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AS,sBACX,CACF,EACA,GAAM,CACJ,EAAK,CACH,UAAW,KACX,SAAS,CACX,CACF,EACA,gBAAiB,CACf,EAAK,CACH,QAAS,KACT,UAAW,GACb,CACF,EACA,SAAY,CACV,EAAK,CACH,UAAW,IACX,SAAS,CACX,CACF,EACA,OAAQ,CACN,EAAK,CACH,QAAS,KACX,CACF,EACA,KAAQ,CACN,EAAK,CACH,UAAW,KACX,QAAS,EACX,CACF,EACA,oBAAqB,CACnB,IAAK,CACH,QAAS,UACX,CACF,EACA,UAAW,CACT,IAAK,CACH,QAAS,MACX,CACF,EACA,MAAO,CACL,EAAK,CACH,QAAS,UACX,CACF,EACA,QAAW,CACT,IAAK,CACH,QAAS,IACX,CACF,EACA,QAAS,CACP,IAAK,CACH,QAAS,KACX,CACF,EACA,IAAK,CACH,IAAK,CACH,QAAS,CACP,MAAO,YACP,OAAQ,qBACV,CACF,CACF,EACA,8CAA+C,CAC7C,IAAK,CACH,QAAS,cACX,CACF,EACA,kBAAmB,CACjB,IAAK,CACH,QAAS,eACX,CACF,EACA,cAAe,CACb,IAAK,CACH,QAAS,IACX,CACF,EACA,wBAAyB,CACvB,IAAK,CACH,QAAS,MACX,CACF,EACA,MAAS,CACP,IAAK,CACH,QAAS,MACX,CACF,CACF,GACA,QAAS,CACP,uBAAwB,SAA4B,AAAnB,CAAyB,CAAE,CAAC,EAC3D,MAAO,CACL,MAAO,iCACP,GAAI,EAAa,EAAE,CAAC,EAAG,IACzB,CACF,EACA,eAAgB,SAAS,AAAY,CAAM,CAAE,CAAC,EAC5C,MAAO,CACL,MAAO,QACP,OAAQ,CAAC,CAAC,EAAE,CACZ,OAAQ,EAAa,EAAE,CAAC,CAAC,CAAC,EAAE,CAAE,KAChC,CACF,CACF,CACF,EACA,GAAM,CACJ,YAAa,EAAa,iBAAiB,CAAC,CAC1C,MAAS,CACP,IAAK,CAAC,CACR,EACA,GAAM,CACJ,EAAK,CACH,UAAW,KACX,QAAS,EACX,CACF,EACA,SAAY,CACV,EAAK,CACH,UAAW,IACX,SAAS,CACX,CACF,EACA,KAAQ,CACN,EAAK,CACH,UAAW,KACX,SAAS,CACX,CACF,EACA,qBAAsB,CACpB,IAAK,CACH,QAAS,KACX,CACF,EACA,IAAK,CACH,IAAK,CACH,QAAS,CACP,MAAO,SACP,OAAQ,cACV,CACF,CACF,EACA,MAAO,CACL,EAAK,CACH,QAAS,UACX,CACF,EACA,EAAK,CACH,IAAK,CACH,QAAS,CACP,MAAO,SACP,OAAQ,MACV,CACF,CACF,EACA,QAAW,CACT,IAAK,CACH,QAAS,IACX,CACF,EACA,IAAM,CACJ,IAAK,CACH,QAAS,CACP,MAAO,SACP,OAAQ,OACV,CACF,CACF,EACA,oBAAqB,CACnB,IAAK,CACH,QAAS,UACX,CACF,EACA,UAAW,CACT,IAAK,CACH,QAAS,MACX,CACF,EACA,8CAA+C,CAC7C,IAAK,CACH,QAAS,cACX,CACF,EACA,kBAAmB,CACjB,IAAK,CACH,QAAS,eACX,CACF,EACA,cAAe,CACb,IAAK,CACH,QAAS,IACX,CACF,EACA,wBAAyB,CACvB,IAAK,CACH,QAAS,MACX,CACF,EACA,MAAS,CACP,IAAK,CACH,QAAS,MACX,CACF,CACF,GACA,QAAS,CACP,eAAgB,SAAS,AAAY,CAAM,CAAE,CAAC,EAC5C,MAAO,CACL,MAAO,QACP,OAAQ,CAAC,CAAC,EAAE,CACZ,OAAQ,EAAa,EAAE,CAAC,CAAC,CAAC,EAAE,CAAE,KAChC,CACF,CACF,CACF,EACA,UAAa,CACX,YAAa,EAAa,iBAAiB,CAAC,CAC1C,MAAS,CACP,IAAK,CAAC,CACR,EACA,gBAAiB,CACf,IAAK,CACH,QAAS,eACX,CACF,EACA,oBAAqB,CACnB,IAAK,CACH,QAAS,UACX,CACF,EACA,KAAQ,CACN,IAAK,CACH,QAAS,MACX,CACF,CACF,GACA,QAAS,CACP,gBAAiB,SAAS,AAAa,CAAM,CAAE,CAAC,EAC9C,MAAO,CACL,MAAO,gBACP,GAAI,GAAK,EACX,CACF,CACF,CACF,EACA,WAAY,CACV,YAAa,EAAa,iBAAiB,CAAC,CAC1C,MAAS,CACP,IAAK,CACH,QAAS,QACX,CACF,EACA,cAAe,CACb,IAAK,CACH,QAAS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","ignoreList":[0,1,3,4,5,6,7,19,20,28,29,32,33,38,47,55,81,82,83,84,93,94,95]}