module.exports=[747699,(a,b,c)=>{b.exports={L:1,M:0,Q:3,H:2}},367866,(a,b,c)=>{b.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},614011,(a,b,c)=>{var d=a.r(367866);function e(a){this.mode=d.MODE_8BIT_BYTE,this.data=a}e.prototype={getLength:function(a){return this.data.length},write:function(a){for(var b=0;b<this.data.length;b++)a.put(this.data.charCodeAt(b),8)}},b.exports=e},928717,(a,b,c)=>{var d=a.r(747699);function e(a,b){this.totalCount=a,this.dataCount=b}e.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],e.getRSBlocks=function(a,b){var c=e.getRsBlockTable(a,b);if(void 0==c)throw Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,f=[],g=0;g<d;g++)for(var h=c[3*g+0],i=c[3*g+1],j=c[3*g+2],k=0;k<h;k++)f.push(new e(i,j));return f},e.getRsBlockTable=function(a,b){switch(b){case d.L:return e.RS_BLOCK_TABLE[(a-1)*4+0];case d.M:return e.RS_BLOCK_TABLE[(a-1)*4+1];case d.Q:return e.RS_BLOCK_TABLE[(a-1)*4+2];case d.H:return e.RS_BLOCK_TABLE[(a-1)*4+3];default:return}},b.exports=e},602390,(a,b,c)=>{function d(){this.buffer=[],this.length=0}d.prototype={get:function(a){var b=Math.floor(a/8);return(this.buffer[b]>>>7-a%8&1)==1},put:function(a,b){for(var c=0;c<b;c++)this.putBit((a>>>b-c-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}},b.exports=d},538338,(a,b,c)=>{for(var d={glog:function(a){if(a<1)throw Error("glog("+a+")");return d.LOG_TABLE[a]},gexp:function(a){for(;a<0;)a+=255;for(;a>=256;)a-=255;return d.EXP_TABLE[a]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},e=0;e<8;e++)d.EXP_TABLE[e]=1<<e;for(var e=8;e<256;e++)d.EXP_TABLE[e]=d.EXP_TABLE[e-4]^d.EXP_TABLE[e-5]^d.EXP_TABLE[e-6]^d.EXP_TABLE[e-8];for(var e=0;e<255;e++)d.LOG_TABLE[d.EXP_TABLE[e]]=e;b.exports=d},750709,(a,b,c)=>{var d=a.r(538338);function e(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}e.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var f=0;f<a.getLength();f++)b[c+f]^=d.gexp(d.glog(this.get(c))+d.glog(a.get(f)));return new e(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=d.glog(this.get(0))-d.glog(a.get(0)),c=Array(this.getLength()),f=0;f<this.getLength();f++)c[f]=this.get(f);for(var f=0;f<a.getLength();f++)c[f]^=d.gexp(d.glog(a.get(f))+b);return new e(c,0).mod(a)}},b.exports=e},523505,(a,b,c)=>{var d=a.r(367866),e=a.r(750709),f=a.r(538338),g={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;g.getBCHDigit(b)-g.getBCHDigit(g.G15)>=0;)b^=g.G15<<g.getBCHDigit(b)-g.getBCHDigit(g.G15);return(a<<10|b)^g.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;g.getBCHDigit(b)-g.getBCHDigit(g.G18)>=0;)b^=g.G18<<g.getBCHDigit(b)-g.getBCHDigit(g.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return g.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case 0:return(b+c)%2==0;case 1:return b%2==0;case 2:return c%3==0;case 3:return(b+c)%3==0;case 4:return(Math.floor(b/2)+Math.floor(c/3))%2==0;case 5:return b*c%2+b*c%3==0;case 6:return(b*c%2+b*c%3)%2==0;case 7:return(b*c%3+(b+c)%2)%2==0;default:throw Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new e([1],0),c=0;c<a;c++)b=b.multiply(new e([1,f.gexp(c)],0));return b},getLengthInBits:function(a,b){if(1<=b&&b<10)switch(a){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:case d.MODE_KANJI:return 8;default:throw Error("mode:"+a)}if(b<27)switch(a){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw Error("mode:"+a)}if(b<41)switch(a){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw Error("mode:"+a)}throw Error("type:"+b)},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d++)for(var e=0;e<b;e++){for(var f=0,g=a.isDark(d,e),h=-1;h<=1;h++)if(!(d+h<0)&&!(b<=d+h))for(var i=-1;i<=1;i++)!(e+i<0)&&!(b<=e+i)&&(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;d<b-1;d++)for(var e=0;e<b-1;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;d<b;d++)for(var e=0;e<b-6;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;e<b;e++)for(var d=0;d<b-6;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;e<b;e++)for(var d=0;d<b;d++)a.isDark(d,e)&&k++;return c+10*(Math.abs(100*k/b/b-50)/5)}};b.exports=g},390144,(a,b,c)=>{var d=a.r(614011),e=a.r(928717),f=a.r(602390),g=a.r(523505),h=a.r(750709);function i(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var j=i.prototype;j.addData=function(a){var b=new d(a);this.dataList.push(b),this.dataCache=null},j.isDark=function(a,b){if(a<0||this.moduleCount<=a||b<0||this.moduleCount<=b)throw Error(a+","+b);return this.modules[a][b]},j.getModuleCount=function(){return this.moduleCount},j.make=function(){if(this.typeNumber<1){var a=1;for(a=1;a<40;a++){for(var b=e.getRSBlocks(a,this.errorCorrectLevel),c=new f,d=0,h=0;h<b.length;h++)d+=b[h].dataCount;for(var h=0;h<this.dataList.length;h++){var i=this.dataList[h];c.put(i.mode,4),c.put(i.getLength(),g.getLengthInBits(i.mode,a)),i.write(c)}if(c.getLengthInBits()<=8*d)break}this.typeNumber=a}this.makeImpl(!1,this.getBestMaskPattern())},j.makeImpl=function(a,b){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var c=0;c<this.moduleCount;c++){this.modules[c]=Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++)this.modules[c][d]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,b),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,b)},j.setupPositionProbePattern=function(a,b){for(var c=-1;c<=7;c++)if(!(a+c<=-1)&&!(this.moduleCount<=a+c))for(var d=-1;d<=7;d++)b+d<=-1||this.moduleCount<=b+d||(0<=c&&c<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==c||6==c)||2<=c&&c<=4&&2<=d&&d<=4?this.modules[a+c][b+d]=!0:this.modules[a+c][b+d]=!1)},j.getBestMaskPattern=function(){for(var a=0,b=0,c=0;c<8;c++){this.makeImpl(!0,c);var d=g.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},j.createMovieClip=function(a,b,c){var d=a.createEmptyMovieClip(b,c);this.make();for(var e=0;e<this.modules.length;e++)for(var f=+e,g=0;g<this.modules[e].length;g++){var h=+g;this.modules[e][g]&&(d.beginFill(0,100),d.moveTo(h,f),d.lineTo(h+1,f),d.lineTo(h+1,f+1),d.lineTo(h,f+1),d.endFill())}return d},j.setupTimingPattern=function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=a%2==0);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=b%2==0)},j.setupPositionAdjustPattern=function(){for(var a=g.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var f=-2;f<=2;f++)for(var h=-2;h<=2;h++)-2==f||2==f||-2==h||2==h||0==f&&0==h?this.modules[d+f][e+h]=!0:this.modules[d+f][e+h]=!1}},j.setupTypeNumber=function(a){for(var b=g.getBCHTypeNumber(this.typeNumber),c=0;c<18;c++){var d=!a&&(b>>c&1)==1;this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;c<18;c++){var d=!a&&(b>>c&1)==1;this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},j.setupTypeInfo=function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=g.getBCHTypeInfo(c),e=0;e<15;e++){var f=!a&&(d>>e&1)==1;e<6?this.modules[e][8]=f:e<8?this.modules[e+1][8]=f:this.modules[this.moduleCount-15+e][8]=f}for(var e=0;e<15;e++){var f=!a&&(d>>e&1)==1;e<8?this.modules[8][this.moduleCount-e-1]=f:e<9?this.modules[8][15-e-1+1]=f:this.modules[8][15-e-1]=f}this.modules[this.moduleCount-8][8]=!a},j.mapData=function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,f=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;i<2;i++)if(null==this.modules[d][h-i]){var j=!1;f<a.length&&(j=(a[f]>>>e&1)==1),g.getMask(b,d,h-i)&&(j=!j),this.modules[d][h-i]=j,-1==--e&&(f++,e=7)}if((d+=c)<0||this.moduleCount<=d){d-=c,c=-c;break}}},i.PAD0=236,i.PAD1=17,i.createData=function(a,b,c){for(var d=e.getRSBlocks(a,b),h=new f,j=0;j<c.length;j++){var k=c[j];h.put(k.mode,4),h.put(k.getLength(),g.getLengthInBits(k.mode,a)),k.write(h)}for(var l=0,j=0;j<d.length;j++)l+=d[j].dataCount;if(h.getLengthInBits()>8*l)throw Error("code length overflow. ("+h.getLengthInBits()+">"+8*l+")");for(h.getLengthInBits()+4<=8*l&&h.put(0,4);h.getLengthInBits()%8!=0;)h.putBit(!1);for(;!(h.getLengthInBits()>=8*l)&&(h.put(i.PAD0,8),!(h.getLengthInBits()>=8*l));){;h.put(i.PAD1,8)}return i.createBytes(h,d)},i.createBytes=function(a,b){for(var c=0,d=0,e=0,f=Array(b.length),i=Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),f[j]=Array(k);for(var m=0;m<f[j].length;m++)f[j][m]=255&a.buffer[m+c];c+=k;var n=g.getErrorCorrectPolynomial(l),o=new h(f[j],n.getLength()-1).mod(n);i[j]=Array(n.getLength()-1);for(var m=0;m<i[j].length;m++){var p=m+o.getLength()-i[j].length;i[j][m]=p>=0?o.get(p):0}}for(var q=0,m=0;m<b.length;m++)q+=b[m].totalCount;for(var r=Array(q),s=0,m=0;m<d;m++)for(var j=0;j<b.length;j++)m<f[j].length&&(r[s++]=f[j][m]);for(var m=0;m<e;m++)for(var j=0;j<b.length;j++)m<i[j].length&&(r[s++]=i[j][m]);return r},b.exports=i},660908,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=h(a.r(28473)),f=a.r(537500),g=h(f);function h(a){return a&&a.__esModule?a:{default:a}}var i={bgColor:e.default.oneOfType([e.default.object,e.default.string]).isRequired,bgD:e.default.string.isRequired,fgColor:e.default.oneOfType([e.default.object,e.default.string]).isRequired,fgD:e.default.string.isRequired,size:e.default.number.isRequired,title:e.default.string,viewBoxSize:e.default.number.isRequired,xmlns:e.default.string},j=(0,f.forwardRef)(function(a,b){var c=a.bgColor,e=a.bgD,f=a.fgD,h=a.fgColor,i=a.size,j=a.title,k=a.viewBoxSize,l=a.xmlns,m=function(a,b){var c={};for(var d in a)!(b.indexOf(d)>=0)&&Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return g.default.createElement("svg",d({},m,{height:i,ref:b,viewBox:"0 0 "+k+" "+k,width:i,xmlns:void 0===l?"http://www.w3.org/2000/svg":l}),j?g.default.createElement("title",null,j):null,g.default.createElement("path",{d:e,fill:c}),g.default.createElement("path",{d:f,fill:h}))});j.displayName="QRCodeSvg",j.propTypes=i,c.default=j},702659,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.QRCode=void 0;var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=k(a.r(28473)),f=k(a.r(747699)),g=k(a.r(390144)),h=a.r(537500),i=k(h),j=k(a.r(660908));function k(a){return a&&a.__esModule?a:{default:a}}var l={bgColor:e.default.oneOfType([e.default.object,e.default.string]),fgColor:e.default.oneOfType([e.default.object,e.default.string]),level:e.default.string,size:e.default.number,value:e.default.string.isRequired},m=(0,h.forwardRef)(function(a,b){var c=a.bgColor,e=a.fgColor,h=a.level,k=a.size,l=a.value,m=function(a,b){var c={};for(var d in a)!(b.indexOf(d)>=0)&&Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["bgColor","fgColor","level","size","value"]),n=new g.default(-1,f.default[void 0===h?"L":h]);n.addData(l),n.make();var o=n.modules;return i.default.createElement(j.default,d({},m,{bgColor:void 0===c?"#FFFFFF":c,bgD:o.map(function(a,b){return a.map(function(a,c){return a?"":"M "+c+" "+b+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:void 0===e?"#000000":e,fgD:o.map(function(a,b){return a.map(function(a,c){return a?"M "+c+" "+b+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:b,size:void 0===k?256:k,viewBoxSize:o.length}))});c.QRCode=m,m.displayName="QRCode",m.propTypes=l,c.default=m},659337,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(698734),f=a.i(540772),g=a.i(922947),h=a.i(215179),i=a.i(358176),j=a.i(353788),k=a.i(236695),l=a.i(452549),m=a.i(232260),n=a.i(404761),o=a.i(674779),p=a.i(36565),q=a.i(502311),r=a.i(537500),s=a.i(206568),t=a.i(229606),u=a.i(351244),v=a.i(789884),w=a.i(116245),x=a.i(931282),y=a.i(539524),z=a.i(723979);function A({presentationId:a,aspectRatio:e="16:9"}){let[f,g]=(0,r.useState)(!1),[h,i]=(0,r.useState)(null),[j,k]=(0,r.useState)(null),m=(0,d.useQuery)(c.api.presentations.get,{presentationId:a}),n=(0,d.useMutation)(c.api.presentations.downloadPPTX),o=(0,d.useMutation)(c.api.presentations.downloadPDF),p=(0,d.useMutation)(c.api.presentations.downloadImages),q=(0,r.useCallback)(b=>{let c=`/api/download/${"images"===b?"images":b}/${a}`;console.log(`[DownloadButton] Triggering ${b} download via:`,c);let d=document.createElement("a");d.href=c,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d)},[a]);(0,r.useEffect)(()=>{!f||!m||!h||("pptx"===h?m.pptxUrl:"pdf"===h?m.pdfUrl:m.imagesZipUrl)&&(console.log(`[DownloadButton] ${h} ready, triggering download`),g(!1),i(null),q(h))},[f,m,h,q]);let s=async b=>{if(m){k(null),console.log(`[DownloadButton] handleDownload called for ${b}`);try{let c;c="pptx"===b?await n({presentationId:a,forceRegenerate:!0}):"pdf"===b?await o({presentationId:a,forceRegenerate:!0}):await p({presentationId:a,forceRegenerate:!0}),console.log("[DownloadButton] Mutation result:",c),c.cached&&c.url?q(b):c.generating&&(g(!0),i(b))}catch(a){console.error("Download error:",a),k(`Failed to generate ${b.toUpperCase()}. Please try again.`),g(!1),i(null)}}},t=!m||"slides_complete"!==m.status||f,A="pptx"===h?"PPTX":"pdf"===h?"PDF":"Images";return"16:9"===e?(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsx)(y.Button,{variant:"outline",size:"sm",onClick:()=>s("pptx"),disabled:t,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating ",A,"..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Download,{className:"h-4 w-4 mr-2"}),"Download"]})}),j&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:j})]}):(0,b.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,b.jsxs)(z.DropdownMenu,{children:[(0,b.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(y.Button,{variant:"outline",size:"sm",disabled:t,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating ",A,"..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Download,{className:"h-4 w-4 mr-2"}),"Download",(0,b.jsx)(u.ChevronDown,{className:"h-4 w-4 ml-1"})]})})}),(0,b.jsxs)(z.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>s("pdf"),children:[(0,b.jsx)(w.FileText,{className:"h-4 w-4 mr-2"}),"Download as PDF"]}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:()=>s("images"),children:[(0,b.jsx)(x.ImageIcon,{className:"h-4 w-4 mr-2"}),"Download as Images (ZIP)"]})]})]}),j&&(0,b.jsx)("p",{className:"text-xs text-destructive",children:j})]})}var B=a.i(354420),C=a.i(529395),D=a.i(291673),E=a.i(921690),F=a.i(366705);let G=(0,F.default)("pointer",[["path",{d:"M22 14a8 8 0 0 1-8 8",key:"56vcr3"}],["path",{d:"M18 11v-1a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1agjmk"}],["path",{d:"M14 10V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1",key:"wdbh2u"}],["path",{d:"M10 9.5V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v10",key:"1ibuk9"}],["path",{d:"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"g6ys72"}]]);var H=a.i(245493),I=a.i(23944),J=a.i(98343),K=a.i(133394),L=a.i(700760);function M(a,b,c,d=a=>a){return a*d(.5-b*(.5-c))}function N(a,b){return[a[0]+b[0],a[1]+b[1]]}function O(a,b){return[a[0]-b[0],a[1]-b[1]]}function P(a,b){return[a[0]*b,a[1]*b]}function Q(a){return[a[1],-a[0]]}function R(a,b){return a[0]*b[0]+a[1]*b[1]}function S(a,b){var c;return(c=O(a,b))[0]*c[0]+c[1]*c[1]}function T(a){var b;return b=Math.hypot(a[0],a[1]),[a[0]/b,a[1]/b]}function U(a,b,c){let d=Math.sin(c),e=Math.cos(c),f=a[0]-b[0],g=a[1]-b[1];return[f*e-g*d+b[0],f*d+g*e+b[1]]}function V(a,b,c){return N(a,P(O(b,a),c))}var{min:W,PI:X}=Math,Y=X+1e-4;function Z(a,b={}){return function(a,b={}){var c,d;let{size:e=16,smoothing:f=.5,thinning:g=.5,simulatePressure:h=!0,easing:i=a=>a,start:j={},end:k={},last:l=!1}=b,{cap:m=!0,easing:n=a=>a*(2-a)}=j,{cap:o=!0,easing:p=a=>--a*a*a+1}=k;if(0===a.length||e<=0)return[];let q=a[a.length-1].runningLength,r=!1===j.taper?0:!0===j.taper?Math.max(e,q):j.taper,s=!1===k.taper?0:!0===k.taper?Math.max(e,q):k.taper,t=Math.pow(e*f,2),u=[],v=[],w=a.slice(0,10).reduce((a,b)=>{let c=b.pressure;if(h){let d=W(1,b.distance/e),f=W(1,1-d);c=W(1,a+.275*d*(f-a))}return(a+c)/2},a[0].pressure),x=M(e,g,a[a.length-1].pressure,i),y,z=a[0].vector,A=a[0].point,B=A,C=A,D=B,E=!1;for(let b=0;b<a.length;b++){let{pressure:c}=a[b],{point:d,vector:f,distance:j,runningLength:k}=a[b];if(b<a.length-1&&q-k<3)continue;if(g){if(h){let a=W(1,j/e),b=W(1,1-a);c=W(1,w+.275*a*(b-w))}x=M(e,g,c,i)}else x=e/2;void 0===y&&(y=x),x=Math.max(.01,x*Math.min(k<r?n(k/r):1,q-k<s?p((q-k)/s):1));let l=(b<a.length-1?a[b+1]:a[b]).vector,m=b<a.length-1?R(f,l):1,o=0>R(f,z)&&!E,F=null!==m&&m<0;if(o||F){let a=P(Q(z),x);for(let b=1/13,c=0;c<=1;c+=b)C=U(O(d,a),d,Y*c),u.push(C),D=U(N(d,a),d,-(Y*c)),v.push(D);A=C,B=D,F&&(E=!0);continue}if(E=!1,b===a.length-1){let a=P(Q(f),x);u.push(O(d,a)),v.push(N(d,a));continue}let G=P(Q(V(l,f,m)),x);C=O(d,G),(b<=1||S(A,C)>t)&&(u.push(C),A=C),D=N(d,G),(b<=1||S(B,D)>t)&&(v.push(D),B=D),w=c,z=f}let F=a[0].point.slice(0,2),G=a.length>1?a[a.length-1].point.slice(0,2):N(a[0].point,[1,1]),H=[],I=[];if(1===a.length){if(!(r||s)||l){let a=(c=T(Q(O(F,G))),N(F,P(c,-(y||x)))),b=[];for(let c=1/13,d=c;d<=1;d+=c)b.push(U(a,F,2*Y*d));return b}}else{if(!(r||s&&1===a.length))if(m)for(let a=1/13,b=a;b<=1;b+=a){let a=U(v[0],F,Y*b);H.push(a)}else{let a=O(u[0],v[0]),b=P(a,.5),c=P(a,.51);H.push(O(F,b),O(F,c),N(F,c),N(F,b))}let b=Q([-(d=a[a.length-1].vector)[0],-d[1]]);if(s||r&&1===a.length)I.push(G);else if(o){let a=N(G,P(b,x));for(let b=1/29,c=b;c<1;c+=b)I.push(U(a,G,3*Y*c))}else I.push(N(G,P(b,x)),N(G,P(b,.99*x)),O(G,P(b,.99*x)),O(G,P(b,x)))}return u.concat(I,v.reverse(),H)}(function(a,b={}){var c,d,e;let{streamline:f=.5,size:g=16,last:h=!1}=b;if(0===a.length)return[];let i=.15+(1-f)*.85,j=Array.isArray(a[0])?a:a.map(({x:a,y:b,pressure:c=.5})=>[a,b,c]);if(2===j.length){let a=j[1];j=j.slice(0,-1);for(let b=1;b<5;b++)j.push(V(j[0],a,b/4))}1===j.length&&(j=[...j,[...N(j[0],[1,1]),...j[0].slice(2)]]);let k=[{point:[j[0][0],j[0][1]],pressure:j[0][2]>=0?j[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],l=!1,m=0,n=k[0],o=j.length-1;for(let a=1;a<j.length;a++){let b=h&&a===o?j[a].slice(0,2):V(n.point,j[a],i);if(d=n.point,d[0]===b[0]&&d[1]===b[1])continue;let c=(e=n.point,Math.hypot(b[1]-e[1],b[0]-e[0]));if(m+=c,a<o&&!l){if(m<g)continue;l=!0}n={point:b,pressure:j[a][2]>=0?j[a][2]:.5,vector:T(O(n.point,b)),distance:c,runningLength:m},k.push(n)}return k[0].vector=(null==(c=k[1])?void 0:c.vector)||[0,0],k}(a,b),b)}function $(a){if(!a.length)return"";let b=a.reduce((a,[b,c],d,e)=>{let[f,g]=e[(d+1)%e.length];return a.push(b,c,(b+f)/2,(c+g)/2),a},["M",...a[0],"Q"]);return b.push("Z"),b.join(" ")}let _=(0,r.forwardRef)(function({enabled:a,tool:c,color:d,width:e},f){let g=(0,r.useRef)(null),[h,i]=(0,r.useState)([]),[j,k]=(0,r.useState)([]),[l,m]=(0,r.useState)(!1),n=(0,r.useRef)(0);(0,r.useImperativeHandle)(f,()=>({undo:()=>i(a=>a.slice(0,-1)),clear:()=>{i([]),k([])},canUndo:()=>h.length>0}));let o=(0,r.useCallback)(()=>{switch(c){case"highlighter":return{color:"#ffff00",width:24,opacity:.4};case"eraser":return{color:"transparent",width:20,opacity:1};default:return{color:d,width:e,opacity:.9}}},[c,d,e]),p=(0,r.useCallback)(a=>{i(b=>b.filter(b=>!b.points.some(b=>20>Math.sqrt((b.x-a.x)**2+(b.y-a.y)**2))))},[]),q=(0,r.useCallback)(b=>{if(!a)return;b.preventDefault(),b.currentTarget.setPointerCapture(b.pointerId),m(!0);let d={x:b.clientX,y:b.clientY,pressure:b.pressure||.5};"eraser"===c?p(d):k([d])},[a,c,p]),s=(0,r.useCallback)(b=>{if(!l||!a)return;b.preventDefault();let d={x:b.clientX,y:b.clientY,pressure:b.pressure||.5};"eraser"===c?p(d):k(a=>[...a,d])},[l,a,c,p]),t=(0,r.useCallback)(a=>{if(l&&(a.preventDefault(),a.currentTarget.releasePointerCapture(a.pointerId),m(!1),j.length>0&&"eraser"!==c)){let a=o();i(b=>[...b,{id:`stroke-${n.current++}`,points:j,color:a.color,width:a.width,opacity:a.opacity}]),k([])}},[l,j,c,o]),u=(0,r.useCallback)(()=>{m(!1),k([])},[]);if(!a)return null;let v=o(),w=j.length>0&&"eraser"!==c?Z(j.map(a=>[a.x,a.y,a.pressure]),{size:v.width,thinning:.5*("highlighter"!==c),smoothing:.5,streamline:.5,simulatePressure:!0}):null;return(0,b.jsxs)("div",{ref:g,className:"fixed inset-0 z-[90] touch-none",style:{cursor:"crosshair"},onPointerDown:q,onPointerMove:s,onPointerUp:t,onPointerCancel:u,onPointerLeave:u,children:[(0,b.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[h.map(a=>{let c=Z(a.points.map(a=>[a.x,a.y,a.pressure]),{size:a.width,thinning:a.opacity<.5?0:.5,smoothing:.5,streamline:.5,simulatePressure:!0});return(0,b.jsx)("path",{d:$(c),fill:a.color,opacity:a.opacity},a.id)}),w&&(0,b.jsx)("path",{d:$(w),fill:v.color,opacity:v.opacity})]}),"eraser"===c&&l&&j.length>0&&(0,b.jsx)("div",{className:"fixed pointer-events-none rounded-full border-2 border-white/50",style:{left:j[j.length-1].x-10,top:j[j.length-1].y-10,width:20,height:20}})]})});function aa({enabled:a,color:c="#ff0000"}){let[d,e]=(0,r.useState)({x:0,y:0}),[f,g]=(0,r.useState)([]),[h,i]=(0,r.useState)(!1),j=(0,r.useRef)(null),k=(0,r.useCallback)(b=>{a&&(e({x:b.clientX,y:b.clientY}),i(!0),g(a=>[...a.slice(-15),{x:b.clientX,y:b.clientY,age:0}]))},[a]),l=(0,r.useCallback)(()=>{i(!1),g([])},[]);return((0,r.useEffect)(()=>{if(!a)return void g([]);let b=()=>{g(a=>a.map(a=>({...a,age:a.age+1})).filter(a=>a.age<20)),j.current=requestAnimationFrame(b)};return j.current=requestAnimationFrame(b),()=>{j.current&&cancelAnimationFrame(j.current)}},[a]),(0,r.useEffect)(()=>{if(a)return window.addEventListener("mousemove",k),window.addEventListener("mouseleave",l),()=>{window.removeEventListener("mousemove",k),window.removeEventListener("mouseleave",l)}},[a,k,l]),a&&h)?(0,b.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-[100]",children:[f.map((a,d)=>{let e=1-a.age/20,f=1-a.age/40;return(0,b.jsx)("div",{className:"absolute rounded-full",style:{left:a.x-4,top:a.y-4,width:8,height:8,backgroundColor:c,opacity:.5*e,transform:`scale(${f})`,boxShadow:`0 0 ${8*f}px ${4*f}px ${c}40`}},`${a.x}-${a.y}-${d}`)}),(0,b.jsxs)("div",{className:"absolute",style:{left:d.x-8,top:d.y-8,width:16,height:16},children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{background:`radial-gradient(circle, ${c}80 0%, transparent 70%)`,boxShadow:`0 0 24px 12px ${c}60`}}),(0,b.jsx)("div",{className:"absolute rounded-full",style:{left:4,top:4,width:8,height:8,backgroundColor:c,boxShadow:`0 0 8px 4px ${c}`}})]})]}):null}var ab=a.i(54797),ac=a.i(702659),ad=a.i(227759);function ae({open:a,onClose:e,presentationId:f,totalSlides:g,onSessionCreated:h}){let[i,j]=(0,r.useState)(!1),[k,l]=(0,r.useState)(null),m=(0,d.useMutation)(c.api.presentationSessions.create),n=(0,d.useMutation)(c.api.presentationSessions.refreshCode),o=(0,d.useQuery)(c.api.presentationSessions.get,k?{sessionId:k}:"skip");(0,r.useEffect)(()=>{a&&!k&&m({presentationId:f,totalSlides:g}).then(a=>{l(a.sessionId),h?.(a.sessionId)})},[a,k,m,f,g,h]),(0,r.useEffect)(()=>{a||(l(null),j(!1))},[a]);let q=(0,r.useCallback)(async()=>{k&&await n({sessionId:k})},[k,n]),s=(0,r.useCallback)(()=>{o?.sessionCode&&(navigator.clipboard.writeText(o.sessionCode),j(!0),setTimeout(()=>j(!1),2e3))},[o?.sessionCode]),t=(0,r.useCallback)(()=>{if(!o?.sessionCode)return;let a=`${window.location.origin}/slides/remote?code=${o.sessionCode}`;navigator.clipboard.writeText(a),j(!0),setTimeout(()=>j(!1),2e3)},[o?.sessionCode]),u=o?.sessionCode?`/slides/remote?code=${o.sessionCode}`:"";return(0,b.jsx)(ad.Dialog,{open:a,onOpenChange:a=>!a&&e(),children:(0,b.jsxs)(ad.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(ad.DialogHeader,{children:[(0,b.jsxs)(ad.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(H.Smartphone,{className:"h-5 w-5"}),"Remote Control"]}),(0,b.jsx)(ad.DialogDescription,{children:"Scan the QR code or enter the code on your phone to control this presentation remotely."})]}),o?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex justify-center p-4 bg-white rounded-lg",children:(0,b.jsx)(ac.default,{value:u,size:200})}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Or enter this code:"}),(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,b.jsx)("code",{className:"text-3xl font-mono font-bold tracking-widest",children:o.sessionCode}),(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:s,title:"Copy code",children:(0,b.jsx)(ab.Copy,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Code expires in ",(()=>{if(!o?.sessionCodeExpiresAt)return"";let a=Math.max(0,Math.floor((o.sessionCodeExpiresAt-Date.now())/1e3)),b=Math.floor(a/60);return`${b}:${(a%60).toString().padStart(2,"0")}`})()]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsxs)(y.Button,{variant:"outline",className:"w-full",onClick:t,children:[(0,b.jsx)(ab.Copy,{className:"h-4 w-4 mr-2"}),i?"Copied!":"Copy Link"]}),(0,b.jsxs)(y.Button,{variant:"ghost",className:"w-full",onClick:q,children:[(0,b.jsx)(p.RefreshCw,{className:"h-4 w-4 mr-2"}),"Generate New Code"]})]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground text-center",children:(0,b.jsxs)("p",{children:["Go to"," ",(0,b.jsxs)("code",{className:"bg-muted px-1 rounded",children:["","/slides/remote"]})," ","on your phone"]})})]}):(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})})}let af=(0,F.default)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),ag=(0,F.default)("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),ah=(0,F.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var ai=a.i(971310),aj=a.i(154360);let ak=[{value:"#ff0000",label:"Red"},{value:"#ff6600",label:"Orange"},{value:"#ffcc00",label:"Yellow"},{value:"#00cc00",label:"Green"},{value:"#0066ff",label:"Blue"},{value:"#9933ff",label:"Purple"},{value:"#ffffff",label:"White"},{value:"#000000",label:"Black"}],al=[4,8,12,20];function am({currentTool:a,currentColor:c,currentWidth:d,onToolChange:e,onColorChange:f,onWidthChange:g,onUndo:h,onClear:i,canUndo:j}){let k=(0,r.useCallback)(a=>"highlighter"===a?.4:1,[]);return(0,b.jsxs)("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-black/60 backdrop-blur-sm rounded-full px-4 py-2 pointer-events-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>e("pen"),className:(0,L.cn)("p-2 rounded-full transition-colors","pen"===a?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Pen",children:(0,b.jsx)(ah,{className:"h-5 w-5"})}),(0,b.jsx)("button",{type:"button",onClick:()=>e("highlighter"),className:(0,L.cn)("p-2 rounded-full transition-colors","highlighter"===a?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Highlighter",children:(0,b.jsx)(ag,{className:"h-5 w-5"})}),(0,b.jsx)("button",{type:"button",onClick:()=>e("eraser"),className:(0,L.cn)("p-2 rounded-full transition-colors","eraser"===a?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Eraser",children:(0,b.jsx)(af,{className:"h-5 w-5"})})]}),(0,b.jsx)("div",{className:"w-px h-6 bg-white/20"}),"eraser"!==a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex items-center gap-1",children:ak.map(d=>(0,b.jsx)("button",{type:"button",onClick:()=>f(d.value),className:(0,L.cn)("w-6 h-6 rounded-full border-2 transition-transform",c===d.value?"border-white scale-110":"border-transparent hover:scale-105"),style:{backgroundColor:d.value,opacity:k(a)},title:d.label},d.value))}),(0,b.jsx)("div",{className:"w-px h-6 bg-white/20"}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:al.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>g(a),className:(0,L.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-colors",d===a?"bg-white/20":"hover:bg-white/10"),title:`${a}px`,children:(0,b.jsx)("div",{className:"rounded-full bg-white",style:{width:Math.min(a,16),height:Math.min(a,16)}})},a))}),(0,b.jsx)("div",{className:"w-px h-6 bg-white/20"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("button",{type:"button",onClick:h,disabled:!j,className:(0,L.cn)("p-2 rounded-full transition-colors",j?"text-white/60 hover:text-white hover:bg-white/10":"text-white/20 cursor-not-allowed"),title:"Undo",children:(0,b.jsx)(aj.Undo2,{className:"h-5 w-5"})}),(0,b.jsx)("button",{type:"button",onClick:i,className:"p-2 rounded-full text-white/60 hover:text-white hover:bg-white/10 transition-colors",title:"Clear All",children:(0,b.jsx)(ai.Trash2,{className:"h-5 w-5"})})]})]})}function an({slides:a,initialSlideIndex:e=0,onExit:f,presentationId:g,sessionId:j}){let k=(0,r.useRef)(null),[l,m]=(0,r.useState)(e),[n,o]=(0,r.useState)(0),[p,q]=(0,r.useState)(!0),[s,t]=(0,r.useState)(!1),[u,v]=(0,r.useState)(!1),[w,x]=(0,r.useState)(!1),[y,z]=(0,r.useState)("pen"),[A,F]=(0,r.useState)("#ff0000"),[M,N]=(0,r.useState)(8),[O,P]=(0,r.useState)(!1),[Q,R]=(0,r.useState)(!1),[S,T]=(0,r.useState)(null),U=(0,r.useRef)(null),V=(0,r.useRef)(null),[W,X]=(0,r.useState)(null),Y=(0,r.useRef)(null),Z=a[l],{sendSlideChange:$,sendLaserToggle:ab}=(0,K.usePresentationSync)({presentationId:g,role:"presenter",onSlideChange:a=>{o(a>l?1:-1),m(a)},onLaserToggle:a=>v(a)}),ac=(0,r.useCallback)(()=>{v(a=>{let b=!a;return ab(b),b&&x(!1),b})},[ab]),ad=(0,r.useCallback)(()=>{x(a=>{let b=!a;return b&&(v(!1),ab(!1)),b})},[ab]),af=(0,r.useCallback)(()=>{V.current?.undo(),P(V.current?.canUndo()??!1)},[]),ag=(0,r.useCallback)(()=>{V.current?.clear(),P(!1)},[]);(0,r.useCallback)(()=>{P(V.current?.canUndo()??!1)},[]);let ah=(0,d.useQuery)(c.api.storage.getUrl,Z?.imageStorageId?{storageId:Z.imageStorageId}:"skip"),ai=j??S,aj=(0,d.useQuery)(c.api.presentationSessions.get,ai?{sessionId:ai}:"skip"),ak=(0,d.useMutation)(c.api.presentationSessions.updateSlide);(0,r.useEffect)(()=>{aj&&aj.currentSlide!==l&&(o(aj.currentSlide>l?1:-1),m(aj.currentSlide))},[aj?.currentSlide,l,aj]);let al=(0,r.useCallback)(()=>{if(l<a.length-1){o(1);let a=l+1;m(a),$(a),ai&&ak({sessionId:ai,slideIndex:a}).catch(()=>{})}},[l,a.length,$,ai,ak]),an=(0,r.useCallback)(()=>{if(l>0){o(-1);let a=l-1;m(a),$(a),ai&&ak({sessionId:ai,slideIndex:a}).catch(()=>{})}},[l,$,ai,ak]),ao=(0,r.useCallback)(b=>{b>=0&&b<a.length&&(o(b>l?1:-1),m(b),$(b),ai&&ak({sessionId:ai,slideIndex:b}).catch(()=>{}))},[l,a.length,$,ai,ak]),ap=(0,r.useCallback)(()=>{let a=`/slides/${g}/presenter`;Y.current=window.open(a,"presenter","width=1200,height=800,resizable=yes")},[g]),aq=(0,r.useCallback)(()=>{q(!0),U.current&&clearTimeout(U.current),U.current=setTimeout(()=>{q(!1)},3e3)},[]);(0,r.useEffect)(()=>(aq(),()=>{U.current&&clearTimeout(U.current)}),[aq]),(0,r.useEffect)(()=>{let a=()=>{document.fullscreenElement||f()};return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[f]),(0,r.useEffect)(()=>{let b=b=>{switch(aq(),b.key){case"ArrowRight":case" ":case"Enter":b.preventDefault(),al();break;case"ArrowLeft":case"Backspace":b.preventDefault(),an();break;case"Escape":b.preventDefault(),document.exitFullscreen?.(),f();break;case"Home":b.preventDefault(),ao(0);break;case"End":b.preventDefault(),ao(a.length-1);break;case"b":case"B":b.preventDefault(),t(a=>!a);break;case"p":case"P":b.preventDefault(),ap();break;case"l":case"L":b.preventDefault(),ac();break;case"d":case"D":b.preventDefault(),ad();break;default:b.key>="1"&&b.key<="9"?(b.preventDefault(),ao(Number.parseInt(b.key,10)-1)):"0"===b.key&&(b.preventDefault(),ao(9))}};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[al,an,ao,f,a.length,aq,ap,ac,ad]),(0,r.useEffect)(()=>{let a=()=>aq();return window.addEventListener("mousemove",a),()=>window.removeEventListener("mousemove",a)},[aq]);let ar=(l+1)/a.length*100;return(0,b.jsxs)("div",{ref:k,"data-presentation-container":!0,className:"fixed inset-0 bg-black z-50 select-none",onPointerDown:a=>{X(a.clientX)},onPointerUp:a=>{if(null===W)return;let b=a.clientX-W;b>50?an():b<-50&&al(),X(null)},onPointerCancel:()=>{X(null)},onMouseMove:aq,children:[s&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black z-40",onClick:()=>t(!1)}),(0,b.jsx)(B.AnimatePresence,{mode:"wait",initial:!1,children:(0,b.jsx)(C.motion.div,{initial:{opacity:0,x:100*n},animate:{opacity:1,x:0},exit:{opacity:0,x:-100*n},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0 flex items-center justify-center",children:ah?(0,b.jsx)(J.default,{src:ah,alt:Z?.title||"Slide",fill:!0,className:"object-contain",priority:!0,sizes:"100vw"}):(0,b.jsx)("div",{className:"text-white/50 text-xl",children:"Loading slide..."})},Z?._id)}),(0,b.jsxs)("div",{className:(0,L.cn)("absolute inset-0 pointer-events-none transition-opacity duration-300 z-30",p?"opacity-100":"opacity-0"),children:[(0,b.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2 pointer-events-auto",children:[(0,b.jsx)("button",{type:"button",onClick:ac,className:(0,L.cn)("p-2 rounded-full transition-colors",u?"bg-red-500/80 text-white":"bg-black/50 text-white hover:bg-black/70"),"aria-label":"Toggle laser pointer",title:"Laser Pointer (L)",children:(0,b.jsx)(G,{className:"h-6 w-6"})}),(0,b.jsx)("button",{type:"button",onClick:ad,className:(0,L.cn)("p-2 rounded-full transition-colors",w?"bg-yellow-500/80 text-white":"bg-black/50 text-white hover:bg-black/70"),"aria-label":"Toggle drawing mode",title:"Draw (D)",children:(0,b.jsx)(E.Pencil,{className:"h-6 w-6"})}),(0,b.jsx)("button",{type:"button",onClick:ap,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Open presenter view",title:"Presenter View (P)",children:(0,b.jsx)(D.Monitor,{className:"h-6 w-6"})}),(0,b.jsx)("button",{type:"button",onClick:()=>R(!0),className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Remote control",title:"Remote Control",children:(0,b.jsx)(H.Smartphone,{className:"h-6 w-6"})}),(0,b.jsx)("button",{type:"button",onClick:()=>{document.exitFullscreen?.(),f()},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Exit presentation",children:(0,b.jsx)(I.X,{className:"h-6 w-6"})})]}),l>0&&(0,b.jsx)("button",{type:"button",onClick:an,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/30 text-white/70 hover:bg-black/50 hover:text-white transition-all pointer-events-auto","aria-label":"Previous slide",children:(0,b.jsx)(h.ChevronLeft,{className:"h-8 w-8"})}),l<a.length-1&&(0,b.jsx)("button",{type:"button",onClick:al,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/30 text-white/70 hover:bg-black/50 hover:text-white transition-all pointer-events-auto","aria-label":"Next slide",children:(0,b.jsx)(i.ChevronRight,{className:"h-8 w-8"})}),(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("span",{className:"text-white/80 text-sm font-medium bg-black/40 px-3 py-1 rounded",children:[l+1," / ",a.length]}),s&&(0,b.jsx)("span",{className:"text-white/60 text-sm bg-black/40 px-3 py-1 rounded",children:"Press B to resume"})]}),(0,b.jsx)("div",{className:"h-1 bg-white/20 rounded-full overflow-hidden",children:(0,b.jsx)(C.motion.div,{className:"h-full bg-white/80",initial:!1,animate:{width:`${ar}%`},transition:{duration:.2}})})]})]}),(0,b.jsx)("div",{className:(0,L.cn)("absolute bottom-20 left-1/2 -translate-x-1/2 text-white/40 text-xs text-center transition-opacity duration-500 pointer-events-none",p?"opacity-100":"opacity-0"),children:(0,b.jsx)("span",{className:"bg-black/30 px-3 py-1 rounded",children:"← → Navigate • L Laser • D Draw • P Presenter • B Black • Esc Exit"})}),(0,b.jsx)(_,{ref:V,enabled:w,tool:y,color:A,width:M}),w&&(0,b.jsx)(am,{currentTool:y,currentColor:A,currentWidth:M,onToolChange:z,onColorChange:F,onWidthChange:N,onUndo:af,onClear:ag,canUndo:O}),(0,b.jsx)(aa,{enabled:u}),(0,b.jsx)(ae,{open:Q,onClose:()=>R(!1),presentationId:g,totalSlides:a.length,onSessionCreated:T})]})}var ao=a.i(214754),ap=a.i(477430),aq=a.i(772949);function ar({slides:a,modelName:c}){if(!(0,aq.useUserPreference)("showSlideStatistics"))return null;let d=a.reduce((a,b)=>a+(b.generationCost||0),0),e=a.reduce((a,b)=>a+(b.inputTokens||0),0),f=a.reduce((a,b)=>a+(b.outputTokens||0),0);return 0===d&&0===e?null:(0,b.jsx)(ap.TooltipProvider,{children:(0,b.jsxs)(ap.Tooltip,{children:[(0,b.jsx)(ap.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(ao.Info,{className:"h-4 w-4 text-muted-foreground"})})}),(0,b.jsxs)(ap.TooltipContent,{side:"bottom",className:"text-sm space-y-1.5 p-3",children:[(0,b.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Model"}),(0,b.jsx)("span",{className:"font-medium",children:c})]}),(0,b.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Total Cost"}),(0,b.jsxs)("span",{className:"font-mono",children:["$",d.toFixed(4)]})]}),(0,b.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Tokens"}),(0,b.jsxs)("span",{className:"font-mono text-xs",children:[e.toLocaleString()," in /"," ",f.toLocaleString()," out"]})]})]})]})})}var as=a.i(730843),at=a.i(753884),au=a.i(968177),av=a.i(820658),aw=a.i(197463),ax=a.i(658547);function ay({slide:a,open:e,onOpenChange:f}){let[g,h]=(0,r.useState)(""),[i,j]=(0,r.useState)(!1),k=(0,d.useMutation)(c.api.presentations.regenerateSlideImage),m=(0,d.useQuery)(c.api.storage.getUrl,a.imageStorageId?{storageId:a.imageStorageId}:"skip"),n=async()=>{j(!0);try{await k({slideId:a._id,customPrompt:g.trim()||void 0}),f(!1),h("")}catch(a){console.error("Regeneration error:",a)}finally{j(!1)}};return(0,b.jsx)(ad.Dialog,{open:e,onOpenChange:f,children:(0,b.jsxs)(ad.DialogContent,{className:"max-w-2xl",children:[(0,b.jsxs)(ad.DialogHeader,{children:[(0,b.jsx)(ad.DialogTitle,{children:"Edit Slide"}),(0,b.jsx)(ad.DialogDescription,{children:"Describe what to change, or leave empty to regenerate fresh."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(ax.Label,{className:"text-sm font-medium",children:"Current Slide"}),(0,b.jsx)("div",{className:"mt-2 aspect-video bg-muted rounded-lg overflow-hidden relative",children:m?(0,b.jsx)(J.default,{src:m,alt:a.title,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 100vw, 600px"}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No image"})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(ax.Label,{htmlFor:"customPrompt",children:"Custom Instructions (Optional)"}),(0,b.jsx)(aw.Textarea,{id:"customPrompt",value:g,onChange:a=>h(a.target.value),placeholder:"E.g., 'Make this slide more visual', 'Use warmer colors', 'Add more whitespace'...",rows:3,className:"mt-2",disabled:i}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to regenerate with the same style."})]}),void 0!==a.generationCost&&a.generationCost>0&&(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Previous cost: $",a.generationCost.toFixed(4)]})]}),(0,b.jsxs)(ad.DialogFooter,{children:[(0,b.jsx)(y.Button,{variant:"outline",onClick:()=>f(!1),disabled:i,children:"Cancel"}),(0,b.jsx)(y.Button,{onClick:n,disabled:i,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Regenerating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.RefreshCw,{className:"h-4 w-4 mr-2"}),"Regenerate"]})})]})]})})}function az({slide:a,slideNumber:e,totalSlides:f}){let[g,h]=(0,r.useState)(!1),[i,j]=(0,r.useState)(!1),[k,m]=(0,r.useState)(a.speakerNotes||""),[n,o]=(0,r.useState)(!1),q=(0,aq.useUserPreference)("showSlideStatistics"),s=(0,d.useMutation)(c.api.presentations.updateSlideContent);(0,r.useEffect)(()=>{m(a.speakerNotes||""),j(!1)},[a.speakerNotes]);let t=async()=>{o(!0);try{await s({slideId:a._id,speakerNotes:k}),at.toast.success("Speaker notes saved"),j(!1)}catch(a){at.toast.error("Failed to save speaker notes"),console.error(a)}finally{o(!1)}},u="error"===a.imageStatus||"complete"===a.imageStatus,v="generating"===a.imageStatus||"pending"===a.imageStatus,w="complete"===a.imageStatus?"secondary":"error"===a.imageStatus?"destructive":"secondary";return(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["Slide ",e," of ",f]}),(0,b.jsx)(au.Badge,{variant:"secondary",className:"capitalize",children:a.slideType})]}),(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a.title})]}),(0,b.jsx)(av.Separator,{}),a.content&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Content"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:a.content})]}),(0,b.jsx)(av.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("h3",{className:"text-sm font-medium",children:"Speaker Notes"}),!i&&(0,b.jsxs)(y.Button,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>j(!0),children:[(0,b.jsx)(E.Pencil,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),i?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(aw.Textarea,{value:k,onChange:a=>m(a.target.value),placeholder:"Add speaker notes...",className:"min-h-[100px] max-h-[200px] overflow-auto text-sm resize-none",autoFocus:!0}),(0,b.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,b.jsxs)(y.Button,{variant:"ghost",size:"sm",onClick:()=>{m(a.speakerNotes||""),j(!1)},disabled:n,children:[(0,b.jsx)(I.X,{className:"h-3 w-3 mr-1"}),"Cancel"]}),(0,b.jsxs)(y.Button,{size:"sm",onClick:t,disabled:n,children:[n?(0,b.jsx)(l.Loader2,{className:"h-3 w-3 mr-1 animate-spin"}):(0,b.jsx)(as.Check,{className:"h-3 w-3 mr-1"}),"Save"]})]})]}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.speakerNotes||(0,b.jsx)("span",{className:"italic text-muted-foreground/60",children:"No speaker notes yet. Click Edit to add some."})})]}),(0,b.jsx)(av.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Generation Info"}),(0,b.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,b.jsx)(au.Badge,{variant:w,className:"capitalize",children:a.imageStatus})]}),q&&void 0!==a.generationCost&&a.generationCost>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Cost"}),(0,b.jsxs)("span",{className:"font-mono",children:["$",a.generationCost.toFixed(4)]})]}),q&&void 0!==a.inputTokens&&a.inputTokens>0&&(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Tokens"}),(0,b.jsxs)("span",{className:"font-mono text-xs",children:[a.inputTokens.toLocaleString()," in /"," ",(a.outputTokens||0).toLocaleString()," out"]})]})]})]}),(0,b.jsx)(av.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(y.Button,{variant:"outline",className:"w-full",disabled:!u||v,onClick:()=>h(!0),children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p.RefreshCw,{className:"h-4 w-4 mr-2"}),"Edit Slide"]})}),"error"===a.imageStatus&&a.imageError&&(0,b.jsx)("p",{className:"text-xs text-destructive text-center",children:a.imageError})]}),(0,b.jsx)(ay,{slide:a,open:g,onOpenChange:h})]})}function aA({open:a,onClose:e,slide:f}){let g=(0,d.useQuery)(c.api.storage.getUrl,f?.imageStorageId?{storageId:f.imageStorageId}:"skip");return((0,r.useEffect)(()=>{if(!a)return;let b=a=>{"Escape"===a.key&&e()};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[a,e]),f)?(0,b.jsx)(ad.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(ad.DialogContent,{className:"!max-w-none w-screen h-screen max-h-screen p-0 border-0 rounded-none bg-black/95 backdrop-blur-md",showCloseButton:!1,children:[(0,b.jsx)(ad.DialogTitle,{className:"sr-only",children:f.title}),(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:e,className:"absolute top-4 right-4 z-50 text-white hover:bg-white/10","aria-label":"Close fullscreen view",children:(0,b.jsx)(I.X,{className:"h-6 w-6"})}),(0,b.jsx)("div",{className:"flex items-center justify-center w-full h-full p-8",children:g?(0,b.jsx)("div",{className:"relative w-full h-full max-w-7xl",children:(0,b.jsx)(J.default,{src:g,alt:f.title,fill:!0,className:"object-contain",sizes:"95vw",priority:!0})}):(0,b.jsx)(l.Loader2,{className:"h-12 w-12 animate-spin text-white"})}),(0,b.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black/50 px-4 py-2 rounded-full",children:f.title})]})}):null}let aB=(0,F.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),aC={"16:9":"aspect-video","1:1":"aspect-square","9:16":"aspect-[9/16] h-full"},aD={"16:9":"w-full max-w-4xl","1:1":"w-full max-w-2xl","9:16":"h-[calc(100vh-14rem)]"};function aE({slide:a,direction:f,onZoom:g,aspectRatio:h="16:9"}){let i=aC[h],j=aD[h],k=(0,d.useQuery)(c.api.storage.getUrl,a.imageStorageId?{storageId:a.imageStorageId}:"skip");return(0,b.jsx)(B.AnimatePresence,{mode:"wait",initial:!1,children:(0,b.jsxs)(C.motion.div,{initial:{opacity:0,x:50*f},animate:{opacity:1,x:0},exit:{opacity:0,x:-50*f},transition:{duration:.2,ease:"easeOut"},className:j,children:["pending"===a.imageStatus&&(0,b.jsx)("div",{className:(0,L.cn)(i,"bg-muted rounded-lg flex items-center justify-center shadow-lg"),children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Waiting to generate..."})}),"generating"===a.imageStatus&&(0,b.jsxs)("div",{className:(0,L.cn)(i,"bg-muted rounded-lg flex flex-col items-center justify-center gap-4 shadow-lg"),children:[(0,b.jsx)(l.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"font-medium",children:"Generating slide..."}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.title})]})]}),"error"===a.imageStatus&&(0,b.jsxs)("div",{className:(0,L.cn)(i,"bg-muted rounded-lg flex flex-col items-center justify-center gap-4 border-2 border-destructive/50 shadow-lg"),children:[(0,b.jsx)(e.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"font-medium text-destructive",children:"Generation Failed"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground max-w-md",children:a.imageError||"Unknown error occurred"})]})]}),"complete"===a.imageStatus&&!k&&(0,b.jsx)("div",{className:(0,L.cn)(i,"bg-muted rounded-lg flex items-center justify-center shadow-lg"),children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),"complete"===a.imageStatus&&k&&(0,b.jsx)("div",{className:"relative group h-full",children:(0,b.jsxs)("div",{className:(0,L.cn)(i,"relative rounded-lg overflow-hidden shadow-2xl"),children:[(0,b.jsx)(J.default,{src:k,alt:a.title,fill:!0,className:"object-contain bg-white",priority:!0,sizes:"(max-width: 1200px) 100vw, 1200px"}),(0,b.jsx)("button",{type:"button",onClick:g,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Zoom slide",children:(0,b.jsx)(aB,{className:"h-5 w-5"})})]})})]},a._id)})}let aF={"16:9":"aspect-video","1:1":"aspect-square","9:16":"aspect-[9/16]"};function aG({slide:a,index:f,isActive:g,onClick:h,aspectRatio:i="16:9"}){let j=aF[i],k=(0,d.useQuery)(c.api.storage.getUrl,a.imageStorageId?{storageId:a.imageStorageId}:"skip");return(0,b.jsxs)("button",{type:"button",onClick:h,className:(0,L.cn)("w-full max-w-[200px] mx-auto rounded-lg border-2 transition-all overflow-hidden text-left block",g?"border-primary ring-2 ring-primary/20":"border-transparent hover:border-muted-foreground/30"),children:[(0,b.jsxs)("div",{className:(0,L.cn)(j,"bg-muted relative"),children:["pending"===a.imageStatus&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:(0,b.jsx)("span",{className:"text-xs",children:"Waiting..."})}),"generating"===a.imageStatus&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(l.Loader2,{className:"h-5 w-5 animate-spin text-amber-500"})}),"error"===a.imageStatus&&(0,b.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-destructive",children:[(0,b.jsx)(e.AlertCircle,{className:"h-5 w-5 mb-1"}),(0,b.jsx)("span",{className:"text-xs",children:"Failed"})]}),"complete"===a.imageStatus&&k&&(0,b.jsx)(J.default,{src:k,alt:a.title,fill:!0,className:"object-cover",sizes:"256px"}),"complete"===a.imageStatus&&!k&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(l.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),(0,b.jsx)("div",{className:"absolute top-1 left-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:f+1}),(0,b.jsx)("div",{className:(0,L.cn)("absolute top-1 right-1 h-2 w-2 rounded-full","complete"===a.imageStatus&&"bg-green-500","generating"===a.imageStatus&&"bg-amber-500 animate-pulse","error"===a.imageStatus&&"bg-red-500","pending"===a.imageStatus&&"bg-muted-foreground/50")})]}),(0,b.jsxs)("div",{className:"p-2 bg-background",children:[(0,b.jsx)("p",{className:"text-xs font-medium truncate",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:a.slideType})]})]})}var aH=a.i(965025),aI=a.i(276670),aJ=a.i(375523),aK=a.i(63263);function aL({params:a}){let u=(0,r.use)(a).id,v=(0,q.useRouter)(),{showSlides:w,isLoading:x}=(0,aJ.useFeatureToggles)(),{isMobile:z}=(0,aK.useMobileDetect)(),[B,C]=(0,r.useState)(0),[D,E]=(0,r.useState)(!1),[F,G]=(0,r.useState)(0),[H,I]=(0,r.useState)(!1),[J,K]=(0,r.useState)(!1),L=(0,d.useQuery)(c.api.presentations.get,{presentationId:u}),M=(0,d.useQuery)(c.api.presentations.getSlides,{presentationId:u}),N=(0,d.useMutation)(c.api.presentations.retryGeneration),O=(0,r.useCallback)(()=>{M&&(G(1),C(a=>Math.min(a+1,M.length-1)))},[M]),P=(0,r.useCallback)(()=>{G(-1),C(a=>Math.max(a-1,0))},[]),Q=(0,r.useCallback)(a=>{!M||a<0||a>=M.length||(G(a>B?1:-1),C(a))},[M,B]),R=(0,r.useCallback)(()=>{document.documentElement.requestFullscreen({navigationUI:"hide"}).then(()=>{requestAnimationFrame(()=>{I(!0)})}).catch(a=>{console.error("Fullscreen failed:",a),I(!0)})},[]),S=(0,r.useCallback)(async()=>{K(!0);try{await N({presentationId:u})}catch(a){console.error("Retry failed:",a)}finally{K(!1)}},[N,u]);if((0,r.useEffect)(()=>{if(!M||D)return;let a=a=>{if(!(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement))switch(a.key){case"ArrowRight":O();break;case"ArrowLeft":P();break;default:a.key>="1"&&a.key<="9"&&Q(Number.parseInt(a.key,10)-1)}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[M,D,O,P,Q]),x)return(0,b.jsx)(t.FeatureLoadingScreen,{});if(!w)return(0,b.jsx)(s.DisabledFeaturePage,{featureName:"Slides",settingKey:"showSlides"});if(!L||!M)return(0,b.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})});let T=M[B],U=L.totalSlides>0?L.generatedSlideCount/L.totalSlides*100:0,V="slides_generating"===L.status,W="slides_complete"===L.status,X="design_generating"===L.status||"design_complete"===L.status||"outline_complete"===L.status||"error"===L.status||"slides_generating"===L.status&&M.every(a=>"pending"===a.imageStatus||"error"===a.imageStatus),Y=()=>{switch(L.status){case"outline_complete":return"Design pending";case"design_generating":return"Generating design...";case"design_complete":return"Design ready";case"slides_generating":return`Generating ${L.generatedSlideCount}/${L.totalSlides}`;case"slides_complete":return"Complete";case"error":return"Error";default:return L.status}},Z=a=>{switch(L.status){case"outline_complete":default:return(0,b.jsx)(j.Clock,{className:a});case"design_generating":return(0,b.jsx)(m.Palette,{className:`${a} animate-pulse`});case"design_complete":return(0,b.jsx)(m.Palette,{className:a});case"slides_generating":return(0,b.jsx)(l.Loader2,{className:`${a} animate-spin`});case"slides_complete":return(0,b.jsx)(g.CheckCircle,{className:`${a} text-green-500`});case"error":return(0,b.jsx)(e.AlertCircle,{className:`${a} text-destructive`})}},$=()=>{let a=L.imageModel||"google:gemini-3-pro-image-preview";return a.includes("gemini-3")?"Gemini 3":a.includes("gemini-2.5")||a.includes("gemini-2-5")?"Gemini 2.5":a.includes("gemini-2")?"Gemini 2":a.replace(/^google:/,"").replace(/-/g," ")};return z?(0,b.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,b.jsxs)("header",{className:"border-b p-3 flex items-center gap-2 shrink-0",children:[(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:()=>v.push("/slides"),children:(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4"})}),(0,b.jsx)(o.Presentation,{className:"h-4 w-4 text-primary shrink-0"}),(0,b.jsx)("span",{className:"font-medium truncate flex-1",children:L.title}),(0,b.jsx)(ar,{slides:M,modelName:$()}),(0,b.jsx)(ap.TooltipProvider,{children:(0,b.jsxs)(ap.Tooltip,{children:[(0,b.jsx)(ap.TooltipTrigger,{className:"shrink-0",children:Z("h-4 w-4")}),(0,b.jsx)(ap.TooltipContent,{side:"bottom",children:(0,b.jsx)("p",{children:Y()})})]})}),X&&(0,b.jsx)(y.Button,{size:"icon",variant:"outline",className:"shrink-0",onClick:S,disabled:J,children:(0,b.jsx)(p.RefreshCw,{className:`h-4 w-4 ${J?"animate-spin":""}`})}),W&&(0,b.jsx)(y.Button,{size:"icon",className:"shrink-0",onClick:R,children:(0,b.jsx)(n.Play,{className:"h-4 w-4"})})]}),V&&(0,b.jsx)("div",{className:"px-3 py-2 border-b shrink-0",children:(0,b.jsx)(aH.Progress,{value:U,className:"h-1.5"})}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center p-4 bg-muted/30 overflow-hidden",children:T&&(0,b.jsx)(aE,{slide:T,direction:F,onZoom:()=>E(!0),aspectRatio:L.aspectRatio||"16:9"})}),(0,b.jsxs)("div",{className:"border-t p-3 flex items-center justify-between shrink-0 bg-background",children:[(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:P,disabled:0===B,children:(0,b.jsx)(h.ChevronLeft,{className:"h-5 w-5"})}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[B+1," / ",M.length]}),(0,b.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:O,disabled:B===M.length-1,children:(0,b.jsx)(i.ChevronRight,{className:"h-5 w-5"})})]}),(0,b.jsx)(aA,{open:D,onClose:()=>E(!1),slide:T})]}):(0,b.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,b.jsxs)("header",{className:"border-b px-4 py-3 flex items-center justify-between shrink-0 bg-background",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(y.Button,{variant:"ghost",size:"sm",onClick:()=>v.push("/slides"),children:[(0,b.jsx)(f.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(o.Presentation,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h1",{className:"font-semibold",children:L.title})]}),V&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Generating ",L.generatedSlideCount,"/",L.totalSlides," slides..."]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(ar,{slides:M,modelName:$()}),(0,b.jsx)(ap.TooltipProvider,{children:(0,b.jsxs)(ap.Tooltip,{children:[(0,b.jsx)(ap.TooltipTrigger,{children:Z("h-4 w-4")}),(0,b.jsx)(ap.TooltipContent,{side:"bottom",children:(0,b.jsx)("p",{children:Y()})})]})}),X&&(0,b.jsxs)(y.Button,{variant:"outline",size:"sm",onClick:S,disabled:J,children:[(0,b.jsx)(p.RefreshCw,{className:`h-4 w-4 mr-2 ${J?"animate-spin":""}`}),"Retry"]}),(0,b.jsxs)(y.Button,{variant:"outline",size:"sm",onClick:()=>v.push(`/slides/${u}/outline`),children:[(0,b.jsx)(k.FileEdit,{className:"h-4 w-4 mr-2"}),"Edit Outline"]}),(0,b.jsx)(A,{presentationId:u,aspectRatio:L?.aspectRatio}),(0,b.jsxs)(y.Button,{size:"sm",onClick:R,disabled:!W,children:[(0,b.jsx)(n.Play,{className:"h-4 w-4 mr-2"}),"Present"]})]})]}),V&&(0,b.jsx)("div",{className:"px-4 py-2 border-b shrink-0",children:(0,b.jsx)(aH.Progress,{value:U,className:"h-2"})}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,b.jsx)("aside",{className:"w-72 shrink-0 border-r bg-muted/30",children:(0,b.jsx)(aI.ScrollArea,{className:"h-full",children:(0,b.jsx)("div",{className:"p-4 space-y-2",children:M.map((a,c)=>(0,b.jsx)(aG,{slide:a,index:c,isActive:c===B,onClick:()=>Q(c),aspectRatio:L.aspectRatio||"16:9"},a._id))})})}),(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center bg-muted/20 p-8 overflow-hidden",children:T&&(0,b.jsx)(aE,{slide:T,direction:F,onZoom:()=>E(!0),aspectRatio:L.aspectRatio||"16:9"})}),(0,b.jsx)("aside",{className:"w-80 shrink-0 border-l bg-background",children:(0,b.jsx)(aI.ScrollArea,{className:"h-full",children:T&&(0,b.jsx)(az,{slide:T,slideNumber:B+1,totalSlides:M.length})})})]}),(0,b.jsx)(aA,{open:D,onClose:()=>E(!1),slide:T}),H&&(0,b.jsx)(an,{slides:M,initialSlideIndex:B,onExit:()=>I(!1),presentationId:u})]})}a.s(["default",()=>aL],659337)}];

//# sourceMappingURL=_13fd91c7._.js.map