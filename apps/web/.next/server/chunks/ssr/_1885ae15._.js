module.exports=[895826,535176,a=>{"use strict";var b=a.i(366705);let c=(0,b.default)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);a.s(["Bug",()=>c],895826);let d=(0,b.default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);a.s(["Heart",()=>d],535176)},473479,a=>{"use strict";let b=(0,a.i(366705).default)("lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);a.s(["Lightbulb",()=>b],473479)},105008,a=>{"use strict";var b=a.i(367146),c=a.i(537500),d=a.i(572521),e=a.i(588808),f=a.i(626468),g=a.i(550481),h=a.i(147243),i=a.i(394581),j=a.i(506122),k="Switch",[l,m]=(0,f.createContextScope)(k),[n,o]=l(k),p=c.forwardRef((a,f)=>{let{__scopeSwitch:h,name:i,checked:l,defaultChecked:m,required:o,disabled:p,value:q="on",onCheckedChange:r,form:u,...v}=a,[w,x]=c.useState(null),y=(0,e.useComposedRefs)(f,a=>x(a)),z=c.useRef(!1),A=!w||u||!!w.closest("form"),[B,C]=(0,g.useControllableState)({prop:l,defaultProp:m??!1,onChange:r,caller:k});return(0,b.jsxs)(n,{scope:h,checked:B,disabled:p,children:[(0,b.jsx)(j.Primitive.button,{type:"button",role:"switch","aria-checked":B,"aria-required":o,"data-state":t(B),"data-disabled":p?"":void 0,disabled:p,value:q,...v,ref:y,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{C(a=>!a),A&&(z.current=a.isPropagationStopped(),z.current||a.stopPropagation())})}),A&&(0,b.jsx)(s,{control:w,bubbles:!z.current,name:i,value:q,checked:B,required:o,disabled:p,form:u,style:{transform:"translateX(-100%)"}})]})});p.displayName=k;var q="SwitchThumb",r=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=o(q,d);return(0,b.jsx)(j.Primitive.span,{"data-state":t(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});r.displayName=q;var s=c.forwardRef(({__scopeSwitch:a,control:d,checked:f,bubbles:g=!0,...j},k)=>{let l=c.useRef(null),m=(0,e.useComposedRefs)(l,k),n=(0,h.usePrevious)(f),o=(0,i.useSize)(d);return c.useEffect(()=>{let a=l.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(n!==f&&b){let c=new Event("click",{bubbles:g});b.call(a,f),a.dispatchEvent(c)}},[n,f,g]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:f,...j,tabIndex:-1,ref:m,style:{...j.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function t(a){return a?"checked":"unchecked"}s.displayName="SwitchBubbleInput";var u=a.i(700760);function v({className:a,...c}){return(0,b.jsx)(p,{"data-slot":"switch",className:(0,u.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(r,{"data-slot":"switch-thumb",className:(0,u.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}a.s(["Switch",()=>v],105008)},421513,a=>{"use strict";let b=(0,a.i(366705).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]);a.s(["MessageCircle",()=>b],421513)},147118,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(895826);let f=(0,a.i(366705).default)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var g=a.i(535176),h=a.i(473479),i=a.i(452549),j=a.i(421513),k=a.i(502311),l=a.i(537500),m=a.i(753884),n=a.i(539524),o=a.i(227759),p=a.i(658547),q=a.i(547885),r=a.i(105008),s=a.i(197463);let t={bug:{label:"Report a Bug",icon:(0,b.jsx)(e.Bug,{className:"h-4 w-4"}),description:"Something isn't working as expected"},feature:{label:"Feature Request",icon:(0,b.jsx)(h.Lightbulb,{className:"h-4 w-4"}),description:"I'd like to suggest a new feature"},praise:{label:"Share Praise",icon:(0,b.jsx)(g.Heart,{className:"h-4 w-4"}),description:"Something I really love about this app"},other:{label:"General Feedback",icon:(0,b.jsx)(j.MessageCircle,{className:"h-4 w-4"}),description:"Other thoughts or comments"}};function u({open:e,onOpenChange:g}){let h=(0,k.usePathname)(),j=(0,d.useQuery)(c.api.users.getCurrentUser),u=(0,d.useMutation)(c.api.feedback.createFeedback),v=(0,d.useMutation)(c.api.files.generateUploadUrl),[w,x]=(0,l.useState)("bug"),[y,z]=(0,l.useState)(""),[A,B]=(0,l.useState)(""),[C,D]=(0,l.useState)(""),[E,F]=(0,l.useState)(""),[G,H]=(0,l.useState)(!0),[I,J]=(0,l.useState)(!1),K=(0,l.useCallback)(()=>{x("bug"),z(""),B(""),D(""),F(""),H(!0)},[]),L=(0,l.useCallback)(async()=>{try{console.log("[Feedback] Starting screenshot capture...");let{toPng:b}=await a.A(981188),c=document.querySelector('[data-slot="dialog-overlay"]'),d=document.querySelector('[data-slot="dialog-content"]');c&&(c.style.visibility="hidden"),d&&(d.style.visibility="hidden"),await new Promise(a=>setTimeout(a,100));let e=await b(document.body,{cacheBust:!0,width:window.innerWidth,height:window.innerHeight,style:{transform:"scale(1)",transformOrigin:"top left"},filter:a=>{if(a instanceof Element){let b=a.getAttribute("data-slot");if("dialog-overlay"===b||"dialog-content"===b)return!1;let c=a.getAttribute("role");if("dialog"===c||"alertdialog"===c)return!1}return!0}});console.log("[Feedback] Screenshot captured, data URL length:",e.length),c&&(c.style.visibility=""),d&&(d.style.visibility="");let f=await fetch(e),g=await f.blob();console.log("[Feedback] Blob created, size:",g.size,"bytes");try{let a=await v();console.log("[Feedback] Got upload URL, uploading...");let b=await fetch(a,{method:"POST",headers:{"Content-Type":"image/png"},body:g}),c=await b.json();return console.log("[Feedback] Upload complete, storageId:",c.storageId),c.storageId}catch(a){return console.error("[Feedback] Failed to upload screenshot:",a),null}}catch(a){return console.error("[Feedback] Failed to capture screenshot:",a),null}},[v]),M=async()=>{if(!y.trim())return void m.toast.error("Please describe your feedback");J(!0);try{let a;if(G){m.toast.info("Capturing screenshot...");let b=await L();b?(a=b,m.toast.success("Screenshot captured!")):m.toast.warning("Screenshot capture failed, submitting without it")}await u({feedbackType:w,description:y.trim(),page:h,whatTheyDid:"bug"===w&&A.trim()?A.trim():void 0,whatTheySaw:"bug"===w&&C.trim()?C.trim():void 0,whatTheyExpected:"bug"===w&&E.trim()?E.trim():void 0,screenshotStorageId:a}),m.toast.success("Thank you for your feedback!"),K(),g(!1)}catch(a){console.error("Failed to submit feedback:",a),m.toast.error("Failed to submit feedback. Please try again.")}finally{J(!1)}};return(0,b.jsx)(o.Dialog,{open:e,onOpenChange:g,children:(0,b.jsxs)(o.DialogContent,{className:"sm:max-w-[500px]",children:[(0,b.jsxs)(o.DialogHeader,{children:[(0,b.jsx)(o.DialogTitle,{children:"Give Feedback"}),(0,b.jsx)(o.DialogDescription,{children:"Help us improve your experience. Your feedback is valuable to us."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[j&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground bg-muted/30 p-3 rounded-md",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"From:"})," ",j.name,j.email&&` (${j.email})`]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Page:"})," ",h]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{children:"What type of feedback?"}),(0,b.jsxs)(q.Select,{value:w,onValueChange:a=>x(a),children:[(0,b.jsx)(q.SelectTrigger,{children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsx)(q.SelectContent,{children:Object.entries(t).map(([a,c])=>(0,b.jsx)(q.SelectItem,{value:a,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[c.icon,(0,b.jsx)("span",{children:c.label})]})},a))})]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:t[w].description})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(p.Label,{htmlFor:"description",children:[(()=>{switch(w){case"bug":return"What's the issue?";case"feature":return"What feature would you like?";case"praise":return"What do you love?";default:return"What's on your mind?"}})()," ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(s.Textarea,{id:"description",placeholder:(()=>{switch(w){case"bug":return"Describe the bug you encountered...";case"feature":return"Describe the feature you'd like to see...";case"praise":return"Tell us what you enjoy about the app...";default:return"Share your thoughts..."}})(),value:y,onChange:a=>z(a.target.value),rows:3})]}),"bug"===w&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"whatTheyDid",children:"What were you trying to do?"}),(0,b.jsx)(s.Textarea,{id:"whatTheyDid",placeholder:"I was trying to...",value:A,onChange:a=>B(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"whatTheySaw",children:"What happened?"}),(0,b.jsx)(s.Textarea,{id:"whatTheySaw",placeholder:"I saw...",value:C,onChange:a=>D(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"whatTheyExpected",children:"What did you expect?"}),(0,b.jsx)(s.Textarea,{id:"whatTheyExpected",placeholder:"I expected...",value:E,onChange:a=>F(a.target.value),rows:2})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)(p.Label,{htmlFor:"screenshot",className:"cursor-pointer",children:"Include screenshot"})]}),(0,b.jsx)(r.Switch,{id:"screenshot",checked:G,onCheckedChange:H})]})]}),(0,b.jsxs)(o.DialogFooter,{children:[(0,b.jsx)(n.Button,{variant:"outline",onClick:()=>g(!1),disabled:I,children:"Cancel"}),(0,b.jsx)(n.Button,{onClick:M,disabled:I,children:I?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Feedback"})]})]})})}a.s(["FeedbackModal",()=>u],147118)}];

//# sourceMappingURL=_1885ae15._.js.map