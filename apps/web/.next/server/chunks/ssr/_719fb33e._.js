module.exports=[592552,a=>{"use strict";var b=a.i(367146),c=a.i(700760);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},36565,a=>{"use strict";let b=(0,a.i(366705).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],36565)},948217,a=>{"use strict";var b=a.i(367146),c=a.i(700760);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},404761,a=>{"use strict";let b=(0,a.i(366705).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],404761)},729167,a=>{"use strict";a.i(860742);var b=a.i(537500);function c(a){let[c,d]=(0,b.useState)(void 0);return(0,b.useEffect)(()=>{},[a]),c}a.s(["useFeatureFlag",()=>c])},156808,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(452549);let f=(0,a.i(366705).default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var g=a.i(404761),h=a.i(36565),i=a.i(537500),j=a.i(753884),k=a.i(968177),l=a.i(539524),m=a.i(592552),n=a.i(948217),o=a.i(729167);function p(){let[a,p]=(0,i.useState)(!1),[r,s]=(0,i.useState)(!1),[t,u]=(0,i.useState)(!1),v=(0,o.useFeatureFlag)("byod"),w=(0,d.useQuery)(c.api.admin.byod.getStats),x=(0,d.useQuery)(c.api.admin.byod.listInstances);if(void 0===v)return(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(e.Loader2,{className:"h-8 w-8 animate-spin"})});if(!v)return(0,b.jsx)("div",{className:"container py-8",children:(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("h1",{className:"text-xl font-bold mb-2",children:"Feature Not Available"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"BYOD management is not enabled for your account."})]})});let y=(0,d.useAction)(c.api.byod.healthCheck.checkAllHealth),z=(0,d.useAction)(c.api.byod.migrationRunner.runMigrationsForAll),A=(0,d.useAction)(c.api.admin.byod.sendUpdateNotifications),B=async()=>{p(!0);try{let a=await y({});j.toast.success(`Health check: ${a.healthy} healthy, ${a.unhealthy} unhealthy, ${a.outdated} outdated`)}catch(a){j.toast.error("Health check failed")}finally{p(!1)}},C=async()=>{s(!0);try{let a=await z({});j.toast.success(`Migrations: ${a.succeeded} succeeded, ${a.failed} failed`)}catch(a){j.toast.error("Migrations failed")}finally{s(!1)}},D=async()=>{u(!0);try{let a=await A({});j.toast.success(`Emails: ${a.sent} sent, ${a.skipped} skipped, ${a.failed} failed`)}catch(a){j.toast.error("Failed to send notifications")}finally{u(!1)}};return w&&x?(0,b.jsxs)("div",{className:"container py-8 space-y-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"BYOD Management"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Manage user database instances and migrations (Latest: v",w.latestVersion,")"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(l.Button,{variant:"outline",onClick:B,disabled:a,children:[a?(0,b.jsx)(e.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(h.RefreshCw,{className:"h-4 w-4 mr-2"}),"Check Health"]}),(0,b.jsxs)(l.Button,{variant:"outline",onClick:D,disabled:t||0===w.pendingMigrations,children:[t?(0,b.jsx)(e.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(f,{className:"h-4 w-4 mr-2"}),"Email Outdated Users"]}),(0,b.jsxs)(l.Button,{onClick:C,disabled:r,children:[r?(0,b.jsx)(e.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}):(0,b.jsx)(g.Play,{className:"h-4 w-4 mr-2"}),"Run Migrations"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"Total Instances"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold",children:w.total})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium text-green-500",children:"Connected"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold text-green-500",children:w.connected})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium text-red-500",children:"Error"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold text-red-500",children:w.error})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium text-amber-500",children:"Outdated"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("p",{className:"text-2xl font-bold text-amber-500",children:w.pendingMigrations})})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsx)(m.CardHeader,{className:"pb-2",children:(0,b.jsx)(m.CardTitle,{className:"text-sm font-medium",children:"Version Distribution"})}),(0,b.jsx)(m.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:Object.entries(w.versionDistribution||{}).sort(([a],[b])=>b.localeCompare(a)).map(([a,c])=>(0,b.jsxs)(k.Badge,{variant:a===`v${w.latestVersion}`?"default":"secondary",children:[a,": ",c]},a))})})]})]}),(0,b.jsxs)(m.Card,{children:[(0,b.jsxs)(m.CardHeader,{children:[(0,b.jsx)(m.CardTitle,{children:"Instances"}),(0,b.jsx)(m.CardDescription,{children:"All BYOD database instances and their status"})]}),(0,b.jsx)(m.CardContent,{children:0===x.length?(0,b.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"No BYOD instances configured yet"}):(0,b.jsxs)(n.Table,{children:[(0,b.jsx)(n.TableHeader,{children:(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableHead,{children:"User"}),(0,b.jsx)(n.TableHead,{children:"Status"}),(0,b.jsx)(n.TableHead,{children:"Schema"}),(0,b.jsx)(n.TableHead,{children:"Last Check"}),(0,b.jsx)(n.TableHead,{children:"Error"})]})}),(0,b.jsx)(n.TableBody,{children:x.map(a=>{let c=a.schemaVersion<w.latestVersion;return(0,b.jsxs)(n.TableRow,{children:[(0,b.jsx)(n.TableCell,{className:"font-medium",children:a.userEmail||a.userId}),(0,b.jsx)(n.TableCell,{children:(0,b.jsx)(q,{status:a.connectionStatus})}),(0,b.jsx)(n.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)("span",{children:["v",a.schemaVersion]}),c&&(0,b.jsx)(k.Badge,{variant:"outline",className:"text-amber-600 border-amber-500/50 text-xs",children:"outdated"})]})}),(0,b.jsx)(n.TableCell,{children:a.lastConnectionTest?new Date(a.lastConnectionTest).toLocaleString():"Never"}),(0,b.jsx)(n.TableCell,{className:"text-sm text-muted-foreground max-w-xs truncate",children:a.connectionError||"-"})]},a._id)})})]})})]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsx)(e.Loader2,{className:"h-8 w-8 animate-spin"})})}function q({status:a}){switch(a){case"connected":return(0,b.jsx)(k.Badge,{className:"bg-green-500",children:"Connected"});case"error":return(0,b.jsx)(k.Badge,{variant:"destructive",children:"Error"});case"pending":return(0,b.jsx)(k.Badge,{variant:"secondary",children:"Pending"});case"disconnected":return(0,b.jsx)(k.Badge,{variant:"outline",children:"Disconnected"});default:return(0,b.jsx)(k.Badge,{variant:"outline",children:a})}}a.s(["default",()=>p],156808)}];

//# sourceMappingURL=_719fb33e._.js.map