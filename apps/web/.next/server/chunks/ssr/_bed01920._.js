module.exports=[353788,a=>{"use strict";let b=(0,a.i(366705).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],353788)},215179,a=>{"use strict";let b=(0,a.i(366705).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],215179)},592365,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(215179),f=a.i(358176),g=a.i(353788),h=a.i(452549),i=a.i(674779);let j=(0,a.i(366705).default)("vibrate",[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]]);var k=a.i(98343),l=a.i(502311),m=a.i(537500),n=a.i(539524),o=a.i(928503);function p(){let a=(0,l.useSearchParams)().get("code"),[p,q]=(0,m.useState)(a||""),[r,s]=(0,m.useState)(null),[t,u]=(0,m.useState)(!1),[v,w]=(0,m.useState)(null),x=(0,d.useQuery)(c.api.presentationSessions.joinByCode,6===p.length?{sessionCode:p}:"skip"),y=(0,d.useQuery)(c.api.presentationSessions.get,r?{sessionId:r}:"skip"),z=(0,d.useMutation)(c.api.presentationSessions.navigateSlide),A=(0,d.useMutation)(c.api.presentationSessions.ping),B=(0,d.useQuery)(c.api.presentations.getSlides,y?.presentationId?{presentationId:y.presentationId}:"skip"),C=B?.[y?.currentSlide??0],D=(0,d.useQuery)(c.api.storage.getUrl,C?.imageStorageId?{storageId:C.imageStorageId}:"skip");(0,m.useEffect)(()=>{a&&6===a.length&&q(a)},[a]),(0,m.useEffect)(()=>{if(x&&!r)s(x.sessionId),w(null);else if(6===p.length&&!x&&!t){let a=setTimeout(()=>{x||w("Invalid or expired code")},2e3);return()=>clearTimeout(a)}},[x,r,p,t]),(0,m.useEffect)(()=>{if(!r)return;let a=setInterval(()=>{A({sessionId:r,role:"remote"}).catch(()=>{})},5e3);return A({sessionId:r,role:"remote"}).catch(()=>{}),()=>clearInterval(a)},[r,A]);let E=(0,m.useCallback)(async()=>{if(r)try{await z({sessionId:r,direction:"next"}),"vibrate"in navigator&&navigator.vibrate(50)}catch(a){console.error("Navigation error:",a)}},[r,z]),F=(0,m.useCallback)(async()=>{if(r)try{await z({sessionId:r,direction:"prev"}),"vibrate"in navigator&&navigator.vibrate(50)}catch(a){console.error("Navigation error:",a)}},[r,z]);return r?y&&!y.isActive?(0,b.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-background",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Session Ended"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"This presentation session has ended."}),(0,b.jsx)(n.Button,{onClick:()=>{s(null),q("")},children:"Join Another"})]})}):(0,b.jsxs)("div",{className:"h-[100dvh] flex flex-col bg-background overflow-hidden",children:[(0,b.jsxs)("header",{className:"border-b p-4 flex items-center justify-between shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Presentation,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("span",{className:"font-medium truncate max-w-[200px]",children:x?.presentationTitle||"Presentation"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(g.Clock,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"font-mono",children:((a,b)=>{if(!a&&!b)return"00:00";let c=Math.floor((a?Date.now()-a+(b||0):b||0)/1e3),d=Math.floor(c/60);return`${d.toString().padStart(2,"0")}:${(c%60).toString().padStart(2,"0")}`})(y?.timerStartedAt,y?.timerElapsed)})]})]}),(0,b.jsx)("div",{className:"flex-1 flex items-center justify-center p-3 bg-muted/30 min-h-0",children:D?(0,b.jsx)("div",{className:"relative w-full max-w-sm max-h-[40vh] aspect-video rounded-lg overflow-hidden shadow-lg",children:(0,b.jsx)(k.default,{src:D,alt:C?.title||"Current slide",fill:!0,className:"object-contain bg-black",sizes:"(max-width: 768px) 100vw, 400px"})}):(0,b.jsx)("div",{className:"w-full max-w-sm max-h-[40vh] aspect-video rounded-lg bg-muted flex items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})})}),(0,b.jsxs)("div",{className:"py-2 px-3 text-center border-t shrink-0",children:[(0,b.jsxs)("div",{className:"text-base font-medium",children:["Slide ",(y?.currentSlide??0)+1," of"," ",y?.totalSlides??0]}),C?.title&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground truncate",children:C.title})]}),(0,b.jsxs)("div",{className:"p-3 grid grid-cols-2 gap-3 shrink-0",children:[(0,b.jsxs)(n.Button,{size:"lg",variant:"outline",className:"h-20 text-lg",onClick:F,disabled:(y?.currentSlide??0)===0,children:[(0,b.jsx)(e.ChevronLeft,{className:"h-6 w-6 mr-1"}),"Previous"]}),(0,b.jsxs)(n.Button,{size:"lg",className:"h-20 text-lg",onClick:E,disabled:(y?.currentSlide??0)>=(y?.totalSlides??1)-1,children:["Next",(0,b.jsx)(f.ChevronRight,{className:"h-6 w-6 ml-1"})]})]}),(0,b.jsxs)("div",{className:"py-1.5 text-center text-xs text-muted-foreground flex items-center justify-center gap-1",children:[(0,b.jsx)(j,{className:"h-3 w-3"}),"Haptic feedback enabled"]})]}):(0,b.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center p-6 bg-background",children:(0,b.jsxs)("div",{className:"w-full max-w-sm space-y-6",children:[(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsx)(i.Presentation,{className:"h-12 w-12 mx-auto text-primary"}),(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Remote Control"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Enter the 6-digit code from your presentation"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(o.Input,{type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:p,onChange:a=>{q(a.target.value.replace(/\D/g,"")),w(null)},className:"text-center text-3xl font-mono tracking-widest h-16",autoFocus:!0}),v&&(0,b.jsx)("p",{className:"text-sm text-destructive text-center",children:v}),6===p.length&&!x&&!v&&(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)(h.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})})]})]})})}function q(){return(0,b.jsx)(m.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),children:(0,b.jsx)(p,{})})}a.s(["default",()=>q],592365)}];

//# sourceMappingURL=_bed01920._.js.map