module.exports=[897743,(a,b,c)=>{var d={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},e=Object.keys(d).join("|"),f=RegExp(e,"g"),g=RegExp(e,"");function h(a){return d[a]}var i=function(a){return a.replace(f,h)};b.exports=i,b.exports.has=function(a){return!!a.match(g)},b.exports.remove=i},758396,a=>{"use strict";var b=a.i(367146);a.i(16243);var c=a.i(273526),d=a.i(455273),e=a.i(726260),f=a.i(105698),g=a.i(158540),h=a.i(286028),i=a.i(502311),j=a.i(537500),k=a.i(130487),l=a.i(461841),m=a.i(182234),n=a.i(553812),o=a.i(452549),p=a.i(687336),q=a.i(118747),r=a.i(897743);let s={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},t=(a,b)=>String(a.rankedValue).localeCompare(String(b.rankedValue));function u(a,b,c={}){let{keys:d,threshold:e=s.MATCHES,baseSort:f=t,sorter:g=a=>a.sort((a,b)=>(function(a,b,c){let{rank:d,keyIndex:e}=a,{rank:f,keyIndex:g}=b;return d!==f?d>f?-1:1:e===g?c(a,b):e<g?-1:1})(a,b,f))}=c;return g(a.reduce(function(a,f,g){var h,i,j,k;let l=(h=f,i=d,j=b,k=c,i?(function(a,b){let c=[];for(let e=0,f=b.length;e<f;e++){var d;let f=b[e],g="string"==typeof(d=f)?x:{...x,...d},h=function(a,b){let c;if("object"==typeof b&&(b=b.key),"function"==typeof b)c=b(a);else if(null==a)c=null;else if(Object.hasOwnProperty.call(a,b))c=a[b];else{if(b.includes("."))return function(a,b){let c=a.split("."),d=[b];for(let a=0,b=c.length;a<b;a++){let b=c[a],e=[];for(let a=0,c=d.length;a<c;a++){let c=d[a];if(null!=c)if(Object.hasOwnProperty.call(c,b)){let a=c[b];null!=a&&e.push(a)}else"*"===b&&(e=e.concat(c))}d=e}return Array.isArray(d[0])?[].concat(...d):d}(b,a);c=null}return null==c?[]:Array.isArray(c)?c:[String(c)]}(a,f);for(let a=0,b=h.length;a<b;a++)c.push({itemValue:h[a],attributes:g})}return c})(h,i).reduce(({rank:a,rankedValue:b,keyIndex:c,keyThreshold:d},{itemValue:e,attributes:f},g)=>{let h=v(e,j,k),i=b,{minRanking:l,maxRanking:m,threshold:n}=f;return h<l&&h>=s.MATCHES?h=l:h>m&&(h=m),h>a&&(a=h,c=g,d=n,i=e),{rankedValue:i,rank:a,keyIndex:c,keyThreshold:d}},{rankedValue:h,rank:s.NO_MATCH,keyIndex:-1,keyThreshold:k.threshold}):{rankedValue:h,rank:v(h,j,k),keyIndex:-1,keyThreshold:k.threshold}),{rank:m,keyThreshold:n=e}=l;return m>=n&&a.push({...l,item:f,index:g}),a},[])).map(({item:a})=>a)}function v(a,b,c){if(a=w(a,c),(b=w(b,c)).length>a.length)return s.NO_MATCH;if(a===b)return s.CASE_SENSITIVE_EQUAL;let d=function*(a,b){let c=-1;for(;(c=a.indexOf(b,c+1))>-1;)yield c;return -1}(a=a.toLowerCase(),b=b.toLowerCase()),e=d.next(),f=e.value;if(a.length===b.length&&0===f)return s.EQUAL;if(0===f)return s.STARTS_WITH;let g=e;for(;!g.done;){if(g.value>0&&" "===a[g.value-1])return s.WORD_STARTS_WITH;g=d.next()}return f>0?s.CONTAINS:1===b.length?s.NO_MATCH:(function(a){let b="",c=" ";for(let d=0;d<a.length;d++){let e=a.charAt(d),f=" "===e||"-"===e;" "!==c&&"-"!==c||f||(b+=e),c=e}return b})(a).includes(b)?s.ACRONYM:function(a,b){var c;let d,e=0,f=0;function g(a,b,c){for(let d=c,f=b.length;d<f;d++)if(b[d]===a)return e+=1,d+1;return -1}let h=g(b[0],a,0);if(h<0)return s.NO_MATCH;f=h;for(let c=1,d=b.length;c<d;c++)if(!((f=g(b[c],a,f))>-1))return s.NO_MATCH;return c=f-h,d=e/b.length,s.MATCHES+1/c*d}(a,b)}function w(a,{keepDiacritics:b}){return a=`${a}`,b||(a=(0,r.default)(a)),a}u.rankings=s;let x={maxRanking:1/0,minRanking:-1/0};var y=a.i(489157),z=a.i(700760);function A({heading:a,actions:c,className:d}){return 0===c.length?null:(0,b.jsx)(l.Command.Group,{heading:a,className:(0,z.cn)("px-2 pb-2 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider",d),children:c.map(a=>(0,b.jsxs)(l.Command.Item,{value:a.id,onSelect:a.onSelect,className:(0,z.cn)("flex items-center gap-2 px-3 py-2.5 rounded-md cursor-pointer text-sm text-muted-foreground aria-selected:bg-primary/10 aria-selected:text-primary transition-colors",a.destructive&&"text-destructive aria-selected:text-destructive"),"aria-keyshortcuts":a.shortcut,children:[(0,b.jsx)(a.icon,{className:"h-4 w-4"}),(0,b.jsx)("span",{children:a.label}),a.shortcut&&(0,b.jsx)("kbd",{className:"ml-auto pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-background/50 px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:a.shortcut})]},a.id))})}function B({heading:a,conversations:c,icon:d,onSelect:e,className:f}){return 0===c.length?null:(0,b.jsx)(l.Command.Group,{heading:a,className:`px-2 pb-2 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider mt-2 ${f||""}`,children:c.map(a=>(0,b.jsxs)(l.Command.Item,{value:a._id,onSelect:()=>e(`/chat/${a._id}`),className:"flex items-center gap-2 px-3 py-2.5 rounded-md cursor-pointer text-sm text-muted-foreground aria-selected:bg-primary/10 aria-selected:text-primary transition-colors",children:[(0,b.jsx)(d,{className:"h-4 w-4 opacity-70"}),(0,b.jsx)("span",{className:"truncate",children:a.title})]},a._id))})}var C=a.i(227759),D=a.i(712109),E=a.i(375523),F=a.i(332532),G=a.i(127718),H=a.i(525662),I=a.i(789884),J=a.i(402202),K=a.i(366705);let L=(0,K.default)("file-plus",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);var M=a.i(116245);let N=(0,K.default)("folder-kanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),O=(0,K.default)("laptop",[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]]);var P=a.i(737898),Q=a.i(516181),R=a.i(787163),S=a.i(726295),T=a.i(651386),U=a.i(374838),V=a.i(72932),W=a.i(971310),X=a.i(502101),Y=a.i(284990);function Z(){let[a,c]=(0,j.useState)(!1),[d,f]=(0,j.useState)(""),[g,r]=(0,j.useState)([]),[s,t]=(0,j.useState)(!1),[v,w]=(0,j.useState)(!1),[x,z]=(0,j.useState)(!1),K=(0,i.useRouter)(),Z=(0,i.usePathname)(),{setTheme:$}=(0,y.useTheme)();(0,j.useRef)(null);let _=(0,m.useQuery)(k.api.conversations.list,{}),aa=(0,j.useMemo)(()=>_?.filter(a=>!0!==a.isPresentation),[_]),ab=(0,m.useAction)(k.api.conversations.hybridSearch.hybridSearch),{startNewChat:ac}=(0,F.useNewChat)(),ad=(0,E.useFeatureToggles)(),ae=Z?.startsWith("/chat/")?Z.split("/")[2]:null,af=(0,m.useQuery)(k.api.conversations.get,ae?{conversationId:ae}:"skip"),ag=(0,D.useConversationActions)(ae,"command_palette");(0,j.useEffect)(()=>{let a=a=>{"k"===a.key&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),c(a=>!a))};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[]),(0,j.useEffect)(()=>{a||(f(""),r([]))},[a]),(0,j.useEffect)(()=>{if(!d.trim())return void r([]);let a=setTimeout(async()=>{t(!0);try{let a=await ab({query:d,limit:20,includeArchived:!1});r(a.filter(a=>!0!==a.isPresentation))}catch(a){console.error("Search failed:",a),r([])}finally{t(!1)}},300);return()=>clearTimeout(a)},[d,ab]);let ah=()=>{ac(),c(!1)},ai=a=>{K.push(a),c(!1)},aj=a=>{$(a),c(!1)},ak=(0,j.useMemo)(()=>{let a;return a={handleNewChat:ah,handleNavigate:ai,handleTheme:aj,conversationId:ae,conversation:af,onRename:()=>{w(!0),c(!1)},onDelete:()=>{z(!0),c(!1)},onArchive:async()=>{await ag.handleArchive(),c(!1)},onTogglePin:async()=>{await ag.handleTogglePin(af?.pinned||!1),c(!1)},onToggleStar:async()=>{await ag.handleToggleStar(af?.starred||!1),c(!1)},showNotes:ad.showNotes,showTemplates:ad.showTemplates,showProjects:ad.showProjects,showBookmarks:ad.showBookmarks,onAutoRename:async()=>{await ag.handleAutoRename(),c(!1)}},[{id:"new-chat",label:"New Chat",keywords:["create","start","conversation"],icon:P.MessageSquarePlus,onSelect:a.handleNewChat,group:"actions",shortcut:"⌘⇧O"},{id:"search",label:"Search",keywords:["find","messages","go to","navigate"],icon:h.Search,onSelect:()=>a.handleNavigate("/search"),group:"navigation"},...!1!==a.showNotes?[{id:"notes",label:"Notes",keywords:["notes","notebook","go to","navigate"],icon:R.NotebookPen,onSelect:()=>a.handleNavigate("/notes"),group:"navigation"}]:[],{id:"memories",label:"Memories",keywords:["memories","brain","ai","go to","navigate"],icon:H.Brain,onSelect:()=>a.handleNavigate("/memories"),group:"navigation"},...!1!==a.showProjects?[{id:"projects",label:"Projects",keywords:["projects","folders","organize","go to","navigate"],icon:N,onSelect:()=>a.handleNavigate("/projects"),group:"navigation"}]:[],...!1!==a.showTemplates?[{id:"templates",label:"Templates",keywords:["templates","prompts","go to","navigate"],icon:M.FileText,onSelect:()=>a.handleNavigate("/templates"),group:"navigation"},{id:"create-template",label:"New Template",keywords:["create","template","new","prompt"],icon:L,onSelect:()=>a.handleNavigate("/templates?action=new"),group:"actions"}]:[],...!1!==a.showBookmarks?[{id:"bookmarks",label:"Bookmarks",keywords:["bookmarks","saved","favorites","go to","navigate"],icon:G.Bookmark,onSelect:()=>a.handleNavigate("/bookmarks"),group:"navigation"}]:[],{id:"shortcuts",label:"Shortcuts",keywords:["shortcuts","keyboard","hotkeys","go to","navigate"],icon:e.Keyboard,onSelect:()=>a.handleNavigate("/shortcuts"),group:"navigation"},{id:"settings",label:"Settings",keywords:["settings","preferences","config","go to","navigate"],icon:S.Settings,onSelect:()=>a.handleNavigate("/settings"),group:"navigation",shortcut:"⌘,"},{id:"export",label:"Export Data",keywords:["download","backup"],icon:I.Download,onSelect:()=>window.open("/api/export?format=json","_blank"),group:"actions"},...a.conversationId&&a.conversation?[{id:"conv-rename",label:"Rename conversation",keywords:["rename","title","edit"],icon:J.Edit,onSelect:a.onRename||(()=>{}),group:"conversation"},{id:"conv-pin",label:a.conversation.pinned?"Unpin conversation":"Pin conversation",keywords:["pin","unpin","sticky"],icon:q.Pin,onSelect:a.onTogglePin||(()=>{}),group:"conversation"},{id:"conv-star",label:a.conversation.starred?"Unstar conversation":"Star conversation",keywords:["star","unstar","favorite"],icon:U.Star,onSelect:a.onToggleStar||(()=>{}),group:"conversation"},{id:"conv-archive",label:"Archive conversation",keywords:["archive","hide"],icon:n.Archive,onSelect:a.onArchive||(()=>{}),group:"conversation"},{id:"conv-auto-rename",label:"Auto-rename conversation",keywords:["auto","rename","generate","title"],icon:T.Sparkles,onSelect:a.onAutoRename||(()=>{}),group:"conversation"},{id:"conv-delete",label:"Delete conversation",keywords:["delete","remove","trash"],icon:W.Trash2,onSelect:a.onDelete||(()=>{}),group:"conversation",destructive:!0}]:[],{id:"theme-light",label:"Light",keywords:["theme","bright"],icon:V.Sun,onSelect:()=>a.handleTheme("light"),group:"theme"},{id:"theme-dark",label:"Dark",keywords:["theme","night"],icon:Q.Moon,onSelect:()=>a.handleTheme("dark"),group:"theme"},{id:"theme-system",label:"System",keywords:["theme","auto"],icon:O,onSelect:()=>a.handleTheme("system"),group:"theme"}]},[ae,af,ag,ad.showNotes,ad.showTemplates,ad.showProjects,ad.showBookmarks]),al=(0,j.useMemo)(()=>d.trim()?u(ak,d,{keys:["label","keywords"],threshold:u.rankings.CONTAINS}):ak,[d,ak]),am=(0,j.useMemo)(()=>d.trim()?{pinned:[],recent:g,archived:[]}:aa?{pinned:aa.filter(a=>a.pinned&&!a.archived),recent:aa.filter(a=>!a.pinned&&!a.archived),archived:aa.filter(a=>a.archived)}:{pinned:[],recent:[],archived:[]},[aa,d,g]),an=(0,j.useMemo)(()=>({actions:al.filter(a=>"actions"===a.group),navigation:al.filter(a=>"navigation"===a.group),conversation:al.filter(a=>"conversation"===a.group),theme:al.filter(a=>"theme"===a.group)}),[al]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(C.DialogContent,{className:"p-0 gap-0 max-w-2xl overflow-hidden bg-transparent border-0 shadow-2xl",children:[(0,b.jsx)(C.DialogTitle,{className:"sr-only",children:"Command Menu"}),(0,b.jsx)("div",{className:"surface-glass-strong rounded-xl border border-border/40 overflow-hidden",children:(0,b.jsxs)(l.Command,{className:"bg-transparent",shouldFilter:!1,children:[(0,b.jsxs)("div",{className:"flex items-center border-b border-border/40 px-3",children:[s?(0,b.jsx)(o.Loader2,{className:"mr-2 h-4 w-4 shrink-0 opacity-50 animate-spin"}):(0,b.jsx)(h.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,b.jsx)(l.Command.Input,{value:d,onValueChange:f,placeholder:"Type a command or search...",className:"flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,b.jsxs)(l.Command.List,{className:"max-h-[400px] overflow-y-auto p-2",children:[(0,b.jsx)(l.Command.Empty,{className:"py-6 text-center text-sm text-muted-foreground",children:d?"No conversations found":"No results found."}),(0,b.jsx)(A,{heading:"Actions",actions:an.actions}),(0,b.jsx)(A,{heading:"Navigation",actions:an.navigation,className:"mt-2"}),(0,b.jsx)(B,{heading:"Pinned",conversations:am.pinned,icon:q.Pin,onSelect:ai}),(0,b.jsx)(B,{heading:d.trim()?"Search Results":"Recent Conversations",conversations:am.recent,icon:p.MessageSquare,onSelect:ai}),(0,b.jsx)(B,{heading:"Archived",conversations:am.archived,icon:n.Archive,onSelect:ai}),(0,b.jsx)(A,{heading:"Conversation",actions:an.conversation,className:"mt-2"}),(0,b.jsx)(A,{heading:"Theme",actions:an.theme,className:"mt-2"})]})]})})]})}),af&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(Y.RenameDialog,{conversation:af,open:v,onOpenChange:w}),(0,b.jsx)(X.DeleteConversationDialog,{open:x,onOpenChange:z,onConfirm:ag.handleDelete,conversationTitle:af.title})]})]})}let $=(0,K.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var _=a.i(753884),aa=a.i(539524),ab=a.i(658547),ac=a.i(547885),ad=a.i(105008),ae=a.i(225878);function af({open:a,onOpenChange:c}){let[e,f]=(0,j.useState)(!0),[g,l]=(0,j.useState)(!0),[n,o]=(0,j.useState)("30"),[p,q]=(0,j.useState)(!1),r=(0,m.useMutation)(k.api.conversations.create),s=(0,i.useRouter)(),t=async()=>{q(!0);try{let a=await r({model:ae.DEFAULT_MODEL_ID,isIncognito:!0,incognitoSettings:{enableReadTools:e,applyCustomInstructions:g,inactivityTimeoutMinutes:"none"===n?void 0:Number(n)}});s.push(`/chat/${a}`),c(!1),_.toast.success("Incognito chat started"),f(!0),l(!0),o("30")}catch(a){console.error("Failed to create incognito chat:",a),_.toast.error("Failed to create incognito chat")}finally{q(!1)}};return(0,b.jsx)(C.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(C.DialogContent,{className:"sm:max-w-md",children:[(0,b.jsxs)(C.DialogHeader,{children:[(0,b.jsxs)(C.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Ghost,{className:"size-5 text-violet-400"}),"New Incognito Chat"]}),(0,b.jsx)(C.DialogDescription,{children:"Ephemeral conversation. No memories saved. Auto-deletes."})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)(ab.Label,{htmlFor:"read-tools",className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(h.Search,{className:"size-4 text-muted-foreground"}),"Search your data"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Access notes, files, and tasks"})]}),(0,b.jsx)(ad.Switch,{id:"read-tools",checked:e,onCheckedChange:f})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)(ab.Label,{htmlFor:"custom-instructions",className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)(T.Sparkles,{className:"size-4 text-muted-foreground"}),"Custom instructions"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Apply your personalization settings"})]}),(0,b.jsx)(ad.Switch,{id:"custom-instructions",checked:g,onCheckedChange:l})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsxs)(ab.Label,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,b.jsx)($,{className:"size-4 text-muted-foreground"}),"Auto-delete after"]}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Inactivity timeout"})]}),(0,b.jsxs)(ac.Select,{value:n,onValueChange:o,children:[(0,b.jsx)(ac.SelectTrigger,{className:"w-28",children:(0,b.jsx)(ac.SelectValue,{})}),(0,b.jsxs)(ac.SelectContent,{children:[(0,b.jsx)(ac.SelectItem,{value:"15",children:"15 min"}),(0,b.jsx)(ac.SelectItem,{value:"30",children:"30 min"}),(0,b.jsx)(ac.SelectItem,{value:"60",children:"1 hour"}),(0,b.jsx)(ac.SelectItem,{value:"none",children:"Manual"})]})]})]})]}),(0,b.jsxs)(C.DialogFooter,{children:[(0,b.jsx)(aa.Button,{variant:"ghost",onClick:()=>c(!1),children:"Cancel"}),(0,b.jsxs)(aa.Button,{onClick:t,disabled:p,children:[(0,b.jsx)(d.Ghost,{className:"size-4 mr-2"}),p?"Starting...":"Start"]})]})]})})}var ag=a.i(354420),ah=a.i(529395),ai=a.i(868990),aj=a.i(34070),ak=a.i(167831),al=a.i(698734),am=a.i(750003);function an({open:a,onOpenChange:c,selectedText:d,onSaveAsNote:e}){let f=(0,m.useAction)(k.api.generation.summarizeSelection),[g,h]=(0,j.useState)(""),[i,l]=(0,j.useState)(!1),[n,p]=(0,j.useState)(null);(0,j.useEffect)(()=>{a&&d&&(async()=>{if(d.length>1e4)return p(`Selection too long. Please select less than ${1e4.toLocaleString()} characters.`);l(!0),p(null),h("");try{let a=await f({text:d});h(a.summary)}catch(a){console.error("Failed to generate summary:",a),p(a instanceof Error?a.message:"Failed to generate summary")}finally{l(!1)}})()},[a,d,f]);let q=()=>{c(!1),r()},r=()=>{window.getSelection()?.removeAllRanges()};return(0,b.jsx)(C.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(C.DialogContent,{className:"w-80 sm:max-w-md",onEscapeKeyDown:q,onInteractOutside:q,showCloseButton:!1,children:[(0,b.jsx)(C.DialogTitle,{className:"sr-only",children:"Text Summary"}),i&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-4",children:[(0,b.jsx)(o.Loader2,{className:"h-6 w-6 animate-spin text-primary"}),(0,b.jsx)(C.DialogDescription,{className:"text-sm text-muted-foreground",children:"Generating summary..."})]}),n&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(am.Alert,{variant:"destructive",children:[(0,b.jsx)(al.AlertCircle,{className:"h-4 w-4"}),(0,b.jsx)(am.AlertDescription,{children:n})]}),(0,b.jsx)(aa.Button,{size:"sm",onClick:()=>{p(null),l(!0),p(null),h(""),(async()=>{try{let a=await f({text:d});h(a.summary)}catch(a){console.error("Failed to generate summary:",a),p(a instanceof Error?a.message:"Failed to generate summary")}finally{l(!1)}})()},className:"w-full",children:"Try Again"})]}),!i&&!n&&g&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(C.DialogDescription,{className:"text-sm text-muted-foreground select-text",children:g}),(0,b.jsxs)(C.DialogFooter,{className:"flex-row gap-2 sm:gap-2",children:[(0,b.jsx)(aa.Button,{size:"sm",onClick:()=>{e(g)},children:"Save as Note"}),(0,b.jsx)(aa.Button,{size:"sm",variant:"ghost",onClick:q,children:"Dismiss"})]})]})]})})}var ao=a.i(63263);let ap=(0,j.createContext)(null),aq={text:"",rect:null,mousePosition:null,messageId:"",messageRole:"user",isActive:!1};function ar({children:a}){let[c,d]=(0,j.useState)(aq),{isMobile:e}=(0,ao.useMobileDetect)(),f=(0,j.useRef)(0),g=(0,j.useRef)({x:0,y:0}),h=(0,j.useCallback)(()=>{d(aq),window.getSelection()?.removeAllRanges()},[]),i=(0,j.useCallback)(a=>{if(e)return void h();let b=a.target;"INPUT"===b.tagName||"TEXTAREA"===b.tagName||b.closest("[contenteditable]")||(g.current={x:a.clientX,y:a.clientY},setTimeout(()=>{let a=window.getSelection(),b=a?.toString().trim();if(!b||!a||0===a.rangeCount||b.length<10)return void h();let c=a.getRangeAt(0),e=c.getBoundingClientRect(),i=c.commonAncestorContainer;i.nodeType===Node.TEXT_NODE&&(i=i.parentElement);let j=i.closest(".chat-message");if(!j)return void h();let k=j.getAttribute("data-message-id"),l=j.getAttribute("data-message-role");k&&l?(f.current=Date.now(),d({text:b,rect:e,mousePosition:g.current,messageId:k,messageRole:l,isActive:!0})):h()},150))},[e,h]);return(0,j.useEffect)(()=>{document.addEventListener("mouseup",i);let a=a=>{if(!c.isActive)return;let b=Date.now()-f.current,d=a.target;d.closest(".selection-context-menu")||d.closest(".summarize-popover")||b<100||h()};document.addEventListener("mousedown",a);let b=a=>{let b=a.target;c.isActive&&b.closest(".chat-message-list")&&h()};return window.addEventListener("scroll",b,!0),()=>{document.removeEventListener("mouseup",i),document.removeEventListener("mousedown",a),window.removeEventListener("scroll",b,!0)}},[i,c.isActive,h]),(0,b.jsx)(ap.Provider,{value:{selection:c,clearSelection:h},children:a})}function as(){let{selection:a,clearSelection:c}=function(){let a=(0,j.useContext)(ap);if(!a)throw Error("useSelection must be used within a SelectionProvider");return a}(),[d,e]=(0,j.useState)({top:0,left:0}),[f,g]=(0,j.useState)(0),i=(0,j.useRef)(null),[l,n]=(0,j.useState)(!1),[o,p]=(0,j.useState)(!1),[q,r]=(0,j.useState)(!1),[s,t]=(0,j.useState)(""),[u,v]=(0,j.useState)(""),[w,x]=(0,j.useState)({top:0,left:0}),[y,z]=(0,j.useState)(null);(0,m.useMutation)(k.api.snippets.createSnippet);let A=(0,m.useAction)(k.api.memories.createMemoryFromSelection);(0,j.useEffect)(()=>{n(!0)},[]),(0,j.useEffect)(()=>{let b,c;if(!a.isActive||!a.rect)return;let d=a.rect,f=a.mousePosition;f?(b=f.y+window.scrollY+8,(c=f.x+window.scrollX+8)+240>window.innerWidth-10&&(c=f.x+window.scrollX-240-8),b+280>window.scrollY+window.innerHeight-10&&(b=f.y+window.scrollY-280-8),c<10&&(c=10),b<window.scrollY+10&&(b=window.scrollY+10)):(b=d.bottom+window.scrollY+8,c=d.right+window.scrollX-240,b+280>window.scrollY+window.innerHeight-10&&(b=d.top+window.scrollY-280-8),c<10&&(c=d.left+window.scrollX),c+240>window.innerWidth-10&&(c=window.innerWidth-240-10)),e({top:b,left:c}),g(0)},[a.isActive,a.rect,a.mousePosition]),(0,j.useEffect)(()=>{a.isActive&&o&&(p(!1),z(null),t(""),v(""))},[a.isActive,o]);let B=async()=>{try{_.toast.info("Adding to memory..."),await A({content:a.text,sourceMessageId:a.messageId}),_.toast.success("Added to memory"),c()}catch(a){console.error("Failed to add to memory:",a),_.toast.error("Failed to add to memory")}},C=[{id:"quote",label:"Quote",icon:ai.Quote,shortcut:"Q",action:()=>{window.dispatchEvent(new CustomEvent("quote-selection",{detail:a.text})),c()}},{id:"search",label:"Search Google",icon:h.Search,shortcut:"S",action:()=>{let b=encodeURIComponent(a.text);window.open(`https://www.google.com/search?q=${b}`,"_blank"),c()}},{id:"summarize",label:"Summarize",icon:T.Sparkles,shortcut:"M",action:()=>{if(!a.rect)return;let b=a.mousePosition,d=a.rect;b?x({top:b.y,left:b.x}):x({top:d.bottom+window.scrollY,left:d.left+window.scrollX}),v(a.text),z(a.messageId),t(""),p(!0),c()},disabled:"user"===a.messageRole},{id:"memory",label:"Add to Memory",icon:H.Brain,shortcut:"A",action:B}].filter(a=>!a.disabled);if((0,j.useEffect)(()=>{if(!a.isActive)return;let b=a=>{if("Escape"===a.key){a.preventDefault(),c();return}if("ArrowDown"===a.key){a.preventDefault(),g(a=>a<C.length-1?a+1:0);return}if("ArrowUp"===a.key){a.preventDefault(),g(a=>a>0?a-1:C.length-1);return}if("Enter"===a.key){a.preventDefault(),C[f]?.action();return}let b=a.key.toUpperCase(),d=C.find(a=>a.shortcut?.toUpperCase()===b);d&&(a.preventDefault(),d.action())};return window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)},[a.isActive,f,C,c]),!l||!a.isActive&&!o&&!q)return null;let D=(0,b.jsx)(ag.AnimatePresence,{children:a.isActive&&(0,b.jsx)(ah.motion.div,{ref:i,className:"selection-context-menu fixed z-50",style:{top:`${d.top}px`,left:`${d.left}px`},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.15,ease:"easeOut"},role:"menu","aria-label":"Text selection actions",children:(0,b.jsxs)("div",{className:"bg-zinc-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden min-w-[240px]",children:[(0,b.jsx)("div",{className:"p-2 space-y-0.5",children:C.map((a,c)=>{let d=a.icon,e=c===f;return(0,b.jsxs)("button",{type:"button",onClick:a.action,onMouseEnter:()=>g(c),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-150 cursor-pointer ${e?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,role:"menuitem","aria-current":e?"true":void 0,children:[(0,b.jsx)(d,{className:`w-4 h-4 ${e?"text-primary":"text-white/60"}`}),(0,b.jsx)("span",{className:`flex-1 text-left text-sm font-medium ${e?"text-white":"text-white/80"}`,children:a.label}),a.shortcut&&(0,b.jsx)("kbd",{className:`px-1.5 py-0.5 text-[10px] font-mono rounded ${e?"bg-white/20 text-white":"bg-white/10 text-white/50"}`,children:a.shortcut})]},a.id)})}),(0,b.jsx)("div",{className:"px-3 py-2 border-t border-white/5 bg-black/20",children:(0,b.jsx)("p",{className:"text-[10px] text-white/40 font-medium",children:"↑↓ Navigate • Enter Select • Esc Close"})})]})})});return(0,b.jsxs)(b.Fragment,{children:[(0,aj.createPortal)(D,document.body),l&&o&&(0,b.jsx)(an,{open:o,onOpenChange:a=>{p(a),a||q||(z(null),t(""),v(""))},selectedText:u,position:w,onSaveAsNote:a=>{t(a),r(!0),setTimeout(()=>{p(!1)},0)}}),l&&y&&(0,b.jsx)(ak.CreateNoteDialog,{open:q,onOpenChange:a=>{r(a),a||(z(null),t(""),v(""))},initialContent:s,sourceMessageId:y,sourceConversationId:void 0,sourceSelectionText:u})]})}var at=a.i(703596),au=a.i(361865);function av(){return(0,au.useKeyboardShortcuts)(),null}let aw=(0,K.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var ax=a.i(341322);function ay(){let[a,c]=(0,j.useState)(0);return((0,j.useEffect)(()=>{let a=()=>{c(ax.messageQueue.getCount())};return a(),window.addEventListener("queue-updated",a),()=>{window.removeEventListener("queue-updated",a)}},[]),0===a)?null:(0,b.jsx)("div",{className:"fixed bottom-20 right-4 z-50",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-900 dark:text-yellow-200 px-4 py-2 rounded-lg shadow-lg backdrop-blur-sm",children:[(0,b.jsx)(aw,{className:"w-4 h-4 shrink-0"}),(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a," message",a>1?"s":""," queued"]}),navigator.onLine&&(0,b.jsx)(o.Loader2,{className:"w-4 h-4 animate-spin shrink-0"})]})})}var az=a.i(509423);let aA=(0,K.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var aB=a.i(23944),aC=a.i(165004);function aD(){let a=(0,i.useRouter)(),c=(0,m.useQuery)(k.api.notifications.getUnreadCount),d=(0,m.useQuery)(k.api.notifications.list,{limit:10}),e=(0,m.useMutation)(k.api.notifications.markRead),f=(0,m.useMutation)(k.api.notifications.markAllRead),g=(0,m.useMutation)(k.api.notifications.dismiss),h=async b=>{b.read||await e({notificationId:b._id}),b.data?.conversationId&&a.push(`/chat/${b.data.conversationId}`)};return(0,b.jsxs)(aC.Popover,{children:[(0,b.jsx)(aC.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(aa.Button,{variant:"ghost",size:"icon",className:"relative h-8 w-8",children:[(0,b.jsx)(aA,{className:"h-4 w-4"}),(c??0)>0&&(0,b.jsx)("span",{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full bg-red-500 text-[10px] font-medium text-white flex items-center justify-center",children:c>9?"9+":c})]})}),(0,b.jsxs)(aC.PopoverContent,{align:"end",className:"w-80 p-0",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"Notifications"}),(c??0)>0&&(0,b.jsx)(aa.Button,{variant:"ghost",size:"sm",onClick:()=>f(),className:"text-xs h-7",children:"Mark all read"})]}),(0,b.jsx)("div",{className:"max-h-80 overflow-y-auto",children:d&&0!==d.length?d.map(a=>(0,b.jsxs)("div",{className:(0,z.cn)("group flex items-start gap-3 px-4 py-3 hover:bg-muted/50 cursor-pointer border-b last:border-0 transition-colors",!a.read&&"bg-primary/5"),onClick:()=>h(a),children:[(0,b.jsx)("div",{className:"mt-1.5 flex-shrink-0",children:a.read?(0,b.jsx)("div",{className:"h-2 w-2"}):(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium leading-tight",children:a.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:a.message}),(0,b.jsx)("p",{className:"text-[10px] text-muted-foreground/70 mt-1",children:(0,az.formatDistanceToNow)(a.createdAt,{addSuffix:!0})})]}),(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0 opacity-0 group-hover:opacity-100 hover:opacity-100 transition-opacity",onClick:b=>{b.stopPropagation(),g({notificationId:a._id})},children:(0,b.jsx)(aB.X,{className:"h-3 w-3"})})]},a._id)):(0,b.jsx)("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No notifications"})})]})]})}var aE={attributes:!0,characterData:!0,subtree:!0,childList:!0};let aF=function(a,b,c=aE){(0,j.useEffect)(()=>{if(a.current){let d=new MutationObserver(b);return d.observe(a.current,c),()=>{d.disconnect()}}},[b,c])};var aG=function(){if("undefined"!=typeof Map)return Map;function a(a,b){var c=-1;return a.some(function(a,d){return a[0]===b&&(c=d,!0)}),c}function b(){this.__entries__=[]}return Object.defineProperty(b.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),b.prototype.get=function(b){var c=a(this.__entries__,b),d=this.__entries__[c];return d&&d[1]},b.prototype.set=function(b,c){var d=a(this.__entries__,b);~d?this.__entries__[d][1]=c:this.__entries__.push([b,c])},b.prototype.delete=function(b){var c=this.__entries__,d=a(c,b);~d&&c.splice(d,1)},b.prototype.has=function(b){return!!~a(this.__entries__,b)},b.prototype.clear=function(){this.__entries__.splice(0)},b.prototype.forEach=function(a,b){void 0===b&&(b=null);for(var c=0,d=this.__entries__;c<d.length;c++){var e=d[c];a.call(b,e[1],e[0])}},b}(),aH=a.g.Math===Math?a.g:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")(),aI="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(aH):function(a){return setTimeout(function(){return a(Date.now())},1e3/60)},aJ=["top","right","bottom","left","width","height","size","weight"],aK=function(){function a(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(a,b){var c=!1,d=!1,e=0;function f(){c&&(c=!1,a()),d&&h()}function g(){aI(f)}function h(){var a=Date.now();if(c){if(a-e<2)return;d=!0}else c=!0,d=!1,setTimeout(g,20);e=a}return h}(this.refresh.bind(this),0)}return a.prototype.addObserver=function(a){~this.observers_.indexOf(a)||this.observers_.push(a),this.connected_||this.connect_()},a.prototype.removeObserver=function(a){var b=this.observers_,c=b.indexOf(a);~c&&b.splice(c,1),!b.length&&this.connected_&&this.disconnect_()},a.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},a.prototype.updateObservers_=function(){var a=this.observers_.filter(function(a){return a.gatherActive(),a.hasActive()});return a.forEach(function(a){return a.broadcastActive()}),a.length>0},a.prototype.connect_=function(){},a.prototype.disconnect_=function(){},a.prototype.onTransitionEnd_=function(a){var b=a.propertyName,c=void 0===b?"":b;aJ.some(function(a){return!!~c.indexOf(a)})&&this.refresh()},a.getInstance=function(){return this.instance_||(this.instance_=new a),this.instance_},a.instance_=null,a}(),aL=function(a,b){for(var c=0,d=Object.keys(b);c<d.length;c++){var e=d[c];Object.defineProperty(a,e,{value:b[e],enumerable:!1,writable:!1,configurable:!0})}return a},aM=function(a){return a&&a.ownerDocument&&a.ownerDocument.defaultView||aH},aN=aO(0,0,0,0);function aO(a,b,c,d){return{x:a,y:b,width:c,height:d}}var aP=function(){function a(a){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=aO(0,0,0,0),this.target=a}return a.prototype.isActive=function(){var a=(this.target,aN);return this.contentRect_=a,a.width!==this.broadcastWidth||a.height!==this.broadcastHeight},a.prototype.broadcastRect=function(){var a=this.contentRect_;return this.broadcastWidth=a.width,this.broadcastHeight=a.height,a},a}(),aQ=function(a,b){var c,d,e,f,g,h=(c=b.x,d=b.y,e=b.width,f=b.height,aL(g=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:c,y:d,width:e,height:f,top:d,right:c+e,bottom:f+d,left:c}),g);aL(this,{target:a,contentRect:h})},aR=function(){function a(a,b,c){if(this.activeObservations_=[],this.observations_=new aG,"function"!=typeof a)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=a,this.controller_=b,this.callbackCtx_=c}return a.prototype.observe=function(a){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof aM(a).Element))throw TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)||(b.set(a,new aP(a)),this.controller_.addObserver(this),this.controller_.refresh())}},a.prototype.unobserve=function(a){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(a instanceof aM(a).Element))throw TypeError('parameter 1 is not of type "Element".');var b=this.observations_;b.has(a)&&(b.delete(a),b.size||this.controller_.removeObserver(this))}},a.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},a.prototype.gatherActive=function(){var a=this;this.clearActive(),this.observations_.forEach(function(b){b.isActive()&&a.activeObservations_.push(b)})},a.prototype.broadcastActive=function(){if(this.hasActive()){var a=this.callbackCtx_,b=this.activeObservations_.map(function(a){return new aQ(a.target,a.broadcastRect())});this.callback_.call(a,b,a),this.clearActive()}},a.prototype.clearActive=function(){this.activeObservations_.splice(0)},a.prototype.hasActive=function(){return this.activeObservations_.length>0},a}(),aS="undefined"!=typeof WeakMap?new WeakMap:new aG,aT=function a(b){if(!(this instanceof a))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var c=new aR(b,aK.getInstance(),this);aS.set(this,c)};["observe","unobserve","disconnect"].forEach(function(a){aT.prototype[a]=function(){var b;return(b=aS.get(this))[a].apply(b,arguments)}});var aU=void 0!==aH.ResizeObserver?aH.ResizeObserver:aT,aV=({mutationObservables:a,resizeObservables:b,refresh:c})=>{let[d,e]=(0,j.useState)(0);function f(b){for(let d of Array.from(b))if(a){if(!d.attributes)continue;a.find(a=>d.matches(a))&&c(!0)}}function g(a){for(let c of Array.from(a))if(b){if(!c.attributes)continue;b.find(a=>c.matches(a))&&e(d+1)}}return aF((0,j.useRef)(document.documentElement||document.body),a=>{for(let b of a)0!==b.addedNodes.length&&(f(b.addedNodes),g(b.addedNodes)),0!==b.removedNodes.length&&(f(b.removedNodes),g(b.removedNodes))},{childList:!0,subtree:!0}),(0,j.useEffect)(()=>{if(!b)return;let a=new aU(()=>{c()});for(let c of b){let b=document.querySelector(c);b&&a.observe(b)}return()=>{a.disconnect()}},[b,d]),null};function aW(a){let b=aX;return a&&(b=a.getBoundingClientRect()),b}var aX={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0};function aY(){return{w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}function aZ(a=10){return Array.isArray(a)?1===a.length?[a[0],a[0],a[0],a[0]]:2===a.length?[a[1],a[0],a[1],a[0]]:3===a.length?[a[0],a[1],a[2],a[1]]:a.length>3?[a[0],a[1],a[2],a[3]]:[10,10]:[a,a,a,a]}var a$={maskWrapper:()=>({opacity:.7,left:0,top:0,position:"fixed",zIndex:99999,pointerEvents:"none",color:"#000"}),svgWrapper:({windowWidth:a,windowHeight:b,wpt:c,wpl:d})=>({width:a,height:b,left:Number(d),top:Number(c),position:"fixed"}),maskArea:({x:a,y:b,width:c,height:d})=>({x:a,y:b,width:c,height:d,fill:"black",rx:0}),maskRect:({windowWidth:a,windowHeight:b,maskID:c})=>({x:0,y:0,width:a,height:b,fill:"currentColor",mask:`url(#${c})`}),clickArea:({windowWidth:a,windowHeight:b,clipID:c})=>({x:0,y:0,width:a,height:b,fill:"currentcolor",pointerEvents:"auto",clipPath:`url(#${c})`}),highlightedArea:({x:a,y:b,width:c,height:d})=>({x:a,y:b,width:c,height:d,pointerEvents:"auto",fill:"transparent",display:"none"})},a_=({padding:a=10,wrapperPadding:b=0,onClick:c,onClickHighlighted:d,styles:e={},sizes:f,className:g,highlightedAreaClassName:h,maskId:i,clipId:k})=>{var l,m,n,o;let p=i||a0("mask__"),q=k||a0("clip__"),r=(a,b)=>{let c=a$[a](b),d=e[a];return d?d(c,b):c},[s,t,u,v]=aZ(a),[w,x,y,z]=aZ(b),{w:A,h:B}=aY(),C=(l=(null==f?void 0:f.width)+v+t)<0?0:l,D=(m=(null==f?void 0:f.height)+s+u)<0?0:m,E=(n=(null==f?void 0:f.top)-s-w)<0?0:n,F=(o=(null==f?void 0:f.left)-v-z)<0?0:o,G=A-z-x,H=B-w-y,I=r("maskArea",{x:F,y:E,width:C,height:D}),J=r("highlightedArea",{x:F,y:E,width:C,height:D});return j.default.createElement("div",{style:r("maskWrapper",{}),onClick:c,className:g},j.default.createElement("svg",{width:G,height:H,xmlns:"http://www.w3.org/2000/svg",style:r("svgWrapper",{windowWidth:G,windowHeight:H,wpt:w,wpl:z})},j.default.createElement("defs",null,j.default.createElement("mask",{id:p},j.default.createElement("rect",{x:0,y:0,width:G,height:H,fill:"white"}),j.default.createElement("rect",{style:I,rx:I.rx?1:void 0})),j.default.createElement("clipPath",{id:q},j.default.createElement("polygon",{points:`0 0, 0 ${H}, ${F} ${H}, ${F} ${E}, ${F+C} ${E}, ${F+C} ${E+D}, ${F} ${E+D}, ${F} ${H}, ${G} ${H}, ${G} 0`}))),j.default.createElement("rect",{style:r("maskRect",{windowWidth:G,windowHeight:H,maskID:p})}),j.default.createElement("rect",{style:r("clickArea",{windowWidth:G,windowHeight:H,top:E,left:F,width:C,height:D,clipID:q})}),j.default.createElement("rect",{style:J,className:h,onClick:d,rx:J.rx?1:void 0})))};function a0(a){return a+Math.random().toString(36).substring(2,16)}var a1=Object.defineProperty,a2=Object.getOwnPropertySymbols,a3=Object.prototype.hasOwnProperty,a4=Object.prototype.propertyIsEnumerable,a5=(a,b,c)=>b in a?a1(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,a6=(a,b)=>{for(var c in b||(b={}))a3.call(b,c)&&a5(a,c,b[c]);if(a2)for(var c of a2(b))a4.call(b,c)&&a5(a,c,b[c]);return a},a7={popover:()=>({position:"fixed",maxWidth:353,backgroundColor:"#fff",padding:"24px 30px",boxShadow:"0 0.5em 3em rgba(0, 0, 0, 0.3)",color:"inherit",zIndex:1e5,transition:"transform 0.3s",top:0,left:0})},a8=a=>{var{children:b,position:c="bottom",padding:d=10,styles:e={},sizes:f,refresher:g}=a,h=((a,b)=>{var c={};for(var d in a)a3.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&a2)for(var d of a2(a))0>b.indexOf(d)&&a4.call(a,d)&&(c[d]=a[d]);return c})(a,["children","position","padding","styles","sizes","refresher"]);let i=(0,j.useRef)(null),k=(0,j.useRef)(""),l=(0,j.useRef)(""),m=(0,j.useRef)(""),{w:n,h:o}=aY(),p=(a,b)=>{let c=a7[a](b),d=e[a];return d?d(c,b):c},q=function(a,b){let[c,d]=(0,j.useState)(aX),e=(0,j.useCallback)(()=>{(null==a?void 0:a.current)&&d(aW(null==a?void 0:a.current))},[null==a?void 0:a.current]);return(0,j.useEffect)(()=>(e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)),[null==a?void 0:a.current,b]),c}(i,g),{width:r,height:s}=q,[t,u,v,w]=aZ(d),x=(null==f?void 0:f.left)-w,y=(null==f?void 0:f.top)-t,z=(null==f?void 0:f.right)+u,A=(null==f?void 0:f.bottom)+v,B=c&&"function"==typeof c?c({width:r,height:s,windowWidth:n,windowHeight:o,top:y,left:x,right:z,bottom:A,x:f.x,y:f.y},q):c,C={left:x,right:n-z,top:y,bottom:o-A},D=(a,b,c)=>{switch(a){case"top":return C.top>s+v;case"right":return!b&&C.right>r+w;case"bottom":return!c&&C.bottom>s+t;case"left":return C.left>r+u;default:return!1}},E=(a=>{if(Array.isArray(a)){let b=a[0]>n,c=a[1]>o;return k.current="custom",[b?n/2-r/2:a[0],c?o/2-s/2:a[1]]}let b=x+r>n,c=A+s>o,d=b?Math.min(x,n-r):Math.max(x,0),e=c?s>C.bottom?Math.max(A-s,0):Math.max(y,0):y;c&&s>C.bottom?l.current="bottom":l.current="top",b?m.current="left":m.current="right";let f={top:[d-w,y-s-v],right:[z+w,e-t],bottom:[d-w,A+t],left:[x-r-u,e-t],center:[n/2-r/2,o/2-s/2]};if("center"===a||D(a,b,c)&&!b&&!c)return k.current=a,f[a];let g=function(a,b=[]){return Object.keys(a).map(b=>({position:b,value:a[b]})).sort((a,b)=>b.value-a.value).sort((a,c)=>{let d,e;return d=a.position,e=c.position,b.includes(d)?1:b.includes(e)?-1:0}).filter(a=>a.value>0).map(a=>a.position)}(C,c?["right","left"]:b?["top","bottom"]:[]);for(let a=0;a<g.length;a++)if(D(g[a],b,c))return k.current=g[a],f[g[a]];return k.current="center",f.center})(B);return j.default.createElement("div",a6({className:"reactour__popover",style:a6({transform:`translate(${Math.round(E[0])}px, ${Math.round(E[1])}px)`},p("popover",{position:k.current,verticalAlign:l.current,horizontalAlign:m.current,helperRect:q,targetRect:f})),ref:i},h),b)},a9=Object.defineProperty,ba=Object.defineProperties,bb=Object.getOwnPropertyDescriptors,bc=Object.getOwnPropertySymbols,bd=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,bf=(a,b,c)=>b in a?a9(a,b,{enumerable:!0,configurable:!0,writable:!0,value:c}):a[b]=c,bg=(a,b)=>{for(var c in b||(b={}))bd.call(b,c)&&bf(a,c,b[c]);if(bc)for(var c of bc(b))be.call(b,c)&&bf(a,c,b[c]);return a},bh=(a,b)=>{var c={};for(var d in a)bd.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&bc)for(var d of bc(a))0>b.indexOf(d)&&be.call(a,d)&&(c[d]=a[d]);return c},bi={bottom:0,height:0,left:0,right:0,top:0,width:0,windowWidth:0,windowHeight:0,x:0,y:0};function bj(a,b=[],c=!0){let d=!1,{w:e,h:f}=aY();if(!b)return ba(bg({},aW(a)),bb({windowWidth:e,windowHeight:f,hasHighligtedElems:!1}));let g=aW(a),h={bottom:0,height:0,left:e,right:0,top:f,width:0};for(let e of b){let b=document.querySelector(e);if(!b||"none"===b.style.display||"hidden"===b.style.visibility)continue;let f=aW(b);d=!0,c||!a?(f.top<h.top&&(h.top=f.top),f.right>h.right&&(h.right=f.right),f.bottom>h.bottom&&(h.bottom=f.bottom),f.left<h.left&&(h.left=f.left),h.width=h.right-h.left,h.height=h.bottom-h.top):(f.top<g.top&&(g.top=f.top),f.right>g.right&&(g.right=f.right),f.bottom>g.bottom&&(g.bottom=f.bottom),f.left<g.left&&(g.left=f.left),g.width=g.right-g.left,g.height=g.bottom-g.top)}let i=(!!c||!a)&&h.width>0&&h.height>0;return{left:(i?h:g).left,top:(i?h:g).top,right:(i?h:g).right,bottom:(i?h:g).bottom,width:(i?h:g).width,height:(i?h:g).height,windowWidth:e,windowHeight:f,hasHighligtedElems:d,x:g.x,y:g.y}}var bk=({disableKeyboardNavigation:a,setCurrentStep:b,currentStep:c,setIsOpen:d,stepsLength:e,disable:f,rtl:g,clickProps:h,keyboardHandler:i})=>{function k(j){let k,l,m;function n(){b(Math.min(c+1,e-1))}function o(){b(Math.max(c-1,0))}j.stopPropagation(),!0!==a&&!f&&(a&&(k=a.includes("esc"),l=a.includes("right"),m=a.includes("left")),i&&"function"==typeof i?i(j,h,{isEscDisabled:k,isRightDisabled:l,isLeftDisabled:m}):(27!==j.keyCode||k||(j.preventDefault(),d(!1)),39!==j.keyCode||l||(j.preventDefault(),g?o():n()),37!==j.keyCode||m||(j.preventDefault(),g?n():o())))}return(0,j.useEffect)(()=>(window.addEventListener("keydown",k,!1),()=>{window.removeEventListener("keydown",k)}),[f,b,c]),null},bl={badge:()=>({position:"absolute",fontFamily:"monospace",background:"var(--reactour-accent,#007aff)",height:"1.875em",lineHeight:2,paddingLeft:"0.8125em",paddingRight:"0.8125em",fontSize:"1em",borderRadius:"1.625em",color:"white",textAlign:"center",boxShadow:"0 0.25em 0.5em rgba(0, 0, 0, 0.3)",top:"-0.8125em",left:"-0.8125em"}),controls:()=>({display:"flex",marginTop:24,alignItems:"center",justifyContent:"space-between"}),navigation:()=>({counterReset:"dot",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"}),button:({disabled:a})=>({display:"block",padding:0,border:0,background:"none",cursor:a?"not-allowed":"pointer"}),arrow:({disabled:a})=>({color:a?"#caccce":"#646464",width:16,height:12,flex:"0 0 16px"}),dot:({current:a,disabled:b,showNumber:c})=>({counterIncrement:"dot",width:8,height:8,border:a?"0":"1px solid #caccce",borderRadius:"100%",padding:0,display:"block",margin:4,transition:"opacity 0.3s, transform 0.3s",cursor:b?"not-allowed":"pointer",transform:`scale(${a?1.25:1})`,color:a?"var(--reactour-accent, #007aff)":"#caccce",background:a?"var(--reactour-accent, #007aff)":"none"}),close:({disabled:a})=>({position:"absolute",top:22,right:22,width:9,height:9,"--rt-close-btn":a?"#caccce":"#5e5e5e","--rt-close-btn-disabled":a?"#caccce":"#000"}),svg:()=>({display:"block"})};function bm(a){return(b,c)=>{let d=bl[b](c),e=a[b];return e?e(d,c):d}}var bn=({styles:a={},inverted:b=!1,disabled:c})=>{let d=bm(a);return j.default.createElement("svg",{viewBox:"0 0 18.4 14.4",style:d("arrow",{inverted:b,disabled:c})},j.default.createElement("path",{d:b?"M17 7.2H1M10.8 1L17 7.2l-6.2 6.2":"M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10"}))},bo={Badge:({styles:a={},children:b})=>{let c=bm(a);return j.default.createElement("span",{style:c("badge",{})},b)},Close:a=>{var{styles:b={},onClick:c,disabled:d}=a,e=bh(a,["styles","onClick","disabled"]);let f=bm(b);return j.default.createElement("button",bg({className:"reactour__close-button",style:bg(bg({},f("button",{})),f("close",{disabled:d})),onClick:c},e),j.default.createElement("svg",{viewBox:"0 0 9.1 9.1","aria-hidden":!0,role:"presentation",style:bg({},f("svg",{}))},j.default.createElement("path",{fill:"currentColor",d:"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z"})))},Content:({content:a,setCurrentStep:b,transition:c,isHighlightingObserved:d,currentStep:e,setIsOpen:f})=>"function"==typeof a?a({setCurrentStep:b,transition:c,isHighlightingObserved:d,currentStep:e,setIsOpen:f}):a,Navigation:({styles:a={},steps:b,setCurrentStep:c,currentStep:d,setIsOpen:e,nextButton:f,prevButton:g,disableDots:h,hideDots:i,hideButtons:k,disableAll:l,rtl:m,Arrow:n=bn})=>{let o=b.length,p=bm(a),q=({onClick:b,kind:e="next",children:f,hideArrow:g})=>j.default.createElement("button",{style:p("button",{kind:e,disabled:l||("next"===e?o-1===d:0===d)}),onClick:function(){l||(b&&"function"==typeof b?b():"next"===e?c(Math.min(d+1,o-1)):c(Math.max(d-1,0)))},"aria-label":`Go to ${e} step`},g?null:j.default.createElement(n,{styles:a,inverted:m?"prev"===e:"next"===e,disabled:l||("next"===e?o-1===d:0===d)}),f);return j.default.createElement("div",{style:p("controls",{}),dir:m?"rtl":"ltr"},k?null:g&&"function"==typeof g?g({Button:q,setCurrentStep:c,currentStep:d,stepsLength:o,setIsOpen:e,steps:b}):j.default.createElement(q,{kind:"prev"}),i?null:j.default.createElement("div",{style:p("navigation",{})},Array.from({length:o},(a,b)=>b).map(a=>{var e;return j.default.createElement("button",{style:p("dot",{current:a===d,disabled:h||l}),onClick:()=>{h||l||c(a)},key:`navigation_dot_${a}`,"aria-label":(null==(e=b[a])?void 0:e.navDotAriaLabel)||`Go to step ${a+1}`})})),k?null:f&&"function"==typeof f?f({Button:q,setCurrentStep:c,currentStep:d,stepsLength:o,setIsOpen:e,steps:b}):j.default.createElement(q,null))},Arrow:bn},bp=({styles:a,components:b={},badgeContent:c,accessibilityOptions:d,disabledActions:e,onClickClose:f,steps:g,setCurrentStep:h,currentStep:i,transition:k,isHighlightingObserved:l,setIsOpen:m,nextButton:n,prevButton:o,disableDotsNavigation:p,rtl:q,showPrevNextButtons:r=!0,showCloseButton:s=!0,showNavigation:t=!0,showBadge:u=!0,showDots:v=!0,meta:w,setMeta:x,setSteps:y})=>{let z=g[i],{Badge:A,Close:B,Content:C,Navigation:D,Arrow:E}=bg(bg({},bo),b),F=c&&"function"==typeof c?c({currentStep:i,totalSteps:g.length,transition:k}):i+1;return j.default.createElement(j.default.Fragment,null,u?j.default.createElement(A,{styles:a},F):null,s?j.default.createElement(B,{styles:a,"aria-label":null==d?void 0:d.closeButtonAriaLabel,disabled:e,onClick:function(){e||(f&&"function"==typeof f?f({setCurrentStep:h,setIsOpen:m,currentStep:i,steps:g,meta:w,setMeta:x,setSteps:y}):m(!1))}}):null,j.default.createElement(C,{content:null==z?void 0:z.content,setCurrentStep:h,currentStep:i,transition:k,isHighlightingObserved:l,setIsOpen:m}),t?j.default.createElement(D,{setCurrentStep:h,currentStep:i,setIsOpen:m,steps:g,styles:a,"aria-hidden":!(null==d?void 0:d.showNavigationScreenReaders),nextButton:n,prevButton:o,disableDots:p,hideButtons:!r,hideDots:!v,disableAll:e,rtl:q,Arrow:E}):null)},bq=a=>{var b,c,{currentStep:d,setCurrentStep:e,setIsOpen:f,steps:g=[],setSteps:h,styles:i={},scrollSmooth:k,afterOpen:l,beforeClose:m,padding:n=10,position:o,onClickMask:p,onClickHighlighted:q,keyboardHandler:r,className:s="reactour__popover",maskClassName:t="reactour__mask",highlightedMaskClassName:u,clipId:v,maskId:w,disableInteraction:x,disableKeyboardNavigation:y,inViewThreshold:z,disabledActions:A,setDisabledActions:B,disableWhenSelectorFalsy:C,rtl:D,accessibilityOptions:E={closeButtonAriaLabel:"Close Tour",showNavigationScreenReaders:!0},ContentComponent:F,Wrapper:G,meta:H,setMeta:I,onTransition:J=()=>"center"}=a,K=bh(a,["currentStep","setCurrentStep","setIsOpen","steps","setSteps","styles","scrollSmooth","afterOpen","beforeClose","padding","position","onClickMask","onClickHighlighted","keyboardHandler","className","maskClassName","highlightedMaskClassName","clipId","maskId","disableInteraction","disableKeyboardNavigation","inViewThreshold","disabledActions","setDisabledActions","disableWhenSelectorFalsy","rtl","accessibilityOptions","ContentComponent","Wrapper","meta","setMeta","onTransition"]);let L=g[d],M=bg(bg({},i),null==L?void 0:L.styles),{sizes:N,transition:O,observableRefresher:P,isHighlightingObserved:Q,target:R}=function(a,b={block:"center",behavior:"smooth",inViewThreshold:0}){let[c,d]=(0,j.useState)(!1),[e,f]=(0,j.useState)(!1),[g,h]=(0,j.useState)(!1),[i,k]=(0,j.useState)(null),[l,m]=(0,j.useState)(bi),n=(null==a?void 0:a.selector)instanceof Element?null==a?void 0:a.selector:document.querySelector(null==a?void 0:a.selector),o=(0,j.useCallback)(()=>{let b=bj(n,null==a?void 0:a.highlightedSelectors,null==a?void 0:a.bypassElem),{hasHighligtedElems:c}=b,d=bh(b,["hasHighligtedElems"]);Object.entries(l).some(([a,b])=>d[a]!==b)&&m(d)},[n,null==a?void 0:a.highlightedSelectors,l]);(0,j.useEffect)(()=>(o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[n,null==a?void 0:a.highlightedSelectors,i]),(0,j.useEffect)(()=>{!function({top:a,right:b,bottom:c,left:d,threshold:e}){let{w:f,h:g}=aY(),{thresholdX:h,thresholdY:i}="object"==typeof e&&null!==e?{thresholdX:e.x||0,thresholdY:e.y||0}:{thresholdX:e||0,thresholdY:e||0};return a<0&&c-a>g||a>=0+i&&d>=0+h&&c<=g-i&&b<=f-h}(ba(bg({},l),bb({threshold:b.inViewThreshold})))&&n&&(d(!0),new Promise(a=>{if(!(n instanceof Element))throw TypeError("Argument 1 must be an Element");let c=0,d=null,e=Object.assign({behavior:"smooth"},b);n.scrollIntoView(e),requestAnimationFrame(function b(){let e=null==n?void 0:n.getBoundingClientRect().top;if(e===d){if(c++>2)return a(null)}else c=0,d=e;requestAnimationFrame(b)})}).then(()=>{e||k(Date.now())}).finally(()=>{d(!1)}))},[l]);let p=(0,j.useCallback)(()=>{f(!0);let b=bj(n,null==a?void 0:a.highlightedSelectors,null==a?void 0:a.bypassElem),{hasHighligtedElems:c}=b,d=bh(b,["hasHighligtedElems"]);h(c),m(d),f(!1)},[n,null==a?void 0:a.highlightedSelectors,l]);return{sizes:l,transition:c,target:n,observableRefresher:p,isHighlightingObserved:g}}(L,{block:"center",behavior:k?"smooth":"auto",inViewThreshold:z});(0,j.useEffect)(()=>(l&&"function"==typeof l&&l(R),()=>{m&&"function"==typeof m&&m(R)}),[]);let{maskPadding:S,popoverPadding:T,wrapperPadding:U}="object"==typeof(b=null!=(c=null==L?void 0:L.padding)?c:n)&&null!==b?{maskPadding:b.mask,popoverPadding:b.popover,wrapperPadding:b.wrapper}:{maskPadding:b,popoverPadding:b,wrapperPadding:0},V={setCurrentStep:e,setIsOpen:f,currentStep:d,setSteps:h,steps:g,setMeta:I,meta:H},W="boolean"==typeof(null==L?void 0:L.stepInteraction)?!(null==L?void 0:L.stepInteraction):!!x&&("boolean"==typeof x?x:x(V));(0,j.useEffect)(()=>((null==L?void 0:L.action)&&"function"==typeof(null==L?void 0:L.action)&&(null==L||L.action(R)),(null==L?void 0:L.disableActions)!==void 0&&B(null==L?void 0:L.disableActions),()=>{(null==L?void 0:L.actionAfter)&&"function"==typeof(null==L?void 0:L.actionAfter)&&(null==L||L.actionAfter(R))}),[L]);let X=O?J:(null==L?void 0:L.position)?null==L?void 0:L.position:o,Y=G||j.default.Fragment;return L?j.default.createElement(Y,null,j.default.createElement(aV,{mutationObservables:null==L?void 0:L.mutationObservables,resizeObservables:null==L?void 0:L.resizeObservables,refresh:P}),j.default.createElement(bk,{setCurrentStep:e,currentStep:d,setIsOpen:f,stepsLength:g.length,disableKeyboardNavigation:y,disable:A,rtl:D,clickProps:V,keyboardHandler:r}),(!C||R)&&j.default.createElement(a_,{sizes:O?br:N,onClick:function(){A||(p&&"function"==typeof p?p(V):f(!1))},styles:bg({highlightedArea:a=>ba(bg({},a),bb({display:W?"block":"none"}))},M),padding:O?0:S,highlightedAreaClassName:u,className:t,onClickHighlighted:a=>{a.preventDefault(),a.stopPropagation(),q&&q(a,V)},wrapperPadding:U,clipId:v,maskId:w}),(!C||R)&&j.default.createElement(a8,{sizes:N,styles:M,position:X,padding:T,"aria-labelledby":null==E?void 0:E.ariaLabelledBy,className:s,refresher:d},F?j.default.createElement(F,bg({styles:M,setCurrentStep:e,currentStep:d,setIsOpen:f,steps:g,accessibilityOptions:E,disabledActions:A,transition:O,isHighlightingObserved:Q,rtl:D},K)):j.default.createElement(bp,bg({styles:M,setCurrentStep:e,currentStep:d,setIsOpen:f,steps:g,setSteps:h,accessibilityOptions:E,disabledActions:A,transition:O,isHighlightingObserved:Q,rtl:D,meta:H,setMeta:I},K)))):null},br={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},bs=j.default.createContext({isOpen:!1,setIsOpen:()=>!1,currentStep:0,setCurrentStep:()=>0,steps:[],setSteps:()=>[],setMeta:()=>"",disabledActions:!1,setDisabledActions:()=>!1,components:{}}),bt=a=>{var{children:b,defaultOpen:c=!1,startAt:d=0,steps:e,setCurrentStep:f,currentStep:g}=a,h=bh(a,["children","defaultOpen","startAt","steps","setCurrentStep","currentStep"]);let[i,k]=(0,j.useState)(c),[l,m]=(0,j.useState)(d),[n,o]=(0,j.useState)(e),[p,q]=(0,j.useState)(""),[r,s]=(0,j.useState)(!1),t=bg({isOpen:i,setIsOpen:k,currentStep:g||l,setCurrentStep:f&&"function"==typeof f?f:m,steps:n,setSteps:o,disabledActions:r,setDisabledActions:s,meta:p,setMeta:q},h);return j.default.createElement(bs.Provider,{value:t},b,i?j.default.createElement(bq,bg({},t)):null)};function bu({onComplete:a}){let{setIsOpen:b,setCurrentStep:c,isOpen:d}=(0,j.useContext)(bs),e=(0,j.useRef)(!1);return(0,j.useEffect)(()=>{if(e.current)return;let a=setTimeout(()=>{c(0),b(!0),e.current=!0},1500);return()=>clearTimeout(a)},[b,c]),(0,j.useEffect)(()=>{e.current&&!d&&a()},[d,a]),null}function bv({children:a}){return(0,b.jsx)("kbd",{className:"px-1.5 py-0.5 text-xs font-semibold rounded bg-black/10 dark:bg-white/10 border border-current/20",children:a})}let bw=[{selector:'[data-tour="sidebar"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Command Bar"}),(0,b.jsxs)("p",{className:"text-sm opacity-80",children:["Navigate anywhere with ",(0,b.jsx)(bv,{children:"Ctrl+K"}),". Search conversations semantically, change themes, open settings, jump to templates — everything's a keystroke away."]})]}),position:"right"},{selector:'[data-tour="input"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Built for Speed"}),(0,b.jsxs)("p",{className:"text-sm opacity-80",children:[(0,b.jsx)(bv,{children:"Alt+N"})," starts a new chat, ",(0,b.jsx)(bv,{children:"Cmd+J"})," switches models instantly, ",(0,b.jsx)(bv,{children:"Cmd+;"})," applies a template. No clicking required."]})]}),position:"top"},{selector:'[data-tour="model-selector"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"blah Remembers"}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"Important details are remembered across all your chats. Ask blah to recall something from a past conversation, or tell it to remember (or forget) specific facts."})]}),position:"bottom"},{selector:'[data-tour="comparison"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Built-in Tools"}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"Need to run code? Search the web? blah has built-in tools for Python, JavaScript, web search, and more — just ask."})]}),position:"bottom"},{selector:'[data-tour="projects"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"Projects"}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"Group related conversations, notes, tasks, and files together. Perfect for keeping context organized across longer efforts."})]}),position:"right"},{selector:'[data-tour="feedback"]',content:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"font-semibold",children:"We're Listening"}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"Found a bug? Have an idea? The feedback button is always here. We read every message."})]}),position:"bottom"},{selector:"body",content:(0,b.jsxs)("div",{className:"space-y-2 text-center",children:[(0,b.jsx)("p",{className:"font-semibold",children:"You're Ready"}),(0,b.jsx)("p",{className:"text-sm opacity-80",children:"That's the highlights. Explore the sidebar, try the shortcuts, and make blah work the way you think."})]}),position:"center"}];function bx({children:a}){let{isDarkMode:c,isLoaded:d}=function(){let[a,b]=(0,j.useState)(!1),[c,d]=(0,j.useState)(!1);return(0,j.useEffect)(()=>{let a=()=>{b(document.documentElement.classList.contains("dark")),d(!0)};a();let c=new MutationObserver(b=>{b.forEach(b=>{"class"===b.attributeName&&a()})});return c.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{c.disconnect()}},[]),{isDarkMode:a,isLoaded:c}}(),e=(0,m.useQuery)(k.api.onboarding.getOnboardingState),f=(0,m.useMutation)(k.api.onboarding.initializeOnboarding),g=(0,m.useMutation)(k.api.onboarding.completeTour),h=(0,j.useRef)(!1);(0,j.useEffect)(()=>{void 0!==e&&null===e&&f()},[e,f]);let i=(0,j.useCallback)(()=>{h.current||(h.current=!0,g({skipped:!1}))},[g]);return e&&(e.tourCompleted||e.tourSkipped)||void 0===e?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsxs)(bt,{steps:bw,styles:d?{popover:a=>({...a,backgroundColor:c?"#1f1f1f":"#ffffff",color:c?"#e5e5e5":"#1f1f1f",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",border:c?"1px solid #333":"1px solid #e5e7eb",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.4)"}),maskArea:a=>({...a,rx:8}),badge:a=>({...a,backgroundColor:"#e4a853",color:"#ffffff"}),controls:a=>({...a,marginTop:"1rem"}),close:a=>({...a,color:c?"#a1a1aa":"#71717a","&:hover":{color:c?"#e5e5e5":"#1f1f1f"}})}:{},padding:{mask:8,popover:[8,12]},showBadge:!0,showCloseButton:!0,showDots:!0,showNavigation:!0,disableDotsNavigation:!1,scrollSmooth:!0,inViewThreshold:100,disableFocusLock:!0,onClickMask:()=>{},children:[(0,b.jsx)(bu,{onComplete:i}),a]})}function by({children:a}){return(0,b.jsx)(bx,{children:a})}var bz=a.i(505613),bA=a.i(129239),bB=a.i(332747),bC=a.i(89847),bD=a.i(674779),bE=a.i(524761),bF=a.i(689024),bG=a.i(546686),bH=a.i(982153),bI=a.i(625852);function bJ({value:a,onChange:c}){let d=(0,m.useQuery)(k.api.projects.list);if(!d||0===d.length)return null;let e=null!==a;return(0,b.jsx)("div",{className:"w-full min-w-0",children:(0,b.jsxs)(ac.Select,{value:a||"all",onValueChange:a=>{"all"===a?c(null):c(a)},children:[(0,b.jsx)(ac.SelectTrigger,{className:`w-full min-w-0 px-2.5 transition-all duration-200 ${e?"border-primary bg-primary/5 text-primary shadow-sm ring-1 ring-primary/20":""}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,b.jsx)(bI.FolderOpen,{className:`w-4 h-4 shrink-0 transition-colors ${e?"text-primary":""}`}),(0,b.jsx)("div",{className:"truncate min-w-0",children:(0,b.jsx)(ac.SelectValue,{placeholder:"All projects"})})]})}),(0,b.jsxs)(ac.SelectContent,{children:[(0,b.jsx)(ac.SelectItem,{value:"all",children:"All projects"}),(0,b.jsx)(ac.SelectItem,{value:"none",children:"Unassigned"}),d?.map(a=>(0,b.jsx)(ac.SelectItem,{value:a._id,children:(0,b.jsx)("span",{className:"truncate",title:a.name,children:a.name})},a._id))]})]})})}var bK=a.i(723979),bL=a.i(851943);function bM({children:a,href:c,...d}){let e=(0,i.useRouter)(),f=String(c);return(0,b.jsx)(bL.default,{href:c,prefetch:!1,onMouseEnter:()=>e.prefetch(f),onFocus:()=>e.prefetch(f),...d,children:a})}var bN=a.i(820658),bO=a.i(726481),bP=a.i(127487),bQ=a.i(86086),bR=a.i(477430);function bS({selectedCount:a,onClearSelection:c,onDelete:d,onArchive:e,onPin:f,onUnpin:g,onStar:h,onUnstar:i,onAutoRename:k,className:l}){let[m,n]=(0,j.useState)(!1),o=async()=>{n(!0);try{await k()}finally{n(!1)}};return(0,b.jsxs)("div",{className:(0,z.cn)("flex flex-col gap-2 rounded-lg border bg-background/95 p-2 shadow-sm backdrop-blur supports-[backdrop-filter]:bg-background/60","animate-in slide-in-from-top-2 fade-in-0 duration-200",l),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"text-xs font-medium text-muted-foreground pl-1",children:[a," selected"]}),(0,b.jsxs)(aa.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-muted -mr-1",onClick:c,children:[(0,b.jsx)(aB.X,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"sr-only",children:"Cancel"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-primary/10 hover:text-primary",onClick:f,children:(0,b.jsx)(q.Pin,{className:"h-3.5 w-3.5"})})}),(0,b.jsx)(bR.TooltipContent,{children:"Pin/Unpin all"})]}),(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-yellow-500/10 hover:text-yellow-500",onClick:h,children:(0,b.jsx)(U.Star,{className:"h-3.5 w-3.5"})})}),(0,b.jsx)(bR.TooltipContent,{children:"Star/Unstar all"})]}),(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-muted",onClick:o,disabled:m,children:(0,b.jsx)(J.Edit,{className:(0,z.cn)("h-3.5 w-3.5",m&&"animate-spin")})})}),(0,b.jsx)(bR.TooltipContent,{children:"Auto-rename"})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1 border-l pl-1",children:(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-destructive/10 hover:text-destructive",onClick:d,children:(0,b.jsx)(W.Trash2,{className:"h-3.5 w-3.5"})})}),(0,b.jsx)(bR.TooltipContent,{children:"Delete selected"})]})})]})]})}var bT=a.i(828288);function bU({open:a,onOpenChange:c,onConfirm:d,count:e}){return(0,b.jsx)(bT.AlertDialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(bT.AlertDialogContent,{children:[(0,b.jsxs)(bT.AlertDialogHeader,{children:[(0,b.jsx)(bT.AlertDialogTitle,{children:"Are you absolutely sure?"}),(0,b.jsxs)(bT.AlertDialogDescription,{children:["This will permanently delete ",e," conversation",1!==e&&"s",". This action cannot be undone."]})]}),(0,b.jsxs)(bT.AlertDialogFooter,{children:[(0,b.jsx)(bT.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(bT.AlertDialogAction,{onClick:d,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})}var bV=a.i(429649),bW=a.i(300722),bX=a.i(376332),bY=a.i(968177);function bZ({projectId:a,onClick:c,onKeyDown:d,collapsed:e}){let f=(0,m.useQuery)(k.api.projects.get,{id:a});return f?e?void 0:(0,b.jsxs)(bY.Badge,{variant:"secondary",className:(0,z.cn)("text-xs cursor-pointer transition-all duration-200","max-w-[220px] min-w-0"),onClick:a=>{c&&(a.stopPropagation(),c())},onKeyDown:a=>{d&&(a.stopPropagation(),d(a))},tabIndex:c?0:-1,role:c?"button":void 0,title:f.name,children:[(0,b.jsx)(bI.FolderOpen,{className:(0,z.cn)("w-3 h-3 shrink-0",!e&&"mr-1")}),!e&&(0,b.jsx)("span",{className:"truncate min-w-0 flex-1",children:f.name})]}):(0,b.jsxs)(bY.Badge,{variant:"secondary",className:"text-xs",children:[(0,b.jsx)(bI.FolderOpen,{className:"w-3 h-3 mr-1"}),"Deleted project"]})}var b$=a.i(468106),b_=a.i(277680);a.i(208756);var b0=a.i(486722);function b1({conversationId:a}){return(0,b0.useQuery)(k.api.conversations.get,{conversationId:a}),(0,b0.usePaginatedQuery)(k.api.messages.listPaginated,{conversationId:a},{initialNumItems:50}),null}function b2({conversation:a,selectedId:c,onClearSelection:e,isSelectionMode:f=!1,isSelectedById:g=!1,onToggleSelection:h}){let l=(0,i.useRouter)(),o=(0,i.usePathname)(),[p,r]=(0,j.useState)(!1),[s,t]=(0,j.useState)(!1),[u,v]=(0,j.useState)(!1),[w,x]=(0,bF.useQueryState)("project"),y=(0,E.useFeatureToggles)(),A=(0,m.useMutation)(k.api.conversations.deleteConversation),B=(0,m.useMutation)(k.api.conversations.togglePin),C=(0,m.useMutation)(k.api.conversations.toggleStar),D=(0,m.useMutation)(k.api.conversations.archive),F=(0,m.useAction)(k.api.conversations.actions.bulkAutoRename),G=o===`/chat/${a._id}`,H=c===a._id,I=async()=>{await A({conversationId:a._id}),G&&l.push("/")},K=async b=>{b?.stopPropagation();try{await B({conversationId:a._id})}catch(b){let a=b instanceof Error?b.message:"Failed to pin conversation";_.toast.error(a)}},L=async b=>{b?.stopPropagation();try{_.toast.loading("Generating title...",{id:"auto-rename"});let b=await F({conversationIds:[a._id]});if(b[0]?.success)_.toast.success("Conversation renamed",{id:"auto-rename"});else throw Error(b[0]?.error||"Failed to generate title")}catch(b){let a=b instanceof Error?b.message:"Failed to auto-rename";_.toast.error(a,{id:"auto-rename"})}},M=(0,j.useCallback)(()=>{a.projectId&&x(a.projectId)},[a.projectId,x]),N=(0,j.useCallback)(a=>{("Enter"===a.key||" "===a.key)&&(a.preventDefault(),M())},[M]),O=function({conversation:a,onShowRename:c,onShowDelete:d,onToggleSelection:e,onPin:f,onStar:g,onArchive:h,onAutoRename:i}){let j=!a.pinned&&0===a.messageCount;return[{id:"rename",icon:(0,b.jsx)(J.Edit,{className:"w-4 h-4 mr-2"}),label:"Rename",onClick:c},{id:"auto-rename",icon:(0,b.jsx)(T.Sparkles,{className:"w-4 h-4 mr-2"}),label:"Auto-rename",onClick:i},{id:"separator-1",icon:null,label:"",onClick:()=>{},separator:!0},...e?[{id:"select",icon:(0,b.jsx)("span",{className:"w-4 h-4 mr-2 border border-current rounded-sm"}),label:"Select",onClick:e}]:[],{id:"pin",icon:(0,b.jsx)(q.Pin,{className:"w-4 h-4 mr-2"}),label:a.pinned?"Unpin":j?"Cannot pin empty":"Pin",onClick:f,disabled:j},{id:"star",icon:(0,b.jsx)(U.Star,{className:"w-4 h-4 mr-2"}),label:a.starred?"Unstar":"Star",onClick:g},{id:"archive",icon:(0,b.jsx)(n.Archive,{className:"w-4 h-4 mr-2"}),label:"Archive",onClick:h},{id:"separator-2",icon:null,label:"",onClick:()=>{},separator:!0},{id:"delete",icon:(0,b.jsx)(W.Trash2,{className:"w-4 h-4 mr-2"}),label:"Delete",onClick:d,destructive:!0}]}({conversation:a,onShowRename:()=>r(!0),onShowDelete:()=>t(!0),onToggleSelection:h?()=>h(a._id):void 0,onPin:()=>K(),onStar:()=>C({conversationId:a._id}),onArchive:()=>D({conversationId:a._id}),onAutoRename:()=>L()});return(0,b.jsxs)(b.Fragment,{children:[u&&(0,b.jsx)(b1,{conversationId:a._id}),(0,b.jsxs)(b_.ContextMenu,{children:[(0,b.jsx)(b_.ContextMenuTrigger,{asChild:!0,children:(0,b.jsxs)("div",{className:(0,z.cn)("group/item relative flex items-center gap-1 px-2.5 py-1.5 rounded-md cursor-pointer transition-all duration-200","hover:bg-sidebar-accent/50 hover:shadow-none",G&&!f?"bg-sidebar-accent text-sidebar-accent-foreground font-medium shadow-sm ring-1 ring-sidebar-border/50":"text-sidebar-foreground/80 hover:text-sidebar-foreground hover:bg-sidebar-accent/50",H&&!f&&"bg-primary/10 ring-1 ring-primary",g&&"bg-primary/5 ring-1 ring-primary/20"),onClick:b=>{if(f)b.preventDefault(),h?.(a._id);else{let b=w&&"none"!==w?`?project=${w}`:"";l.push(`/chat/${a._id}${b}`)}},onKeyDown:b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),f?h?.(a._id):l.push(`/chat/${a._id}`))},onMouseEnter:()=>{e?.(),v(!0),l.prefetch(`/chat/${a._id}`)},onFocus:()=>{v(!0),l.prefetch(`/chat/${a._id}`)},"data-list-id":a._id,role:"option","aria-selected":H,tabIndex:-1,children:[(f||g)&&(0,b.jsx)("div",{className:"shrink-0 animate-in fade-in zoom-in duration-200",children:(0,b.jsx)(b$.Checkbox,{checked:g,onCheckedChange:()=>h?.(a._id),onClick:a=>a.stopPropagation(),className:"h-4 w-4 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"})}),!f&&a.parentConversationId&&a.parentMessageId&&(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",className:"shrink-0 text-muted-foreground/60 hover:text-primary hover:bg-primary/10 rounded-md !h-[15px] !w-[15px] !p-2 !min-h-[15px] !min-w-[15px]",onClick:b=>{b.stopPropagation(),l.push(`/chat/${a.parentConversationId}?messageId=${a.parentMessageId}#message-${a.parentMessageId}`)},"aria-label":"Go to parent conversation",children:(0,b.jsx)(bV.GitBranch,{className:"!h-[15px] !w-[15px]"})})}),(0,b.jsx)(bR.TooltipContent,{side:"right",children:(0,b.jsx)("p",{children:"Branched conversation - click to go to source"})})]}),!f&&a.isCollaborative&&(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("div",{className:"shrink-0 h-5 w-5 min-w-0 min-h-0 p-0.5 flex items-center justify-center text-blue-500",children:(0,b.jsx)(bX.Users,{className:"h-3 w-3"})})}),(0,b.jsx)(bR.TooltipContent,{side:"right",children:(0,b.jsx)("p",{children:"Collaborative conversation"})})]}),!f&&a.isIncognito&&(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)("div",{className:"shrink-0 h-5 w-5 min-w-0 min-h-0 p-0.5 flex items-center justify-center text-violet-400",children:(0,b.jsx)(d.Ghost,{className:"h-3 w-3"})})}),(0,b.jsx)(bR.TooltipContent,{side:"right",children:(0,b.jsx)("p",{children:"Incognito - ephemeral, no memories"})})]}),(0,b.jsxs)("div",{className:"flex-1 flex flex-col gap-1 min-w-0",children:[(0,b.jsx)("p",{className:(0,z.cn)("text-sm truncate",g&&"text-primary font-medium"),children:a.title||"New conversation"}),y.showProjects&&a.projectId&&(0,b.jsx)(bZ,{projectId:a.projectId,onClick:M,onKeyDown:N,collapsed:w===a.projectId})]}),(a.starred||a.pinned)&&(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[a.starred&&(0,b.jsx)(U.Star,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),a.pinned&&(0,b.jsx)(q.Pin,{className:"w-3 h-3 text-primary"})]}),!f&&(0,b.jsxs)("div",{className:"absolute top-2 bottom-2 sm:top-[2.5px] sm:bottom-[2.5px] right-2 flex items-center gap-0 opacity-0 group-hover/item:opacity-100 transition-opacity bg-linear-to-l from-sidebar-accent via-sidebar-accent/80 to-transparent pl-8 pr-1",children:[void 0!==a.messageCount&&a.messageCount>0&&(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{onClick:K,variant:"ghost",className:"h-6 w-6 p-0 rounded-md cursor-pointer",disabled:!a.pinned&&0===a.messageCount,"aria-label":a.pinned?"Unpin":"Pin conversation",children:(0,b.jsx)(q.Pin,{className:(0,z.cn)("w-2.5 h-2.5",a.pinned&&"text-primary fill-primary")})})}),(0,b.jsx)(bR.TooltipContent,{children:(0,b.jsx)("p",{children:a.pinned?"Unpin":0===a.messageCount?"Cannot pin empty":"Pin"})})]}),(0,b.jsxs)(bK.DropdownMenu,{children:[(0,b.jsxs)(bR.Tooltip,{children:[(0,b.jsx)(bR.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(bK.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(aa.Button,{variant:"ghost",className:"h-6 w-6 rounded-md cursor-pointer","aria-label":"Options",children:(0,b.jsx)(bW.MoreVertical,{className:"w-2.5 h-2.5"})})})}),(0,b.jsx)(bR.TooltipContent,{children:(0,b.jsx)("p",{children:"Options"})})]}),(0,b.jsx)(bK.DropdownMenuContent,{align:"end",children:O.map(a=>a.separator?(0,b.jsx)(bK.DropdownMenuSeparator,{},a.id):(0,b.jsxs)(bK.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),a.onClick()},disabled:a.disabled,className:a.destructive?"text-destructive":"",children:[a.icon,a.label]},a.id))})]})]})]})}),(0,b.jsx)(b_.ContextMenuContent,{children:O.map(a=>a.separator?(0,b.jsx)(b_.ContextMenuSeparator,{},a.id):(0,b.jsxs)(b_.ContextMenuItem,{onClick:a.onClick,disabled:a.disabled,className:a.destructive?"text-destructive":"",children:[a.icon,a.label]},a.id))})]}),(0,b.jsx)(Y.RenameDialog,{conversation:a,open:p,onOpenChange:r}),(0,b.jsx)(X.DeleteConversationDialog,{open:s,onOpenChange:t,onConfirm:I,conversationTitle:a.title})]})}function b3({conversations:a,selectedId:c=null,onClearSelection:d,selectedIds:e=[],onToggleSelection:f}){if(0===a.length)return(0,b.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No conversations yet"});let g=e&&e.length>0;return(0,b.jsx)("div",{role:"listbox","aria-label":"Conversations","aria-activedescendant":c?`conv-${c}`:void 0,tabIndex:0,children:a.map(a=>(0,b.jsx)(b2,{conversation:a,selectedId:c,onClearSelection:d,isSelectionMode:g,isSelectedById:e?.includes(a._id),onToggleSelection:f},a._id))})}var b4=a.i(452309);function b5(){return(0,b.jsxs)("div",{className:"space-y-2 px-0 pb-1",children:[(0,b.jsx)(b4.Skeleton,{className:"h-8 w-full mb-4"}),Array.from({length:8}).map((a,c)=>(0,b.jsxs)("div",{className:(0,z.cn)("flex items-center gap-1 rounded-md px-0 py-0","hover:bg-accent/10 transition-colors"),children:[(0,b.jsx)("div",{className:"flex-1 space-y-2 min-w-0",children:(0,b.jsx)(b4.Skeleton,{className:"h-4 w-full"})}),(0,b.jsx)(b4.Skeleton,{className:"h-4 w-4 rounded shrink-0"})]},c))]})}let b6=[{icon:h.Search,label:"Search",href:"/search",featureKey:null},{icon:R.NotebookPen,label:"Notes",href:"/notes",featureKey:"showNotes"},{icon:N,label:"Projects",href:"/projects",featureKey:"showProjects"},{icon:bB.CheckSquare,label:"Tasks",href:"/tasks",featureKey:null},{icon:bD.Presentation,label:"Slides",href:"/slides",featureKey:"showSlides"},{icon:bC.Mic,label:"Smart Assistant",href:"/assistant",featureKey:null},{icon:M.FileText,label:"Templates",href:"/templates",featureKey:"showTemplates"},{icon:G.Bookmark,label:"Bookmarks",href:"/bookmarks",featureKey:"showBookmarks"},{icon:S.Settings,label:"Settings",href:"/settings",featureKey:null}];function b7(){let[a,c]=(0,bF.useQueryState)("project"),e=(0,m.useQuery)(k.api.conversations.list,{projectId:a||void 0}),h=(0,j.useMemo)(()=>e?.filter(a=>!0!==a.isPresentation),[e]),l=(0,m.useMutation)(k.api.conversations.bulkDelete),n=(0,m.useMutation)(k.api.conversations.bulkArchive),o=(0,m.useMutation)(k.api.conversations.bulkPin),p=(0,m.useMutation)(k.api.conversations.bulkUnpin),q=(0,m.useMutation)(k.api.conversations.bulkStar),r=(0,m.useMutation)(k.api.conversations.bulkUnstar),s=(0,m.useAction)(k.api.conversations.actions.bulkAutoRename),t=(0,i.useRouter)(),u=(0,i.usePathname)(),{isMobile:v}=(0,bP.useSidebar)(),{setFilteredConversations:w}=(0,bQ.useConversationContext)(),{startNewChat:x}=(0,F.useNewChat)(),{isLoaded:y}=(0,bA.useAuth)(),A=(0,m.useQuery)(k.api.users.getUserPreferencesByCategory,{category:"advanced"}),B=(0,m.useQuery)(k.api.admin.isCurrentUserAdmin),C=(0,j.useMemo)(()=>{let a=void 0===A,b=null===A;return a||b?{showNotes:!1,showTemplates:!1,showProjects:!1,showBookmarks:!1,showSlides:!1,isLoading:!0}:{showNotes:A.showNotes??!0,showTemplates:A.showTemplates??!0,showProjects:A.showProjects??!0,showBookmarks:A.showBookmarks??!0,showSlides:A.showSlides??!1,isLoading:!1}},[A]),[D,E]=(0,j.useState)([]),[G,H]=(0,j.useState)(!1),[I,J]=(0,j.useState)(!1);(0,j.useEffect)(()=>{let a=()=>J(!0);return window.addEventListener("open-new-incognito-dialog",a),()=>window.removeEventListener("open-new-incognito-dialog",a)},[]),(0,j.useEffect)(()=>{w(h)},[h,w]);let{selectedId:K,clearSelection:L}=function({items:a,onSelect:b,enabled:c=!0,loop:d=!1,scrollIntoView:e=!0,getItemId:f}){let[g,h]=(0,j.useState)(null),i=(0,j.useRef)(void 0),k=(0,j.useCallback)(()=>{h(null)},[]),l=(0,j.useCallback)(j=>{if(!c||0===a.length)return;let l=j.target;if("INPUT"===l.tagName||"TEXTAREA"===l.tagName||"true"===l.getAttribute("contenteditable"))return;let m=g?a.findIndex(a=>f(a)===g):-1,n=m;switch(j.key){case"ArrowDown":j.preventDefault(),n=m>=a.length-1?d?0:m:m+1;break;case"ArrowUp":j.preventDefault(),n=m<=0?d?a.length-1:0:m-1;break;case"PageDown":j.preventDefault(),n=Math.min(m+10,a.length-1);break;case"PageUp":j.preventDefault(),n=Math.max(m-10,0);break;case"Home":j.preventDefault(),n=0;break;case"End":j.preventDefault(),n=a.length-1;break;case"Enter":m>=0&&(j.preventDefault(),b(a[m]));return;case"Escape":j.preventDefault(),k();return;default:return}let o=a[n];if(o){let a=f(o);h(a),e&&(clearTimeout(i.current),i.current=setTimeout(()=>{let b=document.querySelector(`[data-list-id="${a}"]`);b?.scrollIntoView({block:"nearest",behavior:"smooth"})},50))}},[a,g,c,d,b,k,e,f]);return(0,j.useEffect)(()=>{if(c)return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l),clearTimeout(i.current)}},[l,c]),{selectedId:g,setSelectedId:h,clearSelection:k}}({items:h||[],onSelect:a=>{t.push(`/chat/${a._id}`),L()},enabled:!0,loop:!0,getItemId:a=>a._id}),M=b6.filter(a=>(!v||"/shortcuts"!==a.href)&&(!a.featureKey||!C.isLoading&&C[a.featureKey])),N=v?M.slice(0,3):M,O=v?M.slice(3):[],P=(0,j.useCallback)(a=>{E(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])},[]),Q=(0,j.useCallback)(()=>{E([])},[]),R=async()=>{try{await l({conversationIds:D}),_.toast.success(`Deleted ${D.length} conversations`),E([]),H(!1)}catch(a){_.toast.error("Failed to delete conversations")}},S=async()=>{try{await n({conversationIds:D}),_.toast.success(`Archived ${D.length} conversations`),E([])}catch(a){_.toast.error("Failed to archive conversations")}},T=async()=>{let a=h?.filter(a=>D.includes(a._id))||[],b=a.length>0&&a.every(a=>a.pinned);try{b?(await p({conversationIds:D}),_.toast.success(`Unpinned ${D.length} conversations`)):(await o({conversationIds:D}),_.toast.success(`Pinned ${D.length} conversations`)),E([])}catch(a){_.toast.error("Failed to update pin status")}},U=async()=>{let a=h?.filter(a=>D.includes(a._id))||[],b=a.length>0&&a.every(a=>a.starred);try{b?(await r({conversationIds:D}),_.toast.success(`Unstarred ${D.length} conversations`)):(await q({conversationIds:D}),_.toast.success(`Starred ${D.length} conversations`)),E([])}catch(a){_.toast.error("Failed to update star status")}},V=async()=>{try{_.toast.info("Generating titles...");let a=(await s({conversationIds:D})).filter(a=>a.success).length;_.toast.success(`Renamed ${a} conversations`),E([])}catch(a){_.toast.error("Failed to rename conversations")}};return(0,b.jsxs)(bP.Sidebar,{collapsible:"icon","data-tour":"sidebar",role:"navigation","aria-label":"Main navigation and conversations",children:[(0,b.jsxs)(bP.SidebarHeader,{className:"pt-6 px-1.5 group-data-[collapsible=icon]:px-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-2 group-data-[collapsible=icon]:px-0 group-data-[collapsible=icon]:justify-center",children:[(0,b.jsx)(bM,{href:"/app",className:"hidden group-data-[collapsible=icon]:hidden sm:block hover:opacity-80 transition-opacity",children:(0,b.jsx)(bG.Logo,{size:"md"})}),(0,b.jsx)(bM,{href:"/app",className:"group-data-[collapsible=icon]:block hidden hover:opacity-80 transition-opacity",children:(0,b.jsx)(bG.Logo,{size:"sm",showText:!1})}),(0,b.jsx)("div",{className:"sm:hidden",children:(0,b.jsx)(bM,{href:"/app",className:"hover:opacity-80 transition-opacity",children:(0,b.jsx)(bG.Logo,{size:"sm"})})})]}),(0,b.jsxs)("div",{className:"mt-4 group-data-[collapsible=icon]:hidden flex gap-2",children:[(0,b.jsxs)(aa.Button,{onClick:()=>{x()},className:"flex-1 px-2.5 py-2.5 bg-sidebar-accent hover:bg-sidebar-accent/80 text-sidebar-foreground border border-sidebar-border shadow-sm transition-all duration-200 justify-between h-9 cursor-pointer","data-tour":"new-chat",children:[(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"New Chat"]}),(0,b.jsx)("div",{className:"hidden sm:flex",children:(0,b.jsx)(bO.ShortcutBadge,{keys:["Alt","N"]})})]}),(0,b.jsx)(aa.Button,{onClick:()=>J(!0),variant:"ghost",size:"icon",className:"h-9 w-9 shrink-0 border border-sidebar-border text-violet-400/70 hover:text-violet-400 hover:bg-violet-500/10",title:"New Incognito Chat (Shift+Alt+N)",children:(0,b.jsx)(d.Ghost,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)(bP.SidebarContent,{className:"flex flex-col gap-0",children:[(0,b.jsxs)(bP.SidebarGroup,{className:"group-data-[collapsible=icon]:hidden shrink-0",children:[(0,b.jsx)(bP.SidebarGroupLabel,{children:"Conversations"}),C.showProjects&&(0,b.jsx)(bJ,{value:a,onChange:c})]}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,b.jsx)(bP.SidebarGroup,{className:"group-data-[collapsible=icon]:hidden h-full pt-0",children:(0,b.jsx)(bP.SidebarGroupContent,{className:"h-full overflow-y-auto",children:void 0===h?(0,b.jsx)(b5,{}):(0,b.jsxs)(b.Fragment,{children:[D.length>0?(0,b.jsx)("div",{className:"px-2 pb-2 sticky top-0 bg-sidebar z-10",children:(0,b.jsx)(bS,{selectedCount:D.length,onClearSelection:Q,onDelete:()=>H(!0),onArchive:S,onPin:T,onUnpin:()=>{},onStar:U,onUnstar:()=>{},onAutoRename:V,className:"w-full border shadow-sm"})}):(0,b.jsx)(b.Fragment,{}),(0,b.jsx)(b3,{conversations:h||[],selectedId:K,onClearSelection:L,selectedIds:D,onToggleSelection:P}),(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("div",{className:"px-2 pb-2 text-[10px] text-muted-foreground hidden sm:block",children:"Tip: Right-click to select"}),(0,b.jsx)("kbd",{className:"hidden sm:inline-flex px-2 text-[9px] opacity-60",children:"⌘1,⌘2... to jump to conversations"})]})]})})})})]}),(0,b.jsx)("div",{className:"px-2 py-1",children:(0,b.jsx)(bN.Separator,{})}),(0,b.jsxs)(bP.SidebarFooter,{className:"pb-4",children:[(0,b.jsxs)(bP.SidebarMenu,{children:[N.map(a=>{let c=u===a.href||u.startsWith(`${a.href}/`);return(0,b.jsx)(bP.SidebarMenuItem,{children:(0,b.jsx)(bP.SidebarMenuButton,{asChild:!0,tooltip:a.label,isActive:c,className:"p-2.5",..."/projects"===a.href&&{"data-tour":"projects"},children:(0,b.jsxs)(bM,{href:a.href,children:[(0,b.jsx)(a.icon,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:a.label})]})})},a.href)}),v&&O.length>0&&(0,b.jsx)(bP.SidebarMenuItem,{children:(0,b.jsxs)(bK.DropdownMenu,{children:[(0,b.jsx)(bK.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(bP.SidebarMenuButton,{tooltip:"More",children:[(0,b.jsx)(f.MoreHorizontal,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"More"})]})}),(0,b.jsx)(bK.DropdownMenuContent,{side:"right",align:"end",className:"w-48 bg-sidebar border-sidebar-border",children:O.map(a=>{let c=u===a.href||u.startsWith(`${a.href}/`);return(0,b.jsx)(bK.DropdownMenuItem,{asChild:!0,children:(0,b.jsxs)(bM,{href:a.href,className:(0,z.cn)("flex items-center gap-2 cursor-pointer",c&&"bg-sidebar-accent text-sidebar-accent-foreground font-medium"),children:[(0,b.jsx)(a.icon,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsx)("span",{children:a.label})]})},a.href)})})]})}),B&&(0,b.jsx)(bP.SidebarMenuItem,{children:(0,b.jsx)(bP.SidebarMenuButton,{asChild:!0,tooltip:"Admin Dashboard",isActive:u.startsWith("/admin"),children:(0,b.jsxs)(bM,{href:"/admin/feedback",className:"text-amber-500 hover:text-amber-400",children:[(0,b.jsx)(bE.Shield,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Admin Dashboard"})]})})})]}),(0,b.jsx)("div",{className:"px-2 pt-2 group-data-[collapsible=icon]:hidden min-h-10",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[y&&(0,b.jsx)(bz.UserButton,{afterSignOutUrl:"/sign-in"}),(0,b.jsx)(bH.ThemeSwitcher,{})]})}),(0,b.jsx)("div",{className:"hidden group-data-[collapsible=icon]:flex justify-center pt-2",children:y&&(0,b.jsx)(bz.UserButton,{afterSignOutUrl:"/sign-in"})})]}),(0,b.jsx)(bU,{open:G,onOpenChange:H,onConfirm:R,count:D.length}),(0,b.jsx)(af,{open:I,onOpenChange:J})]})}var b8=a.i(609448);function b9(){let{open:a}=(0,bP.useSidebar)(),c=(0,i.useRouter)(),{startNewChat:k}=(0,F.useNewChat)(),[l,m]=(0,j.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("header",{className:"flex h-14 shrink-0 items-center gap-2 border-b px-4 transition-all duration-300 ease-in-out",children:[(0,b.jsx)(bP.SidebarTrigger,{}),!a&&(0,b.jsxs)("div",{className:"flex items-center gap-1 animate-in fade-in slide-in-from-left-2 duration-300",children:[(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",onClick:()=>{k()},className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"New Chat",children:(0,b.jsx)(g.Plus,{className:"h-4 w-4","aria-hidden":"true"})}),(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",onClick:()=>m(!0),className:"hidden sm:inline-flex h-8 w-8 text-violet-400/70 hover:text-violet-400 hover:bg-violet-500/10","aria-label":"New Incognito Chat",title:"New Incognito Chat (Shift+Alt+N)",children:(0,b.jsx)(d.Ghost,{className:"h-4 w-4","aria-hidden":"true"})}),(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",onClick:()=>c.push("/search"),className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"Search conversations",children:(0,b.jsx)(h.Search,{className:"h-4 w-4","aria-hidden":"true"})})]}),(0,b.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[(0,b.jsx)(aD,{}),(0,b.jsx)(at.FeedbackButton,{}),(0,b.jsxs)(bK.DropdownMenu,{children:[(0,b.jsx)(bK.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(aa.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"More options",children:(0,b.jsx)(f.MoreHorizontal,{className:"h-4 w-4","aria-hidden":"true"})})}),(0,b.jsxs)(bK.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(bK.DropdownMenuItem,{onClick:()=>c.push("/shortcuts"),children:[(0,b.jsx)(e.Keyboard,{className:"h-4 w-4 mr-2"}),"Keyboard Shortcuts"]}),(0,b.jsxs)(bK.DropdownMenuItem,{onClick:()=>m(!0),className:"sm:hidden",children:[(0,b.jsx)(d.Ghost,{className:"h-4 w-4 mr-2 text-violet-400"}),"New Incognito Chat"]})]})]})]})]}),(0,b.jsx)(af,{open:l,onOpenChange:m})]})}function ca({children:a}){let{isAuthenticated:d,isLoading:e}=(0,c.useConvexAuth)(),f=(0,i.usePathname)().startsWith("/admin");return(0,b.jsx)(ar,{children:(0,b.jsx)(bQ.ConversationProvider,{children:(0,b.jsxs)(b8.CanvasProvider,{children:[(0,b.jsx)(av,{}),(0,b.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[9999] focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:shadow-lg",children:"Skip to main content"}),e||d?(0,b.jsx)(bP.SidebarProvider,{children:(0,b.jsxs)(by,{children:[f?(0,b.jsx)("div",{className:"flex w-full h-[100dvh] overflow-hidden",children:a}):(0,b.jsxs)("div",{className:"flex w-full h-[100dvh] overflow-hidden",children:[(0,b.jsx)(j.Suspense,{fallback:null,children:(0,b.jsx)(b7,{})}),(0,b.jsxs)("main",{id:"main-content",className:"flex-1 flex flex-col min-w-0 overflow-x-hidden overflow-y-hidden","aria-label":"Chat interface",children:[(0,b.jsx)(b9,{}),a]})]}),(0,b.jsx)(Z,{}),(0,b.jsx)(as,{}),(0,b.jsx)(ay,{})]})}):a]})})})}a.s(["default",()=>ca],758396)}];

//# sourceMappingURL=_d66bbc9d._.js.map