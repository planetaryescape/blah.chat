module.exports=[353788,a=>{"use strict";let b=(0,a.i(366705).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["Clock",()=>b],353788)},215179,a=>{"use strict";let b=(0,a.i(366705).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);a.s(["ChevronLeft",()=>b],215179)},397079,a=>{"use strict";let b=(0,a.i(366705).default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);a.s(["RotateCcw",()=>b],397079)},404761,a=>{"use strict";let b=(0,a.i(366705).default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);a.s(["Play",()=>b],404761)},961884,a=>{"use strict";let b=(0,a.i(366705).default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);a.s(["Pause",()=>b],961884)},133394,a=>{"use strict";var b=a.i(537500);function c({presentationId:a,role:c,onSlideChange:d,onTimerStart:e,onTimerReset:f,onExit:g,onLaserToggle:h,onDrawToggle:i}){let j=(0,b.useRef)(null),[k,l]=(0,b.useState)(!1),[m,n]=(0,b.useState)(null);(0,b.useEffect)(()=>(j.current=new BroadcastChannel(`presentation-sync-${a}`),l(!0),j.current.onmessage=a=>{let b=a.data;switch(n(b),b.type){case"slide-change":void 0!==b.slideIndex&&d?.(b.slideIndex);break;case"timer-start":e?.();break;case"timer-reset":f?.();break;case"exit":g?.();break;case"laser-toggle":void 0!==b.enabled&&h?.(b.enabled);break;case"draw-toggle":void 0!==b.enabled&&i?.(b.enabled)}},()=>{j.current?.close(),j.current=null,l(!1)}),[a,d,e,f,g,h,i]);let o=(0,b.useCallback)(a=>{j.current?.postMessage({type:"slide-change",slideIndex:a,timestamp:Date.now()})},[]),p=(0,b.useCallback)(()=>{j.current?.postMessage({type:"timer-start",timestamp:Date.now()})},[]),q=(0,b.useCallback)(()=>{j.current?.postMessage({type:"timer-reset",timestamp:Date.now()})},[]),r=(0,b.useCallback)(()=>{j.current?.postMessage({type:"exit",timestamp:Date.now()})},[]);return{isConnected:k,lastMessage:m,sendSlideChange:o,sendTimerStart:p,sendTimerReset:q,sendExit:r,sendLaserToggle:(0,b.useCallback)(a=>{j.current?.postMessage({type:"laser-toggle",enabled:a,timestamp:Date.now()})},[]),sendDrawToggle:(0,b.useCallback)(a=>{j.current?.postMessage({type:"draw-toggle",enabled:a,timestamp:Date.now()})},[])}}a.s(["usePresentationSync",()=>c])},919278,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(215179),f=a.i(358176),g=a.i(353788),h=a.i(961884),i=a.i(404761),j=a.i(397079),k=a.i(23944),l=a.i(98343),m=a.i(537500),n=a.i(539524),o=a.i(276670),p=a.i(133394);function q({params:a}){let l,q,s,t,u=(0,m.use)(a).id,[v,w]=(0,m.useState)(0),[x,y]=(0,m.useState)(!1),[z,A]=(0,m.useState)(null),[B,C]=(0,m.useState)(0),[D,E]=(0,m.useState)(new Date),F=(0,d.useQuery)(c.api.presentations.get,{presentationId:u}),G=(0,d.useQuery)(c.api.presentations.getSlides,{presentationId:u}),{sendSlideChange:H,sendTimerStart:I,sendTimerReset:J,sendExit:K}=(0,p.usePresentationSync)({presentationId:u,role:"presenter",onSlideChange:a=>w(a)}),L=(0,m.useCallback)(()=>{if(!G||v>=G.length-1)return;let a=v+1;w(a),H(a)},[G,v,H]),M=(0,m.useCallback)(()=>{if(v<=0)return;let a=v-1;w(a),H(a)},[v,H]),N=(0,m.useCallback)(a=>{!G||a<0||a>=G.length||(w(a),H(a))},[G,H]),O=(0,m.useCallback)(()=>{y(!0),A(Date.now()),I()},[I]),P=(0,m.useCallback)(()=>{y(!1)},[]),Q=(0,m.useCallback)(()=>{y(!1),A(null),C(0),J()},[J]);if((0,m.useEffect)(()=>{if(!x||!z)return;let a=setInterval(()=>{C(Date.now()-z)},1e3);return()=>clearInterval(a)},[x,z]),(0,m.useEffect)(()=>{let a=setInterval(()=>{E(new Date)},1e3);return()=>clearInterval(a)},[]),(0,m.useEffect)(()=>{let a=a=>{switch(a.key){case"ArrowRight":case" ":a.preventDefault(),L();break;case"ArrowLeft":a.preventDefault(),M();break;case"Escape":a.preventDefault(),window.close()}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[L,M]),!F||!G)return(0,b.jsx)("div",{className:"flex h-screen items-center justify-center bg-background",children:(0,b.jsx)("div",{className:"animate-pulse text-muted-foreground",children:"Loading presenter view..."})});let R=G[v],S=G[v+1];return(0,b.jsxs)("div",{className:"h-screen bg-background flex flex-col",children:[(0,b.jsxs)("header",{className:"border-b px-4 py-2 flex items-center justify-between shrink-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("h1",{className:"font-semibold text-sm truncate max-w-[300px]",children:F.title}),(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Presenter View"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 border rounded-lg px-3 py-1",children:[(0,b.jsx)(g.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{className:"font-mono text-lg min-w-[80px]",children:(q=Math.floor((l=Math.floor(B/1e3))/3600),s=Math.floor(l%3600/60),t=l%60,q>0?`${q}:${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`:`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`)}),x?(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:P,children:(0,b.jsx)(h.Pause,{className:"h-4 w-4"})}):(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:O,children:(0,b.jsx)(i.Play,{className:"h-4 w-4"})}),(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:Q,children:(0,b.jsx)(j.RotateCcw,{className:"h-4 w-4"})})]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",onClick:()=>{K(),window.close()},children:(0,b.jsx)(k.X,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,b.jsxs)("div",{className:"flex-1 flex flex-col p-4 gap-4",children:[(0,b.jsxs)("div",{className:"flex-[2] bg-black rounded-lg overflow-hidden relative",children:[(0,b.jsx)(r,{storageId:R?.imageStorageId,alt:R?.title||"Current slide"}),(0,b.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded",children:["Current: ",v+1," / ",G.length]})]}),(0,b.jsx)("div",{className:"flex-1 bg-muted rounded-lg overflow-hidden relative",children:S?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(r,{storageId:S.imageStorageId,alt:S.title||"Next slide"}),(0,b.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-xs px-2 py-1 rounded",children:["Next: ",v+2]})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"End of presentation"})})]}),(0,b.jsxs)("div",{className:"w-96 border-l flex flex-col",children:[(0,b.jsx)("div",{className:"p-3 border-b",children:(0,b.jsx)("h2",{className:"font-medium text-sm",children:"Speaker Notes"})}),(0,b.jsx)(o.ScrollArea,{className:"flex-1",children:(0,b.jsx)("div",{className:"p-4",children:R?.speakerNotes?(0,b.jsx)("p",{className:"text-sm whitespace-pre-wrap leading-relaxed",children:R.speakerNotes}):(0,b.jsx)("p",{className:"text-sm text-muted-foreground italic",children:"No speaker notes for this slide"})})})]})]}),(0,b.jsxs)("footer",{className:"border-t px-4 py-3 flex items-center justify-between shrink-0",children:[(0,b.jsxs)(n.Button,{variant:"outline",onClick:M,disabled:0===v,children:[(0,b.jsx)(e.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[G.slice(0,10).map((a,c)=>(0,b.jsx)("button",{type:"button",onClick:()=>N(c),className:`w-8 h-6 text-xs rounded border transition-colors ${c===v?"bg-primary text-primary-foreground border-primary":"hover:bg-muted"}`,children:c+1},G[c]._id)),G.length>10&&(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:["...",G.length]})]}),(0,b.jsxs)(n.Button,{variant:"outline",onClick:L,disabled:v===G.length-1,children:["Next",(0,b.jsx)(f.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})}function r({storageId:a,alt:e}){let f=(0,d.useQuery)(c.api.storage.getUrl,a?{storageId:a}:"skip");return f?(0,b.jsx)(l.default,{src:f,alt:e,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 100vw, 50vw"}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."})}a.s(["default",()=>q])}];

//# sourceMappingURL=_eb8a3769._.js.map