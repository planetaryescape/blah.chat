module.exports=[659138,a=>{"use strict";var b=a.i(367146),c=a.i(215179),d=a.i(687336),e=a.i(553812),f=a.i(332747),g=a.i(23944),h=a.i(539524),i=a.i(547885);function j({selectedCount:a,totalCount:c,onSelectAll:d,onClearSelection:j,onBulkStatusChange:k,onBulkArchive:l}){return 0===a?null:(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-primary/10 border-b",children:[(0,b.jsxs)("span",{className:"text-sm font-medium",children:[a," selected"]}),(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:a===c?j:d,className:"h-7 text-xs",children:a===c?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.X,{className:"h-3 w-3 mr-1"}),"Clear"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.CheckSquare,{className:"h-3 w-3 mr-1"}),"Select All"]})}),(0,b.jsxs)(i.Select,{onValueChange:k,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-32 h-7 text-xs",children:(0,b.jsx)(i.SelectValue,{placeholder:"Set Status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"new",children:"New"}),(0,b.jsx)(i.SelectItem,{value:"in-progress",children:"In Progress"}),(0,b.jsx)(i.SelectItem,{value:"resolved",children:"Resolved"}),(0,b.jsx)(i.SelectItem,{value:"closed",children:"Closed"}),(0,b.jsx)(i.SelectItem,{value:"wont-fix",children:"Won't Fix"})]})]}),(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:l,className:"h-7 text-xs text-destructive hover:text-destructive",children:[(0,b.jsx)(e.Archive,{className:"h-3 w-3 mr-1"}),"Archive"]})]})}var k=a.i(240695);function l({hasFilters:a}){return(0,b.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:a?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(k.Filter,{className:"h-12 w-12 mb-4"}),(0,b.jsx)("p",{children:"No feedback matches your filters"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.MessageSquare,{className:"h-12 w-12 mb-4"}),(0,b.jsx)("p",{children:"No feedback yet"})]})})}var m=a.i(509423),n=a.i(651386),o=a.i(968177),p=a.i(895826),q=a.i(535176),r=a.i(473479),s=a.i(421513);let t={bug:["new","triaging","in-progress","resolved","verified","closed","wont-fix","duplicate","cannot-reproduce"],feature:["submitted","under-review","planned","in-progress","shipped","declined","maybe-later"],praise:["received","acknowledged","shared"],other:["new","reviewed","actioned","closed"]},u={new:"New",triaging:"Triaging","in-progress":"In Progress",resolved:"Resolved",verified:"Verified",closed:"Closed","wont-fix":"Won't Fix",duplicate:"Duplicate","cannot-reproduce":"Cannot Reproduce",submitted:"Submitted","under-review":"Under Review",planned:"Planned",shipped:"Shipped",declined:"Declined","maybe-later":"Maybe Later",received:"Received",acknowledged:"Acknowledged",shared:"Shared",reviewed:"Reviewed",actioned:"Actioned"},v={new:"bg-blue-500/10 text-blue-500 border-blue-500/20",triaging:"bg-orange-500/10 text-orange-500 border-orange-500/20","in-progress":"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",resolved:"bg-green-500/10 text-green-500 border-green-500/20",verified:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",closed:"bg-gray-500/10 text-gray-500 border-gray-500/20","wont-fix":"bg-gray-500/10 text-gray-500 border-gray-500/20",duplicate:"bg-purple-500/10 text-purple-500 border-purple-500/20","cannot-reproduce":"bg-gray-500/10 text-gray-500 border-gray-500/20",submitted:"bg-blue-500/10 text-blue-500 border-blue-500/20","under-review":"bg-orange-500/10 text-orange-500 border-orange-500/20",planned:"bg-indigo-500/10 text-indigo-500 border-indigo-500/20",shipped:"bg-green-500/10 text-green-500 border-green-500/20",declined:"bg-red-500/10 text-red-500 border-red-500/20","maybe-later":"bg-gray-500/10 text-gray-500 border-gray-500/20",received:"bg-pink-500/10 text-pink-500 border-pink-500/20",acknowledged:"bg-pink-500/10 text-pink-500 border-pink-500/20",shared:"bg-green-500/10 text-green-500 border-green-500/20",reviewed:"bg-blue-500/10 text-blue-500 border-blue-500/20",actioned:"bg-green-500/10 text-green-500 border-green-500/20"},w={bug:{label:"Bug",icon:(0,b.jsx)(p.Bug,{className:"h-3 w-3"}),color:"bg-red-500/10 text-red-500"},feature:{label:"Feature",icon:(0,b.jsx)(r.Lightbulb,{className:"h-3 w-3"}),color:"bg-purple-500/10 text-purple-500"},praise:{label:"Praise",icon:(0,b.jsx)(q.Heart,{className:"h-3 w-3"}),color:"bg-pink-500/10 text-pink-500"},other:{label:"Other",icon:(0,b.jsx)(s.MessageCircle,{className:"h-3 w-3"}),color:"bg-gray-500/10 text-gray-500"}},x={critical:{label:"Critical",color:"bg-red-500/10 text-red-500 border-red-500"},high:{label:"High",color:"bg-orange-500/10 text-orange-500 border-orange-500"},medium:{label:"Medium",color:"bg-yellow-500/10 text-yellow-500 border-yellow-500"},low:{label:"Low",color:"bg-green-500/10 text-green-500 border-green-500"},none:{label:"None",color:"bg-gray-500/10 text-gray-500 border-gray-500"}};var y=a.i(700760);function z({feedback:a,onAcceptTriage:c}){let d=a.aiTriage;return d?(0,b.jsxs)("div",{className:"bg-muted/30 border rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(n.Sparkles,{className:"h-4 w-4 text-violet-500 fill-violet-500/10"}),(0,b.jsx)("h3",{className:"font-medium text-sm",children:"AI Triage Suggestion"}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground ml-auto",children:(0,m.formatDistanceToNow)(new Date(d.createdAt),{addSuffix:!0})})]}),(0,b.jsxs)("div",{className:"grid gap-3 text-sm",children:[d.suggestedPriority&&d.suggestedPriority!==a.priority&&(0,b.jsxs)("div",{className:"flex items-center justify-between bg-background p-2 rounded border",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Priority:"}),(0,b.jsx)(o.Badge,{variant:"outline",className:x[d.suggestedPriority]?.color,children:x[d.suggestedPriority]?.label})]}),(0,b.jsx)(h.Button,{size:"sm",variant:"secondary",className:"h-6 text-xs hover:bg-violet-100 hover:text-violet-700 dark:hover:bg-violet-900/30 dark:hover:text-violet-300",onClick:()=>c({acceptPriority:!0}),children:"Accept"})]}),d.suggestedTags&&d.suggestedTags.length>0&&(0,b.jsxs)("div",{className:"flex items-start justify-between bg-background p-2 rounded border",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("span",{className:"text-muted-foreground block mb-1 text-xs",children:"Suggested Tags:"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:d.suggestedTags.map(c=>{let d=a.tags?.includes(c);return(0,b.jsx)(o.Badge,{variant:d?"secondary":"outline",className:(0,y.cn)("text-[10px]",d&&"opacity-50"),children:c},c)})})]}),(0,b.jsx)(h.Button,{size:"sm",variant:"secondary",className:"h-6 text-xs mt-1 shrink-0 ml-2 hover:bg-violet-100 hover:text-violet-700 dark:hover:bg-violet-900/30 dark:hover:text-violet-300",onClick:()=>c({acceptTags:!0}),children:"Add Tags"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[d.sentiment&&(0,b.jsxs)("div",{className:"bg-background p-2 rounded border",children:[(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground block uppercase tracking-wider",children:"Sentiment"}),(0,b.jsx)("span",{className:"capitalize",children:d.sentiment})]}),d.category&&(0,b.jsxs)("div",{className:"bg-background p-2 rounded border",children:[(0,b.jsx)("span",{className:"text-[10px] text-muted-foreground block uppercase tracking-wider",children:"Category"}),(0,b.jsx)("span",{className:"capitalize",children:d.category})]})]}),d.triageNotes&&(0,b.jsx)("div",{className:"bg-background p-2 rounded border text-muted-foreground text-xs leading-relaxed",children:d.triageNotes.split(" | ").map((a,c)=>(0,b.jsx)("p",{className:"mb-1 last:mb-0",children:a},c))})]})]}):null}function A({feedback:a,onStatusChange:c,onPriorityChange:d,onAcceptTriage:e}){let f=a.feedbackType,g=t[f]||[];return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(z,{feedback:a,onAcceptTriage:e}),(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold",children:a.userName}),a.feedbackType&&(0,b.jsxs)(o.Badge,{variant:"outline",className:(0,y.cn)("gap-1",w[f]?.color),children:[w[f]?.icon,w[f]?.label]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:a.userEmail}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted"," ",(0,m.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(i.Select,{value:a.priority||"none",onValueChange:d,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-28",children:(0,b.jsx)(i.SelectValue,{placeholder:"Priority"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"critical",children:"ðŸ”´ Critical"}),(0,b.jsx)(i.SelectItem,{value:"high",children:"ðŸŸ  High"}),(0,b.jsx)(i.SelectItem,{value:"medium",children:"ðŸŸ¡ Medium"}),(0,b.jsx)(i.SelectItem,{value:"low",children:"ðŸŸ¢ Low"}),(0,b.jsx)(i.SelectItem,{value:"none",children:"âšª None"})]})]}),(0,b.jsxs)(i.Select,{value:a.status,onValueChange:c,children:[(0,b.jsx)(i.SelectTrigger,{className:"w-40",children:(0,b.jsx)(i.SelectValue,{})}),(0,b.jsx)(i.SelectContent,{children:g.map(a=>(0,b.jsx)(i.SelectItem,{value:a,children:u[a]||a},a))})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Page"}),(0,b.jsx)("a",{href:a.page,className:"text-sm text-primary hover:underline",children:a.page})]}),a.userSuggestedUrgency&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"User Suggested Urgency"}),(0,b.jsx)(o.Badge,{variant:"outline",children:a.userSuggestedUrgency})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Feedback"}),(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.description})]}),a.whatTheyDid&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they were trying to do"}),(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.whatTheyDid})]}),a.whatTheySaw&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they saw"}),(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.whatTheySaw})]}),a.whatTheyExpected&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they expected"}),(0,b.jsx)("p",{className:"whitespace-pre-wrap",children:a.whatTheyExpected})]}),a.tags&&a.tags.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Tags"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1",children:a.tags.map(a=>(0,b.jsx)(o.Badge,{variant:"secondary",children:a},a))})]}),a.screenshotUrl?(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Screenshot"}),(0,b.jsx)("a",{href:a.screenshotUrl,target:"_blank",rel:"noopener noreferrer",children:(0,b.jsx)("img",{src:a.screenshotUrl,alt:"Feedback screenshot",className:"max-w-full rounded-lg border shadow-sm hover:shadow-md transition-shadow cursor-pointer"})})]}):null]})}var B=a.i(991770);let C=(0,a.i(366705).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var D=a.i(286028),E=a.i(537500),F=a.i(928503);function G({statusFilter:a,setStatusFilter:c,typeFilter:d,setTypeFilter:e,priorityFilter:f,setPriorityFilter:j,searchParam:k,setSearchParam:l,sortBy:m,setSortBy:n,sortOrder:o,toggleSortOrder:v,counts:w,hasActiveFilters:x,clearFilters:y}){let z=(0,E.useMemo)(()=>d?t[d]||[]:[...new Set(Object.values(t).flat())],[d]);return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(D.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(F.Input,{placeholder:"Search feedback... (press / to focus)",value:k,onChange:a=>l(a.target.value),className:"pl-8 h-9","data-search-input":!0})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)(i.Select,{value:d||"all",onValueChange:a=>e("all"===a?null:a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[120px] h-8 text-xs",children:(0,b.jsx)(i.SelectValue,{placeholder:"Type"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Types"}),(0,b.jsx)(i.SelectItem,{value:"bug",children:(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(p.Bug,{className:"h-3 w-3"})," Bug"," ",w?.type_bug?`(${w.type_bug})`:""]})}),(0,b.jsx)(i.SelectItem,{value:"feature",children:(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(r.Lightbulb,{className:"h-3 w-3"})," Feature"," ",w?.type_feature?`(${w.type_feature})`:""]})}),(0,b.jsx)(i.SelectItem,{value:"praise",children:(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Heart,{className:"h-3 w-3"})," Praise"," ",w?.type_praise?`(${w.type_praise})`:""]})}),(0,b.jsx)(i.SelectItem,{value:"other",children:(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(s.MessageCircle,{className:"h-3 w-3"})," Other"," ",w?.type_other?`(${w.type_other})`:""]})})]})]}),(0,b.jsxs)(i.Select,{value:a||"all",onValueChange:a=>c("all"===a?null:a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[140px] h-8 text-xs",children:(0,b.jsx)(i.SelectValue,{placeholder:"Status"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Statuses"}),z.map(a=>(0,b.jsxs)(i.SelectItem,{value:a,children:[u[a]||a," ",w?.[a]?`(${w[a]})`:""]},a))]})]}),(0,b.jsxs)(i.Select,{value:f||"all",onValueChange:a=>j("all"===a?null:a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[120px] h-8 text-xs",children:(0,b.jsx)(i.SelectValue,{placeholder:"Priority"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"all",children:"All Priorities"}),(0,b.jsx)(i.SelectItem,{value:"critical",children:"ðŸ”´ Critical"}),(0,b.jsx)(i.SelectItem,{value:"high",children:"ðŸŸ  High"}),(0,b.jsx)(i.SelectItem,{value:"medium",children:"ðŸŸ¡ Medium"}),(0,b.jsx)(i.SelectItem,{value:"low",children:"ðŸŸ¢ Low"}),(0,b.jsx)(i.SelectItem,{value:"none",children:"âšª None"})]})]}),(0,b.jsxs)(i.Select,{value:m,onValueChange:a=>n(a),children:[(0,b.jsx)(i.SelectTrigger,{className:"w-[110px] h-8 text-xs",children:(0,b.jsx)(i.SelectValue,{placeholder:"Sort by"})}),(0,b.jsxs)(i.SelectContent,{children:[(0,b.jsx)(i.SelectItem,{value:"createdAt",children:"Date"}),(0,b.jsx)(i.SelectItem,{value:"priority",children:"Priority"}),(0,b.jsx)(i.SelectItem,{value:"updatedAt",children:"Updated"})]})]}),(0,b.jsx)(h.Button,{variant:"ghost",size:"sm",onClick:v,className:"h-8 px-2",title:"desc"===o?"Newest first":"Oldest first",children:"desc"===o?(0,b.jsx)(B.ArrowDown,{className:"h-4 w-4"}):(0,b.jsx)(C,{className:"h-4 w-4"})}),x&&(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:y,className:"h-8 px-2 text-xs",children:[(0,b.jsx)(g.X,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]})}var H=a.i(468106);function I({items:a,selectedId:c,onSelect:d,selectedIds:e,onToggleSelection:f,isSelectionMode:g}){return(0,b.jsx)("div",{className:"divide-y",children:a.map(a=>(0,b.jsxs)("div",{className:(0,y.cn)("flex items-start gap-2 p-4 hover:bg-muted/50 transition-colors cursor-pointer",c===a._id&&"bg-muted",e.has(a._id)&&"bg-primary/5"),children:[(0,b.jsx)(H.Checkbox,{checked:e.has(a._id),onCheckedChange:()=>f(a._id),onClick:a=>a.stopPropagation(),className:"mt-1 shrink-0"}),(0,b.jsxs)("button",{onClick:()=>d(a._id),className:"flex-1 text-left min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,b.jsx)("span",{className:"font-medium truncate block",children:a.userName}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap shrink-0",children:(0,m.formatDistanceToNow)(new Date(a.createdAt),{addSuffix:!0})})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,b.jsxs)(o.Badge,{variant:"outline",className:(0,y.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border-0",w[a.feedbackType].color),children:[w[a.feedbackType].icon,(0,b.jsx)("span",{className:"ml-1",children:w[a.feedbackType].label})]}),(0,b.jsx)(o.Badge,{variant:"outline",className:(0,y.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border",v[a.status]),children:u[a.status]||a.status}),"none"!==a.priority&&(0,b.jsx)(o.Badge,{variant:"outline",className:(0,y.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border",x[a.priority]?.color),children:x[a.priority]?.label})]})]})]},a._id))})}var J=a.i(452309);function K(){return(0,b.jsx)("div",{className:"space-y-2 p-4",children:[void 0,void 0,void 0,void 0,void 0].map((a,c)=>(0,b.jsxs)("div",{className:"p-3 border rounded-lg space-y-2",children:[(0,b.jsx)(J.Skeleton,{className:"h-4 w-3/4"}),(0,b.jsx)(J.Skeleton,{className:"h-3 w-1/2"})]},c))})}var L=a.i(130487);a.i(16243);var M=a.i(182234),N=a.i(689024),O=a.i(753884),P=a.i(247028),Q=a.i(63263);function R(){let{state:a,actions:e}=function(){let[a,b]=(0,E.useState)(null),[c,d]=(0,E.useState)("list"),{isMobile:e}=(0,Q.useMobileDetect)(),[f,g]=(0,N.useQueryState)("status",N.parseAsString),[h,i]=(0,N.useQueryState)("type",N.parseAsString),[j,k]=(0,N.useQueryState)("priority",N.parseAsString),[l,m]=(0,N.useQueryState)("q",N.parseAsString.withDefault("")),[n,o]=(0,N.useQueryState)("sort",N.parseAsString.withDefault("createdAt")),[p,q]=(0,N.useQueryState)("order",N.parseAsString.withDefault("desc")),[r]=(0,P.useDebounceValue)(l,300),[s,t]=(0,E.useState)(-1),[u,v]=(0,E.useState)(new Set),w=u.size>0,x=!!(f||h||j||l),y=(0,M.useQuery)(L.api.feedback.listFeedback,{status:f||void 0,feedbackType:h||void 0,priority:j||void 0,searchQuery:r||void 0,sortBy:n||"createdAt",sortOrder:p||"desc"}),z=(0,M.useQuery)(L.api.feedback.getFeedbackCounts,{}),A=(0,M.useQuery)(L.api.feedback.getFeedback,a?{feedbackId:a}:"skip"),B=(0,M.useMutation)(L.api.feedback.updateFeedbackStatus),C=(0,M.useMutation)(L.api.feedback.updateFeedbackPriority),D=(0,M.useMutation)(L.api.feedback.bulkUpdateStatus),F=(0,M.useMutation)(L.api.feedback.archiveFeedback),G=(0,M.useMutation)(L.api.feedback.triage.acceptTriageSuggestion),H=async b=>{a&&await B({feedbackId:a,status:b})},I=async b=>{a&&await C({feedbackId:a,priority:b})},J=()=>{v(new Set)},K=async a=>{if(0!==u.size)try{await D({feedbackIds:Array.from(u),status:a}),O.toast.success(`Updated ${u.size} items`),J()}catch(a){O.toast.error("Failed to update status")}},R=async()=>{if(0!==u.size)try{if(!confirm("Are you sure you want to archive these items?"))return;for(let a of u)await F({feedbackId:a});O.toast.success(`Archived ${u.size} items`),J()}catch(a){O.toast.error("Failed to archive items")}},S=async b=>{if(a)try{await G({feedbackId:a,...b}),O.toast.success("Applied AI suggestion")}catch(a){O.toast.error("Failed to apply suggestion")}},T=(0,E.useCallback)(()=>{q("desc"===p?"asc":"desc")},[p,q]);return(0,E.useEffect)(()=>{let a=a=>{if(a.target instanceof HTMLInputElement||a.target instanceof HTMLTextAreaElement)return;let c=y||[];switch(a.key){case"j":case"ArrowDown":a.preventDefault(),t(a=>{let d=a+1;return d<c.length?(b(c[d]._id),d):a});break;case"k":case"ArrowUp":a.preventDefault(),t(a=>{let d=a-1;return d>=0?(b(c[d]._id),d):a});break;case"Escape":b(null),t(-1);break;case"/":a.preventDefault(),document.querySelector("[data-search-input]")?.focus()}};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[y]),(0,E.useEffect)(()=>{if(a&&y){let b=y.findIndex(b=>b._id===a);-1!==b&&t(b)}},[a,y]),{state:{selectedId:a,setSelectedId:b,mobileView:c,setMobileView:d,isMobile:e,statusFilter:f,typeFilter:h,priorityFilter:j,searchParam:l,sortBy:n,sortOrder:p,feedbackList:y,feedbackCounts:z,selectedFeedback:A,selectedIds:u,isSelectionMode:w,hasActiveFilters:x},actions:{setStatusFilter:g,setTypeFilter:i,setPriorityFilter:k,setSearchParam:m,setSortBy:o,toggleSortOrder:T,clearFilters:()=>{g(null),i(null),k(null),m("")},handleStatusChange:H,handlePriorityChange:I,handleSelect:a=>{b(a),e&&d("detail")},toggleItemSelection:a=>{v(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},selectAll:()=>{y&&v(new Set(y.map(a=>a._id)))},clearSelection:J,handleBulkStatusChange:K,handleBulkArchive:R,handleAcceptTriage:S}}}(),{selectedId:f,mobileView:g,isMobile:i,statusFilter:k,typeFilter:m,priorityFilter:n,searchParam:p,sortBy:q,sortOrder:r,feedbackList:s,feedbackCounts:t,selectedFeedback:u,selectedIds:v,hasActiveFilters:w,isSelectionMode:x}=a,{setStatusFilter:y,setTypeFilter:z,setPriorityFilter:B,setSearchParam:C,setSortBy:D,toggleSortOrder:F,clearFilters:H,handleStatusChange:J,handlePriorityChange:R,handleSelect:S,toggleItemSelection:T,selectAll:U,clearSelection:V,handleBulkStatusChange:W,handleBulkArchive:X,handleAcceptTriage:Y}=e;return i?"detail"===g&&u?(0,b.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,b.jsx)("div",{className:"border-b p-2",children:(0,b.jsxs)(h.Button,{variant:"ghost",size:"sm",onClick:()=>a.setMobileView("list"),className:"gap-2",children:[(0,b.jsx)(c.ChevronLeft,{className:"h-4 w-4"}),"Back to Feedback"]})}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,b.jsx)(A,{feedback:u,onStatusChange:J,onPriorityChange:R,onAcceptTriage:Y})})]}):(0,b.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,b.jsxs)("div",{className:"p-4 border-b space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Feedback"}),t&&(0,b.jsxs)(o.Badge,{variant:"secondary",children:[t.total," total"]})]}),(0,b.jsx)(G,{statusFilter:k,setStatusFilter:y,typeFilter:m,setTypeFilter:z,priorityFilter:n,setPriorityFilter:B,searchParam:p,setSearchParam:C,sortBy:q,setSortBy:D,sortOrder:r,toggleSortOrder:F,counts:t,hasActiveFilters:w,clearFilters:H})]}),(0,b.jsx)(j,{selectedCount:v.size,totalCount:s?.length||0,onSelectAll:U,onClearSelection:V,onBulkStatusChange:W,onBulkArchive:X}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:void 0===s?(0,b.jsx)(K,{}):0===s.length?(0,b.jsx)(l,{hasFilters:w}):(0,b.jsx)(I,{items:s,selectedId:f,onSelect:S,selectedIds:v,onToggleSelection:T,isSelectionMode:x})})]}):(0,b.jsxs)("div",{className:"flex h-screen",children:[(0,b.jsxs)("aside",{className:"w-96 border-r bg-muted/10 flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Feedback"}),t&&(0,b.jsxs)(o.Badge,{variant:"secondary",children:[t.total," total"]})]}),(0,b.jsx)(G,{statusFilter:k,setStatusFilter:y,typeFilter:m,setTypeFilter:z,priorityFilter:n,setPriorityFilter:B,searchParam:p,setSearchParam:C,sortBy:q,setSortBy:D,sortOrder:r,toggleSortOrder:F,counts:t,hasActiveFilters:w,clearFilters:H})]}),(0,b.jsx)(j,{selectedCount:v.size,totalCount:s?.length||0,onSelectAll:U,onClearSelection:V,onBulkStatusChange:W,onBulkArchive:X}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:void 0===s?(0,b.jsx)(K,{}):0===s.length?(0,b.jsx)(l,{hasFilters:w}):(0,b.jsx)(I,{items:s,selectedId:f,onSelect:a.setSelectedId,selectedIds:v,onToggleSelection:T,isSelectionMode:x})})]}),(0,b.jsx)("main",{className:"flex-1 overflow-auto p-6",children:u?(0,b.jsx)(A,{feedback:u,onStatusChange:J,onPriorityChange:R,onAcceptTriage:Y}):(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[(0,b.jsx)(d.MessageSquare,{className:"h-12 w-12 mb-4"}),(0,b.jsx)("p",{children:"Select a feedback item to view details"})]})})]})}a.s(["default",()=>R],659138)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_admin_feedback_page_tsx_0ae32a74._.js.map