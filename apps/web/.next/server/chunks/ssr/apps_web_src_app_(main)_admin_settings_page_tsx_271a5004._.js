module.exports=[124422,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(283116),f=a.i(452549),g=a.i(421513),h=a.i(674779),i=a.i(537500),j=a.i(753884),k=a.i(539524),l=a.i(592552),m=a.i(928503),n=a.i(658547),o=a.i(248557),p=a.i(105008),q=a.i(379670),r=a.i(547885);let s=[{value:"groq",label:"Groq Whisper Turbo",defaultCostPerMinute:.0067,description:"$0.04/hour, fastest processing"},{value:"openai",label:"OpenAI Whisper",defaultCostPerMinute:.006,description:"$0.006/min, industry standard"},{value:"deepgram",label:"Deepgram Nova-3",defaultCostPerMinute:.0077,description:"$0.0077/min, high accuracy"},{value:"assemblyai",label:"AssemblyAI",defaultCostPerMinute:.0025,description:"$0.0025/min, most affordable"}];function t(){let a=(0,d.useQuery)(c.api.adminSettings.get),e=(0,d.useMutation)(c.api.adminSettings.update),[f,g]=(0,i.useState)("groq"),[h,o]=(0,i.useState)(.0067),[p,q]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&(g(a.transcriptProvider??"groq"),o(a.transcriptCostPerMinute??.0067))},[a]);let t=async()=>{q(!0);try{await e({transcriptProvider:f,transcriptCostPerMinute:h}),j.toast.success(`Transcript provider updated to ${s.find(a=>a.value===f)?.label}`)}catch(a){j.toast.error(a instanceof Error?a.message:"Failed to update transcript provider")}finally{q(!1)}},u=f!==a?.transcriptProvider||h!==a?.transcriptCostPerMinute;return a?(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Transcript Provider"}),(0,b.jsx)(l.CardDescription,{children:"Configure speech-to-text provider for all voice transcriptions"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"provider",children:"Provider"}),(0,b.jsxs)(r.Select,{value:f,onValueChange:a=>{g(a);let b=s.find(b=>b.value===a);b&&o(b.defaultCostPerMinute)},children:[(0,b.jsx)(r.SelectTrigger,{id:"provider",className:"w-full",children:(0,b.jsx)(r.SelectValue,{})}),(0,b.jsx)(r.SelectContent,{children:s.map(a=>(0,b.jsx)(r.SelectItem,{value:a.value,children:(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)("span",{children:a.label}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:a.description})]})},a.value))})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This provider will be used for all voice input transcriptions across the organization"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"cost-per-minute",children:"Cost per Minute (USD)"}),(0,b.jsx)(m.Input,{id:"cost-per-minute",type:"number",step:"0.0001",min:"0",value:h,onChange:a=>o(Number.parseFloat(a.target.value)),className:"w-32"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Used for usage tracking and cost reports"})]}),u&&(0,b.jsx)(k.Button,{onClick:t,disabled:p,children:p?"Saving...":"Save Changes"})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted/50 p-4",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Note:"})," Changing the provider affects all users immediately. Ensure the provider API key is configured in environment variables."]})})]})]}):(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Transcript Provider"}),(0,b.jsx)(l.CardDescription,{children:"Loading..."})]})})}var u=a.i(820658),v=a.i(183104);let w=[{id:"general",label:"General",component:function(){return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"General Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-1",children:"Platform-wide settings and integrations"})]}),(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium mb-4",children:"Integrations"}),(0,b.jsx)(t,{})]})})]})}},{id:"memory",label:"Memory",component:function(){let a=(0,d.useQuery)(c.api.adminSettings.get),e=(0,d.useMutation)(c.api.adminSettings.update),[f,g]=(0,i.useState)(!0),[h,k]=(0,i.useState)(5);(0,i.useEffect)(()=>{a&&(g(a.autoMemoryExtractEnabled??!0),k(a.autoMemoryExtractInterval??5))},[a]);let m=async a=>{g(a);try{await e({autoMemoryExtractEnabled:a}),j.toast.success(`Memory extraction ${a?"enabled":"disabled"}`)}catch(b){j.toast.error("Failed to update settings"),g(!a)}},q=async a=>{let b=a[0];try{await e({autoMemoryExtractInterval:b}),j.toast.success(`Extraction interval updated to ${b} messages`)}catch(a){j.toast.error("Failed to update interval")}};return a?(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Memory Extraction"}),(0,b.jsx)(l.CardDescription,{children:"Global settings for automatic memory extraction from conversations"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(n.Label,{htmlFor:"auto-extract",children:"Auto-extract memories"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automatically extract facts from all user conversations"})]}),(0,b.jsx)(p.Switch,{id:"auto-extract",checked:f,onCheckedChange:m})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Extraction interval"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Extract memories every ",h," messages"]})]}),(0,b.jsx)(o.Slider,{value:[h],onValueChange:a=>k(a[0]),onValueCommit:q,min:3,max:20,step:1,disabled:!f,className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"3 messages"}),(0,b.jsx)("span",{children:"20 messages"})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted/50 p-4",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Note:"})," These settings apply globally to all users. Changes take effect immediately."]})})]})]}):(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Memory Extraction"}),(0,b.jsx)(l.CardDescription,{children:"Loading..."})]})})}},{id:"search",label:"Search",component:function(){let a=(0,d.useQuery)(c.api.adminSettings.get),e=(0,d.useMutation)(c.api.adminSettings.update),[f,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&g(a.enableHybridSearch??!1)},[a]);let h=async a=>{g(a);try{await e({enableHybridSearch:a}),j.toast.success(`Hybrid search ${a?"enabled":"disabled"}`)}catch(b){j.toast.error("Failed to update settings"),g(!a)}};return a?(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Search Settings"}),(0,b.jsx)(l.CardDescription,{children:"Control how search works across all users' conversations"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(n.Label,{htmlFor:"hybrid-search",children:"Enable hybrid search"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Combine keyword and semantic search for better results"})]}),(0,b.jsx)(p.Switch,{id:"hybrid-search",checked:f,onCheckedChange:h})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted p-4 space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Search modes:"}),(0,b.jsxs)("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Full-text only (default):"})," Fast keyword-based search"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("strong",{children:"Hybrid search:"})," Combines keywords with AI-powered semantic understanding for more accurate results (slower, uses embeddings)"]})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted/50 p-4",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Note:"})," This setting applies globally to all users. Hybrid search requires message embeddings and will use additional API quota."]})})]})]}):(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Search Settings"}),(0,b.jsx)(l.CardDescription,{children:"Loading..."})]})})}},{id:"limits",label:"Limits",component:function(){let a=(0,d.useQuery)(c.api.adminSettings.get),q=(0,d.useMutation)(c.api.adminSettings.update),[r,s]=(0,i.useState)(10),[t,u]=(0,i.useState)(80),[v,w]=(0,i.useState)(!0),[x,y]=(0,i.useState)(50),[z,A]=(0,i.useState)(1),[B,C]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&(s(a.defaultMonthlyBudget??10),u((a.defaultBudgetAlertThreshold??.8)*100),w(a.budgetHardLimitEnabled??!0),y(a.defaultDailyMessageLimit??50),A(a.defaultDailyPresentationLimit??1))},[a]);let D=async()=>{C(!0);try{await q({defaultMonthlyBudget:r,defaultBudgetAlertThreshold:t/100,budgetHardLimitEnabled:v,defaultDailyMessageLimit:x,defaultDailyPresentationLimit:z}),j.toast.success("Limits and budget settings saved!")}catch(a){j.toast.error("Failed to save settings")}finally{C(!1)}};return a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Budget Settings"}),(0,b.jsx)(l.CardDescription,{children:"Global monthly spending limits for all users"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"budget",children:"Default monthly budget per user (USD)"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(e.DollarSign,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{id:"budget",type:"number",value:r,onChange:a=>s(Number(a.target.value)),min:0,step:1,className:"pl-9"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Set to 0 to disable budget tracking"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{children:"Alert threshold"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Show warning at ",t,"% of budget"]})]}),(0,b.jsx)(o.Slider,{value:[t],onValueChange:a=>u(a[0]),min:50,max:100,step:5,className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsx)("span",{children:"50%"}),(0,b.jsx)("span",{children:"100%"})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(n.Label,{htmlFor:"hard-limit",children:"Hard limit enforcement"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Block sending messages when budget is exceeded"})]}),(0,b.jsx)(p.Switch,{id:"hard-limit",checked:v,onCheckedChange:w})]})]})]}),(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Message Limits"}),(0,b.jsx)(l.CardDescription,{children:"Daily message limits for all users"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"limit",children:"Default messages per day per user"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(g.MessageCircle,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{id:"limit",type:"number",value:x,onChange:a=>y(Number(a.target.value)),min:1,max:1e3,step:1,className:"pl-9"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Range: 1-1000 messages"})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted p-4",children:(0,b.jsxs)("p",{className:"text-sm",children:[(0,b.jsx)("strong",{children:"Note:"})," Counters reset daily at midnight (user's local time)."]})}),(0,b.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,b.jsxs)(n.Label,{htmlFor:"presentation-limit",className:"flex items-center gap-2",children:[(0,b.jsx)(h.Presentation,{className:"h-4 w-4"}),"Daily Presentation Limit"]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(h.Presentation,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(m.Input,{id:"presentation-limit",type:"number",value:z,onChange:a=>A(Number(a.target.value)),min:0,max:100,step:1,className:"pl-9"})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Maximum presentations per day. Set to 0 for unlimited. Admins are always exempt."})]})]})]}),(0,b.jsx)("div",{className:"rounded-lg bg-muted/50 p-4",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Note:"})," These settings apply globally to all users. Budget tracking uses per-message cost from token usage. Costs may vary slightly from provider billing due to rounding."]})}),(0,b.jsxs)(k.Button,{onClick:D,disabled:B,children:[B&&(0,b.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]}):(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Limits & Budget"}),(0,b.jsx)(l.CardDescription,{children:"Loading..."})]})})}},{id:"features",label:"Features",component:function(){let a=(0,d.useQuery)(c.api.adminSettings.get),e=(0,d.useMutation)(c.api.adminSettings.update),[g,h]=(0,i.useState)(!1),[o,r]=(0,i.useState)(1),[s,t]=(0,i.useState)(50),[u,v]=(0,i.useState)(!1);(0,i.useEffect)(()=>{a&&(h(a.proModelsEnabled??!1),r(a.tier1DailyProModelLimit??1),t(a.tier2MonthlyProModelLimit??50))},[a]);let w=async()=>{v(!0);try{await e({proModelsEnabled:g,tier1DailyProModelLimit:o,tier2MonthlyProModelLimit:s}),j.toast.success("Pro model settings saved!")}catch(a){j.toast.error("Failed to save settings")}finally{v(!1)}};return a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(l.Card,{children:[(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsxs)(l.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(q.Crown,{className:"h-5 w-5 text-amber-500"}),"Pro Models"]}),(0,b.jsx)(l.CardDescription,{children:"Control access to premium AI models (e.g., Sonar Deep Research)"})]}),(0,b.jsxs)(l.CardContent,{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"space-y-0.5",children:[(0,b.jsx)(n.Label,{htmlFor:"pro-enabled",children:"Enable pro models"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"When disabled, pro models are hidden from all non-admin users"})]}),(0,b.jsx)(p.Switch,{id:"pro-enabled",checked:g,onCheckedChange:h})]}),g&&(0,b.jsxs)("div",{className:"space-y-4 pt-4 border-t",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"tier1-limit",children:"Tier 1: Daily limit"}),(0,b.jsx)(m.Input,{id:"tier1-limit",type:"number",value:o,onChange:a=>r(Number(a.target.value)),min:0,max:100}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pro model messages per day for Tier 1 users (0 = unlimited)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"tier2-limit",children:"Tier 2: Monthly limit"}),(0,b.jsx)(m.Input,{id:"tier2-limit",type:"number",value:s,onChange:a=>t(Number(a.target.value)),min:0,max:1e3}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pro model messages per month for Tier 2 users (0 = unlimited)"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg bg-muted/50 p-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-2",children:"Tier Summary"}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Free:"})," No pro model access"]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Tier 1:"})," ",0===o?"Unlimited":`${o} pro message(s) per day`]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Tier 2:"})," ",0===s?"Unlimited":`${s} pro messages per month`]}),(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Admin:"})," Unlimited pro model access"]})]})]})]})]}),(0,b.jsxs)(k.Button,{onClick:w,disabled:u,children:[u&&(0,b.jsx)(f.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]}):(0,b.jsx)(l.Card,{children:(0,b.jsxs)(l.CardHeader,{children:[(0,b.jsx)(l.CardTitle,{children:"Feature Toggles"}),(0,b.jsx)(l.CardDescription,{children:"Loading..."})]})})}}];function x(){return(0,b.jsxs)("div",{className:"container mx-auto max-w-4xl py-6 md:py-10 px-4 md:px-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Admin Settings"}),(0,b.jsx)("p",{className:"text-muted-foreground mt-2",children:"Manage global platform settings and configurations."})]}),(0,b.jsx)("div",{className:"block md:hidden space-y-10",children:w.map(a=>(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-foreground/90",children:a.label}),(0,b.jsx)(u.Separator,{className:"flex-1"})]}),(0,b.jsx)("div",{className:"px-1",children:(0,b.jsx)(a.component,{})})]},a.id))}),(0,b.jsx)("div",{className:"hidden md:block h-[calc(100vh-200px)]",children:(0,b.jsxs)(v.Tabs,{defaultValue:"general",orientation:"vertical",className:"w-full h-full flex flex-row gap-6",children:[(0,b.jsx)(v.TabsList,{className:"sticky top-0 flex-shrink-0 w-48 h-fit flex-col items-stretch justify-start p-1.5 bg-muted/50 rounded-lg gap-1 self-start",children:w.map(a=>(0,b.jsx)(v.TabsTrigger,{value:a.id,className:"justify-start px-4 py-2.5 rounded-md text-left data-[state=active]:bg-background data-[state=active]:shadow-sm transition-all",children:a.label},a.id))}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto",children:w.map(a=>(0,b.jsx)(v.TabsContent,{value:a.id,className:"mt-0",children:(0,b.jsx)(a.component,{})},a.id))})]})})]})}a.s(["default",()=>x],124422)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_admin_settings_page_tsx_271a5004._.js.map