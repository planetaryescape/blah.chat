module.exports=[94596,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(234705),f=a.i(366705);let g=(0,f.default)("file-headphone",[["path",{d:"M4 6.835V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.706.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2h-.343",key:"1vfytu"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M2 19a2 2 0 0 1 4 0v1a2 2 0 0 1-4 0v-4a6 6 0 0 1 12 0v4a2 2 0 0 1-4 0v-1a2 2 0 0 1 4 0",key:"1etmh7"}]]);var h=a.i(116245),i=a.i(452549),j=a.i(901555);let k=(0,f.default)("wand-sparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);var l=a.i(537500),m=a.i(753884),n=a.i(968177),o=a.i(539524),p=a.i(592552),q=a.i(468106),r=a.i(928503),s=a.i(547885),t=a.i(197463);function u({tasks:a,onConfirm:c,onCancel:d}){let[e,f]=(0,l.useState)(a),[g,h]=(0,l.useState)(new Set(a.map((a,b)=>b))),i=(a,b)=>{let c=[...e];c[a]={...c[a],...b},f(c)};return(0,b.jsxs)("div",{className:"flex flex-col h-full space-y-6",children:[(0,b.jsxs)("div",{className:"shrink-0 flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Review Extracted Tasks"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[a.length," tasks found Â· ",g.size," selected"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(o.Button,{onClick:d,variant:"outline",children:"Cancel"}),(0,b.jsxs)(o.Button,{onClick:()=>{c(e.filter((a,b)=>g.has(b)))},disabled:0===g.size,children:["Confirm ",g.size," Tasks"]})]})]}),(0,b.jsx)("div",{className:"flex-1 min-h-0 overflow-y-auto space-y-4 pr-2",children:e.map((a,c)=>{var d;return(0,b.jsx)(p.Card,{className:"p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)(q.Checkbox,{checked:g.has(c),onCheckedChange:()=>{let a;(a=new Set(g)).has(c)?a.delete(c):a.add(c),h(a)},className:"mt-1"}),(0,b.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,b.jsx)(r.Input,{value:a.title,onChange:a=>i(c,{title:a.target.value}),className:"font-medium",placeholder:"Task title"}),a.description&&(0,b.jsx)(t.Textarea,{value:a.description,onChange:a=>i(c,{description:a.target.value}),rows:2,placeholder:"Description"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.sourceContext?.confidence!==void 0&&(0,b.jsxs)(n.Badge,{variant:"outline",className:"gap-1",children:[(0,b.jsx)("div",{className:`h-2 w-2 rounded-full ${(d=a.sourceContext.confidence)>=.8?"bg-green-500":d>=.6?"bg-yellow-500":"bg-orange-500"}`}),Math.round(100*a.sourceContext.confidence),"% confident"]}),a.urgency&&(0,b.jsxs)(s.Select,{value:a.urgency,onValueChange:a=>i(c,{urgency:a}),children:[(0,b.jsx)(s.SelectTrigger,{className:"h-6 w-auto border-0 px-2",children:(0,b.jsx)(s.SelectValue,{})}),(0,b.jsxs)(s.SelectContent,{children:[(0,b.jsx)(s.SelectItem,{value:"low",children:"Low priority"}),(0,b.jsx)(s.SelectItem,{value:"medium",children:"Medium priority"}),(0,b.jsx)(s.SelectItem,{value:"high",children:"High priority"}),(0,b.jsx)(s.SelectItem,{value:"urgent",children:"Urgent"})]})]}),a.deadlineSource&&(0,b.jsxs)(n.Badge,{variant:"outline",children:["ðŸ“… ",a.deadlineSource,a.deadline&&(0,b.jsxs)("span",{className:"ml-1 text-xs text-muted-foreground",children:["(",new Date(a.deadline).toLocaleDateString(),")"]})]})]}),a.sourceContext?.snippet&&(0,b.jsxs)("details",{className:"text-sm",children:[(0,b.jsx)("summary",{className:"cursor-pointer text-muted-foreground hover:text-foreground",children:"Show context"}),(0,b.jsxs)("p",{className:"mt-2 rounded bg-muted p-2 italic",children:['"',a.sourceContext.snippet,'"']})]})]})]})},c)})})]})}var v=a.i(276670),w=a.i(183104);function x(){let[a,f]=(0,l.useState)("idle"),[n,q]=(0,l.useState)(null),[r,s]=(0,l.useState)(""),[x,y]=(0,l.useState)([]),[z,A]=(0,l.useState)(""),B=(0,d.useAction)(c.api.transcription.transcribeAudio),C=(0,d.useAction)(c.api.ai.taskExtraction.extractTasksFromTranscript),D=(0,d.useMutation)(c.api.tasks.create),E=(0,d.useMutation)(c.api.files.generateUploadUrl),F=async()=>{if(!n)return;let a=n.size/1048576;if(a>24)return void m.toast.error(`Audio file too large (${a.toFixed(1)}MB). Maximum is 24MB. Try compressing the file.`);a>15&&m.toast.info(`Large file (${a.toFixed(1)}MB) - may take up to 90 seconds`),console.log("[Audio Upload] Starting upload, file:",n.name,n.size,"bytes"),f("transcribing"),A("");try{let a;console.log("[Audio Upload] Getting upload URL...");let b=await E();console.log("[Audio Upload] Uploading to storage...");let c=await fetch(b,{method:"POST",headers:{"Content-Type":n.type},body:n});if(!c.ok)throw console.error("[Audio Upload] Storage upload failed:",c.status,c.statusText),Error("Failed to upload audio file to storage");let{storageId:d}=await c.json();console.log("[Audio Upload] Uploaded to storage:",d);let e=new Promise((b,c)=>{a=setTimeout(()=>{console.error("[Audio Upload] Client timeout reached (95s)"),c(Error("TIMEOUT"))},95e3),console.log("[Audio Upload] Timeout timer started, ID:",a)});console.log("[Audio Upload] Starting transcription with 95s timeout...");let g=B({storageId:d,mimeType:n.type}).then(b=>(console.log("[Audio Upload] Transcription promise resolved:",b),clearTimeout(a),b)).catch(b=>{throw console.error("[Audio Upload] Transcription promise rejected:",b),clearTimeout(a),b});console.log("[Audio Upload] Waiting for transcription...");let h=await Promise.race([g,e]);console.log("[Audio Upload] Transcription complete, result:",h),s(h),f("extracting"),console.log("[Audio Upload] Extracting tasks from transcript...");let i=await C({transcript:h});console.log("[Audio Upload] Extracted tasks:",i),y(i),f("reviewing")}catch(b){console.error("[Audio Upload] Error caught:",b),console.error("[Audio Upload] Error type:",typeof b),console.error("[Audio Upload] Error name:",b?.name),console.error("[Audio Upload] Error message:",b?.message),console.error("[Audio Upload] Error stack:",b?.stack);let a=b?.message||String(b);"TIMEOUT"===a?(console.error("[Audio Upload] Handling timeout error"),A("Transcription timed out after 90 seconds"),m.toast.error("Timeout. Try a shorter clip or compress the file.")):a.includes("too large")?(console.error("[Audio Upload] Handling file too large error"),A(a),m.toast.error(a)):(console.error("[Audio Upload] Handling generic error:",a),A(a||"Processing failed"),m.toast.error(a||"Processing failed")),f("error")}},G=async()=>{if(r.trim()){f("extracting"),A("");try{let a=await C({transcript:r.trim()});y(a),f("reviewing")}catch(a){A(a.message||"Extraction failed"),f("error"),m.toast.error(a.message||"Extraction failed")}}},H=async a=>{try{await Promise.all(a.map(a=>D({title:a.title,description:a.description,deadline:a.deadline,deadlineSource:a.deadlineSource,urgency:a.urgency,sourceType:a.sourceType,sourceId:a.sourceId,sourceContext:a.sourceContext}))),f("confirmed"),m.toast.success(`${a.length} tasks created`),setTimeout(()=>{f("idle"),q(null),s(""),y([])},2e3)}catch(a){A(a.message),f("error"),m.toast.error("Failed to save tasks")}};return(0,b.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-none z-50 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-4",children:(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Smart Assistant"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Extract action items from audio, video, or text"})]})})}),(0,b.jsx)(v.ScrollArea,{className:"flex-1 w-full",children:(0,b.jsx)("div",{className:"container mx-auto max-w-4xl px-4 py-8",children:(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:["idle"===a&&(0,b.jsx)("div",{className:"space-y-6",children:(0,b.jsxs)(w.Tabs,{defaultValue:"audio",className:"w-full",children:[(0,b.jsxs)(w.TabsList,{className:"grid w-full grid-cols-2 h-12 p-1 bg-muted/30 border border-border/40 rounded-xl mb-6",children:[(0,b.jsxs)(w.TabsTrigger,{value:"audio",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[(0,b.jsx)(g,{className:"mr-2 h-4 w-4"}),"Audio"]}),(0,b.jsxs)(w.TabsTrigger,{value:"text",className:"rounded-lg data-[state=active]:bg-background data-[state=active]:shadow-sm",children:[(0,b.jsx)(h.FileText,{className:"mr-2 h-4 w-4"}),"Text"]})]}),(0,b.jsx)(w.TabsContent,{value:"audio",className:"mt-0",children:(0,b.jsx)(p.Card,{className:"border-2 border-dashed border-border/60 bg-muted/5 hover:bg-muted/10 transition-colors",children:(0,b.jsxs)("div",{className:"p-8 flex flex-col items-center justify-center text-center space-y-4",children:[(0,b.jsx)("div",{className:"bg-background p-4 rounded-full shadow-sm border border-border/20",children:(0,b.jsx)(j.Upload,{className:"h-8 w-8 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:"Upload Audio Recording"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:"Drag and drop or click to select a meeting recording to extract tasks from"})]}),(0,b.jsx)("input",{type:"file",accept:"audio/*",onChange:a=>q(a.target.files?.[0]||null),className:"hidden",id:"audio-upload"}),(0,b.jsx)("label",{htmlFor:"audio-upload",className:"w-full max-w-xs",children:(0,b.jsx)("div",{className:"flex items-center justify-center gap-2 cursor-pointer w-full h-10 px-4 py-2 bg-primary text-primary-foreground hover:bg-primary/90 inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",children:"Choose File"})}),n&&(0,b.jsxs)("div",{className:"mt-4 w-full p-3 bg-background rounded-lg border border-border/40 flex items-center justify-between text-sm animate-in fade-in slide-in-from-bottom-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"font-medium text-foreground",children:n.name})]}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:[(n.size/1024/1024).toFixed(2)," MB"]})]}),(0,b.jsxs)(o.Button,{onClick:F,disabled:!n,className:"w-full max-w-xs mt-4",size:"lg",children:["Process Recording",(0,b.jsx)(e.ArrowRight,{className:"w-4 h-4 ml-2"})]})]})})}),(0,b.jsx)(w.TabsContent,{value:"text",className:"mt-0",children:(0,b.jsx)(p.Card,{className:"border border-border/60 shadow-sm",children:(0,b.jsxs)("div",{className:"p-4 space-y-4",children:[(0,b.jsx)(t.Textarea,{placeholder:"Paste your meeting transcript here...",value:r,onChange:a=>s(a.target.value),rows:12,className:"resize-none border-border/40 focus:border-primary/50 text-base leading-relaxed"}),(0,b.jsxs)(o.Button,{onClick:G,disabled:!r.trim(),className:"w-full",size:"lg",children:["Extract Tasks",(0,b.jsx)(k,{className:"w-4 h-4 ml-2"})]})]})})})]})}),("transcribing"===a||"analyzing"===a||"extracting"===a)&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-8 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-primary/20 blur-xl rounded-full animate-pulse"}),(0,b.jsx)("div",{className:"relative bg-background p-6 rounded-2xl border border-border/50 shadow-xl",children:(0,b.jsx)(i.Loader2,{className:"h-10 w-10 animate-spin text-primary"})})]}),(0,b.jsxs)("div",{className:"text-center space-y-2",children:[(0,b.jsxs)("h3",{className:"text-xl font-semibold",children:["transcribing"===a&&"Transcribing audio...","analyzing"===a&&"Analyzing video...","extracting"===a&&"Extracting tasks..."]}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["transcribing"===a&&"This may take a minute depending on file size","analyzing"===a&&"Processing video content","extracting"===a&&"Using AI to identify action items"]})]})]}),"reviewing"===a&&(0,b.jsx)("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,b.jsx)(u,{tasks:x,onConfirm:H,onCancel:()=>{f("idle"),y([])}})}),"confirmed"===a&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[400px] space-y-6 animate-in zoom-in-95 duration-300",children:[(0,b.jsx)("div",{className:"h-20 w-20 bg-green-500/10 text-green-500 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)("div",{className:"text-4xl",children:"âœ“"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold",children:"Tasks Created!"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Redirecting back..."})]}),"error"===a&&(0,b.jsx)(p.Card,{className:"border-destructive/50 bg-destructive/5 p-8 text-center max-w-md mx-auto mt-12",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Processing Failed"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:z}),(0,b.jsx)(o.Button,{onClick:()=>f("idle"),variant:"outline",className:"border-destructive/30 hover:bg-destructive/10",children:"Try Again"})]})})]})})})]})}a.s(["default",()=>x],94596)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_assistant_page_tsx_f4942383._.js.map