module.exports=[342512,a=>{"use strict";var b=a.i(367146);a.i(16243);var c=a.i(182234),d=a.i(127718),e=a.i(657882),f=a.i(372817),g=a.i(286028),h=a.i(537500),i=a.i(753884),j=a.i(585291),k=a.i(971310),l=a.i(502311),m=a.i(968177),n=a.i(539524),o=a.i(592552),p=a.i(130487);function q({bookmark:a}){let d=(0,l.useRouter)(),e=(0,c.useMutation)(p.api.bookmarks.remove),f=async b=>{b.stopPropagation();try{await e({bookmarkId:a._id}),i.toast.success("Bookmark removed")}catch(a){i.toast.error("Failed to remove bookmark")}};if(!a.message||!a.conversation)return null;let g=a.message.content.length>150?`${a.message.content.slice(0,150)}...`:a.message.content;return(0,b.jsxs)(o.Card,{className:"group relative overflow-hidden hover:bg-muted/30 shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>{a.conversation&&d.push(`/chat/${a.conversationId}?messageId=${a.messageId}`)},children:[(0,b.jsx)(o.CardHeader,{className:"p-4 pb-2 space-y-0",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0 pr-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1.5 text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium text-primary/80 bg-primary/5 px-1.5 py-0.5 rounded",children:a.conversation.title}),(0,b.jsx)("span",{children:"â€¢"}),(0,b.jsx)("span",{children:(0,j.format)(a.createdAt,"MMM d")})]}),(0,b.jsx)("div",{className:"text-sm text-foreground/90 line-clamp-3 leading-relaxed",children:g})]}),(0,b.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex flex-col gap-1 -mr-2 -mt-2",children:(0,b.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-destructive",onClick:f,title:"Delete bookmark",children:(0,b.jsx)(k.Trash2,{className:"h-3.5 w-3.5"})})})]})}),(0,b.jsxs)(o.CardContent,{className:"p-4 pt-2",children:[a.note&&(0,b.jsxs)("div",{className:"mt-2 text-xs bg-muted/40 p-2 rounded border border-border/40 text-muted-foreground italic",children:['"',a.note,'"']}),a.tags&&a.tags.length>0&&(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5 mt-3 pt-3 border-t border-border/30",children:a.tags.map(a=>(0,b.jsx)(m.Badge,{variant:"secondary",className:"text-[10px] px-1.5 py-0 h-5 bg-muted/50 text-muted-foreground border-border/30",children:a},a))})]})]})}var r=a.i(502210),s=a.i(175311),t=a.i(509423),u=a.i(315638),v=a.i(359275),w=a.i(876402),x=a.i(687336),y=a.i(300722),z=a.i(851943),A=a.i(723979),B=a.i(948217);function C({bookmarks:a,onRemove:c}){let d=(0,l.useRouter)(),[e,f]=(0,h.useState)([]),[g,i]=(0,h.useState)({pageIndex:0,pageSize:10}),j=[{accessorKey:"conversation.title",header:({column:a})=>(0,b.jsxs)(n.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 hover:bg-transparent",children:["Conversation",(0,b.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col min-w-[200px]",children:[(0,b.jsxs)(z.default,{href:`/chat/${a.original.conversationId}?messageId=${a.original.messageId}`,className:"font-medium hover:underline flex items-center gap-2 text-foreground",children:[(0,b.jsx)(x.MessageSquare,{className:"h-4 w-4 text-muted-foreground"}),a.original.conversation?.title||"Untitled Conversation"]}),a.original.note&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground/70 truncate max-w-[300px] mt-0.5 ml-6 italic",children:['"',a.original.note,'"']})]})},{id:"message",header:"Message",cell:({row:a})=>{let c=a.original.message?.content||"",d=c.length>80?`${c.slice(0,80)}...`:c;return(0,b.jsx)("span",{className:"text-sm text-muted-foreground line-clamp-1",title:c,children:d})}},{accessorKey:"tags",header:"Tags",cell:({row:a})=>{let c=a.original.tags||[];return 0===c.length?(0,b.jsx)("span",{className:"text-muted-foreground text-xs",children:"-"}):(0,b.jsxs)("div",{className:"flex flex-wrap gap-1",children:[c.slice(0,2).map(a=>(0,b.jsx)(m.Badge,{variant:"secondary",className:"text-[10px] px-1.5 py-0 h-5 bg-muted/50 text-muted-foreground border-border/30",children:a},a)),c.length>2&&(0,b.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:["+",c.length-2]})]})}},{accessorKey:"createdAt",header:({column:a})=>(0,b.jsxs)(n.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent",children:["Saved At",(0,b.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,b.jsx)(v.Calendar,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:(0,t.formatDistanceToNow)(a.original.createdAt,{addSuffix:!0})})]})},{id:"actions",cell:({row:a})=>{let e=a.original;return(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(A.DropdownMenu,{children:[(0,b.jsx)(A.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(n.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(y.MoreVertical,{className:"h-4 w-4"})]})}),(0,b.jsxs)(A.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(A.DropdownMenuItem,{onClick:()=>{d.push(`/chat/${e.conversationId}?messageId=${e.messageId}`)},children:[(0,b.jsx)(w.ExternalLink,{className:"mr-2 h-4 w-4"}),"Go to Message"]}),(0,b.jsxs)(A.DropdownMenuItem,{onClick:()=>c(e._id),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(k.Trash2,{className:"mr-2 h-4 w-4"}),"Remove Bookmark"]})]})]})})}}],o=(0,r.useReactTable)({data:a,columns:j,onSortingChange:f,onPaginationChange:i,getCoreRowModel:(0,s.getCoreRowModel)(),getPaginationRowModel:(0,s.getPaginationRowModel)(),getSortedRowModel:(0,s.getSortedRowModel)(),state:{sorting:e,pagination:g}});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-md border border-border/40 overflow-hidden bg-background/50",children:(0,b.jsxs)(B.Table,{children:[(0,b.jsx)(B.TableHeader,{className:"bg-muted/5",children:o.getHeaderGroups().map(a=>(0,b.jsx)(B.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)(B.TableHead,{children:a.isPlaceholder?null:(0,r.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(B.TableBody,{children:o.getRowModel().rows?.length?o.getRowModel().rows.map(a=>(0,b.jsx)(B.TableRow,{"data-state":a.getIsSelected()&&"selected",className:"hover:bg-muted/30 transition-colors",children:a.getVisibleCells().map(a=>(0,b.jsx)(B.TableCell,{children:(0,r.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)(B.TableRow,{children:(0,b.jsx)(B.TableCell,{colSpan:j.length,className:"h-24 text-center",children:"No bookmarks found."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Page ",o.getState().pagination.pageIndex+1," of"," ",o.getPageCount()]}),(0,b.jsxs)("div",{className:"space-x-2",children:[(0,b.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>o.previousPage(),disabled:!o.getCanPreviousPage(),className:"h-8 w-8 p-0",children:"<"}),(0,b.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>o.nextPage(),disabled:!o.getCanNextPage(),className:"h-8 w-8 p-0",children:">"})]})]})]})}var D=a.i(206568),E=a.i(229606),F=a.i(928503),G=a.i(276670),H=a.i(375523);function I(){let{showBookmarks:a,isLoading:j}=(0,H.useFeatureToggles)();if(j)return(0,b.jsx)(E.FeatureLoadingScreen,{});if(!a)return(0,b.jsx)(D.DisabledFeaturePage,{featureName:"Bookmarks",settingKey:"showBookmarks"});let k=(0,c.useQuery)(p.api.bookmarks.list),l=(0,c.useMutation)(p.api.bookmarks.remove),[m,o]=(0,h.useState)(""),[r,s]=(0,h.useState)("grid"),t=(0,h.useMemo)(()=>{if(!k)return[];if(!m)return k;let a=m.toLowerCase();return k.filter(b=>{let c=b.message?.content.toLowerCase()||"",d=b.conversation?.title.toLowerCase()||"",e=b.note?.toLowerCase()||"",f=b.tags?.join(" ").toLowerCase()||"";return c.includes(a)||d.includes(a)||e.includes(a)||f.includes(a)})},[k,m]),u=async a=>{try{await l({bookmarkId:a}),i.toast.success("Bookmark removed")}catch(a){i.toast.error("Failed to remove bookmark")}};return void 0===k?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),(0,b.jsx)("p",{className:"text-muted-foreground animate-pulse",children:"Loading bookmarks..."})]})}):(0,b.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-none z-50 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Bookmarks"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Saved messages and conversations"})]}),(0,b.jsxs)("div",{className:"flex gap-3 items-center w-full md:w-auto",children:[(0,b.jsxs)("div",{className:"flex items-center p-1 bg-muted/50 rounded-lg border border-border/40",children:[(0,b.jsx)(n.Button,{variant:"grid"===r?"secondary":"ghost",size:"icon",className:"h-7 w-7 rounded-md",onClick:()=>s("grid"),title:"Grid View",children:(0,b.jsx)(e.LayoutGrid,{className:"h-4 w-4"})}),(0,b.jsx)(n.Button,{variant:"table"===r?"secondary":"ghost",size:"icon",className:"h-7 w-7 rounded-md",onClick:()=>s("table"),title:"Table View",children:(0,b.jsx)(f.List,{className:"h-4 w-4"})})]}),(0,b.jsxs)("div",{className:"relative w-full md:w-64 group",children:[(0,b.jsx)(g.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-3.5 w-3.5 text-muted-foreground/70 group-focus-within:text-primary transition-colors"}),(0,b.jsx)(F.Input,{placeholder:"Search bookmarks...",value:m,onChange:a=>o(a.target.value),className:"pl-9 h-9 bg-muted/40 border-border/40 focus:bg-background focus:border-primary/30 transition-all text-sm"})]})]})]})})}),(0,b.jsx)(G.ScrollArea,{className:"flex-1 w-full min-h-0",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-8",children:0===t.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 text-center space-y-4",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-muted/30 flex items-center justify-center",children:(0,b.jsx)(d.Bookmark,{className:"h-8 w-8 text-muted-foreground/40"})}),(0,b.jsxs)("div",{className:"space-y-1 max-w-md mx-auto",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:m?"No matching bookmarks":"No bookmarks yet"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:m?"Try adjusting your search query.":"Bookmark messages to find them here."})]})]}):"grid"===r?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:t.map(a=>(0,b.jsx)(q,{bookmark:a},a._id))}):(0,b.jsx)(C,{bookmarks:t,onRemove:u})})})]})}function J(){return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-primary border-t-transparent"}),(0,b.jsx)("p",{className:"text-muted-foreground animate-pulse",children:"Loading bookmarks..."})]})})}function K(){return(0,b.jsx)(h.Suspense,{fallback:(0,b.jsx)(J,{}),children:(0,b.jsx)(I,{})})}a.s(["default",()=>K,"dynamic",0,"force-dynamic"],342512)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_bookmarks_page_tsx_72e78516._.js.map