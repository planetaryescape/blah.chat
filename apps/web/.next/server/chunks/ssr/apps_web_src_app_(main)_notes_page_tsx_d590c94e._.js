module.exports=[600479,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(215179),f=a.i(689024),g=a.i(537500),h=a.i(753884),i=a.i(247028),j=a.i(206568),k=a.i(229606),l=a.i(529395),m=a.i(116245),n=a.i(366705);let o=(0,n.default)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var p=a.i(286028),q=a.i(651386),r=a.i(539524);function s({variant:a="no-selection",onCreateNote:c}){return"no-notes"===a?(0,b.jsx)(l.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"flex h-full items-center justify-center p-8",children:(0,b.jsxs)("div",{className:"max-w-md text-center space-y-6",children:[(0,b.jsxs)("div",{className:"relative mx-auto h-24 w-24",children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary/10 animate-pulse-subtle"}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)(q.Sparkles,{className:"h-10 w-10 text-primary"})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-2xl font-semibold tracking-tight",children:"Start Your Collection"}),(0,b.jsx)("p",{className:"text-muted-foreground text-balance",children:"Capture ideas, save important snippets, or start writing your next masterpiece."})]}),c&&(0,b.jsxs)(r.Button,{onClick:c,size:"lg",className:"rounded-full px-8 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all duration-300",children:[(0,b.jsx)(o,{className:"mr-2 h-4 w-4"}),"Create First Note"]})]})}):"no-results"===a?(0,b.jsx)(l.motion.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex h-full items-center justify-center p-8",children:(0,b.jsxs)("div",{className:"text-center max-w-sm space-y-4",children:[(0,b.jsx)("div",{className:"mx-auto h-16 w-16 flex items-center justify-center rounded-2xl bg-muted/50",children:(0,b.jsx)(p.Search,{className:"h-8 w-8 text-muted-foreground/50"})}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("p",{className:"font-medium text-foreground",children:"No notes found"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Try adjusting your search terms"})]})]})}):(0,b.jsx)("div",{className:"flex h-full flex-col items-center justify-center p-8 text-center bg-muted/5",children:(0,b.jsxs)(l.motion.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},className:"max-w-md space-y-8",children:[(0,b.jsxs)("div",{className:"relative mx-auto",children:[(0,b.jsx)("div",{className:"absolute -inset-4 rounded-full bg-gradient-to-tr from-primary/10 to-accent/10 blur-xl opacity-50"}),(0,b.jsx)("div",{className:"relative h-24 w-24 mx-auto bg-background rounded-3xl shadow-xl flex items-center justify-center border border-border/50 rotate-3 transition-transform hover:rotate-6 duration-500",children:(0,b.jsx)(m.FileText,{className:"h-10 w-10 text-primary/80"})}),(0,b.jsx)("div",{className:"absolute -right-2 -bottom-2 h-12 w-12 bg-background rounded-2xl shadow-lg flex items-center justify-center border border-border/50 -rotate-6 transition-transform hover:-rotate-12 duration-500",children:(0,b.jsx)(o,{className:"h-5 w-5 text-accent"})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h2",{className:"text-3xl font-display font-bold tracking-tight bg-gradient-to-br from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Select a note to view"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg text-balance leading-relaxed",children:"Choose a note from the sidebar to start editing, or create a new one to capture your thoughts."})]}),(0,b.jsx)("div",{className:"pt-4",children:c?(0,b.jsxs)(r.Button,{onClick:c,size:"lg",variant:"outline",className:"rounded-full px-8 border-primary/20 hover:bg-primary/5 hover:border-primary/40 transition-all duration-300",children:[(0,b.jsx)(o,{className:"mr-2 h-4 w-4"}),"Create New Note"]}):(0,b.jsx)("div",{className:"h-8"})})]})})}var t=a.i(889773),u=a.i(452309);function v({count:a=5}){return(0,b.jsx)("div",{className:"space-y-1 p-2",children:Array.from({length:a}).map((a,c)=>(0,b.jsxs)("div",{className:"p-3 rounded-lg",children:[(0,b.jsx)(u.Skeleton,{className:"h-4 w-3/4 mb-2"}),(0,b.jsx)(u.Skeleton,{className:"h-3 w-full mb-1"}),(0,b.jsx)(u.Skeleton,{className:"h-3 w-2/3 mb-2"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.Skeleton,{className:"h-5 w-12"}),(0,b.jsx)(u.Skeleton,{className:"h-5 w-12"}),(0,b.jsx)("div",{className:"flex-1"}),(0,b.jsx)(u.Skeleton,{className:"h-3 w-16"})]})]},c))})}var w=a.i(158540),x=a.i(570884),y=a.i(625852),z=a.i(547885);function A({value:a,onChange:e,className:f="w-[180px]"}){let g=(0,d.useQuery)(c.api.projects.list);if(!g||0===g.length)return null;let h=null!==a;return(0,b.jsx)("div",{className:"min-w-0",children:(0,b.jsxs)(z.Select,{value:a||"all",onValueChange:a=>{e("all"===a?null:a)},children:[(0,b.jsx)(z.SelectTrigger,{className:`${f} min-w-0 px-2.5 transition-all duration-200 ${h?"border-primary bg-primary/5 text-primary shadow-sm ring-1 ring-primary/20":""}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,b.jsx)(y.FolderOpen,{className:`w-4 h-4 shrink-0 transition-colors ${h?"text-primary":"text-muted-foreground"}`}),(0,b.jsx)("div",{className:"truncate min-w-0",children:(0,b.jsx)(z.SelectValue,{placeholder:"All Projects"})})]})}),(0,b.jsxs)(z.SelectContent,{children:[(0,b.jsx)(z.SelectItem,{value:"all",children:"All Projects"}),g.map(a=>(0,b.jsx)(z.SelectItem,{value:a._id,children:(0,b.jsx)("span",{className:"truncate",title:a.name,children:a.name})},a._id))]})]})})}var B=a.i(928503),C=a.i(820658),D=a.i(477430),E=a.i(700760),F=a.i(118747),G=a.i(351244);let H=(0,n.default)("hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);var I=a.i(372817);let J=(0,n.default)("network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);var K=a.i(23944),L=a.i(358176);function M({tree:a,selectedTags:c,onToggleTag:d}){return(0,b.jsx)("div",{className:"space-y-0.5",children:a.map(a=>(0,b.jsx)(N,{node:a,selectedTags:c,onToggleTag:d},a.tag))})}function N({node:a,selectedTags:c,onToggleTag:d}){let[e,f]=(0,g.useState)(!0),h=a.children.length>0,i=c.includes(a.tag),j=a=>!!c.includes(a.tag)||a.children.some(j),k=!i&&j(a);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:(0,E.cn)("flex items-center gap-1.5 py-1.5 px-2 rounded-md cursor-pointer hover:bg-muted/50 transition-colors",i&&"bg-primary/10 hover:bg-primary/15"),onClick:()=>d(a.tag),children:[h?(0,b.jsx)("button",{onClick:a=>{a.stopPropagation(),f(!e)},className:"shrink-0 hover:bg-muted/80 rounded p-0.5 transition-colors",children:e?(0,b.jsx)(G.ChevronDown,{className:"h-3 w-3"}):(0,b.jsx)(L.ChevronRight,{className:"h-3 w-3"})}):(0,b.jsx)("div",{className:"w-4 shrink-0"}),(0,b.jsx)("div",{className:(0,E.cn)("flex h-4 w-4 shrink-0 items-center justify-center rounded-sm border transition-colors",i?"bg-primary text-primary-foreground border-primary":k?"bg-muted border-primary":"opacity-50 border-input"),children:i?(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})}):k?(0,b.jsx)("div",{className:"h-1.5 w-1.5 rounded-sm bg-primary"}):null}),(0,b.jsx)("span",{className:"flex-1 text-sm truncate",children:a.label}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground font-mono tabular-nums",children:a.count})]}),h&&e&&(0,b.jsx)("div",{className:"ml-5",children:a.children.map(a=>(0,b.jsx)(N,{node:a,selectedTags:c,onToggleTag:d},a.tag))})]})}var O=a.i(968177),P=a.i(371135),Q=a.i(165004),R=a.i(276670),S=a.i(59497);function T({selectedTags:a,onTagsChange:e,tagFilterMode:f,onTagFilterModeChange:h}){let[i,j]=(0,g.useState)(!1),[k,l]=(0,g.useState)("tree"),m=(0,d.useQuery)(c.api.tags.queries.getTagStats)||[],n=(0,S.buildTagTree)(m),o=b=>{a.includes(b)?e(a.filter(a=>a!==b)):e([...a,b])};return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(Q.Popover,{open:i,onOpenChange:j,children:[(0,b.jsx)(Q.PopoverTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",className:"w-full justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(H,{className:"h-3 w-3"}),(0,b.jsx)("span",{className:"text-xs",children:0===m.length?"No tags":0===a.length?`All tags (${m.length})`:`${a.length} selected`})]}),(0,b.jsx)(G.ChevronDown,{className:"h-3 w-3 opacity-50"})]})}),(0,b.jsx)(Q.PopoverContent,{className:"w-[280px] p-0",align:"start",children:(0,b.jsxs)(P.Command,{children:[(0,b.jsxs)("div",{className:"flex items-center border-b px-2",children:[(0,b.jsx)(P.CommandInput,{placeholder:"Search tags...",className:"h-9 border-0 focus:ring-0"}),(0,b.jsxs)("div",{className:"flex gap-0.5",children:[(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>l("tree"),className:(0,E.cn)("h-7 w-7 p-0","tree"===k&&"bg-muted"),title:"Tree view",children:(0,b.jsx)(J,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>l("flat"),className:(0,E.cn)("h-7 w-7 p-0","flat"===k&&"bg-muted"),title:"Flat view",children:(0,b.jsx)(I.List,{className:"h-3.5 w-3.5"})})]})]}),(0,b.jsxs)(P.CommandList,{children:[(0,b.jsx)(P.CommandEmpty,{children:"No tags found."}),(0,b.jsx)(P.CommandGroup,{children:(0,b.jsx)(R.ScrollArea,{className:"h-[200px]",children:"tree"===k?(0,b.jsx)("div",{className:"p-1",children:(0,b.jsx)(M,{tree:n,selectedTags:a,onToggleTag:o})}):m.map(({tag:c,count:d})=>(0,b.jsxs)(P.CommandItem,{onSelect:()=>o(c),className:"cursor-pointer",children:[(0,b.jsx)("div",{className:(0,E.cn)("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border",a.includes(c)?"bg-primary text-primary-foreground border-primary":"opacity-50 [&_svg]:invisible"),children:(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"h-3 w-3",children:(0,b.jsx)("polyline",{points:"20 6 9 17 4 12"})})}),(0,b.jsx)("span",{className:"flex-1 text-sm",children:c}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground font-mono",children:d})]},c))})})]})]})})]}),a.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(C.Separator,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Active filters:"}),(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{e([])},className:"h-auto py-1 px-2 text-xs",children:"Clear all"})]}),(0,b.jsx)("div",{className:"flex flex-wrap gap-1.5",children:a.map(a=>(0,b.jsxs)(O.Badge,{variant:"secondary",className:"text-xs px-2 py-0.5 cursor-pointer hover:bg-secondary/80",onClick:()=>o(a),title:a,children:[(0,S.getTagLabel)(a),(0,b.jsx)(K.X,{className:"ml-1 h-3 w-3"})]},a))}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Match:"}),(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(r.Button,{variant:"AND"===f?"default":"outline",size:"sm",onClick:()=>h("AND"),className:"h-6 px-2 text-xs",children:"All"}),(0,b.jsx)(r.Button,{variant:"OR"===f?"default":"outline",size:"sm",onClick:()=>h("OR"),className:"h-6 px-2 text-xs",children:"Any"})]})]})]})]})}function U({filterPinned:a,onTogglePinned:c,selectedTags:d,onTagsChange:e,tagFilterMode:f,onTagFilterModeChange:g}){return(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)(r.Button,{variant:a?"default":"outline",size:"sm",onClick:c,className:"w-full cursor-pointer",children:[(0,b.jsx)(F.Pin,{className:"h-3 w-3 mr-1"}),"Pinned Only"]}),(0,b.jsx)(T,{selectedTags:d,onTagsChange:e,tagFilterMode:f,onTagFilterModeChange:g})]})}var V=a.i(168626),W=a.i(234705),X=a.i(175212),Y=a.i(921690),Z=a.i(227759),$=a.i(658547);function _(){let[a,e]=(0,g.useState)(!1),[f,i]=(0,g.useState)(!1),[j,k]=(0,g.useState)(!1),[l,m]=(0,g.useState)(null),[n,o]=(0,g.useState)(""),[p,q]=(0,g.useState)([]),[s,t]=(0,g.useState)(""),u=(0,d.useQuery)(c.api.tags.queries.getTagStats)||[],v=(0,d.useQuery)(c.api.tags.queries.getTagCooccurrence)||[],w=(0,d.useMutation)(c.api.notes.renameTag),y=(0,d.useMutation)(c.api.notes.mergeTags),z=async()=>{if(!l||!n.trim())return void h.toast.error("Please enter a new tag name");try{let a=await w({oldTag:l,newTag:n.trim().toLowerCase()});h.toast.success(`Renamed tag in ${a.updated} notes`),i(!1),m(null),o("")}catch(a){console.error("Failed to rename tag:",a),h.toast.error(a instanceof Error?a.message:"Failed to rename tag")}},A=async()=>{if(0===p.length||!s.trim())return void h.toast.error("Select tags to merge and enter a target tag");try{let a=await y({sourceTags:p,targetTag:s.trim().toLowerCase()});h.toast.success(`Merged tags in ${a.updated} notes`),k(!1),q([]),t("")}catch(a){console.error("Failed to merge tags:",a),h.toast.error(a instanceof Error?a.message:"Failed to merge tags")}},D=a=>{q(b=>b.includes(a)?b.filter(b=>b!==a):[...b,a])};return(0,b.jsxs)(Z.Dialog,{open:a,onOpenChange:e,children:[(0,b.jsx)(Z.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",className:"gap-2 cursor-pointer",children:[(0,b.jsx)(x.Settings2,{className:"h-3.5 w-3.5"}),"Manage Tags"]})}),(0,b.jsxs)(Z.DialogContent,{className:"max-w-2xl max-h-[80vh]",children:[(0,b.jsxs)(Z.DialogHeader,{children:[(0,b.jsx)(Z.DialogTitle,{children:"Tag Management"}),(0,b.jsx)(Z.DialogDescription,{children:"Rename, merge, or analyze your tags"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>i(!0),className:"gap-2",children:[(0,b.jsx)(Y.Pencil,{className:"h-3.5 w-3.5"}),"Rename Tag"]}),(0,b.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>k(!0),className:"gap-2",children:[(0,b.jsx)(X.GitMerge,{className:"h-3.5 w-3.5"}),"Merge Tags"]})]}),(0,b.jsx)(C.Separator,{}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-semibold mb-2",children:["All Tags (",u.length,")"]}),(0,b.jsx)(R.ScrollArea,{className:"h-[300px] border rounded-md p-3",children:(0,b.jsx)("div",{className:"space-y-2",children:u.map(a=>{var c;let d,e=(c=a.tag,d=v.find(a=>a.tag===c),d?.relatedTags||[]);return(0,b.jsxs)("div",{className:"p-2 rounded-md hover:bg-muted/50 transition-colors",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(O.Badge,{variant:"secondary",title:a.tag,children:(0,S.getTagLabel)(a.tag)}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground font-mono",children:[a.count," ",1===a.count?"note":"notes"]})]}),(0,b.jsx)("div",{className:"flex gap-1",children:(0,b.jsx)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{m(a.tag),o(a.tag),i(!0)},className:"h-6 w-6 p-0",title:"Rename",children:(0,b.jsx)(Y.Pencil,{className:"h-3 w-3"})})})]}),e.length>0&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground mt-1",children:["Often with:"," ",e.slice(0,3).map((a,c)=>(0,b.jsxs)("span",{children:[c>0&&", ",(0,S.getTagLabel)(a.tag)," (",a.count,")"]},a.tag))]})]},a.tag)})})})]})]})]}),(0,b.jsx)(Z.Dialog,{open:f,onOpenChange:i,children:(0,b.jsxs)(Z.DialogContent,{children:[(0,b.jsxs)(Z.DialogHeader,{children:[(0,b.jsx)(Z.DialogTitle,{children:"Rename Tag"}),(0,b.jsx)(Z.DialogDescription,{children:"This will update the tag across all notes"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)($.Label,{children:"Current Tag"}),(0,b.jsx)(B.Input,{value:l||"",disabled:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)($.Label,{children:"New Tag Name"}),(0,b.jsx)(B.Input,{value:n,onChange:a=>o(a.target.value),placeholder:"Enter new tag name",onKeyDown:a=>{"Enter"===a.key&&z()}})]})]}),(0,b.jsxs)(Z.DialogFooter,{children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>i(!1),children:"Cancel"}),(0,b.jsx)(r.Button,{onClick:z,children:"Rename"})]})]})}),(0,b.jsx)(Z.Dialog,{open:j,onOpenChange:k,children:(0,b.jsxs)(Z.DialogContent,{children:[(0,b.jsxs)(Z.DialogHeader,{children:[(0,b.jsx)(Z.DialogTitle,{children:"Merge Tags"}),(0,b.jsx)(Z.DialogDescription,{children:"Combine multiple tags into one"})]}),(0,b.jsxs)("div",{className:"space-y-4 py-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)($.Label,{children:"Select Tags to Merge"}),(0,b.jsx)(R.ScrollArea,{className:"h-[150px] border rounded-md p-2",children:(0,b.jsx)("div",{className:"space-y-1",children:u.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-1 rounded hover:bg-muted/50 cursor-pointer",onClick:()=>D(a.tag),children:[(0,b.jsx)("input",{type:"checkbox",checked:p.includes(a.tag),onChange:()=>D(a.tag),className:"h-4 w-4"}),(0,b.jsx)(O.Badge,{variant:"secondary",className:"text-xs",title:a.tag,children:(0,S.getTagLabel)(a.tag)}),(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["(",a.count,")"]})]},a.tag))})})]}),p.length>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex items-center justify-center",children:(0,b.jsx)(W.ArrowRight,{className:"h-4 w-4 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)($.Label,{children:"Target Tag Name"}),(0,b.jsx)(B.Input,{value:s,onChange:a=>t(a.target.value),placeholder:"Enter target tag name",onKeyDown:a=>{"Enter"===a.key&&A()}}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[p.length," tags will be merged"]})]})]})]}),(0,b.jsxs)(Z.DialogFooter,{children:[(0,b.jsx)(r.Button,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),(0,b.jsx)(r.Button,{onClick:A,disabled:0===p.length||!s.trim(),children:"Merge Tags"})]})]})})]})}function aa({notes:a,selectedNoteId:c,onSelectNote:d,onCreateNote:e,searchParam:f,onSearchChange:g,filterPinned:h,onTogglePinned:i,selectedTags:j,onTagsChange:k,tagFilterMode:l,onTagFilterModeChange:m,projectId:n,onProjectIdChange:o,className:q,showFilters:t=!1,onToggleFilters:y}){return(0,b.jsxs)("div",{className:(0,E.cn)("flex flex-col h-full bg-muted/5 border-r border-border/40",q),children:[(0,b.jsxs)("div",{className:"flex-none p-4 space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between px-1",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold tracking-tight text-foreground/90",children:"Notes"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsxs)(D.Tooltip,{children:[(0,b.jsx)(D.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",onClick:y,children:(0,b.jsx)(x.Settings2,{className:"h-4 w-4"})})}),(0,b.jsx)(D.TooltipContent,{children:"Filters & Options"})]}),(0,b.jsxs)(D.Tooltip,{children:[(0,b.jsx)(D.TooltipTrigger,{asChild:!0,children:(0,b.jsx)(r.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",onClick:e,children:(0,b.jsx)(w.Plus,{className:"h-5 w-5"})})}),(0,b.jsx)(D.TooltipContent,{children:"New Note"})]})]})]}),(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)(p.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground/60 group-focus-within:text-foreground transition-colors"}),(0,b.jsx)(B.Input,{value:f,onChange:a=>g(a.target.value),placeholder:"Search notes...",className:"pl-9 h-9 bg-background/50 border-transparent hover:bg-background/80 hover:border-border/40 focus:bg-background focus:border-primary/20 focus:ring-2 focus:ring-primary/10 transition-all shadow-sm rounded-lg text-sm"})]}),t&&(0,b.jsxs)("div",{className:"space-y-3 pt-2 animate-in slide-in-from-top-2 fade-in duration-200",children:[(0,b.jsx)(A,{value:n,onChange:o,className:"w-full"}),(0,b.jsx)(U,{filterPinned:h,onTogglePinned:i,selectedTags:j,onTagsChange:k,tagFilterMode:l,onTagFilterModeChange:m}),(0,b.jsx)(_,{})]})]}),(0,b.jsx)(C.Separator,{className:"bg-border/40"}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden relative",children:void 0===a?(0,b.jsx)(v,{}):0===a.length?f||h||j.length>0?(0,b.jsx)("div",{className:"p-8",children:(0,b.jsx)(s,{variant:"no-results"})}):(0,b.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center bg-muted/5",children:(0,b.jsx)(s,{variant:"no-notes",onCreateNote:e})}):(0,b.jsx)(V.NoteList,{notes:a,selectedNoteId:c,onSelect:d})}),(0,b.jsx)("div",{className:"flex-none p-2 bg-muted/10 border-t border-border/40 text-[10px] text-muted-foreground text-center font-medium uppercase tracking-wider",children:a?(0,b.jsxs)(b.Fragment,{children:[a.length," ",1===a.length?"Note":"Notes"]}):(0,b.jsx)(u.Skeleton,{className:"h-3 w-12 inline-block"})})]})}var ab=a.i(375523),ac=a.i(63263);function ad(){let{showNotes:a,isLoading:l}=(0,ab.useFeatureToggles)(),[m,n]=(0,f.useQueryState)("pinned",f.parseAsBoolean.withDefault(!1)),[o,p]=(0,f.useQueryState)("tags",(0,f.parseAsArrayOf)(f.parseAsString).withDefault([])),[q,u]=(0,f.useQueryState)("mode",(0,f.parseAsStringEnum)(["AND","OR"]).withDefault("AND")),[v,w]=(0,f.useQueryState)("project",f.parseAsString.withDefault("")),x=(0,g.useMemo)(()=>v||null,[v]),y=(0,g.useCallback)(a=>w(a||""),[w]),[z,A]=(0,f.useQueryState)("q",f.parseAsString.withDefault("")),[B]=(0,i.useDebounceValue)(z,300),[C,D]=(0,f.useQueryState)("note",f.parseAsString.withDefault("")),E=(0,g.useMemo)(()=>C||null,[C]),F=(0,g.useCallback)(a=>{D(a||"")},[D]),[G,H]=(0,g.useState)("list"),[I,J]=(0,g.useState)(!1),{isMobile:K}=(0,ac.useMobileDetect)(),L=(0,d.useQuery)(c.api.notes.searchNotes,{searchQuery:B,filterPinned:m||void 0,filterTags:o.length>0?o:void 0,tagFilterMode:q,...x&&{projectId:x}}),M=(0,d.useMutation)(c.api.notes.createNote),N=(0,g.useMemo)(()=>E&&L?L.find(a=>a._id===E):null,[E,L]);(0,g.useEffect)(()=>{E&&L&&!N&&F(null)},[E,L,N,F]);let O=(0,g.useCallback)(async()=>{try{let a=await M({content:"# New Note\n\nStart writing...",title:"New Note",projectId:x||void 0});F(a),K&&H("editor"),h.toast.success("Note created")}catch(a){console.error("Failed to create note:",a),h.toast.error("Failed to create note")}},[M,x,F,K]);if((0,g.useEffect)(()=>{let a=()=>O(),b=()=>{F(null),K&&H("list")};return window.addEventListener("create-new-note",a),window.addEventListener("clear-note-selection",b),()=>{window.removeEventListener("create-new-note",a),window.removeEventListener("clear-note-selection",b)}},[K,F,O]),l)return(0,b.jsx)(k.FeatureLoadingScreen,{});if(!a)return(0,b.jsx)(j.DisabledFeaturePage,{featureName:"Notes",settingKey:"showNotes"});let P={notes:L,selectedNoteId:E,onSelectNote:a=>{F(a),K&&H("editor")},onCreateNote:O,searchParam:z||"",onSearchChange:A,filterPinned:m||!1,onTogglePinned:()=>n(!m),selectedTags:o||[],onTagsChange:p,tagFilterMode:q||"AND",onTagFilterModeChange:u,projectId:x,onProjectIdChange:y,showFilters:I,onToggleFilters:()=>J(!I)};if(K)if("list"===G)return(0,b.jsx)("div",{className:"flex flex-col h-[100dvh]",children:(0,b.jsx)(aa,{...P,className:"flex-1 w-full border-r-0"})});else return(0,b.jsxs)("div",{className:"flex flex-col h-[100dvh] bg-background",children:[(0,b.jsx)("div",{className:"border-b p-2 flex items-center",children:(0,b.jsxs)(r.Button,{variant:"ghost",size:"sm",onClick:()=>{K&&H("list")},className:"gap-1 text-muted-foreground hover:text-foreground",children:[(0,b.jsx)(e.ChevronLeft,{className:"h-4 w-4"}),"Back"]})}),(0,b.jsx)("div",{className:"flex-1 overflow-hidden",children:N?._id?(0,b.jsx)(t.NoteEditor,{noteId:N._id}):(0,b.jsx)(s,{variant:"no-selection",onCreateNote:O})})]});return(0,b.jsxs)("div",{className:"flex h-screen overflow-hidden bg-background",children:[(0,b.jsx)("div",{className:"w-80 shrink-0 h-full",children:(0,b.jsx)(aa,{...P})}),(0,b.jsx)("main",{className:"flex-1 h-full min-w-0 bg-background/50",children:N?._id?(0,b.jsx)(t.NoteEditor,{noteId:N._id}):(0,b.jsx)("div",{className:"h-full flex flex-col items-center justify-center p-8 text-center text-muted-foreground",children:(0,b.jsx)(s,{variant:"no-selection",onCreateNote:O})})})]})}function ae(){return(0,b.jsx)(g.Suspense,{fallback:(0,b.jsx)(v,{}),children:(0,b.jsx)(ad,{})})}a.s(["default",()=>ae],600479)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_notes_page_tsx_d590c94e._.js.map