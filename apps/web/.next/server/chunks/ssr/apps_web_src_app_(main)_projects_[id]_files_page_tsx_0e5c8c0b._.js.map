{"version":3,"sources":["../../../../../../apps/web/src/components/files/FileChunkCard.tsx","../../../../../../apps/web/src/components/files/FileDetailPanel.tsx","../../../../../../apps/web/src/app/%28main%29/projects/%5Bid%5D/files/page.tsx","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/music.ts"],"sourcesContent":["\"use client\";\n\nimport { ChevronDown, ChevronUp, FileText } from \"lucide-react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\n\ninterface FileChunk {\n  _id: string;\n  chunkIndex: number;\n  content: string;\n  startPage?: number;\n  endPage?: number;\n  section?: string;\n  tokenCount: number;\n}\n\ninterface FileChunkCardProps {\n  chunk: FileChunk;\n  isHighlighted?: boolean;\n}\n\nexport function FileChunkCard({ chunk, isHighlighted }: FileChunkCardProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  const cardRef = useRef<HTMLDivElement>(null);\n\n  // Auto-expand and scroll to highlighted chunk\n  useEffect(() => {\n    if (isHighlighted && cardRef.current) {\n      setIsExpanded(true);\n      // Delay scroll to allow expansion animation\n      setTimeout(() => {\n        cardRef.current?.scrollIntoView({\n          behavior: \"smooth\",\n          block: \"center\",\n        });\n      }, 100);\n    }\n  }, [isHighlighted]);\n\n  const previewLength = 200;\n  const hasMore = chunk.content.length > previewLength;\n  const displayContent = isExpanded\n    ? chunk.content\n    : chunk.content.slice(0, previewLength) + (hasMore ? \"...\" : \"\");\n\n  const pageInfo =\n    chunk.startPage !== undefined\n      ? chunk.startPage === chunk.endPage\n        ? `Page ${chunk.startPage}`\n        : `Pages ${chunk.startPage}-${chunk.endPage}`\n      : null;\n\n  return (\n    <div\n      ref={cardRef}\n      id={`chunk-${chunk._id}`}\n      className={cn(\n        \"border rounded-lg p-3 transition-all duration-300\",\n        isHighlighted\n          ? \"ring-2 ring-primary bg-primary/5 border-primary/50 chunk-highlight\"\n          : \"border-border/50 bg-muted/30 hover:bg-muted/50\",\n      )}\n    >\n      {/* Header */}\n      <div className=\"flex items-center justify-between mb-2\">\n        <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n          <FileText className=\"h-3 w-3\" />\n          <span className=\"font-medium\">Chunk {chunk.chunkIndex + 1}</span>\n          {pageInfo && (\n            <span className=\"bg-muted px-1.5 py-0.5 rounded text-[10px]\">\n              {pageInfo}\n            </span>\n          )}\n          {chunk.section && (\n            <span className=\"text-[10px] truncate max-w-[100px]\">\n              {chunk.section}\n            </span>\n          )}\n        </div>\n        <span className=\"text-[10px] text-muted-foreground\">\n          {chunk.tokenCount} tokens\n        </span>\n      </div>\n\n      {/* Content */}\n      <div\n        className={cn(\n          \"text-sm font-mono bg-background/50 rounded p-2 whitespace-pre-wrap break-words\",\n          !isExpanded && \"line-clamp-4\",\n        )}\n      >\n        {displayContent}\n      </div>\n\n      {/* Expand/Collapse button */}\n      {hasMore && (\n        <button\n          type=\"button\"\n          onClick={() => setIsExpanded(!isExpanded)}\n          className=\"mt-2 text-xs text-primary hover:underline flex items-center gap-1\"\n        >\n          {isExpanded ? (\n            <>\n              <ChevronUp className=\"h-3 w-3\" />\n              Show less\n            </>\n          ) : (\n            <>\n              <ChevronDown className=\"h-3 w-3\" />\n              Show more ({chunk.content.length - previewLength} more chars)\n            </>\n          )}\n        </button>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport {\n  AlertCircle,\n  CheckCircle2,\n  Clock,\n  Download,\n  FileText,\n  Loader2,\n  X,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { FileChunkCard } from \"./FileChunkCard\";\n\ninterface FileDetailPanelProps {\n  fileId: Id<\"files\">;\n  highlightChunkId?: Id<\"fileChunks\"> | null;\n  onClose: () => void;\n}\n\nexport function FileDetailPanel({\n  fileId,\n  highlightChunkId,\n  onClose,\n}: FileDetailPanelProps) {\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const fileData = useQuery(api.files.getFileWithChunks, { fileId });\n\n  if (fileData === undefined) {\n    return (\n      <div className=\"flex-1 flex items-center justify-center\">\n        <Loader2 className=\"h-6 w-6 animate-spin text-muted-foreground\" />\n      </div>\n    );\n  }\n\n  if (fileData === null) {\n    return (\n      <div className=\"flex-1 flex flex-col items-center justify-center gap-2 text-muted-foreground\">\n        <AlertCircle className=\"h-8 w-8\" />\n        <p>File not found</p>\n        <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n          Close\n        </Button>\n      </div>\n    );\n  }\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  };\n\n  const getStatusIcon = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\n      case \"processing\":\n        return <Loader2 className=\"h-4 w-4 animate-spin text-blue-500\" />;\n      case \"failed\":\n        return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n      default:\n        return <Clock className=\"h-4 w-4 text-muted-foreground\" />;\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    switch (status) {\n      case \"completed\":\n        return \"Indexed\";\n      case \"processing\":\n        return \"Processing...\";\n      case \"failed\":\n        return \"Failed\";\n      default:\n        return \"Pending\";\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full border-l bg-background\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b\">\n        <div className=\"flex items-center gap-3 min-w-0\">\n          <FileText className=\"h-5 w-5 text-muted-foreground shrink-0\" />\n          <div className=\"min-w-0\">\n            <h2 className=\"font-medium truncate\">{fileData.name}</h2>\n            <p className=\"text-xs text-muted-foreground\">\n              {formatFileSize(fileData.size)} &bull; {fileData.mimeType}\n            </p>\n          </div>\n        </div>\n        <Button variant=\"ghost\" size=\"icon\" onClick={onClose}>\n          <X className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      {/* Metadata */}\n      <div className=\"p-4 border-b bg-muted/30\">\n        <div className=\"grid grid-cols-2 gap-3 text-sm\">\n          <div>\n            <span className=\"text-muted-foreground text-xs\">Status</span>\n            <div className=\"flex items-center gap-1.5 mt-0.5\">\n              {getStatusIcon(fileData.embeddingStatus || \"pending\")}\n              <span>\n                {getStatusLabel(fileData.embeddingStatus || \"pending\")}\n              </span>\n            </div>\n          </div>\n          <div>\n            <span className=\"text-muted-foreground text-xs\">Chunks</span>\n            <p className=\"mt-0.5\">{fileData.chunks?.length || 0}</p>\n          </div>\n          <div>\n            <span className=\"text-muted-foreground text-xs\">Added</span>\n            <p className=\"mt-0.5\">\n              {new Date(fileData.createdAt).toLocaleDateString()}\n            </p>\n          </div>\n          {fileData.url && (\n            <div>\n              <a\n                href={fileData.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                className=\"inline-flex items-center gap-1 text-primary hover:underline text-xs mt-0.5\"\n              >\n                <Download className=\"h-3 w-3\" />\n                Download\n              </a>\n            </div>\n          )}\n        </div>\n\n        {fileData.embeddingError && (\n          <div className=\"mt-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-xs text-red-500\">\n            {fileData.embeddingError}\n          </div>\n        )}\n      </div>\n\n      {/* Chunks List */}\n      <div className=\"flex-1 min-h-0 overflow-auto\">\n        <div className=\"p-4 space-y-3\">\n          {fileData.chunks && fileData.chunks.length > 0 ? (\n            <>\n              <h3 className=\"text-sm font-medium text-muted-foreground mb-3\">\n                Content Chunks ({fileData.chunks.length})\n              </h3>\n              {fileData.chunks.map((chunk: any) => (\n                <FileChunkCard\n                  key={chunk._id}\n                  chunk={chunk}\n                  isHighlighted={highlightChunkId === chunk._id}\n                />\n              ))}\n            </>\n          ) : (\n            <div className=\"text-center text-muted-foreground py-8\">\n              <FileText className=\"h-8 w-8 mx-auto mb-2 opacity-50\" />\n              <p className=\"text-sm\">No content chunks available</p>\n              <p className=\"text-xs mt-1\">\n                {fileData.embeddingStatus === \"pending\"\n                  ? \"File is waiting to be processed\"\n                  : fileData.embeddingStatus === \"processing\"\n                    ? \"File is being processed...\"\n                    : \"This file type may not support text extraction\"}\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport { format } from \"date-fns\";\nimport {\n  AlertCircle,\n  CheckCircle2,\n  FileText,\n  ImageIcon,\n  Loader2,\n  Music,\n  Plus,\n  Upload,\n} from \"lucide-react\";\nimport Link from \"next/link\";\nimport { parseAsString, useQueryState } from \"nuqs\";\nimport { use, useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { toast } from \"sonner\";\nimport { FileDetailPanel } from \"@/components/files/FileDetailPanel\";\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\n// Embedding status badge component\nfunction EmbeddingStatusBadge({\n  status,\n  chunkCount,\n}: {\n  status?: \"pending\" | \"processing\" | \"completed\" | \"failed\";\n  chunkCount?: number;\n}) {\n  if (!status) {\n    return (\n      <Tooltip>\n        <TooltipTrigger>\n          <span className=\"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-muted text-muted-foreground\">\n            â€”\n          </span>\n        </TooltipTrigger>\n        <TooltipContent>Not processed</TooltipContent>\n      </Tooltip>\n    );\n  }\n\n  switch (status) {\n    case \"pending\":\n      return (\n        <Tooltip>\n          <TooltipTrigger>\n            <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-yellow-500/10 text-yellow-600 dark:text-yellow-400\">\n              <Loader2 className=\"w-2.5 h-2.5\" />\n              Pending\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>Waiting to be processed</TooltipContent>\n        </Tooltip>\n      );\n    case \"processing\":\n      return (\n        <Tooltip>\n          <TooltipTrigger>\n            <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-500/10 text-blue-600 dark:text-blue-400\">\n              <Loader2 className=\"w-2.5 h-2.5 animate-spin\" />\n              Processing\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>\n            Extracting text and generating embeddings\n          </TooltipContent>\n        </Tooltip>\n      );\n    case \"completed\":\n      return (\n        <Tooltip>\n          <TooltipTrigger>\n            <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-green-500/10 text-green-600 dark:text-green-400\">\n              <CheckCircle2 className=\"w-2.5 h-2.5\" />\n              Ready\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>\n            {chunkCount\n              ? `${chunkCount} chunks indexed`\n              : \"Indexed and searchable\"}\n          </TooltipContent>\n        </Tooltip>\n      );\n    case \"failed\":\n      return (\n        <Tooltip>\n          <TooltipTrigger>\n            <span className=\"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-red-500/10 text-red-600 dark:text-red-400\">\n              <AlertCircle className=\"w-2.5 h-2.5\" />\n              Failed\n            </span>\n          </TooltipTrigger>\n          <TooltipContent>\n            Processing failed - file may not be searchable\n          </TooltipContent>\n        </Tooltip>\n      );\n  }\n}\n\nexport default function ProjectFilesPage({\n  params,\n}: {\n  params: Promise<{ id: string }>;\n}) {\n  const { id } = use(params);\n  const projectId = id as Id<\"projects\">;\n\n  // URL-persisted file selection (supports deep linking from search results)\n  const [fileParam, setFileParam] = useQueryState(\n    \"file\",\n    parseAsString.withDefault(\"\"),\n  );\n  const [chunkParam, setChunkParam] = useQueryState(\n    \"chunk\",\n    parseAsString.withDefault(\"\"),\n  );\n\n  // Derive selected IDs from URL params\n  const selectedFileId = useMemo(() => {\n    return fileParam ? (fileParam as Id<\"files\">) : null;\n  }, [fileParam]);\n\n  const highlightChunkId = useMemo(() => {\n    return chunkParam ? (chunkParam as Id<\"fileChunks\">) : null;\n  }, [chunkParam]);\n\n  const setSelectedFileId = useCallback(\n    (id: Id<\"files\"> | null) => {\n      setFileParam(id || \"\");\n      // Clear chunk highlight when changing files\n      if (!id) setChunkParam(\"\");\n    },\n    [setFileParam, setChunkParam],\n  );\n\n  // Data Fetching\n  // @ts-ignore - Type depth exceeded\n  const resources = useQuery(api.projects.getProjectResources, { projectId });\n  // @ts-ignore - Type depth exceeded\n  const attachments = useQuery(api.projects.getProjectAttachments, {\n    projectId,\n    paginationOpts: { numItems: 50, cursor: null },\n  });\n\n  // Mutations\n  // @ts-ignore - Type depth exceeded\n  const generateUploadUrl = useMutation(api.files.generateUploadUrl);\n  // @ts-ignore - Type depth exceeded\n  const saveFile = useMutation(api.files.saveFile);\n  // @ts-ignore - Type depth exceeded\n  const addFileToProject = useMutation(api.projects.addFileToProject);\n  // @ts-ignore - Type depth exceeded\n  const _deleteFile = useMutation(api.files.deleteFile);\n  // @ts-ignore - Type depth exceeded\n  const removeFileFromProject = useMutation(api.projects.removeFileFromProject);\n\n  const [uploading, setUploading] = useState(false);\n  const [fileToDelete, setFileToDelete] = useState<{\n    id: Id<\"files\">;\n    name: string;\n  } | null>(null);\n\n  // File Upload Logic\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      setUploading(true);\n      try {\n        for (const file of acceptedFiles) {\n          const uploadUrl = await generateUploadUrl();\n          const result = await fetch(uploadUrl, {\n            method: \"POST\",\n            headers: { \"Content-Type\": file.type },\n            body: file,\n          });\n          const { storageId } = await result.json();\n\n          const fileId = await saveFile({\n            storageId,\n            name: file.name,\n            mimeType: file.type,\n            size: file.size,\n          });\n\n          await addFileToProject({ projectId, fileId });\n        }\n        toast.success(\"Files uploaded to project context\");\n      } catch (error) {\n        console.error(error);\n        toast.error(\"Failed to upload files\");\n      } finally {\n        setUploading(false);\n      }\n    },\n    [generateUploadUrl, saveFile, addFileToProject, projectId],\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  // Helpers\n  const formatSize = (bytes: number) => {\n    if (bytes === 0) return \"0 B\";\n    const k = 1024;\n    const sizes = [\"B\", \"KB\", \"MB\", \"GB\", \"TB\"];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / k ** i).toFixed(1))} ${sizes[i]}`;\n  };\n\n  const getFileIcon = (mimeType: string) => {\n    if (mimeType.startsWith(\"image/\"))\n      return <ImageIcon className=\"w-4 h-4 text-blue-500\" />;\n    if (mimeType.startsWith(\"audio/\"))\n      return <Music className=\"w-4 h-4 text-purple-500\" />;\n    return <FileText className=\"w-4 h-4 text-gray-500\" />;\n  };\n\n  const projectFiles = resources?.files || [];\n  const conversationAttachments = attachments?.page || [];\n\n  // Validate selected file exists in project\n  const selectedFileExists = useMemo(() => {\n    if (!selectedFileId || !projectFiles.length) return false;\n    return projectFiles.some((f: any) => f._id === selectedFileId);\n  }, [selectedFileId, projectFiles]);\n\n  // Clear invalid selection from URL\n  useEffect(() => {\n    if (selectedFileId && projectFiles.length > 0 && !selectedFileExists) {\n      setFileParam(null);\n      setChunkParam(null);\n    }\n  }, [\n    selectedFileId,\n    projectFiles,\n    selectedFileExists,\n    setFileParam,\n    setChunkParam,\n  ]);\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Main content - Files list */}\n      <div\n        className={cn(\n          \"flex-1 flex flex-col space-y-8 p-6 overflow-y-auto transition-all\",\n          selectedFileId && \"max-w-[60%]\",\n        )}\n      >\n        {/* Header */}\n        <div>\n          <h2 className=\"text-2xl font-semibold tracking-tight\">Files</h2>\n          <p className=\"text-muted-foreground\">\n            Manage project context and view attachments from conversations.\n          </p>\n        </div>\n\n        {/* Section 1: Project Context Files */}\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between\">\n            <div>\n              <CardTitle className=\"text-lg\">Project Context</CardTitle>\n              <CardDescription>\n                Files uploaded here are available as context for all project\n                conversations.\n              </CardDescription>\n            </div>\n            <div {...getRootProps()}>\n              <input {...getInputProps()} />\n              <Button disabled={uploading} size=\"sm\">\n                {uploading ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin mr-2\" />\n                ) : (\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                )}\n                Add File\n              </Button>\n            </div>\n          </CardHeader>\n          <CardContent>\n            {uploading && (\n              <div className=\"flex items-center justify-center p-8 border-2 border-dashed rounded-lg mb-4\">\n                <Loader2 className=\"w-6 h-6 animate-spin text-muted-foreground\" />\n                <span className=\"ml-2 text-sm text-muted-foreground\">\n                  Uploading...\n                </span>\n              </div>\n            )}\n\n            {projectFiles.length === 0 && !uploading ? (\n              <div\n                {...getRootProps()}\n                className={`flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${\n                  isDragActive\n                    ? \"border-primary bg-primary/5\"\n                    : \"border-muted-foreground/25 hover:border-primary/50\"\n                }`}\n              >\n                <input {...getInputProps()} />\n                <Upload className=\"w-8 h-8 text-muted-foreground mb-4\" />\n                <p className=\"text-sm font-medium\">\n                  Drag & drop context files here, or click to select\n                </p>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  PDF, TXT, MD, Images (Max 10MB)\n                </p>\n              </div>\n            ) : (\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead className=\"w-[35%]\">Name</TableHead>\n                      <TableHead>Type</TableHead>\n                      <TableHead>Size</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Added</TableHead>\n                      <TableHead className=\"text-right\">Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {projectFiles.map((file: any) => (\n                      <TableRow\n                        key={file._id}\n                        className={cn(\n                          \"cursor-pointer hover:bg-muted/50 transition-colors\",\n                          selectedFileId === file._id &&\n                            \"bg-primary/10 hover:bg-primary/15\",\n                        )}\n                        onClick={() => setSelectedFileId(file._id)}\n                      >\n                        <TableCell className=\"font-medium flex items-center gap-2\">\n                          {getFileIcon(file.mimeType)}\n                          {file.name}\n                        </TableCell>\n                        <TableCell className=\"text-muted-foreground text-xs\">\n                          {file.mimeType}\n                        </TableCell>\n                        <TableCell className=\"text-xs font-mono\">\n                          {formatSize(file.size)}\n                        </TableCell>\n                        <TableCell>\n                          <EmbeddingStatusBadge\n                            status={file.embeddingStatus}\n                            chunkCount={file.chunkCount}\n                          />\n                        </TableCell>\n                        <TableCell className=\"text-muted-foreground text-xs\">\n                          {format(file.createdAt, \"MMM d, yyyy\")}\n                        </TableCell>\n                        <TableCell className=\"text-right\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            className=\"h-8 w-8 p-0 text-destructive\"\n                            onClick={(e) => {\n                              e.stopPropagation(); // Prevent row selection\n                              setFileToDelete({\n                                id: file._id,\n                                name: file.name,\n                              });\n                            }}\n                          >\n                            <span className=\"sr-only\">Remove</span>\n                            &times;\n                          </Button>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Section 2: Conversation Attachments */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Conversation Attachments</CardTitle>\n            <CardDescription>\n              Files attached to conversations linked to this project.\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {conversationAttachments.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground italic text-sm\">\n                No attachments found in linked conversations.\n              </div>\n            ) : (\n              <div className=\"rounded-md border\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead className=\"w-[40%]\">Name</TableHead>\n                      <TableHead>Type</TableHead>\n                      <TableHead>Size</TableHead>\n                      <TableHead>Conversation</TableHead>\n                      <TableHead>Date</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {conversationAttachments.map((file: any) => (\n                      <TableRow key={file._id}>\n                        <TableCell className=\"font-medium flex items-center gap-2\">\n                          {getFileIcon(file.mimeType)}\n                          {file.name}\n                        </TableCell>\n                        <TableCell className=\"text-muted-foreground text-xs\">\n                          {file.mimeType}\n                        </TableCell>\n                        <TableCell className=\"text-xs font-mono\">\n                          {formatSize(file.size)}\n                        </TableCell>\n                        <TableCell>\n                          {file.conversationId && (\n                            <Link\n                              href={`/chat/${file.conversationId}`}\n                              className=\"text-xs text-primary hover:underline\"\n                            >\n                              View Chat\n                            </Link>\n                          )}\n                        </TableCell>\n                        <TableCell className=\"text-muted-foreground text-xs\">\n                          {format(file.createdAt, \"MMM d, yyyy\")}\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* File Detail Panel - slides in from right */}\n      {selectedFileId && (\n        <div className=\"w-[40%] min-w-[350px] h-full overflow-hidden\">\n          <FileDetailPanel\n            fileId={selectedFileId}\n            highlightChunkId={highlightChunkId}\n            onClose={() => setSelectedFileId(null)}\n          />\n        </div>\n      )}\n\n      {/* Delete Confirmation Dialog */}\n      <AlertDialog\n        open={!!fileToDelete}\n        onOpenChange={(open) => !open && setFileToDelete(null)}\n      >\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Remove file from project?</AlertDialogTitle>\n            <AlertDialogDescription>\n              This will remove{\" \"}\n              <span className=\"font-medium\">{fileToDelete?.name}</span> from the\n              project context. The file will no longer be available for AI\n              conversations in this project.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n              onClick={async () => {\n                if (fileToDelete) {\n                  await removeFileFromProject({\n                    projectId,\n                    fileId: fileToDelete.id,\n                  });\n                  toast.success(\"File removed from project\");\n                  setFileToDelete(null);\n                }\n              }}\n            >\n              Remove\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'M9 18V5l12-2v13', key: '1jmyc2' }],\n  ['circle', { cx: '6', cy: '18', r: '3', key: 'fqmcym' }],\n  ['circle', { cx: '18', cy: '16', r: '3', key: '1hluhg' }],\n];\n\n/**\n * @component @name Music\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNOSAxOFY1bDEyLTJ2MTMiIC8+CiAgPGNpcmNsZSBjeD0iNiIgY3k9IjE4IiByPSIzIiAvPgogIDxjaXJjbGUgY3g9IjE4IiBjeT0iMTYiIHI9IjMiIC8+Cjwvc3ZnPgo=) - https://lucide.dev/icons/music\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst Music = createLucideIcon('music', __iconNode);\n\nexport default Music;\n"],"names":[],"mappings":"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","ignoreList":[3]}