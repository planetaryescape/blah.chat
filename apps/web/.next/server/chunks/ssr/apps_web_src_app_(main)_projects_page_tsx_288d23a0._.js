module.exports=[839555,a=>{"use strict";var b=a.i(367146),c=a.i(130487);a.i(16243);var d=a.i(182234),e=a.i(657882),f=a.i(372817),g=a.i(158540),h=a.i(286028),i=a.i(537500),j=a.i(753884),k=a.i(206568),l=a.i(229606),m=a.i(452549),n=a.i(108301),o=a.i(968177),p=a.i(539524),q=a.i(468106),r=a.i(371135),s=a.i(227759),t=a.i(183104);function u({open:a,onOpenChange:e,projectId:f,projectName:g}){let[h,k]=(0,i.useState)(""),[l,u]=(0,i.useState)("all"),[v,w]=(0,i.useState)(new Set),[x,y]=(0,i.useState)(!1),[z,A]=(0,i.useState)(!1),[B,C]=(0,i.useState)([]),D=(0,d.useQuery)(c.api.conversations.list,{}),E=(0,d.useMutation)(c.api.projects.assignConversations),F=(0,d.useAction)(c.api.conversations.hybridSearch.hybridSearch),G=(0,d.useQuery)(c.api.users.getCurrentUser,{}),H=(0,n.useDebouncedCallback)(async a=>{if(!a.trim()||!G){C([]),A(!1);return}A(!0);try{let b=await F({query:a,limit:100,includeArchived:!1,projectId:"current"===l?f:"unassigned"===l?"none":void 0});C(b)}catch(a){console.error("Hybrid search failed:",a),C([])}finally{A(!1)}},350),I=h.trim()?B:D?.filter(a=>("current"!==l||a.projectId===f)&&("unassigned"!==l||void 0===a.projectId));(0,i.useEffect)(()=>{if(a){let a=setTimeout(()=>{let a=document.querySelector("[cmdk-input]");a&&a.focus()},100);return()=>clearTimeout(a)}},[a]);let J=a=>{w(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},K=async()=>{if(0===v.size)return void j.toast.error("No conversations selected");y(!0);try{await E({projectId:f,conversationIds:Array.from(v)}),j.toast.success(`Assigned ${v.size} conversation${1===v.size?"":"s"} to ${g}`),w(new Set),e(!1)}catch(a){j.toast.error("Failed to assign conversations"),console.error(a)}finally{y(!1)}},L=async()=>{if(0===v.size)return void j.toast.error("No conversations selected");y(!0);try{await E({projectId:null,conversationIds:Array.from(v)}),j.toast.success(`Unassigned ${v.size} conversation${1===v.size?"":"s"}`),w(new Set),e(!1)}catch(a){j.toast.error("Failed to unassign conversations"),console.error(a)}finally{y(!1)}};return(0,b.jsx)(s.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(s.DialogContent,{className:"max-w-2xl max-h-[85vh] flex flex-col gap-4",children:[(0,b.jsxs)(s.DialogHeader,{children:[(0,b.jsx)(s.DialogTitle,{children:"Manage Conversations"}),(0,b.jsxs)(s.DialogDescription,{children:["Assign conversations to ",g]})]}),(0,b.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-3",children:[(0,b.jsx)(t.Tabs,{value:l,onValueChange:a=>u(a),children:(0,b.jsxs)(t.TabsList,{className:"grid w-full grid-cols-3",children:[(0,b.jsx)(t.TabsTrigger,{value:"all",children:"All"}),(0,b.jsx)(t.TabsTrigger,{value:"current",children:"Current Project"}),(0,b.jsx)(t.TabsTrigger,{value:"unassigned",children:"Unassigned"})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(p.Button,{size:"sm",variant:"outline",onClick:()=>{I&&w(new Set(I.map(a=>a._id)))},disabled:!I?.length,children:["Select All (",I?.length??0,")"]}),(0,b.jsxs)("span",{className:"text-sm text-muted-foreground",children:[v.size," selected"]})]}),(0,b.jsxs)(r.Command,{className:"flex-1 border rounded-md",children:[(0,b.jsx)(r.CommandInput,{placeholder:"Search conversations...",value:h,onValueChange:a=>{k(a),H(a)}}),(0,b.jsxs)(r.CommandList,{children:[(0,b.jsx)(r.CommandEmpty,{children:z?"Searching...":"No conversations found"}),(0,b.jsx)(r.CommandGroup,{children:I?.map(a=>(0,b.jsxs)(r.CommandItem,{onSelect:()=>J(a._id),className:"flex items-center gap-2 py-2 cursor-pointer",children:[(0,b.jsx)(q.Checkbox,{checked:v.has(a._id),onCheckedChange:()=>J(a._id),onClick:a=>a.stopPropagation(),className:"h-4 w-4"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0 flex items-center justify-between gap-2",children:[(0,b.jsx)("p",{className:"text-sm truncate",children:a.title}),a.projectId===f?(0,b.jsx)(o.Badge,{variant:"secondary",className:"text-xs flex-shrink-0",children:"Current"}):a.projectId?(0,b.jsx)(o.Badge,{variant:"outline",className:"text-xs flex-shrink-0",children:"Other"}):null]})]},a._id))})]})]})]}),(0,b.jsxs)(s.DialogFooter,{children:[(0,b.jsx)(p.Button,{variant:"outline",onClick:()=>e(!1),children:"Cancel"}),(0,b.jsxs)(p.Button,{variant:"destructive",onClick:L,disabled:0===v.size||x,children:[x&&(0,b.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Remove from Project"]}),(0,b.jsxs)(p.Button,{onClick:K,disabled:0===v.size||x,children:[x&&(0,b.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),"Assign to Project"]})]})]})})}var v=a.i(509423),w=a.i(66663),x=a.i(353788),y=a.i(625852);let z=(0,a.i(366705).default)("panels-top-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);var A=a.i(300722),B=a.i(374838),C=a.i(502311),D=a.i(723979),E=a.i(738621),E=E,F=a.i(687336),G=a.i(787163),H=a.i(965025),I=a.i(700760);function J({projectId:a}){let e=(0,d.useQuery)(c.api.projects.getProjectStats,{projectId:a});if(!e)return(0,b.jsxs)("div",{className:"w-full space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-4 w-4 rounded bg-muted animate-pulse"}),(0,b.jsx)("div",{className:"h-4 w-12 rounded bg-muted animate-pulse"})]}),(0,b.jsx)("div",{className:"h-1.5 w-full bg-muted/50 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full w-1/3 bg-muted animate-pulse"})})]});let{conversationCount:f,noteCount:g,fileCount:h,taskStats:i}=e,j=i.total>0?Math.round(i.completed/i.total*100):0;return(0,b.jsxs)("div",{className:"w-full space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground/80",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",title:"Conversations",children:[(0,b.jsx)(F.MessageSquare,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:f})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",title:"Notes",children:[(0,b.jsx)(G.NotebookPen,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:g})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1.5",title:"Files",children:[(0,b.jsx)(E.default,{className:"w-3.5 h-3.5"}),(0,b.jsx)("span",{children:h})]})]}),i.total>0&&(0,b.jsx)("div",{className:(0,I.cn)("flex items-center gap-1.5 font-medium",100===j?"text-emerald-500":"text-primary"),children:(0,b.jsxs)("span",{className:"text-[10px]",children:[j,"% done"]})})]}),i.total>0&&(0,b.jsxs)("div",{className:"space-y-1.5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-[10px] text-muted-foreground/60",children:[(0,b.jsx)("span",{children:"Task Progress"}),(0,b.jsxs)("span",{children:[i.completed,"/",i.total]})]}),(0,b.jsx)(H.Progress,{value:j,className:"h-1.5 bg-muted/60",indicatorClassName:(0,I.cn)("transition-all duration-500",100===j?"bg-emerald-500":"bg-primary")})]})]})}function K({project:a,onEdit:c,onDelete:d,onManage:e}){let f=(0,C.useRouter)();return(0,b.jsx)("div",{className:"group relative flex flex-col h-full bg-card hover:bg-muted/10 border border-border/40 hover:border-border/80 rounded-xl overflow-hidden shadow-sm transition-all duration-300 cursor-pointer",onClick:()=>f.push(`/projects/${a._id}`),children:(0,b.jsxs)("div",{className:"flex flex-col flex-1 p-5",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary shadow-inner",children:(0,b.jsx)(y.FolderOpen,{className:"w-5 h-5 currentColor"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground tracking-tight group-hover:text-primary transition-colors",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,b.jsx)(x.Clock,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:(0,v.formatDistanceToNow)(a.updatedAt,{addSuffix:!0})})]})]})]}),(0,b.jsxs)(D.DropdownMenu,{children:[(0,b.jsx)(D.DropdownMenuTrigger,{asChild:!0,onClick:a=>a.stopPropagation(),children:(0,b.jsx)(p.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 -mt-1 -mr-2 text-muted-foreground hover:text-foreground",children:(0,b.jsx)(A.MoreVertical,{className:"h-4 w-4"})})}),(0,b.jsxs)(D.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsxs)(D.DropdownMenuItem,{onClick:()=>f.push(`/projects/${a._id}`),children:[(0,b.jsx)(w.ArrowUpRight,{className:"w-4 h-4 mr-2"}),"Open Project"]}),(0,b.jsx)(D.DropdownMenuSeparator,{}),e&&(0,b.jsxs)(D.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),e(a._id,a.name)},children:[(0,b.jsx)(z,{className:"w-4 h-4 mr-2"}),"Manage Content"]}),c&&(0,b.jsxs)(D.DropdownMenuItem,{onClick:b=>{b.stopPropagation(),c(a)},children:[(0,b.jsx)(B.Star,{className:"w-4 h-4 mr-2"}),"Edit Details"]})]})]})]}),(0,b.jsx)("div",{className:"flex-1 mb-6",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground/80 line-clamp-2 leading-relaxed",children:a.description||(0,b.jsx)("span",{className:"italic opacity-50",children:"No description provided"})})}),(0,b.jsx)("div",{className:"pt-4 mt-auto border-t border-border/40",children:(0,b.jsx)(J,{projectId:a._id})})]})})}var L=a.i(928503),M=a.i(658547),N=a.i(197463),O=a.i(638600);function P({project:a,onSuccess:e}){let[f,g]=(0,i.useState)(a?.name||""),[h,k]=(0,i.useState)(a?.description||""),[l,n]=(0,i.useState)(a?.systemPrompt||""),[o,r]=(0,i.useState)(!1),[s,t]=(0,i.useState)(!1),u=(0,d.useMutation)(c.api.projects.create),v=(0,d.useMutation)(c.api.projects.update),w=!!a,x=async b=>{if(b.preventDefault(),!f.trim())return void j.toast.error("Project name is required");t(!0);try{w?(await v({id:a._id,name:f.trim(),description:h.trim()||void 0,systemPrompt:l.trim()||void 0}),j.toast.success("Project updated"),O.analytics.track("project_updated",{hasDescription:!!h.trim(),hasSystemPrompt:!!l.trim()})):(await u({name:f.trim(),description:h.trim()||void 0,systemPrompt:l.trim()||void 0,isTemplate:o}),j.toast.success(o?"Template created":"Project created"),O.analytics.track("project_created",{hasDescription:!!h.trim(),hasSystemPrompt:!!l.trim(),isTemplate:o})),e?.()}catch(a){j.toast.error(`Failed to ${w?"update":"create"} project`),console.error(a)}finally{t(!1)}};return(0,b.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(M.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(L.Input,{id:"name",value:f,onChange:a=>g(a.target.value),placeholder:"My Project",maxLength:100,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(M.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(N.Textarea,{id:"description",value:h,onChange:a=>k(a.target.value),placeholder:"What is this project about?",maxLength:500,rows:3}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[h.length,"/500 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(M.Label,{htmlFor:"systemPrompt",children:"System Prompt"}),(0,b.jsx)(N.Textarea,{id:"systemPrompt",value:l,onChange:a=>n(a.target.value),placeholder:"Instructions for AI when working on this project...",maxLength:3e3,rows:6}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[l.length,"/3000 characters"]})]}),!w&&(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(q.Checkbox,{id:"isTemplate",checked:o,onCheckedChange:a=>r(a)}),(0,b.jsx)(M.Label,{htmlFor:"isTemplate",className:"text-sm font-normal cursor-pointer",children:"Save as template (reusable configuration)"})]}),(0,b.jsx)("div",{className:"flex gap-2 justify-end",children:(0,b.jsx)(p.Button,{type:"submit",disabled:s,children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),w?"Updating...":"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[w?"Update":"Create"," Project"]})})})]})}var Q=a.i(529395),R=a.i(651386);function S({onCreateProject:a}){return(0,b.jsxs)(Q.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex flex-col items-center justify-center py-16 px-4",children:[(0,b.jsx)("div",{className:"relative mb-6",children:(0,b.jsxs)("div",{className:"relative h-24 w-24",children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-full bg-primary/10 animate-pulse-subtle"}),(0,b.jsxs)("div",{className:"relative flex items-center justify-center h-full",children:[(0,b.jsx)(y.FolderOpen,{className:"h-12 w-12 text-primary/80"}),(0,b.jsx)(R.Sparkles,{className:"absolute top-0 right-0 h-6 w-6 text-primary"})]})]})}),(0,b.jsx)("h2",{className:"text-2xl font-semibold tracking-tight mb-3 bg-gradient-to-br from-foreground to-foreground/60 bg-clip-text text-transparent",children:"Create Your First Project"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-8 max-w-md",children:"Organize conversations with custom system prompts and keep related chats together"}),(0,b.jsx)(Q.motion.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,b.jsxs)(p.Button,{onClick:a,size:"lg",className:"rounded-full px-8 shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all",children:[(0,b.jsx)(R.Sparkles,{className:"w-4 h-4 mr-2"}),"Create Project"]})})]})}var T=a.i(502210),U=a.i(175311),V=a.i(315638),W=a.i(359275),X=a.i(726295),Y=a.i(971310),Z=a.i(851943),$=a.i(948217);function _({projects:a,onDelete:c,onEdit:d,onManage:e}){let[f,g]=(0,i.useState)([]),[h,j]=(0,i.useState)({pageIndex:0,pageSize:10}),k=[{accessorKey:"name",header:({column:a})=>(0,b.jsxs)(p.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 hover:bg-transparent",children:["Project",(0,b.jsx)(V.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex flex-col min-w-[200px]",children:[(0,b.jsxs)(Z.default,{href:`/projects/${a.original._id}`,className:"font-medium hover:underline flex items-center gap-2 text-foreground",children:[(0,b.jsx)(y.FolderOpen,{className:"h-4 w-4 text-muted-foreground"}),a.original.name]}),a.original.description&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground/70 truncate max-w-[300px] mt-0.5 ml-6",children:a.original.description})]})},{id:"stats",header:"Statistics",cell:({row:a})=>(0,b.jsx)(J,{projectId:a.original._id})},{accessorKey:"createdAt",header:({column:a})=>(0,b.jsxs)(p.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent",children:["Created",(0,b.jsx)(V.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground text-sm",children:[(0,b.jsx)(W.Calendar,{className:"h-3.5 w-3.5"}),(0,b.jsx)("span",{children:(0,v.formatDistanceToNow)(a.original.createdAt,{addSuffix:!0})})]})},{id:"actions",cell:({row:a})=>{let f=a.original;return(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)(D.DropdownMenu,{children:[(0,b.jsx)(D.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsxs)(p.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,b.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,b.jsx)(A.MoreVertical,{className:"h-4 w-4"})]})}),(0,b.jsxs)(D.DropdownMenuContent,{align:"end",children:[(0,b.jsx)(Z.default,{href:`/projects/${f._id}`,children:(0,b.jsx)(D.DropdownMenuItem,{children:"Open Project"})}),(0,b.jsx)(D.DropdownMenuItem,{onClick:()=>e(f._id,f.name),children:"Manage Conversations"}),(0,b.jsx)(D.DropdownMenuSeparator,{}),(0,b.jsxs)(D.DropdownMenuItem,{onClick:()=>d(f),children:[(0,b.jsx)(X.Settings,{className:"mr-2 h-4 w-4"}),"Settings"]}),(0,b.jsxs)(D.DropdownMenuItem,{onClick:()=>c(f._id),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(Y.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})}}],l=(0,T.useReactTable)({data:a,columns:k,onSortingChange:g,onPaginationChange:j,getCoreRowModel:(0,U.getCoreRowModel)(),getPaginationRowModel:(0,U.getPaginationRowModel)(),getSortedRowModel:(0,U.getSortedRowModel)(),state:{sorting:f,pagination:h}});return(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"rounded-md border border-border/40 overflow-hidden bg-background/50",children:(0,b.jsxs)($.Table,{children:[(0,b.jsx)($.TableHeader,{className:"bg-muted/5",children:l.getHeaderGroups().map(a=>(0,b.jsx)($.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)($.TableHead,{children:a.isPlaceholder?null:(0,T.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)($.TableBody,{children:l.getRowModel().rows?.length?l.getRowModel().rows.map(a=>(0,b.jsx)($.TableRow,{"data-state":a.getIsSelected()&&"selected",className:"hover:bg-muted/30 transition-colors",children:a.getVisibleCells().map(a=>(0,b.jsx)($.TableCell,{children:(0,T.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id)):(0,b.jsx)($.TableRow,{children:(0,b.jsx)($.TableCell,{colSpan:k.length,className:"h-24 text-center",children:"No projects found."})})})]})}),(0,b.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Page ",l.getState().pagination.pageIndex+1," of"," ",l.getPageCount()]}),(0,b.jsxs)("div",{className:"space-x-2",children:[(0,b.jsx)(p.Button,{variant:"outline",size:"sm",onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),className:"h-8 w-8 p-0",children:"<"}),(0,b.jsx)(p.Button,{variant:"outline",size:"sm",onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),className:"h-8 w-8 p-0",children:">"})]})]})]})}var aa=a.i(116245),ab=a.i(592552);function ac(){let a=(0,d.useQuery)(c.api.projects.listTemplates),e=(0,d.useMutation)(c.api.projects.createFromTemplate),f=(0,C.useRouter)(),h=async a=>{try{await e({templateId:a}),j.toast.success("Project created from template"),f.push("/projects")}catch(a){j.toast.error("Failed to create project from template"),console.error(a)}};return a&&0!==a.length?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"Templates"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Create new projects from your saved templates"})]})}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:a.map(a=>(0,b.jsxs)(ab.Card,{className:"hover:shadow-md transition-shadow",children:[(0,b.jsxs)(ab.CardHeader,{children:[(0,b.jsxs)(ab.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(aa.FileText,{className:"w-5 h-5"}),a.name]}),a.description&&(0,b.jsx)(ab.CardDescription,{children:a.description})]}),(0,b.jsxs)(ab.CardContent,{children:[a.systemPrompt&&(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium mb-1",children:"System Prompt:"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2",children:a.systemPrompt})]}),(0,b.jsxs)(p.Button,{onClick:()=>h(a._id),className:"w-full",size:"sm",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4 mr-2"}),"Create from Template"]})]})]},a._id))})]}):null}var ad=a.i(828288),ae=a.i(276670),af=a.i(375523);function ag(){let{showProjects:a,isLoading:m}=(0,af.useFeatureToggles)();if(m)return(0,b.jsx)(l.FeatureLoadingScreen,{});if(!a)return(0,b.jsx)(k.DisabledFeaturePage,{featureName:"Projects",settingKey:"showProjects"});let n=(0,d.useQuery)(c.api.projects.list),[o,q]=(0,i.useState)(!1),[r,v]=(0,i.useState)(!1),[w,x]=(0,i.useState)(!1),[y,z]=(0,i.useState)(!1),[A,B]=(0,i.useState)(null),[C,D]=(0,i.useState)("grid"),[E,F]=(0,i.useState)(""),G=(0,d.useMutation)(c.api.projects.deleteProject),H=a=>{B(a),v(!0)},I=a=>{let b=n?.find(b=>b._id===a);b&&(B(b),x(!0))},J=(a,b)=>{B({_id:a,name:b}),z(!0)},M=async()=>{if(A)try{await G({id:A._id}),j.toast.success("Project deleted"),O.analytics.track("project_deleted"),x(!1)}catch(a){j.toast.error("Failed to delete project"),console.error(a)}},N=n?.filter(a=>!a.isTemplate&&(""===E||a.name.toLowerCase().includes(E.toLowerCase())));return(0,b.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-none z-50 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-foreground",children:"Projects"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage and organize your conversations with custom context"})]}),(0,b.jsxs)(p.Button,{onClick:()=>q(!0),className:"shadow-sm",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4 mr-2"}),"New Project"]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between gap-4 mt-2",children:[(0,b.jsxs)("div",{className:"relative max-w-sm w-full",children:[(0,b.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(L.Input,{placeholder:"Filter projects...",value:E,onChange:a=>F(a.target.value),className:"pl-9 h-9 bg-muted/40 border-transparent hover:bg-muted/60 focus:bg-background transition-colors"})]}),(0,b.jsx)(t.Tabs,{value:C,onValueChange:a=>D(a),className:"w-[120px]",children:(0,b.jsxs)(t.TabsList,{className:"grid w-full grid-cols-2 h-9 p-1 bg-muted/50",children:[(0,b.jsx)(t.TabsTrigger,{value:"grid",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm text-xs",children:(0,b.jsx)(e.LayoutGrid,{className:"h-3.5 w-3.5"})}),(0,b.jsx)(t.TabsTrigger,{value:"table",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm text-xs",children:(0,b.jsx)(f.List,{className:"h-3.5 w-3.5"})})]})})]})]})})}),(0,b.jsx)(ae.ScrollArea,{className:"flex-1 w-full min-h-0",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-6xl px-4 py-8 space-y-8",children:["grid"===C&&(0,b.jsx)(ac,{}),(0,b.jsxs)("div",{children:["grid"===C&&(0,b.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,b.jsx)("h2",{className:"text-lg font-semibold tracking-tight",children:"Your Projects"})}),void 0===n?(0,b.jsx)("div",{className:"flex justify-center py-12 text-muted-foreground",children:(0,b.jsx)("span",{className:"animate-pulse",children:"Loading projects..."})}):N?.length===0?E?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:['No projects found matching "',E,'"']}):(0,b.jsx)(S,{onCreateProject:()=>q(!0)}):"grid"===C?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(N??[]).map(a=>(0,b.jsx)(K,{project:a,onEdit:H,onDelete:I,onManage:J},a._id))}):(0,b.jsx)(_,{projects:N??[],onEdit:H,onDelete:I,onManage:J})]})]})}),(0,b.jsx)(s.Dialog,{open:o,onOpenChange:q,children:(0,b.jsxs)(s.DialogContent,{children:[(0,b.jsx)(s.DialogHeader,{children:(0,b.jsx)(s.DialogTitle,{children:"Create New Project"})}),(0,b.jsx)(P,{onSuccess:()=>q(!1)})]})}),(0,b.jsx)(s.Dialog,{open:r,onOpenChange:v,children:(0,b.jsxs)(s.DialogContent,{children:[(0,b.jsx)(s.DialogHeader,{children:(0,b.jsx)(s.DialogTitle,{children:"Edit Project"})}),(0,b.jsx)(P,{project:A,onSuccess:()=>v(!1)})]})}),A&&(0,b.jsx)(u,{open:y,onOpenChange:z,projectId:A._id,projectName:A.name}),(0,b.jsx)(ad.AlertDialog,{open:w,onOpenChange:x,children:(0,b.jsxs)(ad.AlertDialogContent,{children:[(0,b.jsxs)(ad.AlertDialogHeader,{children:[(0,b.jsx)(ad.AlertDialogTitle,{children:"Delete Project?"}),(0,b.jsxs)(ad.AlertDialogDescription,{children:['This will remove the project "',A?.name,'" and unlink all conversations. The conversations themselves will not be deleted.']})]}),(0,b.jsxs)(ad.AlertDialogFooter,{children:[(0,b.jsx)(ad.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(ad.AlertDialogAction,{onClick:M,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}a.s(["default",()=>ag],839555)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_projects_page_tsx_288d23a0._.js.map