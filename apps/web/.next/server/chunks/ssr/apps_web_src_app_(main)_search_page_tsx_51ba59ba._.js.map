{"version":3,"sources":["../../../../../../apps/web/src/components/search/RecentSearches.tsx","../../../../../../apps/web/src/components/search/SearchBar.tsx","../../../../../../apps/web/src/components/search/SearchFilters.tsx","../../../../../../apps/web/src/components/search/SearchHeader.tsx","../../../../../../apps/web/src/components/search/ConfirmDialog.tsx","../../../../../../apps/web/src/components/search/BulkActionToolbar.tsx","../../../../../../apps/web/src/components/search/SearchEmptyState.tsx","../../../../../../apps/web/src/components/search/SearchResults.tsx","../../../../../../apps/web/src/hooks/useRecentSearches.ts","../../../../../../apps/web/src/app/%28main%29/search/page.tsx","../../../../../../apps/web/src/hooks/useSearchFilters.ts","../../../../../../apps/web/src/components/search/SearchResultSkeleton.tsx","../../../../../../apps/web/src/hooks/useBulkSelection.ts","../../../../../../apps/web/src/hooks/useSearchState.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/search-x.ts","../../../../../../apps/web/src/hooks/useSearchResults.ts"],"sourcesContent":["\"use client\";\n\nimport { Clock, Trash2 } from \"lucide-react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\n\ninterface RecentSearchesProps {\n  recentSearches: string[];\n  isLoading?: boolean;\n  onSelectSearch: (query: string) => void;\n  onClearRecent: () => void;\n}\n\nexport function RecentSearches({\n  recentSearches,\n  isLoading = false,\n  onSelectSearch,\n  onClearRecent,\n}: RecentSearchesProps) {\n  // Show loading skeleton while data is being loaded\n  if (isLoading) {\n    return (\n      <div className=\"space-y-3 mt-7\">\n        <div className=\"flex items-center justify-between mb-4 pr-5\">\n          <div className=\"flex items-center gap-2 px-5\">\n            <Skeleton className=\"w-4 h-5\" />\n            <Skeleton className=\"w-32 h-5\" />\n          </div>\n          <Skeleton className=\"w-18 h-6\" />\n        </div>\n        <div className=\"space-y-2\">\n          {[\"skeleton-1\", \"skeleton-2\", \"skeleton-3\"].map((skeletonId) => (\n            <Skeleton key={skeletonId} className=\"w-full h-10\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  // Show empty state only after loading is complete\n  if (recentSearches.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <Clock className=\"w-12 h-12 mx-auto text-muted-foreground/50 mb-4\" />\n        <p className=\"text-muted-foreground text-sm\">No recent searches yet</p>\n        <p className=\"text-muted-foreground/70 text-xs mt-1\">\n          Your search history will appear here\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <Card className=\"border-border/40 bg-background/50 backdrop-blur-sm\">\n      <CardHeader className=\"pb-3\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n            <Clock className=\"w-4 h-4\" />\n            Recent Searches\n          </CardTitle>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClearRecent}\n            className=\"h-7 px-2 text-xs text-muted-foreground hover:text-destructive\"\n          >\n            <Trash2 className=\"w-3 h-3 mr-1\" />\n            Clear\n          </Button>\n        </div>\n      </CardHeader>\n      <CardContent className=\"relative\">\n        <ScrollArea className=\"max-h-[400px]\">\n          <div className=\"space-y-1 pr-4\">\n            {recentSearches.map((search) => (\n              <button\n                key={search} // Use search string as key since searches should be unique\n                type=\"button\"\n                onClick={() => onSelectSearch(search)}\n                className=\"w-full flex items-center justify-between px-3 py-2 rounded-md hover:bg-muted/50 transition-colors group text-left\"\n              >\n                <span className=\"text-sm truncate flex-1 font-mono\">\n                  {search}\n                </span>\n                <Badge\n                  variant=\"secondary\"\n                  className=\"text-[10px] opacity-0 group-hover:opacity-100 transition-opacity\"\n                >\n                  Search\n                </Badge>\n              </button>\n            ))}\n          </div>\n        </ScrollArea>\n        {/* Fade gradient for scroll affordance */}\n        <div className=\"absolute bottom-0 left-0 right-0 h-8 bg-gradient-to-t from-card to-transparent pointer-events-none\" />\n      </CardContent>\n    </Card>\n  );\n}\n","\"use client\";\n\nimport { Loader2, Search, X } from \"lucide-react\";\nimport { useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { cn } from \"@/lib/utils\";\n\ninterface SearchBarProps {\n  value: string;\n  onChange: (value: string) => void;\n  isSearching?: boolean;\n  placeholder?: string;\n  autoFocus?: boolean;\n}\n\nexport function SearchBar({\n  value,\n  onChange,\n  isSearching = false,\n  placeholder = \"Search conversations...\",\n  autoFocus = false,\n}: SearchBarProps) {\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // Keyboard shortcuts\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      const target = e.target as HTMLElement;\n      const isInputFocused =\n        target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\";\n\n      // `/` to focus (when not in an input)\n      if (e.key === \"/\" && !isInputFocused) {\n        e.preventDefault();\n        inputRef.current?.focus();\n      }\n\n      // `Escape` to clear and blur\n      if (e.key === \"Escape\" && inputRef.current === document.activeElement) {\n        e.preventDefault();\n        onChange(\"\");\n        inputRef.current?.blur();\n      }\n    };\n\n    window.addEventListener(\"keydown\", handler);\n    return () => window.removeEventListener(\"keydown\", handler);\n  }, [onChange]);\n\n  const handleClear = () => {\n    onChange(\"\");\n    inputRef.current?.focus();\n  };\n\n  return (\n    <div className=\"relative group max-w-xl mx-auto\">\n      <div className=\"relative flex items-center\">\n        <div className=\"relative flex-1\">\n          {/* Search icon */}\n          <div className=\"absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none z-10\">\n            {isSearching ? (\n              <Loader2 className=\"w-4 h-4 text-primary animate-spin\" />\n            ) : (\n              <Search className=\"w-4 h-4 text-muted-foreground/60 group-focus-within:text-foreground transition-colors duration-200\" />\n            )}\n          </div>\n\n          <Input\n            ref={inputRef}\n            value={value}\n            onChange={(e) => onChange(e.target.value)}\n            placeholder={placeholder}\n            autoFocus={autoFocus}\n            className={cn(\n              \"pl-9 pr-9 h-10 text-sm font-medium shadow-sm\",\n              \"bg-background/50 border-transparent\",\n              \"hover:bg-background/80 hover:border-border/40\",\n              \"focus:bg-background focus:border-primary/20\",\n              \"focus:ring-2 focus:ring-primary/10\",\n              \"rounded-lg transition-all duration-200\",\n              \"placeholder:text-muted-foreground/50\",\n            )}\n          />\n\n          {/* Clear button */}\n          {value && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={handleClear}\n              className=\"absolute right-1 top-1/2 -translate-y-1/2 h-8 w-8 hover:bg-transparent text-muted-foreground/40 hover:text-foreground\"\n            >\n              <X className=\"w-3.5 h-3.5\" />\n            </Button>\n          )}\n        </div>\n\n        {/* Keyboard hint */}\n        <div className=\"absolute right-12 top-1/2 -translate-y-1/2 hidden sm:flex items-center gap-1 pointer-events-none\">\n          <kbd className=\"inline-flex h-5 select-none items-center gap-1 rounded border bg-muted/50 px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100\">\n            /\n          </kbd>\n        </div>\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport { useQuery } from \"convex/react\";\nimport { Bot, Calendar, MessageSquare, Pin, Plus, User, X } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport type { SearchFilters as Filters } from \"@/hooks/useSearchFilters\";\nimport { analytics } from \"@/lib/analytics\";\n\ninterface SearchFiltersProps {\n  filters: Filters;\n  onClearFilters: () => void;\n  hasActiveFilters: boolean;\n  onFilterChange: (key: keyof Filters, value: string | null) => void;\n}\n\nconst DATE_PRESETS = [\n  { label: \"Today\", value: \"today\" },\n  { label: \"Last 7 days\", value: \"7days\" },\n  { label: \"Last 30 days\", value: \"30days\" },\n  { label: \"Last 90 days\", value: \"90days\" },\n] as const;\n\n// Debounce helper for search input\nfunction useDebouncedValue<T>(value: T, delay: number): T {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setDebouncedValue(value), delay);\n    return () => clearTimeout(timer);\n  }, [value, delay]);\n\n  return debouncedValue;\n}\n\nexport function SearchFilters({\n  filters,\n  onClearFilters,\n  hasActiveFilters,\n  onFilterChange,\n}: SearchFiltersProps) {\n  const [conversationSearch, setConversationSearch] = useState(\"\");\n  const debouncedSearch = useDebouncedValue(conversationSearch, 300);\n\n  // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n  const conversations = useQuery(api.conversations.list, {\n    searchQuery: debouncedSearch || undefined,\n    limit: 20,\n  });\n\n  const [datePreset, setDatePreset] = useState<string>(\"all\");\n  const [messageType, setMessageType] = useState<string>(\n    filters.messageType || \"all\",\n  );\n\n  const handleDatePresetChange = (value: string) => {\n    setDatePreset(value);\n\n    if (value === \"all\") {\n      onFilterChange(\"dateFrom\", null);\n      onFilterChange(\"dateTo\", null);\n      analytics.track(\"search_filter_applied\", {\n        filterType: \"date_range\",\n      });\n      return;\n    }\n\n    const now = Date.now();\n    let dateFrom = now;\n\n    switch (value) {\n      case \"today\":\n        dateFrom = new Date().setHours(0, 0, 0, 0);\n        break;\n      case \"7days\":\n        dateFrom = now - 7 * 24 * 60 * 60 * 1000;\n        break;\n      case \"30days\":\n        dateFrom = now - 30 * 24 * 60 * 60 * 1000;\n        break;\n      case \"90days\":\n        dateFrom = now - 90 * 24 * 60 * 60 * 1000;\n        break;\n    }\n\n    onFilterChange(\"dateFrom\", dateFrom.toString());\n    onFilterChange(\"dateTo\", now.toString());\n\n    analytics.track(\"search_filter_applied\", {\n      filterType: \"date_range\",\n    });\n  };\n\n  const handleMessageTypeChange = (value: string) => {\n    setMessageType(value);\n\n    if (value === \"all\") {\n      onFilterChange(\"messageType\", null);\n    } else {\n      onFilterChange(\"messageType\", value);\n    }\n\n    analytics.track(\"search_filter_applied\", {\n      filterType: \"message_type\",\n    });\n  };\n\n  // Count active filters for badge\n  const activeFiltersCount = [\n    filters.conversationId,\n    filters.dateFrom,\n    filters.messageType,\n  ].filter(Boolean).length;\n\n  return (\n    <div className=\"flex items-center justify-between gap-4 flex-wrap\">\n      {/* Filter button + Active chips */}\n      <div className=\"flex items-center gap-2 flex-wrap flex-1\">\n        {/* Add filter button (now first in DOM order) */}\n        <Popover>\n          <PopoverTrigger asChild>\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"gap-2 whitespace-nowrap h-7 text-xs\"\n            >\n              <Plus className=\"w-3 h-3\" />\n              Filters\n              {activeFiltersCount > 0 && (\n                <Badge\n                  variant=\"secondary\"\n                  className=\"ml-1 h-5 min-w-5 px-1.5 text-[10px]\"\n                >\n                  {activeFiltersCount}\n                </Badge>\n              )}\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-80 p-4\" align=\"start\" side=\"bottom\">\n            <div className=\"space-y-4\">\n              <h4 className=\"font-medium text-sm\">Filter Search Results</h4>\n\n              {/* Conversation Filter */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs flex items-center gap-2\">\n                  <MessageSquare className=\"w-3.5 h-3.5\" />\n                  Conversation\n                </Label>\n\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"w-full justify-start text-left font-normal\"\n                    >\n                      <MessageSquare className=\"w-3.5 h-3.5 mr-2\" />\n                      {filters.conversationId\n                        ? conversations?.find(\n                            (c: any) => c._id === filters.conversationId,\n                          )?.title || \"Unknown\"\n                        : \"All conversations\"}\n                    </Button>\n                  </PopoverTrigger>\n\n                  <PopoverContent className=\"w-[300px] p-0\" align=\"start\">\n                    <Command>\n                      <CommandInput\n                        placeholder=\"Search conversations...\"\n                        value={conversationSearch}\n                        onValueChange={setConversationSearch}\n                      />\n                      <CommandList>\n                        <CommandEmpty>\n                          {conversationSearch\n                            ? `No conversations matching \"${conversationSearch}\"`\n                            : \"No conversations yet\"}\n                        </CommandEmpty>\n\n                        <CommandGroup\n                          heading={\n                            conversationSearch\n                              ? \"Search Results\"\n                              : \"Recent Conversations\"\n                          }\n                        >\n                          <CommandItem\n                            value=\"all\"\n                            onSelect={() => {\n                              onFilterChange(\"conversationId\", null);\n                              setConversationSearch(\"\");\n                              analytics.track(\"search_filter_applied\", {\n                                filterType: \"conversation\",\n                              });\n                            }}\n                          >\n                            All conversations\n                          </CommandItem>\n\n                          {!conversations && (\n                            <CommandItem disabled>\n                              Loading conversations...\n                            </CommandItem>\n                          )}\n\n                          {conversations?.map((conv: any) => (\n                            <CommandItem\n                              key={conv._id}\n                              value={conv._id}\n                              onSelect={() => {\n                                onFilterChange(\"conversationId\", conv._id);\n                                setConversationSearch(\"\");\n                                analytics.track(\"search_filter_applied\", {\n                                  filterType: \"conversation\",\n                                });\n                              }}\n                            >\n                              {conv.pinned && (\n                                <Pin className=\"w-3 h-3 mr-2 text-muted-foreground\" />\n                              )}\n                              <span className=\"truncate\">\n                                {conv.title || \"Untitled\"}\n                              </span>\n                            </CommandItem>\n                          ))}\n                        </CommandGroup>\n                      </CommandList>\n                    </Command>\n                  </PopoverContent>\n                </Popover>\n              </div>\n\n              {/* Date Range Filter */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs flex items-center gap-2\">\n                  <Calendar className=\"w-3.5 h-3.5\" />\n                  Date Range\n                </Label>\n                <RadioGroup\n                  value={datePreset}\n                  onValueChange={handleDatePresetChange}\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"all\" id=\"date-all\" />\n                    <Label\n                      htmlFor=\"date-all\"\n                      className=\"text-sm cursor-pointer\"\n                    >\n                      All time\n                    </Label>\n                  </div>\n                  {DATE_PRESETS.map((preset: any) => (\n                    <div\n                      key={preset.value}\n                      className=\"flex items-center space-x-2\"\n                    >\n                      <RadioGroupItem\n                        value={preset.value}\n                        id={`date-${preset.value}`}\n                      />\n                      <Label\n                        htmlFor={`date-${preset.value}`}\n                        className=\"text-sm cursor-pointer\"\n                      >\n                        {preset.label}\n                      </Label>\n                    </div>\n                  ))}\n                </RadioGroup>\n              </div>\n\n              {/* Message Type Filter */}\n              <div className=\"space-y-2\">\n                <Label className=\"text-xs\">Message Type</Label>\n                <RadioGroup\n                  value={messageType}\n                  onValueChange={handleMessageTypeChange}\n                >\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"all\" id=\"type-all\" />\n                    <Label\n                      htmlFor=\"type-all\"\n                      className=\"text-sm cursor-pointer\"\n                    >\n                      All messages\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"user\" id=\"type-user\" />\n                    <Label\n                      htmlFor=\"type-user\"\n                      className=\"text-sm cursor-pointer flex items-center gap-2\"\n                    >\n                      <User className=\"w-3.5 h-3.5\" />\n                      User messages\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2\">\n                    <RadioGroupItem value=\"assistant\" id=\"type-assistant\" />\n                    <Label\n                      htmlFor=\"type-assistant\"\n                      className=\"text-sm cursor-pointer flex items-center gap-2\"\n                    >\n                      <Bot className=\"w-3.5 h-3.5\" />\n                      AI responses\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            </div>\n          </PopoverContent>\n        </Popover>\n\n        {/* Active filter chips (after button with separator) */}\n        {activeFiltersCount > 0 && (\n          <>\n            <div className=\"h-6 w-px bg-border\" />\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-xs text-muted-foreground\">Active:</span>\n              {filters.conversationId && (\n                <FilterChip\n                  label=\"Conversation\"\n                  value={\n                    conversations?.find(\n                      (c: any) => c._id === filters.conversationId,\n                    )?.title || \"Unknown\"\n                  }\n                  onRemove={() => onClearFilters()}\n                />\n              )}\n              {filters.dateFrom && (\n                <FilterChip\n                  label=\"Date Range\"\n                  value=\"Custom\"\n                  onRemove={() => onClearFilters()}\n                />\n              )}\n              {filters.messageType && (\n                <FilterChip\n                  label=\"Type\"\n                  value={\n                    filters.messageType === \"user\"\n                      ? \"User Messages\"\n                      : \"AI Responses\"\n                  }\n                  onRemove={() => onClearFilters()}\n                />\n              )}\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={onClearFilters}\n                className=\"h-7 text-xs\"\n              >\n                Clear all\n              </Button>\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n\ninterface FilterChipProps {\n  label: string;\n  value: string;\n  onRemove: () => void;\n}\n\nfunction FilterChip({ label, value, onRemove }: FilterChipProps) {\n  return (\n    <Badge\n      variant=\"secondary\"\n      className=\"h-7 pl-2 pr-1 text-xs gap-1 bg-primary/10 text-primary border-primary/20\"\n    >\n      <span className=\"font-medium\">{label}:</span>\n      <span className=\"truncate max-w-[100px]\">{value}</span>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        onClick={onRemove}\n        className=\"h-4 w-4 p-0 hover:bg-primary/20 ml-1\"\n      >\n        <X className=\"w-3 h-3\" />\n      </Button>\n    </Badge>\n  );\n}\n","\"use client\";\n\nimport { cn } from \"@/lib/utils\";\n\ninterface SearchHeaderProps {\n  children: React.ReactNode;\n}\n\nexport function SearchHeader({ children }: SearchHeaderProps) {\n  return (\n    <div\n      className={cn(\n        \"bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm\",\n      )}\n    >\n      <div className=\"container mx-auto max-w-6xl px-4 py-4\">\n        <div className=\"mb-6 space-y-1\">\n          <h1 className=\"text-xl font-bold tracking-tight\">Search</h1>\n          <p className=\"text-sm text-muted-foreground\">\n            Find anything across all your conversations\n          </p>\n        </div>\n        {children}\n      </div>\n    </div>\n  );\n}\n","import {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from \"@/components/ui/alert-dialog\";\n\ninterface ConfirmDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  title: string;\n  description: string;\n  onConfirm: () => void;\n  confirmLabel?: string;\n  destructive?: boolean;\n}\n\nexport function ConfirmDialog({\n  open,\n  onOpenChange,\n  title,\n  description,\n  onConfirm,\n  confirmLabel = \"Confirm\",\n  destructive = false,\n}: ConfirmDialogProps) {\n  return (\n    <AlertDialog open={open} onOpenChange={onOpenChange}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle>{title}</AlertDialogTitle>\n          <AlertDialogDescription>{description}</AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <AlertDialogCancel>Cancel</AlertDialogCancel>\n          <AlertDialogAction\n            onClick={onConfirm}\n            className={\n              destructive\n                ? \"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n                : \"\"\n            }\n          >\n            {confirmLabel}\n          </AlertDialogAction>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation } from \"convex/react\";\nimport { Archive, Bookmark, Copy, Trash2, X } from \"lucide-react\";\nimport { useMemo, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Button } from \"@/components/ui/button\";\nimport { ConfirmDialog } from \"./ConfirmDialog\";\n\ninterface BulkActionToolbarProps {\n  selectedCount: number;\n  selectedMessages: Array<{\n    _id: Id<\"messages\">;\n    conversationId: Id<\"conversations\">;\n    content: string;\n    role: \"user\" | \"assistant\" | \"system\";\n  }>;\n  onClearSelection: () => void;\n  onActionComplete: () => void;\n}\n\nexport function BulkActionToolbar({\n  selectedCount,\n  selectedMessages,\n  onClearSelection,\n  onActionComplete,\n}: BulkActionToolbarProps) {\n  const deleteConversations = useMutation(api.conversations.bulkDelete);\n  const archiveConversations = useMutation(api.conversations.bulkArchive);\n  const createBookmarks = useMutation(api.bookmarks.bulkCreate);\n\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const [isArchiving, setIsArchiving] = useState(false);\n  const [isBookmarking, setIsBookmarking] = useState(false);\n\n  // Group messages by conversation\n  const conversationIds = useMemo(\n    () =>\n      Array.from(new Set(selectedMessages.map((m: any) => m.conversationId))),\n    [selectedMessages],\n  );\n\n  const handleDelete = () => {\n    setShowDeleteDialog(true);\n  };\n\n  const confirmDelete = async () => {\n    setIsDeleting(true);\n    try {\n      await deleteConversations({ conversationIds });\n      toast.success(`Deleted ${conversationIds.length} conversation(s)`);\n      onActionComplete();\n      onClearSelection();\n    } catch (error) {\n      toast.error(\"Failed to delete conversations\");\n      console.error(error);\n    } finally {\n      setIsDeleting(false);\n      setShowDeleteDialog(false);\n    }\n  };\n\n  const handleArchive = async () => {\n    setIsArchiving(true);\n    try {\n      await archiveConversations({ conversationIds });\n      toast.success(`Archived ${conversationIds.length} conversation(s)`);\n      onActionComplete();\n      onClearSelection();\n    } catch (error) {\n      toast.error(\"Failed to archive conversations\");\n      console.error(error);\n    } finally {\n      setIsArchiving(false);\n    }\n  };\n\n  const handleBookmark = async () => {\n    setIsBookmarking(true);\n    try {\n      const result = await createBookmarks({\n        messageIds: selectedMessages.map((m: any) => m._id),\n      });\n      toast.success(`Bookmarked ${result.bookmarkedCount} message(s)`);\n      onClearSelection();\n    } catch (error) {\n      toast.error(\"Failed to bookmark messages\");\n      console.error(error);\n    } finally {\n      setIsBookmarking(false);\n    }\n  };\n\n  const handleCopy = () => {\n    const text = selectedMessages\n      .map((m: any) => `[${m.role}] ${m.content}`)\n      .join(\"\\n\\n---\\n\\n\");\n    navigator.clipboard.writeText(text);\n    toast.success(`Copied ${selectedCount} message(s) to clipboard`);\n    onClearSelection();\n  };\n\n  return (\n    <>\n      <div className=\"sticky top-0 z-10 bg-background/95 backdrop-blur border-b p-3 mb-4\">\n        <div className=\"flex items-center gap-4 flex-wrap\">\n          <Badge variant=\"secondary\" className=\"text-sm\">\n            {selectedCount} selected\n          </Badge>\n\n          <div className=\"flex gap-2 flex-wrap\">\n            <Button\n              variant=\"destructive\"\n              size=\"sm\"\n              onClick={handleDelete}\n              disabled={isDeleting}\n            >\n              <Trash2 className=\"w-3.5 h-3.5 mr-1\" />\n              Delete ({conversationIds.length} conv)\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleArchive}\n              disabled={isArchiving}\n            >\n              <Archive className=\"w-3.5 h-3.5 mr-1\" />\n              Archive ({conversationIds.length} conv)\n            </Button>\n\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleBookmark}\n              disabled={isBookmarking}\n            >\n              <Bookmark className=\"w-3.5 h-3.5 mr-1\" />\n              Bookmark\n            </Button>\n\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleCopy}>\n              <Copy className=\"w-3.5 h-3.5 mr-1\" />\n              Copy text\n            </Button>\n          </div>\n\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={onClearSelection}\n            className=\"ml-auto\"\n          >\n            <X className=\"w-3.5 h-3.5 mr-1\" />\n            Clear\n          </Button>\n        </div>\n      </div>\n\n      <ConfirmDialog\n        open={showDeleteDialog}\n        onOpenChange={setShowDeleteDialog}\n        title=\"Delete conversations?\"\n        description={`This will permanently delete ${conversationIds.length} conversation(s) and all their messages. This action cannot be undone.`}\n        onConfirm={confirmDelete}\n        confirmLabel=\"Delete\"\n        destructive\n      />\n    </>\n  );\n}\n","import { Filter, SearchX, Sparkles } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\n\ninterface SearchEmptyStateProps {\n  query: string;\n  hasFilters?: boolean;\n  onClearFilters?: () => void;\n}\n\nexport function SearchEmptyState({\n  query,\n  hasFilters = false,\n  onClearFilters,\n}: SearchEmptyStateProps) {\n  return (\n    <Card className=\"border-dashed border-2 border-border/40 bg-transparent\">\n      <CardContent className=\"flex flex-col items-center justify-center py-12 px-6 text-center\">\n        <div className=\"relative mb-4\">\n          <SearchX className=\"w-16 h-16 text-muted-foreground/50\" />\n          <div className=\"absolute -right-2 -top-2 w-6 h-6 bg-primary/10 rounded-full flex items-center justify-center\">\n            <span className=\"text-xl\">ðŸ˜•</span>\n          </div>\n        </div>\n\n        <h3 className=\"text-lg font-medium mb-2\">No results found</h3>\n        <p className=\"text-muted-foreground mb-6 max-w-md\">\n          No messages match{\" \"}\n          <span className=\"font-mono font-semibold\">\"{query}\"</span>\n        </p>\n\n        <div className=\"space-y-3 w-full max-w-sm\">\n          <div className=\"text-xs text-muted-foreground text-left space-y-2\">\n            <p className=\"font-medium\">Suggestions:</p>\n            <ul className=\"list-disc list-inside space-y-1 ml-2\">\n              <li>Check spelling and try different keywords</li>\n              {!hasFilters && (\n                <li className=\"flex items-center gap-1\">\n                  Try <Sparkles className=\"w-3 h-3 inline text-primary\" />{\" \"}\n                  <span className=\"font-medium\">Hybrid Search</span> in settings\n                </li>\n              )}\n              {hasFilters && <li>Remove filters to broaden search</li>}\n              <li>Search for common words or phrases</li>\n            </ul>\n          </div>\n\n          {hasFilters && onClearFilters && (\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={onClearFilters}\n              className=\"w-full\"\n            >\n              <Filter className=\"w-3 h-3 mr-2\" />\n              Clear Filters\n            </Button>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useQuery } from \"convex/react\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport DOMPurify from \"dompurify\";\nimport { motion } from \"framer-motion\";\nimport { Loader2 } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { useEffect, useRef } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Checkbox } from \"@/components/ui/checkbox\";\nimport { Label } from \"@/components/ui/label\";\nimport { analytics } from \"@/lib/analytics\";\nimport { cn } from \"@/lib/utils\";\nimport { BulkActionToolbar } from \"./BulkActionToolbar\";\nimport { SearchEmptyState } from \"./SearchEmptyState\";\nimport { SearchResultSkeletonList } from \"./SearchResultSkeleton\";\n\ninterface SearchResultsProps {\n  results: Array<{\n    _id: Id<\"messages\">;\n    conversationId: Id<\"conversations\">;\n    role: \"user\" | \"assistant\" | \"system\";\n    content: string;\n    createdAt: number;\n  }>;\n  isLoading: boolean;\n  query: string;\n  hasMore?: boolean;\n  onLoadMore?: () => void;\n  hasFilters?: boolean;\n  onClearFilters?: () => void;\n  // Bulk selection props\n  selectedCount?: number;\n  isSelected?: (id: Id<\"messages\">) => boolean;\n  toggleSelection?: (id: Id<\"messages\">) => void;\n  selectAll?: (ids: Id<\"messages\">[]) => void;\n  clearSelection?: () => void;\n  onRefresh?: () => void;\n}\n\nexport function SearchResults({\n  results,\n  isLoading,\n  query,\n  hasMore = false,\n  onLoadMore,\n  hasFilters = false,\n  onClearFilters,\n  selectedCount = 0,\n  isSelected,\n  toggleSelection,\n  selectAll,\n  clearSelection,\n  onRefresh,\n}: SearchResultsProps) {\n  const loadMoreRef = useRef<HTMLDivElement>(null);\n\n  // Intersection observer for infinite scroll\n  useEffect(() => {\n    if (!loadMoreRef.current || !hasMore || isLoading || !onLoadMore) return;\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          onLoadMore();\n        }\n      },\n      {\n        rootMargin: \"200px\", // Trigger 200px before reaching the element\n      },\n    );\n\n    observer.observe(loadMoreRef.current);\n\n    return () => {\n      observer.disconnect();\n    };\n  }, [hasMore, isLoading, onLoadMore]);\n\n  // Loading state\n  if (isLoading && results.length === 0) {\n    return <SearchResultSkeletonList count={6} />;\n  }\n\n  // No results state\n  if (!isLoading && results.length === 0 && query) {\n    return (\n      <SearchEmptyState\n        query={query}\n        hasFilters={hasFilters}\n        onClearFilters={onClearFilters}\n      />\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Bulk action toolbar */}\n      {selectedCount > 0 &&\n        selectAll &&\n        clearSelection &&\n        isSelected &&\n        toggleSelection &&\n        onRefresh && (\n          <BulkActionToolbar\n            selectedCount={selectedCount}\n            selectedMessages={results.filter((r: any) => isSelected(r._id))}\n            onClearSelection={clearSelection}\n            onActionComplete={onRefresh}\n          />\n        )}\n\n      {/* Select all checkbox */}\n      {results.length > 0 && selectAll && clearSelection && isSelected && (\n        <div className=\"flex items-center gap-3 p-3 bg-muted/30 rounded-lg\">\n          <Checkbox\n            checked={selectedCount > 0 && selectedCount === results.length}\n            onCheckedChange={(checked) => {\n              if (checked) selectAll(results.map((r: any) => r._id));\n              else clearSelection();\n            }}\n          />\n          <Label className=\"text-sm text-muted-foreground cursor-pointer\">\n            Select all {results.length} result{results.length === 1 ? \"\" : \"s\"}\n          </Label>\n        </div>\n      )}\n\n      {/* Results header */}\n      {results.length > 0 && (\n        <div className=\"flex items-center justify-between\">\n          <p className=\"text-sm text-muted-foreground\">\n            Found {results.length} result{results.length === 1 ? \"\" : \"s\"}\n            {hasMore && \" (showing first batch)\"}\n          </p>\n        </div>\n      )}\n\n      {/* Results list with stagger animation */}\n      <div className=\"border border-border/40 rounded-lg overflow-hidden bg-muted/5\">\n        <motion.div\n          className=\"divide-y divide-border/40\"\n          variants={{\n            hidden: { opacity: 0 },\n            show: {\n              opacity: 1,\n              transition: {\n                staggerChildren: 0.02,\n              },\n            },\n          }}\n          initial=\"hidden\"\n          animate=\"show\"\n        >\n          {results.map((result: any, index: number) => (\n            <motion.div\n              key={result._id}\n              variants={{\n                hidden: { opacity: 0, y: 10 },\n                show: {\n                  opacity: 1,\n                  y: 0,\n                  transition: {\n                    duration: 0.2,\n                  },\n                },\n              }}\n            >\n              <SearchResultCard\n                message={result}\n                query={query}\n                index={index}\n                isSelected={isSelected ? isSelected(result._id) : false}\n                onToggleSelection={toggleSelection || (() => {})}\n              />\n            </motion.div>\n          ))}\n        </motion.div>\n      </div>\n\n      {/* Load more trigger & button */}\n      {hasMore && (\n        <div ref={loadMoreRef} className=\"flex justify-center py-8\">\n          {isLoading ? (\n            <div className=\"flex items-center gap-2 text-muted-foreground\">\n              <Loader2 className=\"w-4 h-4 animate-spin\" />\n              <span className=\"text-sm\">Loading more results...</span>\n            </div>\n          ) : (\n            <Button\n              variant=\"outline\"\n              size=\"lg\"\n              onClick={onLoadMore}\n              className=\"min-w-[200px]\"\n            >\n              Load More Results\n            </Button>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nfunction SearchResultCard({\n  message,\n  query,\n  index,\n  isSelected,\n  onToggleSelection,\n}: {\n  message: SearchResultsProps[\"results\"][0];\n  query: string;\n  index: number;\n  isSelected: boolean;\n  onToggleSelection: (id: Id<\"messages\">) => void;\n}) {\n  const conversation = useQuery(\n    // @ts-ignore - Type depth exceeded with complex Convex query (85+ modules)\n    api.conversations.get,\n    message.conversationId\n      ? { conversationId: message.conversationId }\n      : \"skip\",\n  );\n\n  // Highlight query terms in content (sanitized)\n  const highlightedContent = highlightText(message.content, query);\n\n  const handleResultClick = () => {\n    analytics.track(\"search_result_clicked\", {\n      resultPosition: index,\n    });\n  };\n\n  return (\n    <div className=\"relative group/item z-0\">\n      {/* Selected Indicator - Left Bar */}\n      {isSelected && (\n        <div className=\"absolute left-0 top-0 bottom-0 w-[3px] bg-primary z-20\" />\n      )}\n\n      <div\n        className={cn(\n          \"w-full text-left px-4 py-3.5 transition-colors duration-200 border-b border-border/40\",\n          isSelected ? \"bg-accent/50\" : \"hover:bg-muted/30\",\n        )}\n      >\n        <div className=\"flex items-start gap-3\">\n          {/* Checkbox - aligned with content */}\n          <div\n            onClick={(e) => e.preventDefault()}\n            className=\"pt-1 opacity-10 group-hover/item:opacity-100 transition-opacity\" // Hide checkbox by default unless selected? keeping it visible on hover for cleaner look\n          >\n            <Checkbox\n              checked={isSelected}\n              onCheckedChange={() => onToggleSelection(message._id)}\n              className=\"h-4 w-4 border-muted-foreground/40 data-[state=checked]:border-primary\"\n            />\n          </div>\n\n          <Link\n            href={`/chat/${message.conversationId}?messageId=${message._id}#message-${message._id}`}\n            className=\"flex-1 min-w-0 block\"\n            onClick={handleResultClick}\n          >\n            <div className=\"flex items-baseline justify-between gap-2 mb-1\">\n              <div className=\"flex items-center gap-2 min-w-0\">\n                <h3\n                  className={cn(\n                    \"text-[13px] truncate font-medium\",\n                    isSelected ? \"text-foreground\" : \"text-foreground/90\",\n                  )}\n                >\n                  {conversation?.title || \"Untitled Conversation\"}\n                </h3>\n                <span className=\"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] bg-muted/50 text-muted-foreground font-medium uppercase tracking-wider\">\n                  {message.role === \"user\" ? \"You\" : \"AI\"}\n                </span>\n              </div>\n              <span className=\"text-[10px] text-muted-foreground/60 shrink-0 tabular-nums\">\n                {message.createdAt\n                  ? formatDistanceToNow(message.createdAt, { addSuffix: true })\n                  : \"\"}\n              </span>\n            </div>\n\n            <div className=\"pr-8\">\n              <p\n                className={cn(\n                  \"text-[12px] line-clamp-2 leading-relaxed text-muted-foreground/70\",\n                  isSelected ? \"text-muted-foreground/90\" : \"\",\n                )}\n                dangerouslySetInnerHTML={{ __html: highlightedContent }}\n              />\n            </div>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction highlightText(text: string, query: string): string {\n  // Normalize content: trim whitespace and collapse excess newlines\n  // This prevents leading whitespace from causing inconsistent card heights\n  const normalizedText = (text ?? \"\")\n    .trim()\n    .replace(/^\\s+/gm, \"\") // Remove leading whitespace from each line\n    .replace(/\\n{3,}/g, \"\\n\\n\"); // Collapse 3+ newlines to 2\n\n  if (!query?.trim()) return DOMPurify.sanitize(normalizedText);\n\n  const terms = query?.trim().split(/\\s+/) ?? [];\n  let highlighted = normalizedText;\n\n  terms.forEach((term) => {\n    if (term.length < 2) return; // Skip single chars\n    const regex = new RegExp(`(${escapeRegex(term)})`, \"gi\");\n    highlighted = highlighted.replace(\n      regex,\n      '<mark class=\"bg-yellow-200 dark:bg-yellow-900\">$1</mark>',\n    );\n  });\n\n  // Sanitize to prevent XSS while allowing mark tags\n  return DOMPurify.sanitize(highlighted, {\n    ALLOWED_TAGS: [\"mark\"],\n    ALLOWED_ATTR: [\"class\"],\n  });\n}\n\nfunction escapeRegex(str: string): string {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\n","import { useLocalStorage } from \"usehooks-ts\";\n\nconst STORAGE_KEY = \"blah-chat-recent-searches\";\nconst MAX_RECENT_SEARCHES = 6;\n\nexport function useRecentSearches() {\n  const [recentSearches, setRecentSearches] = useLocalStorage<string[]>(\n    STORAGE_KEY,\n    [],\n  );\n\n  const addSearch = (query: string) => {\n    const trimmed = query.trim();\n    if (!trimmed || trimmed.length < 2) return;\n\n    setRecentSearches((prev) => {\n      // Remove if already exists (move to front)\n      const filtered = prev.filter((q) => q !== trimmed);\n      // Add to front, limit to MAX\n      return [trimmed, ...filtered].slice(0, MAX_RECENT_SEARCHES);\n    });\n  };\n\n  const clearRecent = () => {\n    setRecentSearches([]);\n  };\n\n  return {\n    recentSearches,\n    isLoading: false, // useLocalStorage handles hydration\n    addSearch,\n    clearRecent,\n  };\n}\n","\"use client\";\n\nimport { Suspense, useEffect, useRef } from \"react\";\nimport { RecentSearches } from \"@/components/search/RecentSearches\";\nimport { SearchBar } from \"@/components/search/SearchBar\";\nimport { SearchFilters } from \"@/components/search/SearchFilters\";\nimport { SearchHeader } from \"@/components/search/SearchHeader\";\nimport { SearchResults } from \"@/components/search/SearchResults\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { useBulkSelection } from \"@/hooks/useBulkSelection\";\nimport { useRecentSearches } from \"@/hooks/useRecentSearches\";\nimport { useSearchFilters } from \"@/hooks/useSearchFilters\";\nimport {\n  type SearchFilters as SearchFiltersType,\n  useSearchResults,\n} from \"@/hooks/useSearchResults\";\nimport { useSearchState } from \"@/hooks/useSearchState\";\nimport { analytics } from \"@/lib/analytics\";\n\nfunction SearchPageContent() {\n  // URL-persisted state\n  const { filters, setFilter, clearFilters, hasActiveFilters } =\n    useSearchFilters();\n  const { queryParam, setQueryParam, debouncedQuery, page, setPage } =\n    useSearchState();\n\n  // Convert filters to SearchFiltersType format\n  const searchFilters: SearchFiltersType = {\n    conversation: filters.conversationId,\n    from: filters.dateFrom,\n    to: filters.dateTo,\n    type: filters.messageType,\n  };\n\n  // Data fetching\n  const { results, isSearching, hasMore } = useSearchResults(\n    debouncedQuery,\n    searchFilters,\n    page,\n  );\n\n  // Local state\n  const { recentSearches, isLoading, addSearch, clearRecent } =\n    useRecentSearches();\n  const {\n    selectedCount,\n    toggleSelection,\n    selectAll,\n    clearSelection,\n    isSelected,\n  } = useBulkSelection();\n\n  // Clear selection when filter/search changes\n  useEffect(() => {\n    clearSelection();\n  }, [clearSelection]);\n\n  // Reset page when query or filters change\n  useEffect(() => {\n    if (page > 1) {\n      setPage(1);\n    }\n  }, [page, setPage]);\n\n  // Track successful searches\n  const prevQueryRef = useRef<string>(\"\");\n  useEffect(() => {\n    if (\n      debouncedQuery &&\n      results.length > 0 &&\n      !isSearching &&\n      debouncedQuery !== prevQueryRef.current\n    ) {\n      addSearch(debouncedQuery);\n      prevQueryRef.current = debouncedQuery;\n\n      // Track search event\n      analytics.track(\"global_search_performed\", {\n        queryText: debouncedQuery,\n        searchType: \"hybrid\",\n        resultsCount: results.length,\n        filterApplied: hasActiveFilters ? \"active\" : undefined,\n      });\n    }\n  }, [\n    debouncedQuery,\n    results.length,\n    isSearching,\n    addSearch,\n    hasActiveFilters,\n  ]);\n\n  const handleSelectRecentSearch = (query: string) => {\n    setQueryParam(query);\n  };\n\n  const handleLoadMore = () => {\n    setPage(page + 1);\n  };\n\n  const handleClearFilters = () => {\n    clearFilters();\n  };\n\n  const handleActionComplete = () => {\n    // Refresh results and clear selection\n    clearSelection();\n  };\n\n  return (\n    <div className=\"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden\">\n      {/* Background gradients */}\n\n      {/* Fixed header */}\n      <div className=\"flex-none z-50\">\n        <SearchHeader>\n          <div className=\"space-y-4\">\n            <SearchBar\n              value={queryParam}\n              onChange={setQueryParam}\n              isSearching={isSearching}\n              autoFocus\n            />\n            <SearchFilters\n              filters={filters}\n              onClearFilters={handleClearFilters}\n              hasActiveFilters={hasActiveFilters}\n              onFilterChange={setFilter}\n            />\n          </div>\n        </SearchHeader>\n      </div>\n\n      <ScrollArea className=\"flex-1 w-full min-h-0\">\n        <div className=\"container mx-auto max-w-6xl px-4 py-8 relative\">\n          {/* Show recent searches when no query */}\n          {!debouncedQuery && !queryParam && (\n            <RecentSearches\n              recentSearches={recentSearches}\n              isLoading={isLoading}\n              onSelectSearch={handleSelectRecentSearch}\n              onClearRecent={clearRecent}\n            />\n          )}\n\n          {/* Show results when searching */}\n          {(debouncedQuery || queryParam) && (\n            <SearchResults\n              results={results}\n              isLoading={isSearching}\n              query={debouncedQuery}\n              hasMore={hasMore}\n              onLoadMore={handleLoadMore}\n              hasFilters={hasActiveFilters}\n              onClearFilters={handleClearFilters}\n              selectedCount={selectedCount}\n              isSelected={isSelected}\n              toggleSelection={toggleSelection}\n              selectAll={selectAll}\n              clearSelection={clearSelection}\n              onRefresh={handleActionComplete}\n            />\n          )}\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n\nexport default function SearchPage() {\n  return (\n    <Suspense fallback={<SearchPageSkeleton />}>\n      <SearchPageContent />\n    </Suspense>\n  );\n}\n\nfunction SearchPageSkeleton() {\n  return (\n    <div className=\"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden\">\n      <div className=\"flex-none z-50 p-6\">\n        <div className=\"h-12 bg-muted/50 rounded-lg animate-pulse\" />\n      </div>\n    </div>\n  );\n}\n","import type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport {\n  parseAsInteger,\n  parseAsString,\n  parseAsStringLiteral,\n  useQueryStates,\n} from \"nuqs\";\nimport { useMemo } from \"react\";\n\nexport interface SearchFilters {\n  conversationId?: Id<\"conversations\">;\n  dateFrom?: number;\n  dateTo?: number;\n  messageType?: \"user\" | \"assistant\";\n}\n\nexport function useSearchFilters() {\n  const [params, setParams] = useQueryStates({\n    conversation: parseAsString,\n    from: parseAsInteger,\n    to: parseAsInteger,\n    type: parseAsStringLiteral([\"user\", \"assistant\"] as const),\n  });\n\n  const filters = useMemo<SearchFilters>(\n    () => ({\n      conversationId: params.conversation\n        ? (params.conversation as Id<\"conversations\">)\n        : undefined,\n      dateFrom: params.from ?? undefined,\n      dateTo: params.to ?? undefined,\n      messageType: params.type ?? undefined,\n    }),\n    [params],\n  );\n\n  const setFilter = (key: keyof SearchFilters, value: string | null) => {\n    // Map filter keys to URL param keys\n    const paramKey = {\n      conversationId: \"conversation\",\n      dateFrom: \"from\",\n      dateTo: \"to\",\n      messageType: \"type\",\n    }[key] as \"conversation\" | \"from\" | \"to\" | \"type\";\n\n    setParams({ [paramKey]: value });\n  };\n\n  const clearFilters = () => {\n    setParams({ conversation: null, from: null, to: null, type: null });\n  };\n\n  const hasActiveFilters = Object.values(params).some(\n    (value) => value !== null,\n  );\n\n  return {\n    filters,\n    setFilter,\n    clearFilters,\n    hasActiveFilters,\n  };\n}\n","import { Card, CardContent, CardHeader } from \"@/components/ui/card\";\n\nexport function SearchResultSkeleton() {\n  return (\n    <Card className=\"animate-pulse border-border/40 bg-background/50\">\n      <CardHeader>\n        <div className=\"space-y-2\">\n          {/* Conversation badge */}\n          <div className=\"h-5 w-32 bg-muted/50 rounded-full\" />\n\n          {/* Title */}\n          <div className=\"h-6 w-3/4 bg-muted rounded\" />\n\n          {/* Metadata row */}\n          <div className=\"flex gap-4 items-center\">\n            <div className=\"h-3 w-24 bg-muted/70 rounded\" />\n            <div className=\"h-3 w-16 bg-muted/70 rounded\" />\n          </div>\n        </div>\n      </CardHeader>\n      <CardContent>\n        {/* Snippet (2 lines) */}\n        <div className=\"space-y-2\">\n          <div className=\"h-4 w-full bg-muted/70 rounded\" />\n          <div className=\"h-4 w-5/6 bg-muted/70 rounded\" />\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nexport function SearchResultSkeletonList({ count = 6 }: { count?: number }) {\n  return (\n    <div className=\"space-y-4\">\n      {Array.from({ length: count }, (_, i) => (\n        <div\n          key={i}\n          style={{\n            animationDelay: `${i * 75}ms`,\n          }}\n        >\n          <SearchResultSkeleton />\n        </div>\n      ))}\n    </div>\n  );\n}\n","import type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useCallback, useState } from \"react\";\n\nexport function useBulkSelection() {\n  const [selectedIds, setSelectedIds] = useState<Set<Id<\"messages\">>>(\n    new Set(),\n  );\n\n  const toggleSelection = useCallback((id: Id<\"messages\">) => {\n    setSelectedIds((prev) => {\n      const next = new Set(prev);\n      if (next.has(id)) next.delete(id);\n      else next.add(id);\n      return next;\n    });\n  }, []);\n\n  const selectAll = useCallback((ids: Id<\"messages\">[]) => {\n    setSelectedIds(new Set(ids));\n  }, []);\n\n  const clearSelection = useCallback(() => setSelectedIds(new Set()), []);\n\n  const isSelected = useCallback(\n    (id: Id<\"messages\">) => selectedIds.has(id),\n    [selectedIds],\n  );\n\n  return {\n    selectedIds: Array.from(selectedIds),\n    selectedCount: selectedIds.size,\n    toggleSelection,\n    selectAll,\n    clearSelection,\n    isSelected,\n  };\n}\n","import { parseAsInteger, parseAsString, useQueryState } from \"nuqs\";\nimport { useDebounceValue } from \"usehooks-ts\";\n\nexport function useSearchState() {\n  // Search query\n  const [queryParam, setQueryParam] = useQueryState(\n    \"q\",\n    parseAsString.withDefault(\"\"),\n  );\n  const [debouncedQuery] = useDebounceValue(queryParam, 350);\n\n  // Pagination\n  const [page, setPage] = useQueryState(\"page\", parseAsInteger.withDefault(1));\n\n  return {\n    queryParam,\n    setQueryParam,\n    debouncedQuery,\n    page,\n    setPage,\n  };\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  ['path', { d: 'm13.5 8.5-5 5', key: '1cs55j' }],\n  ['path', { d: 'm8.5 8.5 5 5', key: 'a8mexj' }],\n  ['circle', { cx: '11', cy: '11', r: '8', key: '4ej97u' }],\n  ['path', { d: 'm21 21-4.3-4.3', key: '1qie3q' }],\n];\n\n/**\n * @component @name SearchX\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJtMTMuNSA4LjUtNSA1IiAvPgogIDxwYXRoIGQ9Im04LjUgOC41IDUgNSIgLz4KICA8Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4IiAvPgogIDxwYXRoIGQ9Im0yMSAyMS00LjMtNC4zIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/search-x\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst SearchX = createLucideIcon('search-x', __iconNode);\n\nexport default SearchX;\n","import { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useAction } from \"convex/react\";\nimport { useEffect, useState } from \"react\";\n\nexport interface SearchFilters {\n  conversation?: string | null;\n  from?: number | null;\n  to?: number | null;\n  type?: \"user\" | \"assistant\" | null;\n}\n\nexport function useSearchResults(\n  query: string,\n  filters: SearchFilters,\n  page: number,\n) {\n  const [results, setResults] = useState<any[]>([]);\n  const [isSearching, setIsSearching] = useState(false);\n  const [hasMore, setHasMore] = useState(false);\n\n  // @ts-ignore - Type depth exceeded with complex Convex action (85+ modules)\n  const hybridSearch = useAction(api.search.hybridSearch);\n\n  // Execute search when query or filters change\n  useEffect(() => {\n    const trimmedQuery = query?.trim() ?? \"\";\n\n    if (!trimmedQuery) {\n      setResults([]);\n      setIsSearching(false);\n      setHasMore(false);\n      return;\n    }\n\n    const executeSearch = async () => {\n      setIsSearching(true);\n      try {\n        const limit = page * 20;\n        const searchResults = await hybridSearch({\n          query: trimmedQuery,\n          limit,\n          conversationId: filters.conversation as\n            | Id<\"conversations\">\n            | undefined,\n          dateFrom: filters.from ? Number(filters.from) : undefined,\n          dateTo: filters.to ? Number(filters.to) : undefined,\n          messageType: filters.type ?? undefined,\n        });\n\n        setResults(searchResults);\n        setHasMore(searchResults.length === limit);\n      } catch (error) {\n        console.error(\"Search failed:\", error);\n        setResults([]);\n        setHasMore(false);\n      } finally {\n        setIsSearching(false);\n      }\n    };\n\n    executeSearch();\n  }, [\n    query,\n    filters.conversation,\n    filters.from,\n    filters.to,\n    filters.type,\n    page,\n    hybridSearch,\n  ]);\n\n  return {\n    results,\n    isSearching,\n    hasMore,\n  };\n}\n"],"names":[],"mappings":"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","ignoreList":[14]}