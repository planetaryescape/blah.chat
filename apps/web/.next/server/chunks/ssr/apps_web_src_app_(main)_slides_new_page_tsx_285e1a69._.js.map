{"version":3,"sources":["../../../../../../apps/web/src/components/slides/StyleSelector.tsx","../../../../../../apps/web/src/components/slides/TemplateUpload.tsx","../../../../../../apps/web/src/components/ui/collapsible.tsx","../../../../../../apps/web/src/app/%28main%29/slides/new/page.tsx","../../../../../../packages/backend/convex/lib/prompts/operational/slidesOutline.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/file-image.ts","../../../../../../node_modules/.bun/lucide-react%400.555.0%2B83d5fd7b249dbeef/node_modules/lucide-react/src/icons/pen-tool.ts"],"sourcesContent":["\"use client\";\n\nimport { motion } from \"framer-motion\";\nimport { Check, Info } from \"lucide-react\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\n\nexport interface StyleOption {\n  id: string;\n  name: string;\n  description: string;\n  imageSrc: string; // Placeholder for now, or use a component/icon\n  category: \"illustrated\" | \"photorealistic\" | \"abstract\" | \"minimal\";\n}\n\nconst STYLES: StyleOption[] = [\n  {\n    id: \"minimalist-line\",\n    name: \"Minimalist Line\",\n    description:\n      \"Clean, elegant line art with subtle colors. Professional and modern.\",\n    category: \"minimal\",\n    imageSrc: \"/styles/minimal-line.jpg\",\n  },\n  {\n    id: \"corporate-vector\",\n    name: \"Corporate Vector\",\n    description:\n      \"Flat, professional vector illustrations suitable for business decks.\",\n    category: \"illustrated\",\n    imageSrc: \"/styles/corporate-vector.jpg\",\n  },\n  {\n    id: \"photorealistic\",\n    name: \"Photorealistic\",\n    description: \"High-quality photographic imagery for impactful visuals.\",\n    category: \"photorealistic\",\n    imageSrc: \"/styles/photo.jpg\",\n  },\n  {\n    id: \"collage-art\",\n    name: \"Collage Art\",\n    description: \"Creative mixed-media collage style. Unique and artistic.\",\n    category: \"abstract\",\n    imageSrc: \"/styles/collage.jpg\",\n  },\n  {\n    id: \"3d-render\",\n    name: \"3D Render\",\n    description: \"Soft, modern 3D shapes and objects.\",\n    category: \"illustrated\",\n    imageSrc: \"/styles/3d.jpg\",\n  },\n  {\n    id: \"cyberpunk\",\n    name: \"Cyberpunk\",\n    description: \"Neon, high-contrast, futuristic tech aesthetic.\",\n    category: \"abstract\",\n    imageSrc: \"/styles/cyberpunk.jpg\",\n  },\n];\n\ninterface StyleSelectorProps {\n  selectedStyleId: string;\n  onSelect: (styleId: string) => void;\n  className?: string;\n}\n\nexport function StyleSelector({\n  selectedStyleId,\n  onSelect,\n  className,\n}: StyleSelectorProps) {\n  return (\n    <div className={cn(\"grid grid-cols-2 md:grid-cols-3 gap-3\", className)}>\n      {STYLES.map((style) => {\n        const isSelected = selectedStyleId === style.id;\n        return (\n          <motion.button\n            key={style.id}\n            type=\"button\"\n            onClick={() => onSelect(style.id)}\n            whileHover={{ scale: 1.02 }}\n            whileTap={{ scale: 0.98 }}\n            className={cn(\n              \"group relative flex flex-col items-start text-left p-3 rounded-xl border-2 transition-all overflow-hidden h-full\",\n              isSelected\n                ? \"border-primary bg-primary/5\"\n                : \"border-muted hover:border-primary/50 hover:bg-muted/30\",\n            )}\n          >\n            {/* Visual Preview Placeholder - In real app, use next/image or dynamic preview */}\n            <div\n              className={cn(\n                \"w-full aspect-[16/9] rounded-lg mb-3 overflow-hidden bg-muted/50 flex items-center justify-center relative\",\n                isSelected ? \"ring-2 ring-primary/20\" : \"\",\n              )}\n            >\n              {/* Gradients to simulate style */}\n              <div\n                className={cn(\n                  \"absolute inset-0 opacity-50\",\n                  style.category === \"minimal\" &&\n                    \"bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-800 dark:to-gray-900\",\n                  style.category === \"illustrated\" &&\n                    \"bg-gradient-to-br from-blue-100 to-indigo-200 dark:from-blue-900 dark:to-indigo-800\",\n                  style.category === \"photorealistic\" &&\n                    \"bg-gradient-to-br from-amber-100 to-orange-200 dark:from-amber-900 dark:to-orange-800\",\n                  style.category === \"abstract\" &&\n                    \"bg-gradient-to-br from-purple-100 to-pink-200 dark:from-purple-900 dark:to-pink-800\",\n                )}\n              />\n\n              <span className=\"text-xs font-semibold opacity-50 z-10\">\n                {style.category}\n              </span>\n            </div>\n\n            <div className=\"flex justify-between items-start w-full\">\n              <div>\n                <span className=\"font-semibold text-sm block mb-1\">\n                  {style.name}\n                </span>\n                <span className=\"text-xs text-muted-foreground leading-tight line-clamp-2\">\n                  {style.description}\n                </span>\n              </div>\n              {isSelected && (\n                <div className=\"bg-primary text-primary-foreground rounded-full p-0.5 ml-2 mt-0.5 shrink-0\">\n                  <Check className=\"w-3 h-3\" />\n                </div>\n              )}\n            </div>\n\n            {/* Hover Info */}\n            <TooltipProvider>\n              <Tooltip>\n                <TooltipTrigger asChild>\n                  <div className=\"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity\">\n                    <Info className=\"w-4 h-4 text-muted-foreground\" />\n                  </div>\n                </TooltipTrigger>\n                <TooltipContent>\n                  <p className=\"max-w-xs\">{style.description}</p>\n                </TooltipContent>\n              </Tooltip>\n            </TooltipProvider>\n          </motion.button>\n        );\n      })}\n    </div>\n  );\n}\n","\"use client\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport {\n  Check,\n  FileImage,\n  FileText,\n  Loader2,\n  Palette,\n  Trash2,\n  Upload,\n  X,\n} from \"lucide-react\";\nimport { useCallback, useState } from \"react\";\nimport { useDropzone } from \"react-dropzone\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n} from \"@/components/ui/card\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { cn } from \"@/lib/utils\";\n\ninterface TemplateUploadProps {\n  onTemplateSelect: (templateId: Id<\"designTemplates\"> | null) => void;\n  selectedTemplateId?: Id<\"designTemplates\"> | null;\n  disabled?: boolean;\n}\n\ninterface SourceFile {\n  storageId: Id<\"_storage\">;\n  name: string;\n  mimeType: string;\n  type: \"pdf\" | \"pptx\" | \"image\";\n}\n\nconst ACCEPTED_TYPES = {\n  \"application/pdf\": [\".pdf\"],\n  \"application/vnd.openxmlformats-officedocument.presentationml.presentation\": [\n    \".pptx\",\n  ],\n  \"image/png\": [\".png\"],\n  \"image/jpeg\": [\".jpg\", \".jpeg\"],\n  \"image/webp\": [\".webp\"],\n};\n\nfunction getFileType(mimeType: string): \"pdf\" | \"pptx\" | \"image\" {\n  if (mimeType === \"application/pdf\") return \"pdf\";\n  if (mimeType.includes(\"presentationml\")) return \"pptx\";\n  return \"image\";\n}\n\nfunction ColorSwatch({ color, label }: { color: string; label: string }) {\n  return (\n    <div className=\"flex items-center gap-2\">\n      <div\n        className=\"h-5 w-5 rounded border\"\n        style={{ backgroundColor: color }}\n      />\n      <span className=\"text-xs text-muted-foreground\">{label}</span>\n    </div>\n  );\n}\n\nexport function TemplateUpload({\n  onTemplateSelect,\n  selectedTemplateId,\n  disabled,\n}: TemplateUploadProps) {\n  const [uploading, setUploading] = useState(false);\n  const [pendingFiles, setPendingFiles] = useState<SourceFile[]>([]);\n  const [templateName, setTemplateName] = useState(\"\");\n  const [showNewUpload, setShowNewUpload] = useState(false);\n\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const generateUploadUrl = useMutation(api.designTemplates.generateUploadUrl);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const createTemplate = useMutation(api.designTemplates.create);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const deleteTemplate = useMutation(api.designTemplates.remove);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const templates = useQuery(api.designTemplates.listByUser, {});\n\n  const onDrop = useCallback(\n    async (acceptedFiles: File[]) => {\n      if (disabled) return;\n      setUploading(true);\n\n      try {\n        const newFiles: SourceFile[] = [];\n\n        for (const file of acceptedFiles) {\n          if (file.size > 20 * 1024 * 1024) {\n            toast.error(`${file.name} exceeds 20MB limit`);\n            continue;\n          }\n\n          const uploadUrl = await generateUploadUrl();\n          const result = await fetch(uploadUrl, {\n            method: \"POST\",\n            headers: { \"Content-Type\": file.type },\n            body: file,\n          });\n\n          const { storageId } = await result.json();\n          newFiles.push({\n            storageId,\n            name: file.name,\n            mimeType: file.type,\n            type: getFileType(file.type),\n          });\n        }\n\n        setPendingFiles((prev) => [...prev, ...newFiles]);\n        if (!templateName && newFiles.length > 0) {\n          const firstName = newFiles[0].name.replace(/\\.[^/.]+$/, \"\");\n          setTemplateName(firstName);\n        }\n      } catch (error) {\n        console.error(\"Upload error:\", error);\n        toast.error(\"Failed to upload file\");\n      } finally {\n        setUploading(false);\n      }\n    },\n    [disabled, generateUploadUrl, templateName],\n  );\n\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    onDrop,\n    accept: ACCEPTED_TYPES,\n    disabled: disabled || uploading,\n  });\n\n  const handleSaveTemplate = async () => {\n    if (!templateName.trim() || pendingFiles.length === 0) {\n      toast.error(\"Please provide a name and upload at least one file\");\n      return;\n    }\n\n    try {\n      setUploading(true);\n      const templateId = await createTemplate({\n        name: templateName.trim(),\n        sourceFiles: pendingFiles,\n      });\n\n      toast.success(\"Template uploaded! Analyzing brand...\");\n      onTemplateSelect(templateId);\n      setPendingFiles([]);\n      setTemplateName(\"\");\n      setShowNewUpload(false);\n    } catch (error) {\n      console.error(\"Create template error:\", error);\n      toast.error(\"Failed to create template\");\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleDeleteTemplate = async (templateId: Id<\"designTemplates\">) => {\n    try {\n      await deleteTemplate({ templateId });\n      if (selectedTemplateId === templateId) {\n        onTemplateSelect(null);\n      }\n      toast.success(\"Template deleted\");\n    } catch (error) {\n      console.error(\"Delete error:\", error);\n      toast.error(\"Failed to delete template\");\n    }\n  };\n\n  const removePendingFile = (index: number) => {\n    setPendingFiles((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  // Render saved templates list\n  const completedTemplates =\n    templates?.filter((t) => t.status === \"complete\") ?? [];\n  const processingTemplates =\n    templates?.filter(\n      (t) => t.status === \"processing\" || t.status === \"pending\",\n    ) ?? [];\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Saved Templates */}\n      {completedTemplates.length > 0 && !showNewUpload && (\n        <div className=\"space-y-2\">\n          <Label>Saved Templates</Label>\n          <div className=\"grid gap-2\">\n            {completedTemplates.map((template) => (\n              <div\n                key={template._id}\n                className={cn(\n                  \"flex items-center justify-between rounded-lg border p-3 cursor-pointer transition-colors\",\n                  selectedTemplateId === template._id\n                    ? \"border-primary bg-primary/5\"\n                    : \"hover:bg-muted/50\",\n                )}\n                onClick={() =>\n                  !disabled &&\n                  onTemplateSelect(\n                    selectedTemplateId === template._id ? null : template._id,\n                  )\n                }\n              >\n                <div className=\"flex items-center gap-3\">\n                  <Palette className=\"h-5 w-5 text-muted-foreground\" />\n                  <div>\n                    <p className=\"font-medium text-sm\">{template.name}</p>\n                    {template.extractedDesign && (\n                      <div className=\"flex gap-3 mt-1\">\n                        <ColorSwatch\n                          color={template.extractedDesign.colors.primary}\n                          label=\"Primary\"\n                        />\n                        <ColorSwatch\n                          color={template.extractedDesign.colors.secondary}\n                          label=\"Secondary\"\n                        />\n                      </div>\n                    )}\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  {selectedTemplateId === template._id && (\n                    <Check className=\"h-4 w-4 text-primary\" />\n                  )}\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"h-8 w-8\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleDeleteTemplate(template._id);\n                    }}\n                    disabled={disabled}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Processing Templates */}\n      {processingTemplates.length > 0 && (\n        <div className=\"space-y-2\">\n          <Label>Processing</Label>\n          {processingTemplates.map((template) => (\n            <div\n              key={template._id}\n              className=\"flex items-center gap-2 rounded-lg border p-3 bg-muted/30\"\n            >\n              <Loader2 className=\"h-4 w-4 animate-spin\" />\n              <span className=\"text-sm\">{template.name}</span>\n              <span className=\"text-xs text-muted-foreground\">\n                Analyzing brand...\n              </span>\n            </div>\n          ))}\n        </div>\n      )}\n\n      {/* Upload New Template */}\n      {(showNewUpload || completedTemplates.length === 0) && (\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-base\">\n              {completedTemplates.length > 0\n                ? \"Upload New Template\"\n                : \"Brand Template\"}\n            </CardTitle>\n            <CardDescription>\n              Upload your organization's slide template (PDF, PPTX, or images)\n            </CardDescription>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {/* Name input */}\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"template-name\">Template Name</Label>\n              <Input\n                id=\"template-name\"\n                placeholder=\"e.g., Acme Corp Brand\"\n                value={templateName}\n                onChange={(e) => setTemplateName(e.target.value)}\n                disabled={disabled || uploading}\n              />\n            </div>\n\n            {/* Dropzone */}\n            <div\n              {...getRootProps()}\n              className={cn(\n                \"border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors\",\n                isDragActive\n                  ? \"border-primary bg-primary/5\"\n                  : \"border-muted-foreground/25 hover:border-muted-foreground/50\",\n                (disabled || uploading) && \"opacity-50 cursor-not-allowed\",\n              )}\n            >\n              <input {...getInputProps()} />\n              {uploading ? (\n                <div className=\"flex flex-col items-center gap-2\">\n                  <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n                  <p className=\"text-sm text-muted-foreground\">Uploading...</p>\n                </div>\n              ) : (\n                <div className=\"flex flex-col items-center gap-2\">\n                  <Upload className=\"h-8 w-8 text-muted-foreground\" />\n                  <p className=\"text-sm\">\n                    {isDragActive\n                      ? \"Drop files here\"\n                      : \"Drag & drop or click to upload\"}\n                  </p>\n                  <p className=\"text-xs text-muted-foreground\">\n                    PDF, PPTX, PNG, JPG (max 20MB)\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Pending files */}\n            {pendingFiles.length > 0 && (\n              <div className=\"space-y-2\">\n                <Label>Uploaded Files</Label>\n                {pendingFiles.map((file, i) => (\n                  <div\n                    key={i}\n                    className=\"flex items-center justify-between rounded border p-2\"\n                  >\n                    <div className=\"flex items-center gap-2\">\n                      {file.type === \"image\" ? (\n                        <FileImage className=\"h-4 w-4\" />\n                      ) : (\n                        <FileText className=\"h-4 w-4\" />\n                      )}\n                      <span className=\"text-sm truncate max-w-[200px]\">\n                        {file.name}\n                      </span>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"icon\"\n                      className=\"h-6 w-6\"\n                      onClick={() => removePendingFile(i)}\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n\n            {/* Save button */}\n            {pendingFiles.length > 0 && (\n              <Button\n                onClick={handleSaveTemplate}\n                disabled={!templateName.trim() || uploading || disabled}\n                className=\"w-full\"\n              >\n                {uploading ? (\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                ) : null}\n                Save & Analyze Template\n              </Button>\n            )}\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Toggle to show upload when templates exist */}\n      {completedTemplates.length > 0 && !showNewUpload && (\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowNewUpload(true)}\n          disabled={disabled}\n          className=\"w-full\"\n        >\n          <Upload className=\"mr-2 h-4 w-4\" />\n          Upload New Template\n        </Button>\n      )}\n\n      {showNewUpload && completedTemplates.length > 0 && (\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => {\n            setShowNewUpload(false);\n            setPendingFiles([]);\n            setTemplateName(\"\");\n          }}\n          className=\"w-full\"\n        >\n          Cancel\n        </Button>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\";\n\nfunction Collapsible({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.Root>) {\n  return <CollapsiblePrimitive.Root data-slot=\"collapsible\" {...props} />;\n}\n\nfunction CollapsibleTrigger({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleTrigger>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleTrigger\n      data-slot=\"collapsible-trigger\"\n      {...props}\n    />\n  );\n}\n\nfunction CollapsibleContent({\n  ...props\n}: React.ComponentProps<typeof CollapsiblePrimitive.CollapsibleContent>) {\n  return (\n    <CollapsiblePrimitive.CollapsibleContent\n      data-slot=\"collapsible-content\"\n      {...props}\n    />\n  );\n}\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent };\n","\"use client\";\n\nexport const dynamic = \"force-dynamic\";\n\nimport { api } from \"@blah-chat/backend/convex/_generated/api\";\nimport type { Id } from \"@blah-chat/backend/convex/_generated/dataModel\";\nimport {\n  getOutlineParseSystemPrompt,\n  getOutlineSystemPrompt,\n} from \"@blah-chat/backend/convex/lib/prompts/operational/slidesOutline\";\nimport { useAction, useMutation, useQuery } from \"convex/react\";\nimport { AnimatePresence, motion } from \"framer-motion\";\nimport {\n  CheckCircle2,\n  ChevronDown,\n  ChevronLeft,\n  ChevronRight,\n  FileIcon,\n  Grid,\n  Loader2,\n  Mic,\n  Monitor,\n  Palette,\n  PenTool,\n  Smartphone,\n  Sparkles,\n  Upload,\n} from \"lucide-react\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  parseAsBoolean,\n  parseAsString,\n  parseAsStringLiteral,\n  useQueryState,\n} from \"nuqs\";\nimport { Suspense, useCallback, useEffect, useRef, useState } from \"react\";\nimport { toast } from \"sonner\";\nimport { DisabledFeaturePage } from \"@/components/DisabledFeaturePage\";\nimport { FeatureLoadingScreen } from \"@/components/FeatureLoadingScreen\";\nimport { StyleSelector } from \"@/components/slides/StyleSelector\";\nimport { TemplateUpload } from \"@/components/slides/TemplateUpload\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\nimport { Input } from \"@/components/ui/input\";\nimport { Label } from \"@/components/ui/label\";\nimport { RadioGroup, RadioGroupItem } from \"@/components/ui/radio-group\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\nimport { Switch } from \"@/components/ui/switch\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useFeatureToggles } from \"@/hooks/useFeatureToggles\";\nimport { cn } from \"@/lib/utils\";\n\nexport default function NewSlidesPage() {\n  return (\n    <Suspense\n      fallback={\n        <div className=\"flex items-center justify-center h-[calc(100vh-4rem)]\">\n          <Loader2 className=\"h-8 w-8 animate-spin text-muted-foreground\" />\n        </div>\n      }\n    >\n      <NewSlidesContent />\n    </Suspense>\n  );\n}\n\nfunction NewSlidesContent() {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [title, setTitle] = useState(\"\");\n  const [input, setInput] = useState(\"\");\n  const [uploadedFileName, setUploadedFileName] = useState<string | null>(null);\n  const [selectedTemplateId, setSelectedTemplateId] =\n    useState<Id<\"designTemplates\"> | null>(null);\n  const [templateSectionOpen, setTemplateSectionOpen] = useState(false);\n  const [uploadingDocument, setUploadingDocument] = useState(false);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // URL-persisted wizard state (enables deep linking)\n  type Step = \"format\" | \"content\" | \"style\";\n  const [currentStep, setCurrentStep] = useQueryState(\n    \"step\",\n    parseAsStringLiteral([\"format\", \"content\", \"style\"] as const).withDefault(\n      \"format\",\n    ),\n  );\n  const [aspectRatio, setAspectRatio] = useQueryState(\n    \"ratio\",\n    parseAsStringLiteral([\"16:9\", \"1:1\", \"9:16\"] as const).withDefault(\"16:9\"),\n  );\n  const [slideStyle, setSlideStyle] = useQueryState(\n    \"style\",\n    parseAsStringLiteral([\"wordy\", \"illustrative\"] as const).withDefault(\n      \"illustrative\",\n    ),\n  );\n  const [inputMode, setInputMode] = useQueryState(\n    \"mode\",\n    parseAsStringLiteral([\"prompt\", \"outline\"] as const).withDefault(\"prompt\"),\n  );\n  const [imageStyle, setImageStyle] = useQueryState(\n    \"imageStyle\",\n    parseAsString.withDefault(\"minimalist-line\"),\n  );\n  const [enhanceOutline, setEnhanceOutline] = useQueryState(\n    \"enhance\",\n    parseAsBoolean.withDefault(true),\n  );\n  const [enableGrounding, setEnableGrounding] = useQueryState(\n    \"grounding\",\n    parseAsBoolean.withDefault(false),\n  );\n\n  const { showSlides, isLoading } = useFeatureToggles();\n\n  // Source content from chat (for \"Create Presentation from...\" flow)\n  const [sourceMessageId] = useQueryState(\"messageId\", parseAsString);\n  const [sourceConversationId] = useQueryState(\"conversationId\", parseAsString);\n\n  // Fetch conversation messages if source provided\n  // @ts-ignore - Type depth exceeded\n  const sourceMessages = useQuery(\n    api.messages.list,\n    sourceConversationId\n      ? { conversationId: sourceConversationId as Id<\"conversations\"> }\n      : \"skip\",\n  );\n\n  // Auto-populate from chat source\n  useEffect(() => {\n    if (!sourceMessages || input) return;\n\n    // If messageId specified, use just that message\n    if (sourceMessageId) {\n      const message = sourceMessages.find(\n        (m: { _id: string }) => m._id === sourceMessageId,\n      );\n      if (message?.content) {\n        setInput(message.content);\n      }\n      return;\n    }\n\n    // Otherwise format full conversation\n    const formatted = sourceMessages\n      .filter(\n        (m: { status: string; content?: string }) =>\n          m.status === \"complete\" && m.content,\n      )\n      .map(\n        (m: { role: string; content: string }) =>\n          `**${m.role === \"user\" ? \"User\" : \"Assistant\"}:**\\n${m.content}`,\n      )\n      .join(\"\\n\\n---\\n\\n\");\n\n    if (formatted) {\n      setInput(formatted);\n    }\n  }, [sourceMessages, sourceMessageId, input]);\n\n  // Format-specific content density labels\n  const contentDensityLabels = {\n    \"16:9\": {\n      illustrative: {\n        label: \"Speaker Assist\",\n        desc: \"Visual slides, detailed notes\",\n        Icon: Mic,\n      },\n      wordy: {\n        label: \"Self-Contained\",\n        desc: \"Detailed slides, standalone\",\n        Icon: FileIcon,\n      },\n    },\n    \"1:1\": {\n      illustrative: {\n        label: \"Visual-First\",\n        desc: \"Bold visuals, minimal text\",\n        Icon: Sparkles,\n      },\n      wordy: {\n        label: \"Text-Rich\",\n        desc: \"Readable cards, more context\",\n        Icon: FileIcon,\n      },\n    },\n    \"9:16\": {\n      illustrative: {\n        label: \"Visual-First\",\n        desc: \"Visual storytelling\",\n        Icon: Sparkles,\n      },\n      wordy: { label: \"Text-Rich\", desc: \"Caption-forward\", Icon: FileIcon },\n    },\n  } as const;\n  const densityConfig = contentDensityLabels[aspectRatio];\n\n  // Convex mutations and actions (must be declared before callbacks that use them)\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const createPresentation = useMutation(api.presentations.create);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const createConversation = useMutation(api.conversations.create);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const linkConversation = useMutation(api.presentations.linkConversation);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const sendMessage = useMutation(api.chat.sendMessage);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const updateStatus = useMutation(api.presentations.updateStatus);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const generateUploadUrl = useMutation(api.files.generateUploadUrl);\n  // @ts-ignore - Type depth exceeded with 94+ Convex modules\n  const extractDocument = useAction(\n    api.tools.fileDocument.extractDocumentForSlides,\n  );\n\n  // Handle document upload\n  const handleFileUpload = useCallback(\n    async (event: React.ChangeEvent<HTMLInputElement>) => {\n      const file = event.target.files?.[0];\n      if (!file) return;\n\n      const allowedTypes = [\n        \"text/plain\",\n        \"text/markdown\",\n        \"application/pdf\",\n        \"application/vnd.openxmlformats-officedocument.wordprocessingml.document\",\n      ];\n\n      if (!allowedTypes.includes(file.type)) {\n        toast.error(\"Unsupported file type. Please use TXT, MD, PDF, or DOCX.\");\n        return;\n      }\n\n      // TXT/MD: read directly\n      if (file.type === \"text/plain\" || file.type === \"text/markdown\") {\n        const text = await file.text();\n        setInput(text);\n        setUploadedFileName(file.name);\n        toast.success(`Loaded ${file.name}`);\n        return;\n      }\n\n      // PDF/DOCX: upload to storage, extract via backend\n      setUploadingDocument(true);\n      try {\n        const uploadUrl = await generateUploadUrl();\n        const response = await fetch(uploadUrl, {\n          method: \"POST\",\n          headers: { \"Content-Type\": file.type },\n          body: file,\n        });\n        const { storageId } = await response.json();\n\n        const result = await extractDocument({\n          storageId,\n          fileName: file.name,\n          mimeType: file.type,\n        });\n\n        if (result.success && result.text) {\n          setInput(result.text);\n          setUploadedFileName(file.name);\n          toast.success(`Extracted content from ${file.name}`);\n        } else {\n          toast.error(result.error || \"Failed to process document\");\n        }\n      } catch (error) {\n        toast.error(\"Failed to process document\");\n        console.error(error);\n      } finally {\n        setUploadingDocument(false);\n      }\n    },\n    [generateUploadUrl, extractDocument],\n  );\n\n  if (isLoading) {\n    return <FeatureLoadingScreen />;\n  }\n\n  if (!showSlides) {\n    return <DisabledFeaturePage featureName=\"Slides\" settingKey=\"showSlides\" />;\n  }\n\n  const handleCreate = async () => {\n    if (!input.trim()) return;\n\n    setLoading(true);\n    try {\n      const presentationTitle = title.trim() || \"Untitled Presentation\";\n\n      const presentationId = await createPresentation({\n        title: presentationTitle,\n        slideStyle,\n        templateId: selectedTemplateId ?? undefined,\n        aspectRatio,\n        imageStyle,\n      });\n\n      let systemPrompt: string;\n      let userMessage: string;\n\n      // Use component-level densityConfig for styleLabel\n      const styleLabel =\n        slideStyle === \"illustrative\"\n          ? `illustrative (${densityConfig.illustrative.label})`\n          : `wordy (${densityConfig.wordy.label})`;\n\n      const formatLabel =\n        aspectRatio === \"16:9\"\n          ? \"Presentation (16:9)\"\n          : aspectRatio === \"1:1\"\n            ? \"Social (Square)\"\n            : \"Social (Vertical)\";\n\n      // Get format-specific content type label\n      const contentTypeLabel =\n        aspectRatio === \"16:9\"\n          ? \"presentation\"\n          : aspectRatio === \"1:1\"\n            ? \"carousel\"\n            : \"story\";\n\n      // Include title in prompt if user provided one\n      const titleInstruction = title.trim()\n        ? `\\nPresentation Title: \"${title.trim()}\" (use this exact title)\\n`\n        : \"\";\n\n      if (inputMode === \"prompt\") {\n        // Creative freedom - generate from scratch\n        systemPrompt = getOutlineSystemPrompt(aspectRatio);\n        userMessage = `Slide Style: ${styleLabel}\\nFormat: ${formatLabel}${titleInstruction}\\nCreate a ${contentTypeLabel} about:\\n${input.trim()}`;\n      } else if (enhanceOutline) {\n        // Enhance but respect user's structure\n        systemPrompt = getOutlineParseSystemPrompt(aspectRatio);\n        userMessage = `Slide Style: ${styleLabel}\\nFormat: ${formatLabel}${titleInstruction}\\nEnhance this ${contentTypeLabel} outline. Improve the content but keep the user's structure:\\n${input.trim()}`;\n      } else {\n        // Strict parse - preserve user's structure exactly\n        systemPrompt = getOutlineParseSystemPrompt(aspectRatio);\n        userMessage = `Slide Style: ${styleLabel}\\nFormat: ${formatLabel}${titleInstruction}\\nFormat this outline into structured slides. Preserve the user's structure EXACTLY:\\n${input.trim()}`;\n      }\n\n      const conversationId = await createConversation({\n        model: \"google:gemini-3-flash\",\n        title: \"New Chat\", // Triggers auto-title after first AI response\n        systemPrompt,\n        isPresentation: true,\n        enableGrounding,\n      });\n\n      await linkConversation({\n        presentationId,\n        conversationId,\n      });\n\n      await updateStatus({\n        presentationId,\n        status: \"outline_generating\",\n      });\n\n      await sendMessage({\n        conversationId,\n        content: userMessage,\n        modelId: \"google:gemini-3-flash\",\n      });\n\n      router.push(`/slides/${presentationId}/outline`);\n    } catch (error) {\n      console.error(\"Error creating presentation:\", error);\n      const message = error instanceof Error ? error.message : \"\";\n      if (message.includes(\"Daily presentation limit\")) {\n        toast.error(message);\n      } else {\n        toast.error(\"Failed to create presentation. Please try again.\");\n      }\n      setLoading(false);\n    }\n  };\n\n  const stepOrder: Step[] = [\"format\", \"content\", \"style\"];\n  const currentStepIndex = stepOrder.indexOf(currentStep);\n\n  return (\n    <ScrollArea className=\"h-[calc(100vh-4rem)]\">\n      <div className=\"bg-background text-foreground animate-in fade-in duration-500 pb-32\">\n        <div className=\"container max-w-3xl mx-auto py-12 px-4 sm:px-6\">\n          <div className=\"mb-8 text-center space-y-2\">\n            <h1 className=\"text-3xl font-bold tracking-tight\">\n              Create Presentation\n            </h1>\n            <p className=\"text-muted-foreground\">\n              Turn your ideas into professional slides in seconds with AI.\n            </p>\n          </div>\n\n          {/* Step Indicator */}\n          <div className=\"flex items-center justify-center gap-2 mb-8\">\n            {[\n              { id: \"format\" as Step, label: \"Format\" },\n              { id: \"content\" as Step, label: \"Content\" },\n              { id: \"style\" as Step, label: \"Style\" },\n            ].map((step, idx) => {\n              const stepIdx = stepOrder.indexOf(step.id);\n              const isComplete = stepIdx < currentStepIndex;\n              const isCurrent = step.id === currentStep;\n\n              return (\n                <div key={step.id} className=\"flex items-center gap-2\">\n                  {idx > 0 && (\n                    <div\n                      className={cn(\n                        \"w-8 h-0.5\",\n                        isComplete ? \"bg-primary\" : \"bg-muted\",\n                      )}\n                    />\n                  )}\n                  <button\n                    type=\"button\"\n                    onClick={() =>\n                      stepIdx <= currentStepIndex && setCurrentStep(step.id)\n                    }\n                    disabled={stepIdx > currentStepIndex}\n                    className={cn(\n                      \"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm transition-all\",\n                      isCurrent && \"bg-primary text-primary-foreground\",\n                      isComplete &&\n                        \"bg-primary/20 text-primary cursor-pointer hover:bg-primary/30\",\n                      !isCurrent &&\n                        !isComplete &&\n                        \"bg-muted text-muted-foreground cursor-not-allowed\",\n                    )}\n                  >\n                    {isComplete ? (\n                      <CheckCircle2 className=\"h-4 w-4\" />\n                    ) : (\n                      <span className=\"w-5 h-5 rounded-full border-2 flex items-center justify-center text-xs font-medium\">\n                        {idx + 1}\n                      </span>\n                    )}\n                    <span className=\"hidden sm:inline\">{step.label}</span>\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Step 1: Format */}\n            {currentStep === \"format\" && (\n              <motion.div\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"bg-card border rounded-xl shadow-sm p-6 sm:p-8\">\n                  <Label className=\"text-base font-semibold mb-4 block\">\n                    What format do you need?\n                  </Label>\n                  <div className=\"grid grid-cols-3 gap-4\">\n                    {[\n                      {\n                        id: \"16:9\",\n                        label: \"Presentation\",\n                        icon: Monitor,\n                        desc: \"Standard 16:9\",\n                      },\n                      {\n                        id: \"1:1\",\n                        label: \"Social Post\",\n                        icon: Grid,\n                        desc: \"Square 1:1\",\n                      },\n                      {\n                        id: \"9:16\",\n                        label: \"Story\",\n                        icon: Smartphone,\n                        desc: \"Vertical 9:16\",\n                      },\n                    ].map((format) => (\n                      <button\n                        key={format.id}\n                        type=\"button\"\n                        onClick={() => setAspectRatio(format.id as any)}\n                        className={cn(\n                          \"flex flex-col items-center justify-center p-4 sm:p-6 rounded-xl border-2 transition-all outline-none\",\n                          aspectRatio === format.id\n                            ? \"border-primary bg-primary/5 text-primary\"\n                            : \"border-muted hover:border-primary/20 hover:bg-muted/30 text-muted-foreground\",\n                        )}\n                      >\n                        <format.icon className=\"h-8 w-8 mb-3\" />\n                        <span className=\"text-sm font-semibold\">\n                          {format.label}\n                        </span>\n                        <span className=\"text-xs opacity-70 mt-1\">\n                          {format.desc}\n                        </span>\n                      </button>\n                    ))}\n                  </div>\n                </div>\n\n                <div className=\"flex justify-end\">\n                  <Button onClick={() => setCurrentStep(\"content\")}>\n                    Continue\n                    <ChevronRight className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 2: Content */}\n            {currentStep === \"content\" && (\n              <motion.div\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"space-y-6\"\n              >\n                <div className=\"bg-card border rounded-xl shadow-sm overflow-hidden p-6 sm:p-8 space-y-6\">\n                  {/* Input Mode Radio */}\n                  <div className=\"flex justify-center\">\n                    <RadioGroup\n                      value={inputMode}\n                      onValueChange={(v) =>\n                        setInputMode(v as \"prompt\" | \"outline\")\n                      }\n                      className=\"flex items-center gap-6\"\n                    >\n                      <div className=\"flex items-center space-x-2\">\n                        <RadioGroupItem value=\"prompt\" id=\"mode-prompt\" />\n                        <Label\n                          htmlFor=\"mode-prompt\"\n                          className=\"cursor-pointer font-medium\"\n                        >\n                          Generate from Idea\n                        </Label>\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        <RadioGroupItem value=\"outline\" id=\"mode-outline\" />\n                        <Label\n                          htmlFor=\"mode-outline\"\n                          className=\"cursor-pointer font-medium\"\n                        >\n                          I Have an Outline\n                        </Label>\n                      </div>\n                    </RadioGroup>\n                  </div>\n\n                  {/* Text Input Area */}\n                  <div className=\"space-y-3\">\n                    <div className=\"flex justify-between items-center\">\n                      <Label\n                        htmlFor=\"input\"\n                        className=\"text-base font-semibold\"\n                      >\n                        {inputMode === \"prompt\"\n                          ? \"Describe your presentation\"\n                          : \"Paste your outline\"}\n                      </Label>\n                      <div className=\"flex gap-2\">\n                        <input\n                          ref={fileInputRef}\n                          type=\"file\"\n                          accept=\".txt,.md,.pdf,.docx\"\n                          onChange={handleFileUpload}\n                          className=\"hidden\"\n                          disabled={loading}\n                        />\n                        <Button\n                          type=\"button\"\n                          variant=\"ghost\"\n                          size=\"sm\"\n                          onClick={() => fileInputRef.current?.click()}\n                          disabled={loading}\n                          className=\"h-8 text-xs gap-1.5 text-muted-foreground hover:text-foreground\"\n                        >\n                          <Upload className=\"h-3.5 w-3.5\" />\n                          {uploadedFileName || \"Upload File\"}\n                        </Button>\n                      </div>\n                    </div>\n\n                    <div className=\"relative group\">\n                      <Textarea\n                        id=\"input\"\n                        placeholder={\n                          inputMode === \"prompt\"\n                            ? `e.g. \"Quarterly business review for Q4 2024 focusing on growth metrics and key achievements...\"`\n                            : `1. Introduction\\n   - Context\\n   - Goals\\n\\n2. Metric Analysis...`\n                        }\n                        value={input}\n                        onChange={(e) => setInput(e.target.value)}\n                        disabled={loading}\n                        className={cn(\n                          \"min-h-[200px] max-h-[500px] resize-none overflow-y-auto text-base leading-relaxed p-4 border-muted-foreground/20 focus-visible:border-primary/50 transition-all font-normal\",\n                          \"bg-muted/10 group-hover:bg-muted/20 focus:bg-background\",\n                        )}\n                        style={{ fieldSizing: \"fixed\" } as any}\n                      />\n                      <div className=\"absolute bottom-3 right-3 pointer-events-none\">\n                        <span\n                          className={cn(\n                            \"text-xs px-2 py-1 rounded bg-background/80 backdrop-blur border shadow-sm transition-opacity duration-200\",\n                            input.length > 0 ? \"opacity-100\" : \"opacity-0\",\n                          )}\n                        >\n                          {input.length} chars\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Outline Enhancer Toggle */}\n                  <AnimatePresence>\n                    {inputMode === \"outline\" && (\n                      <motion.div\n                        initial={{ opacity: 0, height: 0 }}\n                        animate={{ opacity: 1, height: \"auto\" }}\n                        exit={{ opacity: 0, height: 0 }}\n                        className=\"overflow-hidden\"\n                      >\n                        <div className=\"flex items-center justify-between rounded-lg border p-3 bg-muted/30\">\n                          <div className=\"space-y-0.5\">\n                            <Label\n                              htmlFor=\"enhance\"\n                              className=\"text-sm font-medium flex items-center gap-2\"\n                            >\n                              Smart Enhance\n                            </Label>\n                            <p className=\"text-xs text-muted-foreground\">\n                              Allow AI to research and expand your bullet points\n                            </p>\n                          </div>\n                          <Switch\n                            id=\"enhance\"\n                            checked={enhanceOutline}\n                            onCheckedChange={setEnhanceOutline}\n                            disabled={loading}\n                          />\n                        </div>\n                      </motion.div>\n                    )}\n                  </AnimatePresence>\n\n                  {/* Web Research Toggle */}\n                  <div className=\"flex items-center justify-between py-3 border-t\">\n                    <div className=\"space-y-0.5\">\n                      <Label\n                        htmlFor=\"grounding\"\n                        className=\"text-sm font-medium flex items-center gap-2\"\n                      >\n                        Web Research\n                      </Label>\n                      <p className=\"text-xs text-muted-foreground\">\n                        Search the web for facts, statistics, and citations\n                      </p>\n                    </div>\n                    <Switch\n                      id=\"grounding\"\n                      checked={enableGrounding}\n                      onCheckedChange={setEnableGrounding}\n                      disabled={loading}\n                    />\n                  </div>\n                </div>\n\n                {/* Title Input */}\n                <div className=\"bg-card border rounded-xl shadow-sm p-6 sm:p-8\">\n                  <div className=\"space-y-3\">\n                    <Label htmlFor=\"title\" className=\"text-sm font-medium\">\n                      Presentation Title{\" \"}\n                      <span className=\"text-muted-foreground font-normal\">\n                        (Optional)\n                      </span>\n                    </Label>\n                    <div className=\"relative\">\n                      <Input\n                        id=\"title\"\n                        placeholder=\"Auto-generated if empty\"\n                        value={title}\n                        onChange={(e) => setTitle(e.target.value)}\n                        disabled={loading}\n                        className=\"pl-2\"\n                      />\n                      <PenTool className=\"absolute right-3 top-3 h-4 w-4 text-muted-foreground/30 pointer-events-none\" />\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex justify-between\">\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => setCurrentStep(\"format\")}\n                  >\n                    <ChevronLeft className=\"mr-2 h-4 w-4\" />\n                    Back\n                  </Button>\n                  <Button\n                    onClick={() => setCurrentStep(\"style\")}\n                    disabled={!input.trim()}\n                  >\n                    Continue\n                    <ChevronRight className=\"ml-2 h-4 w-4\" />\n                  </Button>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 3: Style */}\n            {currentStep === \"style\" && (\n              <motion.div\n                initial={{ opacity: 0, x: 20 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -20 }}\n                className=\"space-y-6\"\n              >\n                {/* Content Density */}\n                <div className=\"bg-card border rounded-xl shadow-sm p-6 sm:p-8 space-y-4\">\n                  <Label className=\"text-base font-semibold\">\n                    Content Density\n                  </Label>\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setSlideStyle(\"illustrative\")}\n                      className={cn(\n                        \"flex items-center justify-between p-4 rounded-lg border text-left transition-all outline-none focus-visible:ring-2 focus-visible:ring-primary/20\",\n                        slideStyle === \"illustrative\"\n                          ? \"border-primary bg-primary/5\"\n                          : \"border-muted hover:border-border hover:bg-muted/30\",\n                      )}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div\n                          className={cn(\n                            \"p-2 rounded-md\",\n                            slideStyle === \"illustrative\"\n                              ? \"bg-primary/10 text-primary\"\n                              : \"bg-muted text-muted-foreground\",\n                          )}\n                        >\n                          <densityConfig.illustrative.Icon className=\"h-5 w-5\" />\n                        </div>\n                        <div>\n                          <span className=\"text-sm font-medium block\">\n                            {densityConfig.illustrative.label}\n                          </span>\n                          <span className=\"text-xs text-muted-foreground block\">\n                            {densityConfig.illustrative.desc}\n                          </span>\n                        </div>\n                      </div>\n                      {slideStyle === \"illustrative\" && (\n                        <CheckCircle2 className=\"h-5 w-5 text-primary\" />\n                      )}\n                    </button>\n\n                    <button\n                      type=\"button\"\n                      onClick={() => setSlideStyle(\"wordy\")}\n                      className={cn(\n                        \"flex items-center justify-between p-4 rounded-lg border text-left transition-all outline-none focus-visible:ring-2 focus-visible:ring-primary/20\",\n                        slideStyle === \"wordy\"\n                          ? \"border-primary bg-primary/5\"\n                          : \"border-muted hover:border-border hover:bg-muted/30\",\n                      )}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div\n                          className={cn(\n                            \"p-2 rounded-md\",\n                            slideStyle === \"wordy\"\n                              ? \"bg-primary/10 text-primary\"\n                              : \"bg-muted text-muted-foreground\",\n                          )}\n                        >\n                          <densityConfig.wordy.Icon className=\"h-5 w-5\" />\n                        </div>\n                        <div>\n                          <span className=\"text-sm font-medium block\">\n                            {densityConfig.wordy.label}\n                          </span>\n                          <span className=\"text-xs text-muted-foreground block\">\n                            {densityConfig.wordy.desc}\n                          </span>\n                        </div>\n                      </div>\n                      {slideStyle === \"wordy\" && (\n                        <CheckCircle2 className=\"h-5 w-5 text-primary\" />\n                      )}\n                    </button>\n                  </div>\n                </div>\n\n                {/* Visual Style Selector */}\n                <div className=\"bg-card border rounded-xl shadow-sm p-6 sm:p-8 space-y-4\">\n                  <Label className=\"text-base font-semibold\">\n                    Visual Style\n                  </Label>\n                  <StyleSelector\n                    selectedStyleId={imageStyle}\n                    onSelect={setImageStyle}\n                  />\n                </div>\n\n                {/* Brand Template Section */}\n                <Collapsible\n                  open={templateSectionOpen}\n                  onOpenChange={setTemplateSectionOpen}\n                  className=\"border rounded-xl overflow-hidden bg-card\"\n                >\n                  <CollapsibleTrigger asChild>\n                    <button\n                      type=\"button\"\n                      className={cn(\n                        \"flex items-center justify-between w-full p-4 text-left transition-colors\",\n                        templateSectionOpen\n                          ? \"bg-muted/30\"\n                          : \"hover:bg-muted/20\",\n                        selectedTemplateId && \"border-l-2 border-l-primary\",\n                      )}\n                      disabled={loading}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div\n                          className={cn(\n                            \"p-2 rounded-lg\",\n                            selectedTemplateId\n                              ? \"bg-primary/10 text-primary\"\n                              : \"bg-muted text-muted-foreground\",\n                          )}\n                        >\n                          <Palette className=\"h-4 w-4\" />\n                        </div>\n                        <div>\n                          <span className=\"text-sm font-medium block\">\n                            Brand Template\n                          </span>\n                          <span className=\"text-xs text-muted-foreground\">\n                            {selectedTemplateId\n                              ? \"Template selected\"\n                              : \"Match your organization's branding\"}\n                          </span>\n                        </div>\n                      </div>\n                      <ChevronDown\n                        className={cn(\n                          \"h-4 w-4 text-muted-foreground transition-transform\",\n                          templateSectionOpen && \"rotate-180\",\n                        )}\n                      />\n                    </button>\n                  </CollapsibleTrigger>\n                  <CollapsibleContent>\n                    <div className=\"p-4 pt-0 border-t\">\n                      <TemplateUpload\n                        onTemplateSelect={setSelectedTemplateId}\n                        selectedTemplateId={selectedTemplateId}\n                        disabled={loading}\n                      />\n                    </div>\n                  </CollapsibleContent>\n                </Collapsible>\n\n                <div className=\"flex justify-between pt-4\">\n                  <Button\n                    variant=\"ghost\"\n                    onClick={() => setCurrentStep(\"content\")}\n                  >\n                    <ChevronLeft className=\"mr-2 h-4 w-4\" />\n                    Back\n                  </Button>\n                  <Button\n                    onClick={handleCreate}\n                    disabled={loading || !input.trim()}\n                    className=\"h-12 px-6 text-base font-semibold shadow-lg shadow-primary/20 hover:shadow-primary/30 transition-all rounded-xl\"\n                    size=\"lg\"\n                  >\n                    {loading ? (\n                      <>\n                        <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                        Orchestrating...\n                      </>\n                    ) : (\n                      <>\n                        <Sparkles className=\"mr-2 h-5 w-5\" />\n                        Generate Presentation\n                      </>\n                    )}\n                  </Button>\n                </div>\n                <p className=\"text-center text-xs text-muted-foreground\">\n                  Estimated generation time: ~30 seconds\n                </p>\n              </motion.div>\n            )}\n          </div>\n        </div>\n      </div>\n    </ScrollArea>\n  );\n}\n","/**\n * Slides Outline Generation Prompts\n *\n * System prompt and prompt builders for generating presentation outlines\n * using GLM-4.6 via chat-style iteration.\n */\n\nexport const SLIDES_OUTLINE_SYSTEM_PROMPT = `You are a professional presentation designer. Generate slide outlines in this structured format:\n\n# TITLE SLIDE\nTitle: [Main Title - concise, impactful]\nSubtitle: [Supporting subtitle or tagline]\nVisual: [Describe the background image/visual - mood, style, colors, specific elements to generate]\nType: title\n\n# SECTION: [Section Name]\nTitle: [Section Title]\nVisual: [Describe transitional visual - abstract, thematic, or symbolic imagery]\nType: section\n\n# Slide N: [Slide Title]\n- [Bullet point 1]\n- [Bullet point 2]\n- [Bullet point 3]\nVisual: [Describe supporting imagery - what should the AI-generated image show, mood, style]\nType: content\nSpeaker Notes: [Notes for presenter]\n\nSLIDE STYLE (pay close attention to the user's chosen style):\n\n**illustrative (Speaker Assist)**:\n- Slides should be VISUAL with MINIMAL text (3-5 words per bullet MAX).\n- Speaker Notes should be DETAILED and COMPREHENSIVE - include all talking points, data, context, and transitions.\n- Think: slides are prompts for the speaker, notes are the full script.\n\n**wordy (Self-Contained)**:\n- Slides should be DETAILED and READABLE without a speaker (full sentences, 7-15 words per bullet).\n- Speaker Notes are optional, brief reminders only.\n- Think: slides tell the complete story on their own.\n\nDESIGN PRINCIPLES:\n- One key idea per slide\n- Clear visual hierarchy (title -> bullets -> notes)\n- Professional, compelling language\n- Logical flow with section dividers\n\nOUTPUT FORMAT:\n- Use exactly this markdown structure\n- Include Type field for each slide\n- Maximum 3-4 bullets per content slide\n- ALWAYS include Visual field for EVERY slide - describe the AI-generated image (mood, colors, composition, specific elements)\n- ALWAYS include Speaker Notes (detailed for illustrative, brief for wordy)\n\nCITATION FORMAT (when web search tools are available):\n- Use web search to find current facts, statistics, and examples\n- Cite sources inline as [1], [2], etc. where facts appear\n- Include source context in Speaker Notes\n- End your response with a sources section:\n\n  ---SOURCES---\n  [1] Source Title - URL\n  [2] Source Title - URL\n\nGenerate 10-15 slides for a standard presentation.\n\nWhen the user asks for changes, regenerate the COMPLETE outline with their modifications applied. Always output the full structured outline.`;\n\nexport function buildOutlinePrompt(\n  input: string,\n  inputType: \"prompt\" | \"document\" | \"outline\",\n  aspectRatio: \"16:9\" | \"1:1\" | \"9:16\" = \"16:9\",\n): string {\n  const formatLabel = {\n    \"16:9\": \"presentation slide deck\",\n    \"1:1\": \"social media carousel\",\n    \"9:16\": \"vertical story/reel\",\n  }[aspectRatio];\n\n  const formatGuidance = {\n    \"16:9\": \"title slide, sections, and content slides\",\n    \"1:1\": \"hook, value slides, and a call-to-action\",\n    \"9:16\": \"hook frame, content frames, and a payoff\",\n  }[aspectRatio];\n\n  switch (inputType) {\n    case \"prompt\":\n      return `Create a professional ${formatLabel} about:\n\n\"${input}\"\n\nGenerate a complete structured outline with ${formatGuidance}.`;\n\n    case \"document\":\n      return `Convert this document into a ${formatLabel}:\n\n${input}\n\nExtract key points and design a clear visual flow. Focus on the most important concepts.`;\n\n    case \"outline\":\n      return `Refine and structure this outline into a professional ${formatLabel}:\n\n${input}\n\nImprove clarity, add structure, ensure consistent formatting, and optimize for the format.`;\n  }\n}\n\n/**\n * Unified prompt builder that auto-detects input type\n */\nexport function buildUnifiedOutlinePrompt(input: string): string {\n  return `Analyze the following input and create a professional slide deck outline.\n\nThe input may be:\n- A topic or prompt to expand on\n- A document to convert into slides\n- An existing outline to refine\n- Or a combination of these\n\nAutomatically detect the input type and generate the most appropriate slide deck.\n\nInput:\n${input}\n\nGenerate a complete structured outline with title slide, sections, and content slides.`;\n}\n\n/**\n * System prompt for enhancing user-provided outlines with research\n */\nexport const SLIDES_OUTLINE_ENHANCE_SYSTEM_PROMPT = `You are a professional presentation designer with research capabilities. Your job is to:\n\n1. ANALYZE the user's outline to understand their topic and goals\n2. RESEARCH current facts, statistics, and best practices using available tools\n3. ENHANCE the outline with accurate, up-to-date information\n4. FORMAT the result as a structured slide outline\n\nOUTPUT FORMAT (use exactly this structure):\n\n# TITLE SLIDE\nTitle: [Main Title - concise, impactful]\nSubtitle: [Supporting subtitle or tagline]\nType: title\n\n# SECTION: [Section Name]\nTitle: [Section Title]\nType: section\n\n# Slide N: [Slide Title]\n- [Bullet point]\n- [Bullet point]\n- [Bullet point]\nType: content\nSpeaker Notes: [Notes for presenter]\n\nSLIDE STYLE (pay close attention to the user's chosen style):\n\n**illustrative (Speaker Assist)**:\n- Slides should be VISUAL with MINIMAL text (3-5 words per bullet MAX).\n- Speaker Notes should be DETAILED and COMPREHENSIVE - include all talking points, data, context, and transitions.\n\n**wordy (Self-Contained)**:\n- Slides should be DETAILED and READABLE without a speaker (full sentences, 7-15 words per bullet).\n- Speaker Notes are optional, brief reminders only.\n\nENHANCEMENT GUIDELINES:\n- Use web search to find current statistics, examples, and best practices\n- Add relevant data points and citations where appropriate\n- Improve clarity and structure while preserving the user's intent\n- Ensure logical flow with section dividers\n\nCITATION FORMAT (when web search tools are available):\n- Cite sources inline as [1], [2], etc. where facts appear\n- Include source context in Speaker Notes\n- End your response with a sources section:\n\n  ---SOURCES---\n  [1] Source Title - URL\n  [2] Source Title - URL\n\nGenerate 10-15 slides for a standard presentation.`;\n\n/**\n * System prompt for parsing/formatting outlines without enhancement\n */\nexport const SLIDES_OUTLINE_PARSE_SYSTEM_PROMPT = `You are a professional presentation formatter. Your job is to:\n\n1. PARSE the user's outline exactly as provided\n2. FORMAT it into the structured slide format below\n3. PRESERVE all content - do not add, remove, or change meaning\n4. ONLY organize and structure for visual presentation\n\nOUTPUT FORMAT (use exactly this structure):\n\n# TITLE SLIDE\nTitle: [Extract or infer main title]\nSubtitle: [Extract or create brief subtitle]\nType: title\n\n# SECTION: [Section Name]\nTitle: [Section Title from outline]\nType: section\n\n# Slide N: [Slide Title]\n- [Bullet point from outline]\n- [Bullet point from outline]\n- [Bullet point from outline]\nType: content\nSpeaker Notes: [Notes for presenter]\n\nSLIDE STYLE (pay close attention to the user's chosen style):\n\n**illustrative (Speaker Assist)**:\n- Keep slide bullets MINIMAL (3-5 words each).\n- Move detailed content into comprehensive Speaker Notes.\n\n**wordy (Self-Contained)**:\n- Keep bullets DETAILED (full sentences, 7-15 words).\n- Speaker Notes are brief or omitted.\n\nFORMATTING GUIDELINES:\n- Preserve ALL content from the user's outline\n- Do NOT add new information or statistics\n- Do NOT remove any points the user included\n- Infer logical sections if not explicitly provided\n- Maintain the user's original intent and messaging\n\nOutput the complete structured outline.`;\n\n/**\n * System prompt for parsing carousel content (1:1 format) - PRESERVES USER CONTENT EXACTLY\n * Used when user provides their own carousel outline\n */\nexport const CAROUSEL_OUTLINE_PARSE_SYSTEM_PROMPT = `You are formatting a social media carousel. Your ONLY job is to structure the user's content for visual presentation.\n\nCRITICAL: Use the user's EXACT words. Do NOT:\n- Rewrite or \"improve\" their copy\n- Summarize or shorten their messages\n- Add new hooks, CTAs, or content\n- Change their emotional tone or messaging\n\n\nEXAMPLE TRANSFORMATION #1 (User provides --- separators with FULL PARAGRAPHS)\n\n\nINPUT:\n---\nWe have a glass door leading to our back garden that my daughter loves to play at. I was with her there the other day. She was busy doing what babies do: playing with the door handle, grabbing it, tapping it.\n\nAnd while she's doing all that my mind was in full parent mode. I was thinking about all the ways she could get hurt.\n---\nAnd then I start doing that constant calculation parents do:\n\n* That could hurt her badly, so I need to stop it.\n* That might hurt a bit, but she'll learn from it.\n* That's not dangerous, it's just messy.\n\nMeanwhile she's completely oblivious. She's just living. Exploring. Playing.\n---\nSometimes we don't see how many \"what ifs\" are being handled for us in the background.\n\nA God behind you and ahead of you.\nA hand already there.\nNot only reacting to the fall but anticipating it.\n---\n\nOUTPUT:\n# SLIDE 1 (Hook)\nTitle: We have a glass door leading to our back garden that my daughter loves to play at. I was with her there the other day. She was busy doing what babies do: playing with the door handle, grabbing it, tapping it.\n\nAnd while she's doing all that my mind was in full parent mode. I was thinking about all the ways she could get hurt.\nVisual: Warm domestic scene, glass door, soft natural light, parent-child moment\nType: hook\n\n# SLIDE 2\nTitle: And then I start doing that constant calculation parents do:\n\n* That could hurt her badly, so I need to stop it.\n* That might hurt a bit, but she'll learn from it.\n* That's not dangerous, it's just messy.\n\nMeanwhile she's completely oblivious. She's just living. Exploring. Playing.\nVisual: Split perspective - protective parent, carefree child, warm tones\nType: content\n\n# SLIDE 3 (CTA)\nTitle: Sometimes we don't see how many \"what ifs\" are being handled for us in the background.\n\nA God behind you and ahead of you.\nA hand already there.\nNot only reacting to the fall but anticipating it.\nVisual: Hopeful, light breaking through, protective presence, warm glow\nType: cta\n\n\n WRONG - DO NOT DO THIS (Summarizing user content)\n\n\nWRONG OUTPUT (summarized/condensed):\n# SLIDE 1\nTitle: Glass door moment with my daughter\n WRONG - You summarized instead of using their exact words\n\n# SLIDE 2\nTitle: The parent calculation we all do\n WRONG - You created a \"punchy title\" instead of preserving their paragraphs\n\nCORRECT: Copy the ENTIRE text between --- separators into the Title field. Every sentence. Every line break. Every bullet point. VERBATIM.\n\n\nEXAMPLE TRANSFORMATION #2 (User provides long prose with NO breaks)\n\n\nINPUT:\nI was sitting at my desk when it hit me. The project we'd been working on for months wasn't just late - it was fundamentally flawed. I called my team together that afternoon. We had a choice: patch it up and ship, or start over. Starting over felt impossible. But we did it anyway. Three months later, we launched something we were actually proud of.\n\nOUTPUT:\n# SLIDE 1 (Hook)\nTitle: I was sitting at my desk when it hit me.\nVisual: Contemplative, moment of realization, soft lighting\nType: hook\n\n# SLIDE 2\nTitle: The project we'd been working on for months wasn't just late - it was fundamentally flawed.\nVisual: Tension, concern, muted colors\nType: content\n\n# SLIDE 3\nTitle: I called my team together. We had a choice: patch it up and ship, or start over.\nVisual: Crossroads, decision moment, two paths\nType: content\n\n# SLIDE 4\nTitle: Starting over felt impossible. But we did it anyway.\nVisual: Determination, courage, warm tones emerging\nType: content\n\n# SLIDE 5 (CTA)\nTitle: Three months later, we launched something we were actually proud of.\nVisual: Triumph, pride, warmth, celebration\nType: cta\n\n\nBOUNDARY DETECTION RULES\n\n\n**If user provides EXPLICIT breaks (respect exactly):**\n- \"---\" = explicit slide break (each section between = one slide)\n- \"Slide 1:\", \"Slide 2:\" = explicit numbering (use their structure)\n- Numbered sections (1., 2., 3.) = each number is a slide\n- Bullet points with major topic shifts = separate slides\n\n**If user provides long prose with NO breaks (AI decides):**\n- Find natural topic shifts in the narrative\n- Look for: time shifts, perspective changes, new arguments, emotional beats\n- One key idea/moment per slide\n- Aim for 6-8 slides total\n- Break at sentence boundaries, NEVER mid-sentence\n\nOUTPUT FORMAT (you MUST use this exact structure with # headers):\n\n# SLIDE 1 (Hook)\nTitle: [User's exact first section - can be multiple sentences]\nVisual: [Mood/colors that complement their message]\nType: hook\n\n# SLIDE 2\nTitle: [User's exact second section - preserve ALL their text]\nVisual: [Complementary visual suggestion]\nType: content\n\n# SLIDE N (continue numbering for each section)\nTitle: [User's exact text for this slide]\nVisual: [Complementary visual suggestion]\nType: content\n\n# FINAL SLIDE (CTA)\nTitle: [User's exact closing section]\nVisual: [Visual suggestion]\nType: cta\n\nThe TITLE field contains the user's FULL text for that slide (can be multiple sentences or paragraphs).\nThis is social media - the slide text IS the content. NO speaker notes.\n\nYOU MUST OUTPUT # HEADERS - the parser requires them.\nOutput the complete structured carousel: # SLIDE 1, # SLIDE 2, # SLIDE 3, etc.`;\n\n/**\n * System prompt for parsing story content (9:16 format) - PRESERVES USER CONTENT EXACTLY\n * Used when user provides their own story outline\n */\nexport const STORY_OUTLINE_PARSE_SYSTEM_PROMPT = `You are formatting a vertical story/reel. Your ONLY job is to structure the user's content for visual presentation.\n\nCRITICAL: Use the user's EXACT words. Do NOT:\n- Rewrite or \"improve\" their copy\n- Summarize or shorten their messages\n- Add new hooks or content\n- Change their narrative flow\n\n\nEXAMPLE TRANSFORMATION #1 (User provides --- separators with FULL PARAGRAPHS)\n\n\nINPUT:\n---\nWe have a glass door leading to our back garden that my daughter loves to play at. I was with her there the other day. She was busy doing what babies do: playing with the door handle, grabbing it, tapping it.\n\nAnd while she's doing all that my mind was in full parent mode.\n---\nAnd then I start doing that constant calculation parents do:\n\n* That could hurt her badly, so I need to stop it.\n* That might hurt a bit, but she'll learn from it.\n\nMeanwhile she's completely oblivious. She's just living. Exploring. Playing.\n---\nSometimes we don't see how many \"what ifs\" are being handled for us in the background.\n\nA God behind you and ahead of you.\nA hand already there.\n---\n\nOUTPUT:\n# FRAME 1 (Hook)\nTitle: We have a glass door leading to our back garden that my daughter loves to play at. I was with her there the other day. She was busy doing what babies do: playing with the door handle, grabbing it, tapping it.\n\nAnd while she's doing all that my mind was in full parent mode.\nVisual: Warm domestic scene, soft natural light, parent-child moment\nType: hook\n\n# FRAME 2\nTitle: And then I start doing that constant calculation parents do:\n\n* That could hurt her badly, so I need to stop it.\n* That might hurt a bit, but she'll learn from it.\n\nMeanwhile she's completely oblivious. She's just living. Exploring. Playing.\nVisual: Split perspective - protective parent, carefree child\nType: content\n\n# FRAME 3 (Payoff)\nTitle: Sometimes we don't see how many \"what ifs\" are being handled for us in the background.\n\nA God behind you and ahead of you.\nA hand already there.\nVisual: Hopeful, light breaking through, protective presence\nType: cta\n\n\n WRONG - DO NOT DO THIS (Summarizing user content)\n\n\nWRONG OUTPUT (summarized/condensed):\n# FRAME 1\nTitle: Glass door moment with my daughter\n WRONG - You summarized instead of using their exact words\n\nCORRECT: Copy the ENTIRE text between --- separators into the Title field. Every sentence. Every line break. Every bullet point. VERBATIM.\n\n\nEXAMPLE TRANSFORMATION #2 (User provides long prose with NO breaks)\n\n\nINPUT:\nI was sitting at my desk when it hit me. The project we'd been working on for months wasn't just late - it was fundamentally flawed. I called my team together that afternoon. We had a choice: patch it up and ship, or start over. Starting over felt impossible. But we did it anyway. Three months later, we launched something we were actually proud of.\n\nOUTPUT:\n# FRAME 1 (Hook)\nTitle: I was sitting at my desk when it hit me.\nVisual: Contemplative, moment of realization, soft lighting\nType: hook\n\n# FRAME 2\nTitle: The project we'd been working on for months wasn't just late - it was fundamentally flawed.\nVisual: Tension, concern, muted colors\nType: content\n\n# FRAME 3\nTitle: I called my team together. We had a choice: patch it up and ship, or start over.\nVisual: Crossroads, decision moment, two paths\nType: content\n\n# FRAME 4\nTitle: Starting over felt impossible. But we did it anyway.\nVisual: Determination, courage, warm tones emerging\nType: content\n\n# FRAME 5 (Payoff)\nTitle: Three months later, we launched something we were actually proud of.\nVisual: Triumph, pride, warmth, celebration\nType: cta\n\n\nBOUNDARY DETECTION RULES\n\n\n**If user provides EXPLICIT breaks (respect exactly):**\n- \"---\" = explicit frame break (each section between = one frame)\n- \"Frame 1:\", \"Slide 1:\" = explicit numbering (use their structure)\n- Numbered sections (1., 2., 3.) = each number is a frame\n- Bullet points with major topic shifts = separate frames\n\n**If user provides long prose with NO breaks (AI decides):**\n- Find natural topic shifts in the narrative\n- Look for: time shifts, perspective changes, new arguments, emotional beats\n- One key idea/moment per frame\n- Aim for 5-8 frames total\n- Break at sentence boundaries, NEVER mid-sentence\n\nOUTPUT FORMAT (you MUST use this exact structure with # headers):\n\n# FRAME 1 (Hook)\nTitle: [User's exact first section - can be multiple sentences]\nVisual: [Mood/colors that complement their message]\nType: hook\n\n# FRAME 2\nTitle: [User's exact second section - preserve ALL their text]\nVisual: [Complementary visual suggestion]\nType: content\n\n# FRAME N (continue numbering for each section)\nTitle: [User's exact text for this frame]\nVisual: [Complementary visual suggestion]\nType: content\n\n# FINAL FRAME (Payoff)\nTitle: [User's exact closing section]\nVisual: [Visual suggestion]\nType: cta\n\nThe TITLE field contains the user's FULL text for that frame (can be multiple sentences or paragraphs).\nThis is vertical video - the frame text IS the content. NO speaker notes.\nConsider vertical safe zones (avoid top 10%, bottom 20%).\n\nYOU MUST OUTPUT # HEADERS - the parser requires them.\nOutput the complete structured story: # FRAME 1, # FRAME 2, # FRAME 3, etc.`;\n\n/**\n * Build prompt for user outline with enhance mode\n */\nexport function buildEnhanceOutlinePrompt(outline: string): string {\n  return `Enhance this presentation outline with research and improvements:\n\n${outline}\n\nUse available tools to research current facts and statistics. Improve the outline while preserving the user's core message and structure.`;\n}\n\n/**\n * Build prompt for user outline parse-only mode\n */\nexport function buildParseOutlinePrompt(outline: string): string {\n  return `Format this outline into a structured presentation. Preserve all content exactly as provided:\n\n${outline}`;\n}\n\n// ===== Format-Specific Prompts =====\n\n/**\n * System prompt for social media carousel content (1:1 square format)\n */\nexport const CAROUSEL_OUTLINE_SYSTEM_PROMPT = `You are a social media carousel designer creating emotionally resonant content. Generate scroll-stopping carousels with clear narrative arcs.\n\nOUTPUT STRUCTURE (use exactly this format):\n\n# SLIDE 1 (Hook)\nTitle: [Bold statement that stops the scroll - 5-7 words max]\nVisual: [Mood, colors, imagery - e.g., \"Soft neutral background, minimal text, calm design\"]\nType: hook\n\n# SLIDE 2 (Context)\nTitle: [Set the scene - relatable situation - 5-7 words]\nVisual: [Imagery that grounds the story]\nType: context\n\n# SLIDE 3-6 (Journey Slides - pick from these narrative beats)\nTitle: [One key idea - poetic, punchy - 5-7 words max]\nVisual: [Mood progression - colors, imagery, symbolism]\nType: [validation | reality | emotional | reframe | affirmation]\n\nAvailable narrative beats (use 3-5 of these):\n- validation: Acknowledge their experience (\"That alone required courage\")\n- reality: Specific relatable details (\"You learned new systems\")\n- emotional: Deeper connection, vulnerability (\"You missed home\")\n- reframe: Positive shift, perspective change (\"But you kept going\")\n- affirmation: Value statement, recognition (\"That matters. It counts.\")\n\n# FINAL SLIDE (CTA)\nTitle: [Engagement prompt with emoji - invite response]\nVisual: [Warm, hopeful, open space for reflection]\nType: cta\n\nCAROUSEL PRINCIPLES:\n- ONE idea per slide (never multiple bullets)\n- 6-8 slides total (sweet spot: 7-8)\n- Maximum 5-7 words per line\n- Build an EMOTIONAL ARC: hook  context  journey  hope  action\n- Visual mood progression: reflective  hopeful (color temperature shift)\n- Mobile-first, center-weighted text\n- No section dividers (continuous flow)\n- Each slide must make sense on its own (users may screenshot)\n\nTEXT STYLE:\n- Second person \"you\" - direct address\n- Poetic rhythm, punchy line breaks\n- Short sentences. Line breaks for emphasis.\n- Emojis sparingly: hook and CTA only\n- Avoid corporate/formal language - warm, human, conversational\n\nVISUAL DIRECTION:\n- Each slide has mood + color + imagery guidance\n- Progression from muted/reflective  warm/hopeful\n- Symbolism: forward motion, light breaking through, open paths\n- Cultural patterns as subtle watermarks if relevant\n\nSpeaker Notes: Use for post caption draft with relevant hashtags and engagement hooks.\n\nWhen the user asks for changes, regenerate the COMPLETE carousel with their modifications applied.`;\n\n/**\n * System prompt for vertical story/reel content (9:16 format)\n */\nexport const STORY_OUTLINE_SYSTEM_PROMPT = `You are a vertical content creator for TikTok, Reels, and Stories. Generate punchy, scroll-stopping content with emotional resonance.\n\nOUTPUT STRUCTURE (use exactly this format):\n\n# FRAME 1 (Hook)\nTitle: [Pattern interrupt - no preamble - 3-7 words]\nVisual: [Shot description with mood/color]\nType: hook\n\n# FRAME 2 (Context)\nTitle: [Ground the story - relatable setup - 3-7 words]\nVisual: [Scene-setting imagery]\nType: context\n\n# FRAME 3-6 (Journey Frames - pick from narrative beats)\nTitle: [One point per frame - punchy, poetic - 3-7 words]\nVisual: [Shot description with mood progression]\nType: [validation | reality | emotional | reframe | affirmation]\n\nAvailable narrative beats:\n- validation: Acknowledge experience (\"That took real courage\")\n- reality: Specific relatable moments (\"The small daily wins\")\n- emotional: Vulnerability, connection (\"You felt it too\")\n- reframe: Shift perspective (\"But here's the thing\")\n- affirmation: Recognition (\"That matters\")\n\n# FINAL FRAME (Payoff)\nTitle: [Resolution or CTA with emoji - 3-7 words]\nVisual: [Warm, hopeful closing - invite engagement]\nType: cta\n\nSTORY PRINCIPLES:\n- NO title slide - jump straight into the hook\n- 5-8 frames total (tight, punchy)\n- First frame MUST hook immediately (no warm-up, no \"Hey guys\")\n- Build EMOTIONAL ARC: hook  context  journey  payoff\n- Punchy, conversational - TikTok energy, not corporate\n- Vertical safe zones: avoid top 10% and bottom 20%\n- Every word must earn its place\n- End with payoff or loop trigger\n\nTEXT STYLE:\n- Second person \"you\" where relevant\n- Short. Punchy. Line breaks matter.\n- Emojis sparingly: hook and CTA only\n- Warm, human, never corporate\n\nVISUAL PROGRESSION:\n- Mood shift from hook tension  warm resolution\n- Color temperature: muted  warm\n- Motion symbolism: forward movement, light breaking through\n\nNO SPEAKER NOTES - all content is visual/on-screen only.\n\nWhen the user asks for changes, regenerate the COMPLETE story with their modifications applied.`;\n\n/**\n * Get the appropriate system prompt based on aspect ratio\n */\nexport function getOutlineSystemPrompt(\n  aspectRatio: \"16:9\" | \"1:1\" | \"9:16\" = \"16:9\",\n): string {\n  switch (aspectRatio) {\n    case \"1:1\":\n      return CAROUSEL_OUTLINE_SYSTEM_PROMPT;\n    case \"9:16\":\n      return STORY_OUTLINE_SYSTEM_PROMPT;\n    default:\n      return SLIDES_OUTLINE_SYSTEM_PROMPT;\n  }\n}\n\n/**\n * Get parse-specific system prompt (preserves user structure)\n * Used when user provides their own outline - respects their structure exactly\n */\nexport function getOutlineParseSystemPrompt(\n  aspectRatio: \"16:9\" | \"1:1\" | \"9:16\" = \"16:9\",\n): string {\n  switch (aspectRatio) {\n    case \"1:1\":\n      return CAROUSEL_OUTLINE_PARSE_SYSTEM_PROMPT;\n    case \"9:16\":\n      return STORY_OUTLINE_PARSE_SYSTEM_PROMPT;\n    default:\n      return SLIDES_OUTLINE_PARSE_SYSTEM_PROMPT;\n  }\n}\n\n/**\n * Get format label for user-facing text\n */\nexport function getFormatLabel(\n  aspectRatio: \"16:9\" | \"1:1\" | \"9:16\" = \"16:9\",\n): string {\n  switch (aspectRatio) {\n    case \"1:1\":\n      return \"social media carousel\";\n    case \"9:16\":\n      return \"vertical story/reel\";\n    default:\n      return \"presentation\";\n  }\n}\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z',\n      key: '1oefj6',\n    },\n  ],\n  ['path', { d: 'M14 2v5a1 1 0 0 0 1 1h5', key: 'wfsgrz' }],\n  ['circle', { cx: '10', cy: '12', r: '2', key: '737tya' }],\n  ['path', { d: 'm20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22', key: 'wt3hpn' }],\n];\n\n/**\n * @component @name FileImage\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNNiAyMmEyIDIgMCAwIDEtMi0yVjRhMiAyIDAgMCAxIDItMmg4YTIuNCAyLjQgMCAwIDEgMS43MDQuNzA2bDMuNTg4IDMuNTg4QTIuNCAyLjQgMCAwIDEgMjAgOHYxMmEyIDIgMCAwIDEtMiAyeiIgLz4KICA8cGF0aCBkPSJNMTQgMnY1YTEgMSAwIDAgMCAxIDFoNSIgLz4KICA8Y2lyY2xlIGN4PSIxMCIgY3k9IjEyIiByPSIyIiAvPgogIDxwYXRoIGQ9Im0yMCAxNy0xLjI5Ni0xLjI5NmEyLjQxIDIuNDEgMCAwIDAtMy40MDggMEw5IDIyIiAvPgo8L3N2Zz4K) - https://lucide.dev/icons/file-image\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst FileImage = createLucideIcon('file-image', __iconNode);\n\nexport default FileImage;\n","import createLucideIcon from '../createLucideIcon';\nimport { IconNode } from '../types';\n\nexport const __iconNode: IconNode = [\n  [\n    'path',\n    {\n      d: 'M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z',\n      key: 'nt11vn',\n    },\n  ],\n  [\n    'path',\n    {\n      d: 'm18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18',\n      key: '15qc1e',\n    },\n  ],\n  ['path', { d: 'm2.3 2.3 7.286 7.286', key: '1wuzzi' }],\n  ['circle', { cx: '11', cy: '11', r: '2', key: 'xmgehs' }],\n];\n\n/**\n * @component @name PenTool\n * @description Lucide SVG icon component, renders SVG Element with children.\n *\n * @preview ![img](data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogIHdpZHRoPSIyNCIKICBoZWlnaHQ9IjI0IgogIHZpZXdCb3g9IjAgMCAyNCAyNCIKICBmaWxsPSJub25lIgogIHN0cm9rZT0iIzAwMCIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDJweCIKICBzdHJva2Utd2lkdGg9IjIiCiAgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIgogIHN0cm9rZS1saW5lam9pbj0icm91bmQiCj4KICA8cGF0aCBkPSJNMTUuNzA3IDIxLjI5M2ExIDEgMCAwIDEtMS40MTQgMGwtMS41ODYtMS41ODZhMSAxIDAgMCAxIDAtMS40MTRsNS41ODYtNS41ODZhMSAxIDAgMCAxIDEuNDE0IDBsMS41ODYgMS41ODZhMSAxIDAgMCAxIDAgMS40MTR6IiAvPgogIDxwYXRoIGQ9Im0xOCAxMy0xLjM3NS02Ljg3NGExIDEgMCAwIDAtLjc0Ni0uNzc2TDMuMjM1IDIuMDI4YTEgMSAwIDAgMC0xLjIwNyAxLjIwN0w1LjM1IDE1Ljg3OWExIDEgMCAwIDAgLjc3Ni43NDZMMTMgMTgiIC8+CiAgPHBhdGggZD0ibTIuMyAyLjMgNy4yODYgNy4yODYiIC8+CiAgPGNpcmNsZSBjeD0iMTEiIGN5PSIxMSIgcj0iMiIgLz4KPC9zdmc+Cg==) - https://lucide.dev/icons/pen-tool\n * @see https://lucide.dev/guide/packages/lucide-react - Documentation\n *\n * @param {Object} props - Lucide icons props and any valid SVG attribute\n * @returns {JSX.Element} JSX Element\n *\n */\nconst PenTool = createLucideIcon('pen-tool', __iconNode);\n\nexport default PenTool;\n"],"names":[],"mappings":"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,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CAAA,ACAA,CDAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADAA,CCAA,ADAA,CCAA,ADAA,CCAA,ADAA,CAAA,ACAA,CAAA,ADCH,CCDG,CAAA,CDCH,ACDG,AACH,CDAK,ACDF,AACH,ADAA,CCDG,ADCE,ACAA,CADF,AACE,ADAA,CCDF,AACE,ADAA,CAAA,ACDF,AACE,CAAA,ADAA,ACDF,CACE,ADAA,ACDF,CACE,ADAA,ACDF,CDCE,ACDF,CAAA,GDIN,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAAQ,CAAA,AAAE,EAAG,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,AAA2B,CAAA,CAAA,CAAA,CAAK,AAAL,CAAK,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAA,CAAU,CAA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","ignoreList":[5,6]}