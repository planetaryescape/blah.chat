module.exports=[676019,a=>{"use strict";var b=a.i(367146),c=a.i(116245),d=a.i(158540),e=a.i(502311),f=a.i(537500),g=a.i(130487);a.i(16243);var h=a.i(182234),i=a.i(54797),j=a.i(402202),k=a.i(105698),l=a.i(651386),m=a.i(971310),n=a.i(753884),o=a.i(828288),p=a.i(539524),q=a.i(592552),r=a.i(227759),s=a.i(723979),t=a.i(700760),u=a.i(117175),v=a.i(452549),w=a.i(928503),x=a.i(658547),y=a.i(547885),z=a.i(197463);let A=["coding","writing","analysis","creative"];function B({template:a,onSuccess:c}){let[d,e]=(0,f.useState)(a?.name||""),[i,j]=(0,f.useState)(a?.prompt||""),[k,l]=(0,f.useState)(a?.description||""),[m,o]=(0,f.useState)(a?.category||"coding"),[q,r]=(0,f.useState)(!1),s=(0,h.useMutation)(g.api.templates.create),t=(0,h.useMutation)(g.api.templates.update),u=!!a,B=async b=>{if(b.preventDefault(),!d.trim()||!i.trim())return void n.toast.error("Name and prompt are required");r(!0);try{u?(await t({id:a._id,name:d.trim(),prompt:i.trim(),description:k.trim()||void 0,category:m}),n.toast.success("Template updated")):(await s({name:d.trim(),prompt:i.trim(),description:k.trim()||void 0,category:m}),n.toast.success("Template created")),c?.()}catch(a){n.toast.error(`Failed to ${u?"update":"create"} template`),console.error(a)}finally{r(!1)}};return(0,b.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(x.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(w.Input,{id:"name",value:d,onChange:a=>e(a.target.value),placeholder:"Code Reviewer",maxLength:100,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(x.Label,{htmlFor:"category",children:"Category *"}),(0,b.jsxs)(y.Select,{value:m,onValueChange:o,children:[(0,b.jsx)(y.SelectTrigger,{children:(0,b.jsx)(y.SelectValue,{})}),(0,b.jsx)(y.SelectContent,{children:A.map(a=>(0,b.jsx)(y.SelectItem,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(x.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(z.Textarea,{id:"description",value:k,onChange:a=>l(a.target.value),placeholder:"Quick description of what this template does...",maxLength:200,rows:2}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[k.length,"/200 characters"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(x.Label,{htmlFor:"prompt",children:"Prompt *"}),(0,b.jsx)(z.Textarea,{id:"prompt",value:i,onChange:a=>j(a.target.value),placeholder:"You are an expert code reviewer. Focus on...",maxLength:5e3,rows:8,required:!0}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[i.length,"/5000 characters"]})]}),(0,b.jsx)("div",{className:"flex gap-2 justify-end",children:(0,b.jsx)(p.Button,{type:"submit",disabled:q,children:q?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v.Loader2,{className:"w-4 h-4 mr-2 animate-spin"}),u?"Updating...":"Creating..."]}):(0,b.jsxs)(b.Fragment,{children:[u?"Update":"Create"," Template"]})})})]})}function C({template:a}){let d=(0,e.useRouter)(),[v,w]=(0,f.useState)(!1),[x,y]=(0,f.useState)(!1),z=(0,h.useMutation)(g.api.templates.deleteTemplate),A=(0,h.useMutation)(g.api.templates.incrementUsage),C=(0,u.useTemplateStore)(a=>a.setTemplateText),D=async()=>{try{await z({id:a._id}),n.toast.success("Template deleted")}catch(a){n.toast.error("Failed to delete template"),console.error(a)}},E=async()=>{try{await A({id:a._id}),C(a.prompt,a.name),d.push("/chat?from=template")}catch(a){n.toast.error("Failed to use template"),console.error(a)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(q.Card,{className:"group relative flex flex-col justify-between p-5 transition-all duration-300 hover:border-primary/20 hover:bg-muted/10",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 overflow-hidden",children:[(0,b.jsx)("div",{className:(0,t.cn)("flex h-9 w-9 shrink-0 items-center justify-center rounded-lg border border-border/50 bg-primary/10 text-primary"),children:a.isBuiltIn?(0,b.jsx)(l.Sparkles,{className:"h-4 w-4"}):(0,b.jsx)(c.FileText,{className:"h-4 w-4"})}),(0,b.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,b.jsx)("h3",{className:"truncate text-base font-semibold text-foreground leading-tight",children:a.name}),(0,b.jsx)("span",{className:"truncate text-xs text-muted-foreground font-medium uppercase tracking-wide mt-0.5",children:a.category})]})]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(0,b.jsxs)(s.DropdownMenu,{children:[(0,b.jsx)(s.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(p.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 transition-opacity group-hover:opacity-100 data-[state=open]:opacity-100 -mr-2 -mt-2",children:(0,b.jsx)(k.MoreHorizontal,{className:"h-4 w-4 text-muted-foreground"})})}),(0,b.jsxs)(s.DropdownMenuContent,{align:"end",className:"w-40",children:[!a.isBuiltIn&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(s.DropdownMenuItem,{onClick:()=>w(!0),children:[(0,b.jsx)(j.Edit,{className:"mr-2 h-3.5 w-3.5"})," Edit"]}),(0,b.jsx)(s.DropdownMenuSeparator,{})]}),(0,b.jsxs)(s.DropdownMenuItem,{onClick:()=>y(!0),className:"text-destructive focus:text-destructive",children:[(0,b.jsx)(m.Trash2,{className:"mr-2 h-3.5 w-3.5"})," Delete"]})]})]})})]}),(0,b.jsx)("p",{className:"line-clamp-2 text-sm text-muted-foreground/80 min-h-[3rem] leading-relaxed",children:a.description||a.prompt})]}),(0,b.jsxs)("div",{className:"mt-5 flex items-center justify-between border-t border-border/40 pt-4",children:[(0,b.jsx)("div",{className:"flex items-center gap-2 text-[10px] text-muted-foreground/60 uppercase tracking-wider font-medium",children:(0,b.jsxs)("span",{children:[a.usageCount," uses"]})}),(0,b.jsxs)(p.Button,{variant:"ghost",size:"sm",className:"h-8 px-4 text-xs font-medium bg-secondary/50 hover:bg-primary/10 hover:text-primary transition-all ml-auto",onClick:E,children:[(0,b.jsx)(i.Copy,{className:"mr-1.5 h-3 w-3"}),"Use Template"]})]})]}),!a.isBuiltIn&&(0,b.jsx)(r.Dialog,{open:v,onOpenChange:w,children:(0,b.jsxs)(r.DialogContent,{className:"sm:max-w-2xl",children:[(0,b.jsx)(r.DialogHeader,{children:(0,b.jsx)(r.DialogTitle,{children:"Edit Template"})}),(0,b.jsx)(B,{template:a,onSuccess:()=>w(!1)})]})}),(0,b.jsx)(o.AlertDialog,{open:x,onOpenChange:y,children:(0,b.jsxs)(o.AlertDialogContent,{children:[(0,b.jsxs)(o.AlertDialogHeader,{children:[(0,b.jsx)(o.AlertDialogTitle,{children:a.isBuiltIn?"Remove Template":"Delete Template"}),(0,b.jsx)(o.AlertDialogDescription,{children:a.isBuiltIn?"Are you sure you want to remove this built-in template from your view?":"Are you sure you want to delete this template? This action cannot be undone."})]}),(0,b.jsxs)(o.AlertDialogFooter,{children:[(0,b.jsx)(o.AlertDialogCancel,{children:"Cancel"}),(0,b.jsx)(o.AlertDialogAction,{onClick:D,className:"bg-destructive hover:bg-destructive/90",children:a.isBuiltIn?"Remove":"Delete"})]})]})})]})}var D=a.i(183104),E=a.i(206568),F=a.i(229606),G=a.i(276670),H=a.i(375523);let I=["all","coding","writing","analysis","creative"];function J(){let{showTemplates:a,isLoading:i}=(0,H.useFeatureToggles)();if(i)return(0,b.jsx)(F.FeatureLoadingScreen,{});if(!a)return(0,b.jsx)(E.DisabledFeaturePage,{featureName:"Templates",settingKey:"showTemplates"});let j=(0,e.useSearchParams)(),[k,l]=(0,f.useState)("all"),[m,o]=(0,f.useState)(!1),[q,s]=(0,f.useState)(!1);(0,f.useEffect)(()=>{"new"===j.get("action")&&(o(!0),window.history.replaceState({},"","/templates"))},[j]);let t=(0,h.useQuery)(g.api.templates.list,"all"===k?{}:{category:k}),u=(0,h.useMutation)(g.api.templates.builtIn.seedBuiltInTemplates);(0,f.useEffect)(()=>{(async()=>{if(t&&0===t.length&&!q)try{let a=await u();n.toast.success(a.message),s(!0)}catch(a){console.error("Failed to seed templates:",a)}})()},[t,q,u]);let v=t?.filter(a=>a.isBuiltIn)||[],w=t?.filter(a=>!a.isBuiltIn)||[];return(0,b.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-none z-50 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Templates"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Quick-start prompts for common tasks"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(D.Tabs,{value:k,onValueChange:l,className:"w-full md:w-auto",children:(0,b.jsx)(D.TabsList,{className:"bg-muted/50",children:I.map(a=>(0,b.jsx)(D.TabsTrigger,{value:a,className:"capitalize data-[state=active]:bg-background data-[state=active]:shadow-sm",children:a},a))})}),(0,b.jsxs)(p.Button,{onClick:()=>o(!0),size:"sm",className:"hidden md:flex",children:[(0,b.jsx)(d.Plus,{className:"w-4 h-4 mr-2"}),"New Template"]}),(0,b.jsx)(p.Button,{onClick:()=>o(!0),size:"icon",className:"md:hidden",children:(0,b.jsx)(d.Plus,{className:"w-4 h-4"})})]})]})})}),(0,b.jsx)(G.ScrollArea,{className:"flex-1 w-full min-h-0",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-8",children:(0,b.jsxs)("div",{className:"space-y-10",children:[w.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider",children:"Your Templates"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(a=>(0,b.jsx)(C,{template:a},a._id))})]}),v.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-sm font-semibold mb-4 text-muted-foreground uppercase tracking-wider",children:"Built-in Templates"}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(a=>(0,b.jsx)(C,{template:a},a._id))})]}),t&&0===t.length&&(0,b.jsxs)("div",{className:"text-center py-24 text-muted-foreground flex flex-col items-center",children:[(0,b.jsx)("div",{className:"h-16 w-16 rounded-full bg-muted/30 flex items-center justify-center mb-4",children:(0,b.jsx)(c.FileText,{className:"h-8 w-8 text-muted-foreground/40"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"No templates found"}),(0,b.jsx)("p",{className:"text-sm",children:"Create a new template to get started."})]})]})})}),(0,b.jsx)(r.Dialog,{open:m,onOpenChange:o,children:(0,b.jsxs)(r.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(r.DialogHeader,{children:(0,b.jsx)(r.DialogTitle,{children:"Create New Template"})}),(0,b.jsx)(B,{onSuccess:()=>o(!1)})]})})]})}a.s(["default",()=>J],676019)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_templates_page_tsx_1497e628._.js.map