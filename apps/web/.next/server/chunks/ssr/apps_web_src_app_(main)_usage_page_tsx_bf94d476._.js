module.exports=[321608,a=>{"use strict";var b=a.i(367146),c=a.i(130487),d=a.i(502210),e=a.i(175311);a.i(16243);var f=a.i(182234),g=a.i(315638),h=a.i(127718),i=a.i(359275),j=a.i(332747),k=a.i(54797),l=a.i(283116),m=a.i(116245),n=a.i(439828),o=a.i(161521),p=a.i(429649),q=a.i(822735),r=a.i(452549),s=a.i(687336),t=a.i(674779),u=a.i(397079),v=a.i(58459);let w=(0,a.i(366705).default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]);var x=a.i(469110),y=a.i(537500),z=a.i(999859),A=a.i(872016),B=a.i(927961),C=a.i(339346),D=a.i(366307),E=a.i(729799),F=a.i(15180),G=a.i(519872),H=a.i(397456),I=a.i(358692),J=a.i(230677),K=a.i(760926),L=a.i(216371),M=a.i(539524),N=a.i(276670),O=a.i(948217),P=a.i(371510);let Q=["#8b5cf6","#ec4899","#f59e0b","#10b981","#3b82f6","#6366f1"],R={text:"#3b82f6",voice:"#10b981",images:"#a855f7",slides:"#f59e0b"};function S(){let[a,d]=(0,y.useState)(()=>(0,P.getLastNDays)(30)),e=(0,f.useQuery)(c.api.usage.queries.getUsageSummary,{startDate:a.startDate,endDate:a.endDate}),g=(0,f.useQuery)(c.api.usage.queries.getDailySpend,{days:30}),M=(0,f.useQuery)(c.api.usage.queries.getSpendByModelDetailed,{startDate:a.startDate,endDate:a.endDate}),O=(0,f.useQuery)(c.api.usage.queries.getCostByType,{startDate:a.startDate,endDate:a.endDate}),S=(0,f.useQuery)(c.api.usage.queries.getActivityStats),V=(0,f.useQuery)(c.api.usage.queries.getTotalCounts),W=(0,f.useQuery)(c.api.usage.queries.getStreakStats),X=(0,f.useQuery)(c.api.usage.queries.getActivityHeatmap),Y=(0,f.useQuery)(c.api.usage.queries.getPercentileRanking),Z=(0,f.useQuery)(c.api.usage.queries.getActionStats);if(void 0===e||void 0===S||void 0===V)return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground animate-pulse",children:"Loading usage stats..."})]})});let $=O?[{name:"Text",value:O.textGeneration.cost},{name:"Voice",value:O.tts.cost},{name:"Images",value:O.images.cost},{name:"Slides",value:O.slides.cost}].filter(a=>a.value>0):[],_=M?.slice(0,6).map(a=>({name:a.model.split(":").pop()||a.model,value:a.totalCost}))||[];return(0,b.jsxs)("div",{className:"h-[calc(100vh-theme(spacing.16))] flex flex-col relative bg-background overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-none z-50 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-4",children:(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Usage"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Comprehensive statistics about your activity"})]}),(0,b.jsx)(J.DateRangePicker,{value:a,onChange:d})]})})}),(0,b.jsx)(N.ScrollArea,{className:"flex-1 w-full min-h-0",children:(0,b.jsx)("div",{className:"container mx-auto max-w-6xl px-4 py-8",children:(0,b.jsxs)(L.Accordion,{type:"multiple",defaultValue:["usage","activity","charts","streaks","actions"],className:"space-y-4",children:[(0,b.jsxs)(L.AccordionItem,{value:"usage",className:"border rounded-lg px-4",children:[(0,b.jsx)(L.AccordionTrigger,{children:"Usage Statistics"}),(0,b.jsxs)(L.AccordionContent,{className:"pt-4 pb-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-5",children:[(0,b.jsx)(K.UsageKPICard,{label:"Total Cost",value:(0,P.formatCurrency)(e?.totalCost??0),icon:l.DollarSign}),(0,b.jsx)(K.UsageKPICard,{label:"Total Tokens",value:(0,P.formatCompactNumber)(e?.totalTokens??0),icon:x.Zap}),(0,b.jsx)(K.UsageKPICard,{label:"Requests",value:(0,P.formatCompactNumber)(e?.totalRequests??0),icon:v.TrendingUp}),(0,b.jsx)(K.UsageKPICard,{label:"Avg Cost/Request",value:(0,P.formatCurrency)(e?.avgCostPerRequest??0),icon:l.DollarSign}),(0,b.jsx)(K.UsageKPICard,{label:"Messages",value:(0,P.formatCompactNumber)(e?.messageCount??0),icon:s.MessageSquare})]}),(0,b.jsxs)("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Input Tokens"}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:(0,P.formatCompactNumber)(e?.totalInputTokens??0)})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Output Tokens"}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:(0,P.formatCompactNumber)(e?.totalOutputTokens??0)})]})]})]})]}),(0,b.jsxs)(L.AccordionItem,{value:"activity",className:"border rounded-lg px-4",children:[(0,b.jsx)(L.AccordionTrigger,{children:"Activity Overview"}),(0,b.jsx)(L.AccordionContent,{className:"pt-4 pb-6",children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsx)(K.UsageKPICard,{label:"Conversations",value:V?.conversationsCount??0,icon:s.MessageSquare}),(0,b.jsx)(K.UsageKPICard,{label:"Notes",value:S?.notesCount??0,icon:m.FileText}),(0,b.jsx)(K.UsageKPICard,{label:"Projects",value:S?.projectsCount??0,icon:o.Folder}),(0,b.jsx)(K.UsageKPICard,{label:"Bookmarks",value:S?.bookmarksCount??0,icon:h.Bookmark}),(0,b.jsx)(K.UsageKPICard,{label:"Presentations",value:S?.slidesCount??0,icon:t.Presentation}),(0,b.jsx)(K.UsageKPICard,{label:"Tasks",value:S?.tasksCount??0,icon:j.CheckSquare}),(0,b.jsx)(K.UsageKPICard,{label:"Files Uploaded",value:V?.filesCount??0,icon:m.FileText}),(0,b.jsx)(K.UsageKPICard,{label:"Images Generated",value:V?.imagesGenerated??0,icon:q.Image}),(0,b.jsx)(K.UsageKPICard,{label:"Templates",value:S?.templatesCount??0,icon:i.Calendar})]})})]}),(0,b.jsxs)(L.AccordionItem,{value:"streaks",className:"border rounded-lg px-4",children:[(0,b.jsx)(L.AccordionTrigger,{children:"Streaks & Rankings"}),(0,b.jsxs)(L.AccordionContent,{className:"pt-4 pb-6",children:[(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(n.Flame,{className:"h-4 w-4 text-orange-500"}),"Current Streak"]}),(0,b.jsxs)("div",{className:"text-3xl font-bold",children:[W?.currentStreak??0,(0,b.jsx)("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"days"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(w,{className:"h-4 w-4 text-yellow-500"}),"Longest Streak"]}),(0,b.jsxs)("div",{className:"text-3xl font-bold",children:[W?.longestStreak??0,(0,b.jsx)("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"days"})]})]}),Y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,b.jsx)(v.TrendingUp,{className:"h-4 w-4 text-primary"}),"Overall Ranking"]}),(0,b.jsxs)("div",{className:"text-3xl font-bold",children:["Top ",100-Y.overallPercentile,"%"]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["of ",Y.totalActiveUsers," active users"]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4",children:[(0,b.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Top Model Rankings"}),(0,b.jsx)("div",{className:"space-y-1",children:Y.modelRankings.slice(0,3).map(a=>(0,b.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,b.jsx)("span",{className:"truncate max-w-[120px]",children:a.model.split(":").pop()}),(0,b.jsxs)("span",{className:"font-medium",children:["Top ",100-a.percentile,"%"]})]},a.model))})]})]})]}),X&&(0,b.jsxs)("div",{className:"mt-6",children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Activity (Last 52 Weeks)"}),(0,b.jsx)(T,{data:X})]})]})]}),(0,b.jsxs)(L.AccordionItem,{value:"actions",className:"border rounded-lg px-4",children:[(0,b.jsx)(L.AccordionTrigger,{children:"Action Button Usage"}),(0,b.jsx)(L.AccordionContent,{className:"pt-4 pb-6",children:(0,b.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:[(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(k.Copy,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.copy_message??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Messages Copied"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(h.Bookmark,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.bookmark_message??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Bookmarks Created"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(m.FileText,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.save_as_note??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Saved as Notes"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(t.Presentation,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.create_presentation??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Presentations Created"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(p.GitBranch,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.branch_message??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Branches Created"})]})]}),(0,b.jsxs)("div",{className:"rounded-lg border p-4 flex items-center gap-3",children:[(0,b.jsx)(u.RotateCcw,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:Z?.regenerate_message??0}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Regenerations"})]})]})]})})]}),(0,b.jsxs)(L.AccordionItem,{value:"charts",className:"border rounded-lg px-4",children:[(0,b.jsx)(L.AccordionTrigger,{children:"Charts & Breakdown"}),(0,b.jsxs)(L.AccordionContent,{className:"pt-4 pb-6 space-y-6",children:[g&&g.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Daily Spend"}),(0,b.jsx)("div",{className:"h-[300px]",children:(0,b.jsx)(F.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(A.AreaChart,{data:g,children:[(0,b.jsx)(B.CartesianGrid,{strokeDasharray:"3 3",opacity:.3}),(0,b.jsx)(H.XAxis,{dataKey:"date",tick:{fontSize:10},tickFormatter:a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,b.jsx)(I.YAxis,{tick:{fontSize:10},tickFormatter:a=>`$${a.toFixed(2)}`}),(0,b.jsx)(G.Tooltip,{formatter:a=>[`$${a.toFixed(4)}`,"Cost"],labelFormatter:a=>new Date(a).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),(0,b.jsx)(z.Area,{type:"monotone",dataKey:"cost",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.3})]})})})]}),(0,b.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[_.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Spend by Model"}),(0,b.jsx)("div",{className:"h-[250px]",children:(0,b.jsx)(F.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(E.PieChart,{children:[(0,b.jsx)(D.Pie,{data:_,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:a,percent:b})=>`${a} (${((b??0)*100).toFixed(0)}%)`,labelLine:{strokeWidth:1},children:_.map((a,c)=>(0,b.jsx)(C.Cell,{fill:Q[c%Q.length]},`cell-${c}`))}),(0,b.jsx)(G.Tooltip,{formatter:a=>[`$${a.toFixed(4)}`,"Cost"]})]})})})]}),$.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Cost by Type"}),(0,b.jsx)("div",{className:"h-[250px]",children:(0,b.jsx)(F.ResponsiveContainer,{width:"100%",height:"100%",children:(0,b.jsxs)(E.PieChart,{children:[(0,b.jsx)(D.Pie,{data:$,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:80,label:({name:a,percent:b})=>`${a} (${((b??0)*100).toFixed(0)}%)`,labelLine:{strokeWidth:1},children:$.map((a,c)=>(0,b.jsx)(C.Cell,{fill:R[a.name.toLowerCase()]||Q[c]},`cell-${c}`))}),(0,b.jsx)(G.Tooltip,{formatter:a=>[`$${a.toFixed(4)}`,"Cost"]})]})})})]})]}),M&&M.length>0&&(0,b.jsx)(U,{data:M})]})]})]})})})]})}function T({data:a}){let c=Math.max(...a.map(a=>a.count),1),d=["bg-muted","bg-emerald-200 dark:bg-emerald-900","bg-emerald-400 dark:bg-emerald-700","bg-emerald-500 dark:bg-emerald-500","bg-emerald-600 dark:bg-emerald-400"],e=[];for(let b=0;b<a.length;b+=7)e.push(a.slice(b,b+7));return(0,b.jsxs)("div",{className:"overflow-x-auto",children:[(0,b.jsxs)("div",{className:"flex gap-[2px] min-w-max",children:[(0,b.jsx)("div",{className:"flex flex-col gap-[2px] mr-1 pt-4",children:["S","M","T","W","T","F","S"].map((a,c)=>(0,b.jsx)("div",{className:"h-[10px] w-[10px] text-[8px] text-muted-foreground flex items-center justify-center",children:c%2==1?a:""},c))}),e.map((a,e)=>(0,b.jsxs)("div",{className:"flex flex-col gap-[2px]",children:[(0,b.jsx)("div",{className:"h-3 text-[8px] text-muted-foreground",children:0===e||a[0]&&7>=new Date(a[0].date).getDate()&&e>0?new Date(a[0]?.date||"").toLocaleDateString("en-US",{month:"short"}):""}),a.map((a,e)=>(0,b.jsx)("div",{className:`h-[10px] w-[10px] rounded-[2px] ${d[(a=>{if(0===a)return 0;let b=a/c;return b<.25?1:b<.5?2:b<.75?3:4})(a.count)]}`,title:`${a.date}: ${a.count} messages`},e))]},e))]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-1 mt-2 text-[10px] text-muted-foreground",children:[(0,b.jsx)("span",{children:"Less"}),d.map((a,c)=>(0,b.jsx)("div",{className:`h-[10px] w-[10px] rounded-[2px] ${a}`},c)),(0,b.jsx)("span",{children:"More"})]})]})}function U({data:a}){let[c,f]=(0,y.useState)([{id:"totalCost",desc:!0}]),h=(0,y.useMemo)(()=>[{accessorKey:"model",header:({column:a})=>(0,b.jsxs)(M.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"-ml-4 hover:bg-transparent",children:["Model",(0,b.jsx)(g.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("span",{className:"font-mono text-xs",children:a.original.model})},{accessorKey:"requestCount",header:({column:a})=>(0,b.jsxs)(M.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent w-full justify-end",children:["Requests",(0,b.jsx)(g.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("div",{className:"text-right",children:a.original.requestCount})},{accessorKey:"totalInputTokens",header:({column:a})=>(0,b.jsxs)(M.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent w-full justify-end",children:["Input Tokens",(0,b.jsx)(g.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,P.formatCompactNumber)(a.original.totalInputTokens)})},{accessorKey:"totalOutputTokens",header:({column:a})=>(0,b.jsxs)(M.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent w-full justify-end",children:["Output Tokens",(0,b.jsx)(g.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,P.formatCompactNumber)(a.original.totalOutputTokens)})},{accessorKey:"totalCost",header:({column:a})=>(0,b.jsxs)(M.Button,{variant:"ghost",onClick:()=>a.toggleSorting("asc"===a.getIsSorted()),className:"hover:bg-transparent w-full justify-end",children:["Cost",(0,b.jsx)(g.ArrowUpDown,{className:"ml-2 h-4 w-4"})]}),cell:({row:a})=>(0,b.jsx)("div",{className:"text-right",children:(0,P.formatCurrency)(a.original.totalCost)})}],[]),i=(0,d.useReactTable)({data:a,columns:h,onSortingChange:f,getCoreRowModel:(0,e.getCoreRowModel)(),getSortedRowModel:(0,e.getSortedRowModel)(),state:{sorting:c}});return(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"text-sm font-medium mb-3",children:"Model Details"}),(0,b.jsx)(N.ScrollArea,{className:"h-[400px] border rounded-lg",children:(0,b.jsxs)(O.Table,{children:[(0,b.jsx)(O.TableHeader,{className:"sticky top-0 bg-background z-10",children:i.getHeaderGroups().map(a=>(0,b.jsx)(O.TableRow,{className:"hover:bg-transparent",children:a.headers.map(a=>(0,b.jsx)(O.TableHead,{children:a.isPlaceholder?null:(0,d.flexRender)(a.column.columnDef.header,a.getContext())},a.id))},a.id))}),(0,b.jsx)(O.TableBody,{children:i.getRowModel().rows.map(a=>(0,b.jsx)(O.TableRow,{className:"hover:bg-muted/30",children:a.getVisibleCells().map(a=>(0,b.jsx)(O.TableCell,{children:(0,d.flexRender)(a.column.columnDef.cell,a.getContext())},a.id))},a.id))})]})})]})}function V(){return(0,b.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(r.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground animate-pulse",children:"Loading usage stats..."})]})})}function W(){return(0,b.jsx)(y.Suspense,{fallback:(0,b.jsx)(V,{}),children:(0,b.jsx)(S,{})})}a.s(["default",()=>W,"dynamic",0,"force-dynamic"],321608)}];

//# sourceMappingURL=apps_web_src_app_%28main%29_usage_page_tsx_bf94d476._.js.map