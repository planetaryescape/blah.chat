module.exports=[891907,849270,a=>{"use strict";var b=a.i(537500);let c=function(){try{let a="nuqs-localStorage-test";if("undefined"==typeof localStorage)return!1;localStorage.setItem(a,a);let b=localStorage.getItem(a)===a;return localStorage.removeItem(a),b&&(localStorage.getItem("debug")||"").includes("nuqs")}catch{return!1}}();function d(a,...b){if(!c)return;let e=function(a,...b){return a.replace(/%[sfdO]/g,a=>{let c=b.shift();return"%O"===a&&c?JSON.stringify(c).replace(/"([^"]+)":/g,"$1:"):String(c)})}(a,...b);performance.mark(e);try{console.log(a,...b)}catch{console.log(e)}}function e(a,...b){c&&console.warn(a,...b)}let f={303:"Multiple adapter contexts detected. This might happen in monorepos.",404:"nuqs requires an adapter to work with your framework.",409:"Multiple versions of the library are loaded. This may lead to unexpected behavior. Currently using `%s`, but `%s` (via the %s adapter) was about to load on top.",414:"Max safe URL length exceeded. Some browsers may not be able to accept this URL. Consider limiting the amount of state stored in the URL.",422:"Invalid options combination: `limitUrlUpdates: debounce` should be used in SSR scenarios, with `shallow: false`",429:"URL update rate-limited by the browser. Consider increasing `throttleMs` for key(s) `%s`. %O",500:"Empty search params cache. Search params can't be accessed in Layouts.",501:"Search params cache already populated. Have you called `parse` twice?"};function g(a){return`[nuqs] ${f[a]}
  See https://nuqs.dev/NUQS-${a}`}function h(a){if(0===a.size)return"";let b=[];for(let[c,d]of a.entries()){let a=c.replace(/#/g,"%23").replace(/&/g,"%26").replace(/\+/g,"%2B").replace(/=/g,"%3D").replace(/\?/g,"%3F");b.push(`${a}=${d.replace(/%/g,"%25").replace(/\+/g,"%2B").replace(/ /g,"+").replace(/#/g,"%23").replace(/&/g,"%26").replace(/"/g,"%22").replace(/'/g,"%27").replace(/`/g,"%60").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/[\x00-\x1F]/g,a=>encodeURIComponent(a))}`)}return"?"+b.join("&")}let i=(0,b.createContext)({useAdapter(){throw Error(g(404))}});function j(a){return({children:c,defaultOptions:d,processUrlSearchParams:e,...f})=>(0,b.createElement)(i.Provider,{...f,value:{useAdapter:a,defaultOptions:d,processUrlSearchParams:e}},c)}function k(a){let c=(0,b.useContext)(i);if(!("useAdapter"in c))throw Error(g(404));return c.useAdapter(a)}i.displayName="NuqsAdapterContext";let l=()=>(0,b.useContext)(i).defaultOptions,m=()=>(0,b.useContext)(i).processUrlSearchParams;function n(a){return{method:"throttle",timeMs:a}}function o(a){return{method:"debounce",timeMs:a}}a.s(["a",()=>m,"c",()=>d,"i",()=>l,"l",()=>e,"n",()=>j,"o",()=>h,"r",()=>k,"s",()=>g],849270);let p=n(50);function q(a){return null===a||Array.isArray(a)&&0===a.length}function r(a,b,c){if("string"==typeof a)c.set(b,a);else{for(let d of(c.delete(b),a))c.append(b,d);c.has(b)||c.set(b,"")}return c}function s(){let a=new Map;return{on(b,c){let d=a.get(b)||[];return d.push(c),a.set(b,d),()=>this.off(b,c)},off(b,c){let d=a.get(b);d&&a.set(b,d.filter(a=>a!==c))},emit(b,c){a.get(b)?.forEach(a=>a(c))}}}function t(a,b,c){let d=setTimeout(function(){a(),c.removeEventListener("abort",e)},b);function e(){clearTimeout(d),c.removeEventListener("abort",e)}c.addEventListener("abort",e)}function u(){let a=Promise;if(Promise.hasOwnProperty("withResolvers"))return Promise.withResolvers();let b=()=>{},c=()=>{};return{promise:new a((a,d)=>{b=a,c=d}),resolve:b,reject:c}}function v(){return new URLSearchParams(location.search)}var w=class{updateMap=new Map;options={history:"replace",scroll:!1,shallow:!0};timeMs=p.timeMs;transitions=new Set;resolvers=null;controller=null;lastFlushedAt=0;resetQueueOnNextPush=!1;push({key:a,query:b,options:c},e=p.timeMs){this.resetQueueOnNextPush&&(this.reset(),this.resetQueueOnNextPush=!1),d("[nuqs gtq] Enqueueing %s=%s %O",a,b,c),this.updateMap.set(a,b),"push"===c.history&&(this.options.history="push"),c.scroll&&(this.options.scroll=!0),!1===c.shallow&&(this.options.shallow=!1),c.startTransition&&this.transitions.add(c.startTransition),(!Number.isFinite(this.timeMs)||e>this.timeMs)&&(this.timeMs=e)}getQueuedQuery(a){return this.updateMap.get(a)}getPendingPromise({getSearchParamsSnapshot:a=v}){return this.resolvers?.promise??Promise.resolve(a())}flush({getSearchParamsSnapshot:a=v,rateLimitFactor:b=1,...c},e){if(this.controller??=new AbortController,!Number.isFinite(this.timeMs))return d("[nuqs gtq] Skipping flush due to throttleMs=Infinity"),Promise.resolve(a());if(this.resolvers)return this.resolvers.promise;this.resolvers=u();let f=()=>{this.lastFlushedAt=performance.now();let[b,d]=this.applyPendingUpdates({...c,autoResetQueueOnUpdate:c.autoResetQueueOnUpdate??!0,getSearchParamsSnapshot:a},e);null===d?(this.resolvers.resolve(b),this.resetQueueOnNextPush=!0):this.resolvers.reject(b),this.resolvers=null},g=()=>{let a=performance.now()-this.lastFlushedAt,c=this.timeMs,e=b*Math.max(0,c-a);d("[nuqs gtq] Scheduling flush in %f ms. Throttled at %f ms (x%f)",e,c,b),0===e?f():t(f,e,this.controller.signal)};return t(g,0,this.controller.signal),this.resolvers.promise}abort(){return this.controller?.abort(),this.controller=new AbortController,this.resolvers?.resolve(new URLSearchParams),this.resolvers=null,this.reset()}reset(){let a=Array.from(this.updateMap.keys());return d("[nuqs gtq] Resetting queue %s",JSON.stringify(Object.fromEntries(this.updateMap))),this.updateMap.clear(),this.transitions.clear(),this.options={history:"replace",scroll:!1,shallow:!0},this.timeMs=p.timeMs,a}applyPendingUpdates(a,b){let{updateUrl:c,getSearchParamsSnapshot:e}=a,f=e();if(d("[nuqs gtq] Applying %d pending update(s) on top of %s",this.updateMap.size,f.toString()),0===this.updateMap.size)return[f,null];let h=Array.from(this.updateMap.entries()),i={...this.options},j=Array.from(this.transitions);for(let[b,c]of(a.autoResetQueueOnUpdate&&this.reset(),d("[nuqs gtq] Flushing queue %O with options %O",h,i),h))null===c?f.delete(b):f=r(c,b,f);b&&(f=b(f));try{return!function(a,b){let c=b;for(let b=a.length-1;b>=0;b--){let d=a[b];if(!d)continue;let e=c;c=()=>d(e)}c()}(j,()=>{c(f,i)}),[f,null]}catch(a){return console.error(g(429),h.map(([a])=>a).join(),a),[f,a]}}};let x=new w;var y=class{callback;resolvers=u();controller=new AbortController;queuedValue=void 0;constructor(a){this.callback=a}abort(){this.controller.abort(),this.queuedValue=void 0}push(a,b){return this.queuedValue=a,this.controller.abort(),this.controller=new AbortController,t(()=>{let b=this.resolvers;try{d("[nuqs dq] Flushing debounce queue",a);let c=this.callback(a);d("[nuqs dq] Reset debounce queue %O",this.queuedValue),this.queuedValue=void 0,this.resolvers=u(),c.then(a=>b.resolve(a)).catch(a=>b.reject(a))}catch(a){this.queuedValue=void 0,b.reject(a)}},b,this.controller.signal),this.resolvers.promise}};let z=new class{throttleQueue;queues=new Map;queuedQuerySync=s();constructor(a=new w){this.throttleQueue=a}useQueuedQueries(a){var c,d;let e,f;return c=(a,b)=>this.queuedQuerySync.on(a,b),d=a=>this.getQueuedQuery(a),e=(0,b.useCallback)(()=>{let b=Object.fromEntries(a.map(a=>[a,d(a)]));return[JSON.stringify(b),b]},[a.join(","),d]),null===(f=(0,b.useRef)(null)).current&&(f.current=e()),(0,b.useSyncExternalStore)((0,b.useCallback)(b=>{let d=a.map(a=>c(a,b));return()=>d.forEach(a=>a())},[a.join(","),c]),()=>{let[a,b]=e();return f.current[0]===a?f.current[1]:(f.current=[a,b],b)},()=>f.current[1])}push(a,b,c,e){if(!Number.isFinite(b))return Promise.resolve((c.getSearchParamsSnapshot??v)());let f=a.key;if(!this.queues.has(f)){d("[nuqs dqc] Creating debounce queue for `%s`",f);let a=new y(a=>(this.throttleQueue.push(a),this.throttleQueue.flush(c,e).finally(()=>{this.queues.get(a.key)?.queuedValue===void 0&&(d("[nuqs dqc] Cleaning up empty queue for `%s`",a.key),this.queues.delete(a.key)),this.queuedQuerySync.emit(a.key)})));this.queues.set(f,a)}d("[nuqs dqc] Enqueueing debounce update %O",a);let g=this.queues.get(f).push(a,b);return this.queuedQuerySync.emit(f),g}abort(a){let b=this.queues.get(a);return b?(d("[nuqs dqc] Aborting debounce queue %s=%s",a,b.queuedValue?.query),this.queues.delete(a),b.abort(),this.queuedQuerySync.emit(a),a=>(a.then(b.resolvers.resolve,b.resolvers.reject),a)):a=>a}abortAll(){for(let[a,b]of this.queues.entries())d("[nuqs dqc] Aborting debounce queue %s=%s",a,b.queuedValue?.query),b.abort(),b.resolvers.resolve(new URLSearchParams),this.queuedQuerySync.emit(a);this.queues.clear()}getQueuedQuery(a){let b=this.queues.get(a)?.queuedValue?.query;return void 0!==b?b:this.throttleQueue.getQueuedQuery(a)}}(x);a.s(["a",()=>r,"c",()=>n,"i",()=>q,"n",()=>x,"o",()=>o,"r",()=>s,"s",()=>p,"t",()=>z],891907)},706353,486722,a=>{"use strict";var b=a.i(367146);a.i(16243);var c=a.i(182234),d=a.i(537500);let e=(0,d.createContext)({registry:null});class f{queries;subs;convex;timeout;maxIdleEntries;idle;constructor(a,b){if(this.queries=new Map,this.subs=new Map,this.convex=a,this.idle=0,this.timeout=b.expiration??3e5,this.maxIdleEntries=b.maxIdleEntries??250,b.debug){const a=new WeakRef(this),b=setInterval(()=>{let c=a.deref();void 0===c?clearInterval(b):c.debug()},3e3)}}start(a,b,c,d){let e=this.queries.get(b);this.subs.set(a,b),void 0===e?(e={refs:new Set,evictTimer:null,unsub:this.convex.watchQuery(c,d).onUpdate(()=>{})},this.queries.set(b,e)):null!==e.evictTimer&&(this.idle-=1,clearTimeout(e.evictTimer),e.evictTimer=null),e.refs.add(a)}end(a){let b=this.subs.get(a);if(b){this.subs.delete(a);let c=this.queries.get(b);if(c?.refs.delete(a),c?.refs.size===0){let a=()=>{c.unsub(),this.queries.delete(b)};this.idle==this.maxIdleEntries?a():(this.idle+=1,c.evictTimer=window.setTimeout(()=>{this.idle-=1,a()},this.timeout))}}}debug(){for(let[a,b]of(console.log("DEBUG CACHE"),console.log(`IDLE = ${this.idle}`),console.log(" SUBS"),this.subs.entries()))console.log(`  ${a} => ${b}`);for(let[a,b]of(console.log(" QUERIES"),this.queries.entries()))console.log(`  ${a} => ${b.refs.size} refs, evict = ${b.evictTimer}`);console.log("~~~~~~~~~~~~~~~~~~~~~~")}}a.s(["ConvexQueryCacheContext",0,e,"ConvexQueryCacheProvider",0,({children:a,debug:g,expiration:h,maxIdleEntries:i})=>{let j=(0,c.useConvex)();if(void 0===j)throw Error("Could not find Convex client! `ConvexQueryCacheProvider` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");let k=(0,d.useMemo)(()=>new f(j,{debug:g,expiration:h,maxIdleEntries:i}),[j,g,h,i]);return(0,b.jsx)(e.Provider,{value:{registry:k},children:a})}],706353);var g=a.i(619784);a.i(222806);var h=a.i(749182);a.i(263459);var i=a.i(31830),j=a.i(872909);let k="undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID.bind(crypto):()=>Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);function l(a){let{registry:b}=(0,d.useContext)(e);if(null===b)throw Error("Could not find `ConvexQueryCacheContext`! This `useQuery` implementation must be used in the React component tree under `ConvexQueryCacheProvider`. Did you forget it? ");let c={};for(let[b,{query:d,args:e}]of Object.entries(a)){var f,i;c[b]=(f=d,i=e,JSON.stringify([(0,h.getFunctionName)(f),(0,j.convexToJson)(i)]))}(0,d.useEffect)(()=>{let d=[];for(let[e,{query:f,args:g}]of Object.entries(a)){let a=k();b.start(a,c[e],f,g),d.push(a)}return()=>{for(let a of d)b.end(a)}},[b,JSON.stringify(c)]);let l=(0,d.useMemo)(()=>a,[JSON.stringify(c)]);return(0,g.useQueries)(l)}function m(a,...b){let c=b[0]??{},d=l("skip"===c?{}:{_default:{query:a,args:c}})._default;if(d instanceof Error)throw d;return d}let n=(a,b,c)=>d=>{let e={...d.queries},f=d.nextPageKey,g=d.nextPageKey+1,h=d.nextPageKey+2;e[f]={query:d.query,args:{...d.args,paginationOpts:{...d.queries[a].args.paginationOpts,endCursor:b}}},e[g]={query:d.query,args:{...d.args,paginationOpts:{...d.queries[a].args.paginationOpts,cursor:b,endCursor:c}}};let i={...d.ongoingSplits};return i[a]=[f,g],{...d,nextPageKey:h,queries:e,ongoingSplits:i}},o=a=>b=>{let c=b.ongoingSplits[a];if(void 0===c)return b;let d={...b.queries};delete d[a];let e={...b.ongoingSplits};delete e[a];let f=b.pageKeys.slice(),g=b.pageKeys.findIndex(b=>b===a);return g>=0&&(f=[...b.pageKeys.slice(0,g),...c,...b.pageKeys.slice(g+1)]),{...b,queries:d,pageKeys:f,ongoingSplits:e}};function p(a,b,e){if("number"!=typeof e?.initialNumItems||e.initialNumItems<=0)throw Error(`\`options.initialNumItems\` must be a positive number. Received \`${e?.initialNumItems}\`.`);let f="skip"===b,g=f?{}:b,k=(0,h.getFunctionName)(a),m=(0,d.useMemo)(()=>()=>({query:a,args:g,id:0,nextPageKey:1,pageKeys:f?[]:[0],queries:f?{}:{0:{query:a,args:{...g,paginationOpts:{numItems:e.initialNumItems,cursor:null,id:0}}}},ongoingSplits:{},skip:f}),[JSON.stringify((0,j.convexToJson)(g)),k,e.initialNumItems,f]),[p,q]=(0,d.useState)(m),r=p;(f!==p.skip||(0,h.getFunctionName)(a)!==(0,h.getFunctionName)(p.query)||JSON.stringify((0,j.convexToJson)(g))!==JSON.stringify((0,j.convexToJson)(p.args)))&&q(r=m());let s=(0,c.useConvex)().logger,t=l(r.queries),[u,v]=(0,d.useMemo)(()=>{let a,b=[];for(let c of r.pageKeys){if(void 0===(a=t[c]))break;if(a instanceof Error)if(a.message.includes("InvalidCursor")||a instanceof i.ConvexError&&"object"==typeof a.data&&a.data?.isConvexSystemError===!0&&a.data?.paginationError==="InvalidCursor")return s.warn("usePaginatedQuery hit error, resetting pagination state: "+a.message),q(m),[[],void 0];else throw a;let d=r.ongoingSplits[c];if(void 0!==d?void 0!==t[d[0]]&&void 0!==t[d[1]]&&q(o(c)):a.splitCursor&&("SplitRecommended"===a.pageStatus||"SplitRequired"===a.pageStatus||(e.customPagination?a.page.length>e.initialNumItems:a.page.length>2*e.initialNumItems))&&q(n(c,a.splitCursor,a.continueCursor)),"SplitRequired"===a.pageStatus)return[b,void 0];b.push(...a.page)}return[b,a]},[t,r.pageKeys,r.ongoingSplits,e.initialNumItems,m,s]);return{results:u,...(0,d.useMemo)(()=>{if(void 0===v&&r.pageKeys.length<=1)return{status:"LoadingFirstPage",isLoading:!0,loadMore:a=>{}};if(void 0===v||e.customPagination&&void 0!==r.ongoingSplits[r.pageKeys.at(-1)])return{status:"LoadingMore",isLoading:!0,loadMore:a=>{}};if(v.isDone)return{status:"Exhausted",isLoading:!1,loadMore:a=>{}};let a=v.continueCursor,b=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:c=>{b||(b=!0,q(b=>{let d=b.nextPageKey,f={...b.queries},g=b.ongoingSplits,h=b.pageKeys;if(e.customPagination){let c=b.pageKeys.at(-1),e=d;f[e]={query:b.query,args:{...b.args,paginationOpts:{...f[c].args.paginationOpts,endCursor:a}}},d++,g={...g,[c]:[e,d]}}else h=[...b.pageKeys,d];return f[d]={query:b.query,args:{...b.args,paginationOpts:{numItems:c,cursor:a,id:b.id}}},d++,{...b,pageKeys:h,nextPageKey:d,queries:f,ongoingSplits:g}}))}}},[v,r.nextPageKey,e.customPagination])}}a.s(["usePaginatedQuery",()=>p,"useQuery",()=>m],486722)},208756,a=>{"use strict";a.i(706353),a.i(486722),a.s([])}];

//# sourceMappingURL=node_modules__bun_94ee68c2._.js.map