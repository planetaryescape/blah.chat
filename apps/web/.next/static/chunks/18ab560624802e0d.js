(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,983742,(e,t,s)=>{t.exports={L:1,M:0,Q:3,H:2}},105502,(e,t,s)=>{t.exports={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8}},866238,(e,t,s)=>{var r=e.r(105502);function a(e){this.mode=r.MODE_8BIT_BYTE,this.data=e}a.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},t.exports=a},518429,(e,t,s)=>{var r=e.r(983742);function a(e,t){this.totalCount=e,this.dataCount=t}a.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],a.getRSBlocks=function(e,t){var s=a.getRsBlockTable(e,t);if(void 0==s)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=s.length/3,n=[],i=0;i<r;i++)for(var l=s[3*i+0],o=s[3*i+1],c=s[3*i+2],u=0;u<l;u++)n.push(new a(o,c));return n},a.getRsBlockTable=function(e,t){switch(t){case r.L:return a.RS_BLOCK_TABLE[(e-1)*4+0];case r.M:return a.RS_BLOCK_TABLE[(e-1)*4+1];case r.Q:return a.RS_BLOCK_TABLE[(e-1)*4+2];case r.H:return a.RS_BLOCK_TABLE[(e-1)*4+3];default:return}},t.exports=a},408164,(e,t,s)=>{function r(){this.buffer=[],this.length=0}r.prototype={get:function(e){var t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)==1},put:function(e,t){for(var s=0;s<t;s++)this.putBit((e>>>t-s-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},t.exports=r},388300,(e,t,s)=>{for(var r={glog:function(e){if(e<1)throw Error("glog("+e+")");return r.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return r.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},a=0;a<8;a++)r.EXP_TABLE[a]=1<<a;for(var a=8;a<256;a++)r.EXP_TABLE[a]=r.EXP_TABLE[a-4]^r.EXP_TABLE[a-5]^r.EXP_TABLE[a-6]^r.EXP_TABLE[a-8];for(var a=0;a<255;a++)r.LOG_TABLE[r.EXP_TABLE[a]]=a;t.exports=r},822556,(e,t,s)=>{var r=e.r(388300);function a(e,t){if(void 0==e.length)throw Error(e.length+"/"+t);for(var s=0;s<e.length&&0==e[s];)s++;this.num=Array(e.length-s+t);for(var r=0;r<e.length-s;r++)this.num[r]=e[r+s]}a.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),s=0;s<this.getLength();s++)for(var n=0;n<e.getLength();n++)t[s+n]^=r.gexp(r.glog(this.get(s))+r.glog(e.get(n)));return new a(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=r.glog(this.get(0))-r.glog(e.get(0)),s=Array(this.getLength()),n=0;n<this.getLength();n++)s[n]=this.get(n);for(var n=0;n<e.getLength();n++)s[n]^=r.gexp(r.glog(e.get(n))+t);return new a(s,0).mod(e)}},t.exports=a},790065,(e,t,s)=>{var r=e.r(105502),a=e.r(822556),n=e.r(388300),i={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;i.getBCHDigit(t)-i.getBCHDigit(i.G15)>=0;)t^=i.G15<<i.getBCHDigit(t)-i.getBCHDigit(i.G15);return(e<<10|t)^i.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;i.getBCHDigit(t)-i.getBCHDigit(i.G18)>=0;)t^=i.G18<<i.getBCHDigit(t)-i.getBCHDigit(i.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return i.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,s){switch(e){case 0:return(t+s)%2==0;case 1:return t%2==0;case 2:return s%3==0;case 3:return(t+s)%3==0;case 4:return(Math.floor(t/2)+Math.floor(s/3))%2==0;case 5:return t*s%2+t*s%3==0;case 6:return(t*s%2+t*s%3)%2==0;case 7:return(t*s%3+(t+s)%2)%2==0;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new a([1],0),s=0;s<e;s++)t=t.multiply(new a([1,n.gexp(s)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case r.MODE_NUMBER:return 10;case r.MODE_ALPHA_NUM:return 9;case r.MODE_8BIT_BYTE:case r.MODE_KANJI:return 8;default:throw Error("mode:"+e)}if(t<27)switch(e){case r.MODE_NUMBER:return 12;case r.MODE_ALPHA_NUM:return 11;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 10;default:throw Error("mode:"+e)}if(t<41)switch(e){case r.MODE_NUMBER:return 14;case r.MODE_ALPHA_NUM:return 13;case r.MODE_8BIT_BYTE:return 16;case r.MODE_KANJI:return 12;default:throw Error("mode:"+e)}throw Error("type:"+t)},getLostPoint:function(e){for(var t=e.getModuleCount(),s=0,r=0;r<t;r++)for(var a=0;a<t;a++){for(var n=0,i=e.isDark(r,a),l=-1;l<=1;l++)if(!(r+l<0)&&!(t<=r+l))for(var o=-1;o<=1;o++)!(a+o<0)&&!(t<=a+o)&&(0!=l||0!=o)&&i==e.isDark(r+l,a+o)&&n++;n>5&&(s+=3+n-5)}for(var r=0;r<t-1;r++)for(var a=0;a<t-1;a++){var c=0;e.isDark(r,a)&&c++,e.isDark(r+1,a)&&c++,e.isDark(r,a+1)&&c++,e.isDark(r+1,a+1)&&c++,(0==c||4==c)&&(s+=3)}for(var r=0;r<t;r++)for(var a=0;a<t-6;a++)e.isDark(r,a)&&!e.isDark(r,a+1)&&e.isDark(r,a+2)&&e.isDark(r,a+3)&&e.isDark(r,a+4)&&!e.isDark(r,a+5)&&e.isDark(r,a+6)&&(s+=40);for(var a=0;a<t;a++)for(var r=0;r<t-6;r++)e.isDark(r,a)&&!e.isDark(r+1,a)&&e.isDark(r+2,a)&&e.isDark(r+3,a)&&e.isDark(r+4,a)&&!e.isDark(r+5,a)&&e.isDark(r+6,a)&&(s+=40);for(var u=0,a=0;a<t;a++)for(var r=0;r<t;r++)e.isDark(r,a)&&u++;return s+10*(Math.abs(100*u/t/t-50)/5)}};t.exports=i},787962,(e,t,s)=>{var r=e.r(866238),a=e.r(518429),n=e.r(408164),i=e.r(790065),l=e.r(822556);function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var c=o.prototype;c.addData=function(e){var t=new r(e);this.dataList.push(t),this.dataCache=null},c.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]},c.getModuleCount=function(){return this.moduleCount},c.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=a.getRSBlocks(e,this.errorCorrectLevel),s=new n,r=0,l=0;l<t.length;l++)r+=t[l].dataCount;for(var l=0;l<this.dataList.length;l++){var o=this.dataList[l];s.put(o.mode,4),s.put(o.getLength(),i.getLengthInBits(o.mode,e)),o.write(s)}if(s.getLengthInBits()<=8*r)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},c.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var s=0;s<this.moduleCount;s++){this.modules[s]=Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[s][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},c.setupPositionProbePattern=function(e,t){for(var s=-1;s<=7;s++)if(!(e+s<=-1)&&!(this.moduleCount<=e+s))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(0<=s&&s<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==s||6==s)||2<=s&&s<=4&&2<=r&&r<=4?this.modules[e+s][t+r]=!0:this.modules[e+s][t+r]=!1)},c.getBestMaskPattern=function(){for(var e=0,t=0,s=0;s<8;s++){this.makeImpl(!0,s);var r=i.getLostPoint(this);(0==s||e>r)&&(e=r,t=s)}return t},c.createMovieClip=function(e,t,s){var r=e.createEmptyMovieClip(t,s);this.make();for(var a=0;a<this.modules.length;a++)for(var n=+a,i=0;i<this.modules[a].length;i++){var l=+i;this.modules[a][i]&&(r.beginFill(0,100),r.moveTo(l,n),r.lineTo(l+1,n),r.lineTo(l+1,n+1),r.lineTo(l,n+1),r.endFill())}return r},c.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},c.setupPositionAdjustPattern=function(){for(var e=i.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var s=0;s<e.length;s++){var r=e[t],a=e[s];if(null==this.modules[r][a])for(var n=-2;n<=2;n++)for(var l=-2;l<=2;l++)-2==n||2==n||-2==l||2==l||0==n&&0==l?this.modules[r+n][a+l]=!0:this.modules[r+n][a+l]=!1}},c.setupTypeNumber=function(e){for(var t=i.getBCHTypeNumber(this.typeNumber),s=0;s<18;s++){var r=!e&&(t>>s&1)==1;this.modules[Math.floor(s/3)][s%3+this.moduleCount-8-3]=r}for(var s=0;s<18;s++){var r=!e&&(t>>s&1)==1;this.modules[s%3+this.moduleCount-8-3][Math.floor(s/3)]=r}},c.setupTypeInfo=function(e,t){for(var s=this.errorCorrectLevel<<3|t,r=i.getBCHTypeInfo(s),a=0;a<15;a++){var n=!e&&(r>>a&1)==1;a<6?this.modules[a][8]=n:a<8?this.modules[a+1][8]=n:this.modules[this.moduleCount-15+a][8]=n}for(var a=0;a<15;a++){var n=!e&&(r>>a&1)==1;a<8?this.modules[8][this.moduleCount-a-1]=n:a<9?this.modules[8][15-a-1+1]=n:this.modules[8][15-a-1]=n}this.modules[this.moduleCount-8][8]=!e},c.mapData=function(e,t){for(var s=-1,r=this.moduleCount-1,a=7,n=0,l=this.moduleCount-1;l>0;l-=2)for(6==l&&l--;;){for(var o=0;o<2;o++)if(null==this.modules[r][l-o]){var c=!1;n<e.length&&(c=(e[n]>>>a&1)==1),i.getMask(t,r,l-o)&&(c=!c),this.modules[r][l-o]=c,-1==--a&&(n++,a=7)}if((r+=s)<0||this.moduleCount<=r){r-=s,s=-s;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,t,s){for(var r=a.getRSBlocks(e,t),l=new n,c=0;c<s.length;c++){var u=s[c];l.put(u.mode,4),l.put(u.getLength(),i.getLengthInBits(u.mode,e)),u.write(l)}for(var d=0,c=0;c<r.length;c++)d+=r[c].dataCount;if(l.getLengthInBits()>8*d)throw Error("code length overflow. ("+l.getLengthInBits()+">"+8*d+")");for(l.getLengthInBits()+4<=8*d&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*d)&&(l.put(o.PAD0,8),!(l.getLengthInBits()>=8*d));){;l.put(o.PAD1,8)}return o.createBytes(l,r)},o.createBytes=function(e,t){for(var s=0,r=0,a=0,n=Array(t.length),o=Array(t.length),c=0;c<t.length;c++){var u=t[c].dataCount,d=t[c].totalCount-u;r=Math.max(r,u),a=Math.max(a,d),n[c]=Array(u);for(var h=0;h<n[c].length;h++)n[c][h]=255&e.buffer[h+s];s+=u;var m=i.getErrorCorrectPolynomial(d),g=new l(n[c],m.getLength()-1).mod(m);o[c]=Array(m.getLength()-1);for(var h=0;h<o[c].length;h++){var x=h+g.getLength()-o[c].length;o[c][h]=x>=0?g.get(x):0}}for(var p=0,h=0;h<t.length;h++)p+=t[h].totalCount;for(var f=Array(p),v=0,h=0;h<r;h++)for(var c=0;c<t.length;c++)h<n[c].length&&(f[v++]=n[c][h]);for(var h=0;h<a;h++)for(var c=0;c<t.length;c++)h<o[c].length&&(f[v++]=o[c][h]);return f},t.exports=o},668300,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a=l(e.r(259414)),n=e.r(384078),i=l(n);function l(e){return e&&e.__esModule?e:{default:e}}var o={bgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,bgD:a.default.string.isRequired,fgColor:a.default.oneOfType([a.default.object,a.default.string]).isRequired,fgD:a.default.string.isRequired,size:a.default.number.isRequired,title:a.default.string,viewBoxSize:a.default.number.isRequired,xmlns:a.default.string},c=(0,n.forwardRef)(function(e,t){var s=e.bgColor,a=e.bgD,n=e.fgD,l=e.fgColor,o=e.size,c=e.title,u=e.viewBoxSize,d=e.xmlns,h=function(e,t){var s={};for(var r in e)!(t.indexOf(r)>=0)&&Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(e,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return i.default.createElement("svg",r({},h,{height:o,ref:t,viewBox:"0 0 "+u+" "+u,width:o,xmlns:void 0===d?"http://www.w3.org/2000/svg":d}),c?i.default.createElement("title",null,c):null,i.default.createElement("path",{d:a,fill:s}),i.default.createElement("path",{d:n,fill:l}))});c.displayName="QRCodeSvg",c.propTypes=o,s.default=c},866866,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.QRCode=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},a=u(e.r(259414)),n=u(e.r(983742)),i=u(e.r(787962)),l=e.r(384078),o=u(l),c=u(e.r(668300));function u(e){return e&&e.__esModule?e:{default:e}}var d={bgColor:a.default.oneOfType([a.default.object,a.default.string]),fgColor:a.default.oneOfType([a.default.object,a.default.string]),level:a.default.string,size:a.default.number,value:a.default.string.isRequired},h=(0,l.forwardRef)(function(e,t){var s=e.bgColor,a=e.fgColor,l=e.level,u=e.size,d=e.value,h=function(e,t){var s={};for(var r in e)!(t.indexOf(r)>=0)&&Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s}(e,["bgColor","fgColor","level","size","value"]),m=new i.default(-1,n.default[void 0===l?"L":l]);m.addData(d),m.make();var g=m.modules;return o.default.createElement(c.default,r({},h,{bgColor:void 0===s?"#FFFFFF":s,bgD:g.map(function(e,t){return e.map(function(e,s){return e?"":"M "+s+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:void 0===a?"#000000":a,fgD:g.map(function(e,t){return e.map(function(e,s){return e?"M "+s+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:t,size:void 0===u?256:u,viewBoxSize:g.length}))});s.QRCode=h,h.displayName="QRCode",h.propTypes=d,s.default=h},128203,e=>{"use strict";var t=e.i(379492),s=e.i(283164);e.i(977101);var r=e.i(727630),a=e.i(310165),n=e.i(899920),i=e.i(924398),l=e.i(543621),o=e.i(359548),c=e.i(497439),u=e.i(532314),d=e.i(2138),h=e.i(706575),m=e.i(502772),g=e.i(755589),x=e.i(33928),p=e.i(430387),f=e.i(384078),v=e.i(82595),j=e.i(152001),b=e.i(141477),w=e.i(278894),N=e.i(462957),y=e.i(681599),C=e.i(985902),k=e.i(628876);function S({presentationId:e,aspectRatio:a="16:9"}){let[n,i]=(0,f.useState)(!1),[l,o]=(0,f.useState)(null),[c,u]=(0,f.useState)(null),h=(0,r.useQuery)(s.api.presentations.get,{presentationId:e}),m=(0,r.useMutation)(s.api.presentations.downloadPPTX),g=(0,r.useMutation)(s.api.presentations.downloadPDF),x=(0,r.useMutation)(s.api.presentations.downloadImages),p=(0,f.useCallback)(t=>{let s=`/api/download/${"images"===t?"images":t}/${e}`;console.log(`[DownloadButton] Triggering ${t} download via:`,s);let r=document.createElement("a");r.href=s,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)},[e]);(0,f.useEffect)(()=>{!n||!h||!l||("pptx"===l?h.pptxUrl:"pdf"===l?h.pdfUrl:h.imagesZipUrl)&&(console.log(`[DownloadButton] ${l} ready, triggering download`),i(!1),o(null),p(l))},[n,h,l,p]);let v=async t=>{if(h){u(null),console.log(`[DownloadButton] handleDownload called for ${t}`);try{let s;s="pptx"===t?await m({presentationId:e,forceRegenerate:!0}):"pdf"===t?await g({presentationId:e,forceRegenerate:!0}):await x({presentationId:e,forceRegenerate:!0}),console.log("[DownloadButton] Mutation result:",s),s.cached&&s.url?p(t):s.generating&&(i(!0),o(t))}catch(e){console.error("Download error:",e),u(`Failed to generate ${t.toUpperCase()}. Please try again.`),i(!1),o(null)}}},j=!h||"slides_complete"!==h.status||n,S="pptx"===l?"PPTX":"pdf"===l?"PDF":"Images";return"16:9"===a?(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsx)(C.Button,{variant:"outline",size:"sm",onClick:()=>v("pptx"),disabled:j,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating ",S,"..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Download"]})}),c&&(0,t.jsx)("p",{className:"text-xs text-destructive",children:c})]}):(0,t.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,t.jsxs)(k.DropdownMenu,{children:[(0,t.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{variant:"outline",size:"sm",disabled:j,children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating ",S,"..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w.Download,{className:"h-4 w-4 mr-2"}),"Download",(0,t.jsx)(b.ChevronDown,{className:"h-4 w-4 ml-1"})]})})}),(0,t.jsxs)(k.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(k.DropdownMenuItem,{onClick:()=>v("pdf"),children:[(0,t.jsx)(N.FileText,{className:"h-4 w-4 mr-2"}),"Download as PDF"]}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:()=>v("images"),children:[(0,t.jsx)(y.ImageIcon,{className:"h-4 w-4 mr-2"}),"Download as Images (ZIP)"]})]})]}),c&&(0,t.jsx)("p",{className:"text-xs text-destructive",children:c})]})}var L=e.i(813038),D=e.i(403950),E=e.i(690737),B=e.i(242890),T=e.i(755430);let P=(0,T.default)("pointer",[["path",{d:"M22 14a8 8 0 0 1-8 8",key:"56vcr3"}],["path",{d:"M18 11v-1a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1agjmk"}],["path",{d:"M14 10V9a2 2 0 0 0-2-2a2 2 0 0 0-2 2v1",key:"wdbh2u"}],["path",{d:"M10 9.5V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v10",key:"1ibuk9"}],["path",{d:"M18 11a2 2 0 1 1 4 0v3a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"g6ys72"}]]);var M=e.i(228559),_=e.i(328299),A=e.i(603369),I=e.i(423451),R=e.i(152088);function O(e,t,s,r=e=>e){return e*r(.5-t*(.5-s))}function z(e,t){return[e[0]+t[0],e[1]+t[1]]}function F(e,t){return[e[0]-t[0],e[1]-t[1]]}function $(e,t){return[e[0]*t,e[1]*t]}function U(e){return[e[1],-e[0]]}function G(e,t){return e[0]*t[0]+e[1]*t[1]}function H(e,t){var s;return(s=F(e,t))[0]*s[0]+s[1]*s[1]}function X(e){var t;return t=Math.hypot(e[0],e[1]),[e[0]/t,e[1]/t]}function Q(e,t,s){let r=Math.sin(s),a=Math.cos(s),n=e[0]-t[0],i=e[1]-t[1];return[n*a-i*r+t[0],n*r+i*a+t[1]]}function q(e,t,s){return z(e,$(F(t,e),s))}var{min:K,PI:Y}=Math,Z=Y+1e-4;function W(e,t={}){return function(e,t={}){var s,r;let{size:a=16,smoothing:n=.5,thinning:i=.5,simulatePressure:l=!0,easing:o=e=>e,start:c={},end:u={},last:d=!1}=t,{cap:h=!0,easing:m=e=>e*(2-e)}=c,{cap:g=!0,easing:x=e=>--e*e*e+1}=u;if(0===e.length||a<=0)return[];let p=e[e.length-1].runningLength,f=!1===c.taper?0:!0===c.taper?Math.max(a,p):c.taper,v=!1===u.taper?0:!0===u.taper?Math.max(a,p):u.taper,j=Math.pow(a*n,2),b=[],w=[],N=e.slice(0,10).reduce((e,t)=>{let s=t.pressure;if(l){let r=K(1,t.distance/a),n=K(1,1-r);s=K(1,e+.275*r*(n-e))}return(e+s)/2},e[0].pressure),y=O(a,i,e[e.length-1].pressure,o),C,k=e[0].vector,S=e[0].point,L=S,D=S,E=L,B=!1;for(let t=0;t<e.length;t++){let{pressure:s}=e[t],{point:r,vector:n,distance:c,runningLength:u}=e[t];if(t<e.length-1&&p-u<3)continue;if(i){if(l){let e=K(1,c/a),t=K(1,1-e);s=K(1,N+.275*e*(t-N))}y=O(a,i,s,o)}else y=a/2;void 0===C&&(C=y),y=Math.max(.01,y*Math.min(u<f?m(u/f):1,p-u<v?x((p-u)/v):1));let d=(t<e.length-1?e[t+1]:e[t]).vector,h=t<e.length-1?G(n,d):1,g=0>G(n,k)&&!B,T=null!==h&&h<0;if(g||T){let e=$(U(k),y);for(let t=1/13,s=0;s<=1;s+=t)D=Q(F(r,e),r,Z*s),b.push(D),E=Q(z(r,e),r,-(Z*s)),w.push(E);S=D,L=E,T&&(B=!0);continue}if(B=!1,t===e.length-1){let e=$(U(n),y);b.push(F(r,e)),w.push(z(r,e));continue}let P=$(U(q(d,n,h)),y);D=F(r,P),(t<=1||H(S,D)>j)&&(b.push(D),S=D),E=z(r,P),(t<=1||H(L,E)>j)&&(w.push(E),L=E),N=s,k=n}let T=e[0].point.slice(0,2),P=e.length>1?e[e.length-1].point.slice(0,2):z(e[0].point,[1,1]),M=[],_=[];if(1===e.length){if(!(f||v)||d){let e=(s=X(U(F(T,P))),z(T,$(s,-(C||y)))),t=[];for(let s=1/13,r=s;r<=1;r+=s)t.push(Q(e,T,2*Z*r));return t}}else{if(!(f||v&&1===e.length))if(h)for(let e=1/13,t=e;t<=1;t+=e){let e=Q(w[0],T,Z*t);M.push(e)}else{let e=F(b[0],w[0]),t=$(e,.5),s=$(e,.51);M.push(F(T,t),F(T,s),z(T,s),z(T,t))}let t=U([-(r=e[e.length-1].vector)[0],-r[1]]);if(v||f&&1===e.length)_.push(P);else if(g){let e=z(P,$(t,y));for(let t=1/29,s=t;s<1;s+=t)_.push(Q(e,P,3*Z*s))}else _.push(z(P,$(t,y)),z(P,$(t,.99*y)),F(P,$(t,.99*y)),F(P,$(t,y)))}return b.concat(_,w.reverse(),M)}(function(e,t={}){var s,r,a;let{streamline:n=.5,size:i=16,last:l=!1}=t;if(0===e.length)return[];let o=.15+(1-n)*.85,c=Array.isArray(e[0])?e:e.map(({x:e,y:t,pressure:s=.5})=>[e,t,s]);if(2===c.length){let e=c[1];c=c.slice(0,-1);for(let t=1;t<5;t++)c.push(q(c[0],e,t/4))}1===c.length&&(c=[...c,[...z(c[0],[1,1]),...c[0].slice(2)]]);let u=[{point:[c[0][0],c[0][1]],pressure:c[0][2]>=0?c[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],d=!1,h=0,m=u[0],g=c.length-1;for(let e=1;e<c.length;e++){let t=l&&e===g?c[e].slice(0,2):q(m.point,c[e],o);if(r=m.point,r[0]===t[0]&&r[1]===t[1])continue;let s=(a=m.point,Math.hypot(t[1]-a[1],t[0]-a[0]));if(h+=s,e<g&&!d){if(h<i)continue;d=!0}m={point:t,pressure:c[e][2]>=0?c[e][2]:.5,vector:X(F(m.point,t)),distance:s,runningLength:h},u.push(m)}return u[0].vector=(null==(s=u[1])?void 0:s.vector)||[0,0],u}(e,t),t)}function J(e){if(!e.length)return"";let t=e.reduce((e,[t,s],r,a)=>{let[n,i]=a[(r+1)%a.length];return e.push(t,s,(t+n)/2,(s+i)/2),e},["M",...e[0],"Q"]);return t.push("Z"),t.join(" ")}let V=(0,f.forwardRef)(function({enabled:e,tool:s,color:r,width:a},n){let i=(0,f.useRef)(null),[l,o]=(0,f.useState)([]),[c,u]=(0,f.useState)([]),[d,h]=(0,f.useState)(!1),m=(0,f.useRef)(0);(0,f.useImperativeHandle)(n,()=>({undo:()=>o(e=>e.slice(0,-1)),clear:()=>{o([]),u([])},canUndo:()=>l.length>0}));let g=(0,f.useCallback)(()=>{switch(s){case"highlighter":return{color:"#ffff00",width:24,opacity:.4};case"eraser":return{color:"transparent",width:20,opacity:1};default:return{color:r,width:a,opacity:.9}}},[s,r,a]),x=(0,f.useCallback)(e=>{o(t=>t.filter(t=>!t.points.some(t=>20>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2))))},[]),p=(0,f.useCallback)(t=>{if(!e)return;t.preventDefault(),t.currentTarget.setPointerCapture(t.pointerId),h(!0);let r={x:t.clientX,y:t.clientY,pressure:t.pressure||.5};"eraser"===s?x(r):u([r])},[e,s,x]),v=(0,f.useCallback)(t=>{if(!d||!e)return;t.preventDefault();let r={x:t.clientX,y:t.clientY,pressure:t.pressure||.5};"eraser"===s?x(r):u(e=>[...e,r])},[d,e,s,x]),j=(0,f.useCallback)(e=>{if(d&&(e.preventDefault(),e.currentTarget.releasePointerCapture(e.pointerId),h(!1),c.length>0&&"eraser"!==s)){let e=g();o(t=>[...t,{id:`stroke-${m.current++}`,points:c,color:e.color,width:e.width,opacity:e.opacity}]),u([])}},[d,c,s,g]),b=(0,f.useCallback)(()=>{h(!1),u([])},[]);if(!e)return null;let w=g(),N=c.length>0&&"eraser"!==s?W(c.map(e=>[e.x,e.y,e.pressure]),{size:w.width,thinning:.5*("highlighter"!==s),smoothing:.5,streamline:.5,simulatePressure:!0}):null;return(0,t.jsxs)("div",{ref:i,className:"fixed inset-0 z-[90] touch-none",style:{cursor:"crosshair"},onPointerDown:p,onPointerMove:v,onPointerUp:j,onPointerCancel:b,onPointerLeave:b,children:[(0,t.jsxs)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:[l.map(e=>{let s=W(e.points.map(e=>[e.x,e.y,e.pressure]),{size:e.width,thinning:e.opacity<.5?0:.5,smoothing:.5,streamline:.5,simulatePressure:!0});return(0,t.jsx)("path",{d:J(s),fill:e.color,opacity:e.opacity},e.id)}),N&&(0,t.jsx)("path",{d:J(N),fill:w.color,opacity:w.opacity})]}),"eraser"===s&&d&&c.length>0&&(0,t.jsx)("div",{className:"fixed pointer-events-none rounded-full border-2 border-white/50",style:{left:c[c.length-1].x-10,top:c[c.length-1].y-10,width:20,height:20}})]})});function ee({enabled:e,color:s="#ff0000"}){let[r,a]=(0,f.useState)({x:0,y:0}),[n,i]=(0,f.useState)([]),[l,o]=(0,f.useState)(!1),c=(0,f.useRef)(null),u=(0,f.useCallback)(t=>{e&&(a({x:t.clientX,y:t.clientY}),o(!0),i(e=>[...e.slice(-15),{x:t.clientX,y:t.clientY,age:0}]))},[e]),d=(0,f.useCallback)(()=>{o(!1),i([])},[]);return((0,f.useEffect)(()=>{if(!e)return void i([]);let t=()=>{i(e=>e.map(e=>({...e,age:e.age+1})).filter(e=>e.age<20)),c.current=requestAnimationFrame(t)};return c.current=requestAnimationFrame(t),()=>{c.current&&cancelAnimationFrame(c.current)}},[e]),(0,f.useEffect)(()=>{if(e)return window.addEventListener("mousemove",u),window.addEventListener("mouseleave",d),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseleave",d)}},[e,u,d]),e&&l)?(0,t.jsxs)("div",{className:"fixed inset-0 pointer-events-none z-[100]",children:[n.map((e,r)=>{let a=1-e.age/20,n=1-e.age/40;return(0,t.jsx)("div",{className:"absolute rounded-full",style:{left:e.x-4,top:e.y-4,width:8,height:8,backgroundColor:s,opacity:.5*a,transform:`scale(${n})`,boxShadow:`0 0 ${8*n}px ${4*n}px ${s}40`}},`${e.x}-${e.y}-${r}`)}),(0,t.jsxs)("div",{className:"absolute",style:{left:r.x-8,top:r.y-8,width:16,height:16},children:[(0,t.jsx)("div",{className:"absolute inset-0 rounded-full animate-pulse",style:{background:`radial-gradient(circle, ${s}80 0%, transparent 70%)`,boxShadow:`0 0 24px 12px ${s}60`}}),(0,t.jsx)("div",{className:"absolute rounded-full",style:{left:4,top:4,width:8,height:8,backgroundColor:s,boxShadow:`0 0 8px 4px ${s}`}})]})]}):null}var et=e.i(983300),es=e.i(866866),er=e.i(547608);function ea({open:e,onClose:a,presentationId:n,totalSlides:i,onSessionCreated:l}){let[o,c]=(0,f.useState)(!1),[u,d]=(0,f.useState)(null),h=(0,r.useMutation)(s.api.presentationSessions.create),m=(0,r.useMutation)(s.api.presentationSessions.refreshCode),g=(0,r.useQuery)(s.api.presentationSessions.get,u?{sessionId:u}:"skip");(0,f.useEffect)(()=>{e&&!u&&h({presentationId:n,totalSlides:i}).then(e=>{d(e.sessionId),l?.(e.sessionId)})},[e,u,h,n,i,l]),(0,f.useEffect)(()=>{e||(d(null),c(!1))},[e]);let p=(0,f.useCallback)(async()=>{u&&await m({sessionId:u})},[u,m]),v=(0,f.useCallback)(()=>{g?.sessionCode&&(navigator.clipboard.writeText(g.sessionCode),c(!0),setTimeout(()=>c(!1),2e3))},[g?.sessionCode]),j=(0,f.useCallback)(()=>{if(!g?.sessionCode)return;let e=`${window.location.origin}/slides/remote?code=${g.sessionCode}`;navigator.clipboard.writeText(e),c(!0),setTimeout(()=>c(!1),2e3)},[g?.sessionCode]),b=g?.sessionCode?`${window.location.origin}/slides/remote?code=${g.sessionCode}`:"";return(0,t.jsx)(er.Dialog,{open:e,onOpenChange:e=>!e&&a(),children:(0,t.jsxs)(er.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(er.DialogHeader,{children:[(0,t.jsxs)(er.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(M.Smartphone,{className:"h-5 w-5"}),"Remote Control"]}),(0,t.jsx)(er.DialogDescription,{children:"Scan the QR code or enter the code on your phone to control this presentation remotely."})]}),g?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex justify-center p-4 bg-white rounded-lg",children:(0,t.jsx)(es.default,{value:b,size:200})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Or enter this code:"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,t.jsx)("code",{className:"text-3xl font-mono font-bold tracking-widest",children:g.sessionCode}),(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:v,title:"Copy code",children:(0,t.jsx)(et.Copy,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Code expires in ",(()=>{if(!g?.sessionCodeExpiresAt)return"";let e=Math.max(0,Math.floor((g.sessionCodeExpiresAt-Date.now())/1e3)),t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`})()]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(C.Button,{variant:"outline",className:"w-full",onClick:j,children:[(0,t.jsx)(et.Copy,{className:"h-4 w-4 mr-2"}),o?"Copied!":"Copy Link"]}),(0,t.jsxs)(C.Button,{variant:"ghost",className:"w-full",onClick:p,children:[(0,t.jsx)(x.RefreshCw,{className:"h-4 w-4 mr-2"}),"Generate New Code"]})]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground text-center",children:(0,t.jsxs)("p",{children:["Go to"," ",(0,t.jsxs)("code",{className:"bg-muted px-1 rounded",children:[window.location.host,"/slides/remote"]})," ","on your phone"]})})]}):(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})})]})})}let en=(0,T.default)("eraser",[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]]),ei=(0,T.default)("highlighter",[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]]),el=(0,T.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var eo=e.i(126312),ec=e.i(199049);let eu=[{value:"#ff0000",label:"Red"},{value:"#ff6600",label:"Orange"},{value:"#ffcc00",label:"Yellow"},{value:"#00cc00",label:"Green"},{value:"#0066ff",label:"Blue"},{value:"#9933ff",label:"Purple"},{value:"#ffffff",label:"White"},{value:"#000000",label:"Black"}],ed=[4,8,12,20];function eh({currentTool:e,currentColor:s,currentWidth:r,onToolChange:a,onColorChange:n,onWidthChange:i,onUndo:l,onClear:o,canUndo:c}){let u=(0,f.useCallback)(e=>"highlighter"===e?.4:1,[]);return(0,t.jsxs)("div",{className:"absolute bottom-24 left-1/2 -translate-x-1/2 flex items-center gap-2 bg-black/60 backdrop-blur-sm rounded-full px-4 py-2 pointer-events-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>a("pen"),className:(0,R.cn)("p-2 rounded-full transition-colors","pen"===e?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Pen",children:(0,t.jsx)(el,{className:"h-5 w-5"})}),(0,t.jsx)("button",{type:"button",onClick:()=>a("highlighter"),className:(0,R.cn)("p-2 rounded-full transition-colors","highlighter"===e?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Highlighter",children:(0,t.jsx)(ei,{className:"h-5 w-5"})}),(0,t.jsx)("button",{type:"button",onClick:()=>a("eraser"),className:(0,R.cn)("p-2 rounded-full transition-colors","eraser"===e?"bg-white/20 text-white":"text-white/60 hover:text-white hover:bg-white/10"),title:"Eraser",children:(0,t.jsx)(en,{className:"h-5 w-5"})})]}),(0,t.jsx)("div",{className:"w-px h-6 bg-white/20"}),"eraser"!==e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center gap-1",children:eu.map(r=>(0,t.jsx)("button",{type:"button",onClick:()=>n(r.value),className:(0,R.cn)("w-6 h-6 rounded-full border-2 transition-transform",s===r.value?"border-white scale-110":"border-transparent hover:scale-105"),style:{backgroundColor:r.value,opacity:u(e)},title:r.label},r.value))}),(0,t.jsx)("div",{className:"w-px h-6 bg-white/20"}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:ed.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>i(e),className:(0,R.cn)("w-8 h-8 rounded-full flex items-center justify-center transition-colors",r===e?"bg-white/20":"hover:bg-white/10"),title:`${e}px`,children:(0,t.jsx)("div",{className:"rounded-full bg-white",style:{width:Math.min(e,16),height:Math.min(e,16)}})},e))}),(0,t.jsx)("div",{className:"w-px h-6 bg-white/20"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:l,disabled:!c,className:(0,R.cn)("p-2 rounded-full transition-colors",c?"text-white/60 hover:text-white hover:bg-white/10":"text-white/20 cursor-not-allowed"),title:"Undo",children:(0,t.jsx)(ec.Undo2,{className:"h-5 w-5"})}),(0,t.jsx)("button",{type:"button",onClick:o,className:"p-2 rounded-full text-white/60 hover:text-white hover:bg-white/10 transition-colors",title:"Clear All",children:(0,t.jsx)(eo.Trash2,{className:"h-5 w-5"})})]})]})}function em({slides:e,initialSlideIndex:a=0,onExit:n,presentationId:i,sessionId:c}){let u=(0,f.useRef)(null),[d,h]=(0,f.useState)(a),[m,g]=(0,f.useState)(0),[x,p]=(0,f.useState)(!0),[v,j]=(0,f.useState)(!1),[b,w]=(0,f.useState)(!1),[N,y]=(0,f.useState)(!1),[C,k]=(0,f.useState)("pen"),[S,T]=(0,f.useState)("#ff0000"),[O,z]=(0,f.useState)(8),[F,$]=(0,f.useState)(!1),[U,G]=(0,f.useState)(!1),[H,X]=(0,f.useState)(null),Q=(0,f.useRef)(null),q=(0,f.useRef)(null),[K,Y]=(0,f.useState)(null),Z=(0,f.useRef)(null),W=e[d],{sendSlideChange:J,sendLaserToggle:et}=(0,I.usePresentationSync)({presentationId:i,role:"presenter",onSlideChange:e=>{g(e>d?1:-1),h(e)},onLaserToggle:e=>w(e)}),es=(0,f.useCallback)(()=>{w(e=>{let t=!e;return et(t),t&&y(!1),t})},[et]),er=(0,f.useCallback)(()=>{y(e=>{let t=!e;return t&&(w(!1),et(!1)),t})},[et]),en=(0,f.useCallback)(()=>{q.current?.undo(),$(q.current?.canUndo()??!1)},[]),ei=(0,f.useCallback)(()=>{q.current?.clear(),$(!1)},[]);(0,f.useCallback)(()=>{$(q.current?.canUndo()??!1)},[]);let el=(0,r.useQuery)(s.api.storage.getUrl,W?.imageStorageId?{storageId:W.imageStorageId}:"skip"),eo=c??H,ec=(0,r.useQuery)(s.api.presentationSessions.get,eo?{sessionId:eo}:"skip"),eu=(0,r.useMutation)(s.api.presentationSessions.updateSlide);(0,f.useEffect)(()=>{ec&&ec.currentSlide!==d&&(g(ec.currentSlide>d?1:-1),h(ec.currentSlide))},[ec?.currentSlide,d,ec]);let ed=(0,f.useCallback)(()=>{if(d<e.length-1){g(1);let e=d+1;h(e),J(e),eo&&eu({sessionId:eo,slideIndex:e}).catch(()=>{})}},[d,e.length,J,eo,eu]),em=(0,f.useCallback)(()=>{if(d>0){g(-1);let e=d-1;h(e),J(e),eo&&eu({sessionId:eo,slideIndex:e}).catch(()=>{})}},[d,J,eo,eu]),eg=(0,f.useCallback)(t=>{t>=0&&t<e.length&&(g(t>d?1:-1),h(t),J(t),eo&&eu({sessionId:eo,slideIndex:t}).catch(()=>{}))},[d,e.length,J,eo,eu]),ex=(0,f.useCallback)(()=>{let e=`/slides/${i}/presenter`;Z.current=window.open(e,"presenter","width=1200,height=800,resizable=yes")},[i]),ep=(0,f.useCallback)(()=>{p(!0),Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{p(!1)},3e3)},[]);(0,f.useEffect)(()=>(ep(),()=>{Q.current&&clearTimeout(Q.current)}),[ep]),(0,f.useEffect)(()=>{let e=()=>{document.fullscreenElement||n()};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[n]),(0,f.useEffect)(()=>{let t=t=>{switch(ep(),t.key){case"ArrowRight":case" ":case"Enter":t.preventDefault(),ed();break;case"ArrowLeft":case"Backspace":t.preventDefault(),em();break;case"Escape":t.preventDefault(),document.exitFullscreen?.(),n();break;case"Home":t.preventDefault(),eg(0);break;case"End":t.preventDefault(),eg(e.length-1);break;case"b":case"B":t.preventDefault(),j(e=>!e);break;case"p":case"P":t.preventDefault(),ex();break;case"l":case"L":t.preventDefault(),es();break;case"d":case"D":t.preventDefault(),er();break;default:t.key>="1"&&t.key<="9"?(t.preventDefault(),eg(Number.parseInt(t.key,10)-1)):"0"===t.key&&(t.preventDefault(),eg(9))}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[ed,em,eg,n,e.length,ep,ex,es,er]),(0,f.useEffect)(()=>{let e=()=>ep();return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[ep]);let ef=(d+1)/e.length*100;return(0,t.jsxs)("div",{ref:u,"data-presentation-container":!0,className:"fixed inset-0 bg-black z-50 select-none",onPointerDown:e=>{Y(e.clientX)},onPointerUp:e=>{if(null===K)return;let t=e.clientX-K;t>50?em():t<-50&&ed(),Y(null)},onPointerCancel:()=>{Y(null)},onMouseMove:ep,children:[v&&(0,t.jsx)("div",{className:"absolute inset-0 bg-black z-40",onClick:()=>j(!1)}),(0,t.jsx)(L.AnimatePresence,{mode:"wait",initial:!1,children:(0,t.jsx)(D.motion.div,{initial:{opacity:0,x:100*m},animate:{opacity:1,x:0},exit:{opacity:0,x:-100*m},transition:{duration:.3,ease:"easeOut"},className:"absolute inset-0 flex items-center justify-center",children:el?(0,t.jsx)(A.default,{src:el,alt:W?.title||"Slide",fill:!0,className:"object-contain",priority:!0,sizes:"100vw"}):(0,t.jsx)("div",{className:"text-white/50 text-xl",children:"Loading slide..."})},W?._id)}),(0,t.jsxs)("div",{className:(0,R.cn)("absolute inset-0 pointer-events-none transition-opacity duration-300 z-30",x?"opacity-100":"opacity-0"),children:[(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2 pointer-events-auto",children:[(0,t.jsx)("button",{type:"button",onClick:es,className:(0,R.cn)("p-2 rounded-full transition-colors",b?"bg-red-500/80 text-white":"bg-black/50 text-white hover:bg-black/70"),"aria-label":"Toggle laser pointer",title:"Laser Pointer (L)",children:(0,t.jsx)(P,{className:"h-6 w-6"})}),(0,t.jsx)("button",{type:"button",onClick:er,className:(0,R.cn)("p-2 rounded-full transition-colors",N?"bg-yellow-500/80 text-white":"bg-black/50 text-white hover:bg-black/70"),"aria-label":"Toggle drawing mode",title:"Draw (D)",children:(0,t.jsx)(B.Pencil,{className:"h-6 w-6"})}),(0,t.jsx)("button",{type:"button",onClick:ex,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Open presenter view",title:"Presenter View (P)",children:(0,t.jsx)(E.Monitor,{className:"h-6 w-6"})}),(0,t.jsx)("button",{type:"button",onClick:()=>G(!0),className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Remote control",title:"Remote Control",children:(0,t.jsx)(M.Smartphone,{className:"h-6 w-6"})}),(0,t.jsx)("button",{type:"button",onClick:()=>{document.exitFullscreen?.(),n()},className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 transition-colors","aria-label":"Exit presentation",children:(0,t.jsx)(_.X,{className:"h-6 w-6"})})]}),d>0&&(0,t.jsx)("button",{type:"button",onClick:em,className:"absolute left-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/30 text-white/70 hover:bg-black/50 hover:text-white transition-all pointer-events-auto","aria-label":"Previous slide",children:(0,t.jsx)(l.ChevronLeft,{className:"h-8 w-8"})}),d<e.length-1&&(0,t.jsx)("button",{type:"button",onClick:ed,className:"absolute right-4 top-1/2 -translate-y-1/2 p-3 rounded-full bg-black/30 text-white/70 hover:bg-black/50 hover:text-white transition-all pointer-events-auto","aria-label":"Next slide",children:(0,t.jsx)(o.ChevronRight,{className:"h-8 w-8"})}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-white/80 text-sm font-medium bg-black/40 px-3 py-1 rounded",children:[d+1," / ",e.length]}),v&&(0,t.jsx)("span",{className:"text-white/60 text-sm bg-black/40 px-3 py-1 rounded",children:"Press B to resume"})]}),(0,t.jsx)("div",{className:"h-1 bg-white/20 rounded-full overflow-hidden",children:(0,t.jsx)(D.motion.div,{className:"h-full bg-white/80",initial:!1,animate:{width:`${ef}%`},transition:{duration:.2}})})]})]}),(0,t.jsx)("div",{className:(0,R.cn)("absolute bottom-20 left-1/2 -translate-x-1/2 text-white/40 text-xs text-center transition-opacity duration-500 pointer-events-none",x?"opacity-100":"opacity-0"),children:(0,t.jsx)("span",{className:"bg-black/30 px-3 py-1 rounded",children:"← → Navigate • L Laser • D Draw • P Presenter • B Black • Esc Exit"})}),(0,t.jsx)(V,{ref:q,enabled:N,tool:C,color:S,width:O}),N&&(0,t.jsx)(eh,{currentTool:C,currentColor:S,currentWidth:O,onToolChange:k,onColorChange:T,onWidthChange:z,onUndo:en,onClear:ei,canUndo:F}),(0,t.jsx)(ee,{enabled:b}),(0,t.jsx)(ea,{open:U,onClose:()=>G(!1),presentationId:i,totalSlides:e.length,onSessionCreated:X})]})}var eg=e.i(846532),ex=e.i(465986),ep=e.i(432593);function ef({slides:e,modelName:s}){if(!(0,ep.useUserPreference)("showSlideStatistics"))return null;let r=e.reduce((e,t)=>e+(t.generationCost||0),0),a=e.reduce((e,t)=>e+(t.inputTokens||0),0),n=e.reduce((e,t)=>e+(t.outputTokens||0),0);return 0===r&&0===a?null:(0,t.jsx)(ex.TooltipProvider,{children:(0,t.jsxs)(ex.Tooltip,{children:[(0,t.jsx)(ex.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(eg.Info,{className:"h-4 w-4 text-muted-foreground"})})}),(0,t.jsxs)(ex.TooltipContent,{side:"bottom",className:"text-sm space-y-1.5 p-3",children:[(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Model"}),(0,t.jsx)("span",{className:"font-medium",children:s})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Total Cost"}),(0,t.jsxs)("span",{className:"font-mono",children:["$",r.toFixed(4)]})]}),(0,t.jsxs)("div",{className:"flex justify-between gap-4",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tokens"}),(0,t.jsxs)("span",{className:"font-mono text-xs",children:[a.toLocaleString()," in /"," ",n.toLocaleString()," out"]})]})]})]})})}var ev=e.i(828982),ej=e.i(799126),eb=e.i(907347),ew=e.i(876581),eN=e.i(541247),ey=e.i(173554);function eC({slide:e,open:a,onOpenChange:n}){let[i,l]=(0,f.useState)(""),[o,c]=(0,f.useState)(!1),u=(0,r.useMutation)(s.api.presentations.regenerateSlideImage),h=(0,r.useQuery)(s.api.storage.getUrl,e.imageStorageId?{storageId:e.imageStorageId}:"skip"),m=async()=>{c(!0);try{await u({slideId:e._id,customPrompt:i.trim()||void 0}),n(!1),l("")}catch(e){console.error("Regeneration error:",e)}finally{c(!1)}};return(0,t.jsx)(er.Dialog,{open:a,onOpenChange:n,children:(0,t.jsxs)(er.DialogContent,{className:"max-w-2xl",children:[(0,t.jsxs)(er.DialogHeader,{children:[(0,t.jsx)(er.DialogTitle,{children:"Edit Slide"}),(0,t.jsx)(er.DialogDescription,{children:"Describe what to change, or leave empty to regenerate fresh."})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.Label,{className:"text-sm font-medium",children:"Current Slide"}),(0,t.jsx)("div",{className:"mt-2 aspect-video bg-muted rounded-lg overflow-hidden relative",children:h?(0,t.jsx)(A.default,{src:h,alt:e.title,fill:!0,className:"object-contain",sizes:"(max-width: 768px) 100vw, 600px"}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"No image"})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ey.Label,{htmlFor:"customPrompt",children:"Custom Instructions (Optional)"}),(0,t.jsx)(eN.Textarea,{id:"customPrompt",value:i,onChange:e=>l(e.target.value),placeholder:"E.g., 'Make this slide more visual', 'Use warmer colors', 'Add more whitespace'...",rows:3,className:"mt-2",disabled:o}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Leave empty to regenerate with the same style."})]}),void 0!==e.generationCost&&e.generationCost>0&&(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Previous cost: $",e.generationCost.toFixed(4)]})]}),(0,t.jsxs)(er.DialogFooter,{children:[(0,t.jsx)(C.Button,{variant:"outline",onClick:()=>n(!1),disabled:o,children:"Cancel"}),(0,t.jsx)(C.Button,{onClick:m,disabled:o,children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Regenerating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.RefreshCw,{className:"h-4 w-4 mr-2"}),"Regenerate"]})})]})]})})}function ek({slide:e,slideNumber:a,totalSlides:n}){let[i,l]=(0,f.useState)(!1),[o,c]=(0,f.useState)(!1),[u,h]=(0,f.useState)(e.speakerNotes||""),[m,g]=(0,f.useState)(!1),p=(0,ep.useUserPreference)("showSlideStatistics"),v=(0,r.useMutation)(s.api.presentations.updateSlideContent);(0,f.useEffect)(()=>{h(e.speakerNotes||""),c(!1)},[e.speakerNotes]);let j=async()=>{g(!0);try{await v({slideId:e._id,speakerNotes:u}),ej.toast.success("Speaker notes saved"),c(!1)}catch(e){ej.toast.error("Failed to save speaker notes"),console.error(e)}finally{g(!1)}},b="error"===e.imageStatus||"complete"===e.imageStatus,w="generating"===e.imageStatus||"pending"===e.imageStatus,N="complete"===e.imageStatus?"secondary":"error"===e.imageStatus?"destructive":"secondary";return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-muted-foreground",children:["Slide ",a," of ",n]}),(0,t.jsx)(eb.Badge,{variant:"secondary",className:"capitalize",children:e.slideType})]}),(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e.title})]}),(0,t.jsx)(ew.Separator,{}),e.content&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-2",children:"Content"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.content})]}),(0,t.jsx)(ew.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("h3",{className:"text-sm font-medium",children:"Speaker Notes"}),!o&&(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",className:"h-7 px-2",onClick:()=>c(!0),children:[(0,t.jsx)(B.Pencil,{className:"h-3 w-3 mr-1"}),"Edit"]})]}),o?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(eN.Textarea,{value:u,onChange:e=>h(e.target.value),placeholder:"Add speaker notes...",className:"min-h-[100px] max-h-[200px] overflow-auto text-sm resize-none",autoFocus:!0}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",onClick:()=>{h(e.speakerNotes||""),c(!1)},disabled:m,children:[(0,t.jsx)(_.X,{className:"h-3 w-3 mr-1"}),"Cancel"]}),(0,t.jsxs)(C.Button,{size:"sm",onClick:j,disabled:m,children:[m?(0,t.jsx)(d.Loader2,{className:"h-3 w-3 mr-1 animate-spin"}):(0,t.jsx)(ev.Check,{className:"h-3 w-3 mr-1"}),"Save"]})]})]}):(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.speakerNotes||(0,t.jsx)("span",{className:"italic text-muted-foreground/60",children:"No speaker notes yet. Click Edit to add some."})})]}),(0,t.jsx)(ew.Separator,{}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium mb-3",children:"Generation Info"}),(0,t.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Status"}),(0,t.jsx)(eb.Badge,{variant:N,className:"capitalize",children:e.imageStatus})]}),p&&void 0!==e.generationCost&&e.generationCost>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Cost"}),(0,t.jsxs)("span",{className:"font-mono",children:["$",e.generationCost.toFixed(4)]})]}),p&&void 0!==e.inputTokens&&e.inputTokens>0&&(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Tokens"}),(0,t.jsxs)("span",{className:"font-mono text-xs",children:[e.inputTokens.toLocaleString()," in /"," ",(e.outputTokens||0).toLocaleString()," out"]})]})]})]}),(0,t.jsx)(ew.Separator,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(C.Button,{variant:"outline",className:"w-full",disabled:!b||w,onClick:()=>l(!0),children:w?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.RefreshCw,{className:"h-4 w-4 mr-2"}),"Edit Slide"]})}),"error"===e.imageStatus&&e.imageError&&(0,t.jsx)("p",{className:"text-xs text-destructive text-center",children:e.imageError})]}),(0,t.jsx)(eC,{slide:e,open:i,onOpenChange:l})]})}function eS({open:e,onClose:a,slide:n}){let i=(0,r.useQuery)(s.api.storage.getUrl,n?.imageStorageId?{storageId:n.imageStorageId}:"skip");return((0,f.useEffect)(()=>{if(!e)return;let t=e=>{"Escape"===e.key&&a()};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,a]),n)?(0,t.jsx)(er.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(er.DialogContent,{className:"!max-w-none w-screen h-screen max-h-screen p-0 border-0 rounded-none bg-black/95 backdrop-blur-md",showCloseButton:!1,children:[(0,t.jsx)(er.DialogTitle,{className:"sr-only",children:n.title}),(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:a,className:"absolute top-4 right-4 z-50 text-white hover:bg-white/10","aria-label":"Close fullscreen view",children:(0,t.jsx)(_.X,{className:"h-6 w-6"})}),(0,t.jsx)("div",{className:"flex items-center justify-center w-full h-full p-8",children:i?(0,t.jsx)("div",{className:"relative w-full h-full max-w-7xl",children:(0,t.jsx)(A.default,{src:i,alt:n.title,fill:!0,className:"object-contain",sizes:"95vw",priority:!0})}):(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin text-white"})}),(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-white text-sm bg-black/50 px-4 py-2 rounded-full",children:n.title})]})}):null}let eL=(0,T.default)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),eD={"16:9":"aspect-video","1:1":"aspect-square","9:16":"aspect-[9/16] h-full"},eE={"16:9":"w-full max-w-4xl","1:1":"w-full max-w-2xl","9:16":"h-[calc(100vh-14rem)]"};function eB({slide:e,direction:n,onZoom:i,aspectRatio:l="16:9"}){let o=eD[l],c=eE[l],u=(0,r.useQuery)(s.api.storage.getUrl,e.imageStorageId?{storageId:e.imageStorageId}:"skip");return(0,t.jsx)(L.AnimatePresence,{mode:"wait",initial:!1,children:(0,t.jsxs)(D.motion.div,{initial:{opacity:0,x:50*n},animate:{opacity:1,x:0},exit:{opacity:0,x:-50*n},transition:{duration:.2,ease:"easeOut"},className:c,children:["pending"===e.imageStatus&&(0,t.jsx)("div",{className:(0,R.cn)(o,"bg-muted rounded-lg flex items-center justify-center shadow-lg"),children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Waiting to generate..."})}),"generating"===e.imageStatus&&(0,t.jsxs)("div",{className:(0,R.cn)(o,"bg-muted rounded-lg flex flex-col items-center justify-center gap-4 shadow-lg"),children:[(0,t.jsx)(d.Loader2,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-medium",children:"Generating slide..."}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.title})]})]}),"error"===e.imageStatus&&(0,t.jsxs)("div",{className:(0,R.cn)(o,"bg-muted rounded-lg flex flex-col items-center justify-center gap-4 border-2 border-destructive/50 shadow-lg"),children:[(0,t.jsx)(a.AlertCircle,{className:"h-12 w-12 text-destructive"}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"font-medium text-destructive",children:"Generation Failed"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground max-w-md",children:e.imageError||"Unknown error occurred"})]})]}),"complete"===e.imageStatus&&!u&&(0,t.jsx)("div",{className:(0,R.cn)(o,"bg-muted rounded-lg flex items-center justify-center shadow-lg"),children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})}),"complete"===e.imageStatus&&u&&(0,t.jsx)("div",{className:"relative group h-full",children:(0,t.jsxs)("div",{className:(0,R.cn)(o,"relative rounded-lg overflow-hidden shadow-2xl"),children:[(0,t.jsx)(A.default,{src:u,alt:e.title,fill:!0,className:"object-contain bg-white",priority:!0,sizes:"(max-width: 1200px) 100vw, 1200px"}),(0,t.jsx)("button",{type:"button",onClick:i,className:"absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Zoom slide",children:(0,t.jsx)(eL,{className:"h-5 w-5"})})]})})]},e._id)})}let eT={"16:9":"aspect-video","1:1":"aspect-square","9:16":"aspect-[9/16]"};function eP({slide:e,index:n,isActive:i,onClick:l,aspectRatio:o="16:9"}){let c=eT[o],u=(0,r.useQuery)(s.api.storage.getUrl,e.imageStorageId?{storageId:e.imageStorageId}:"skip");return(0,t.jsxs)("button",{type:"button",onClick:l,className:(0,R.cn)("w-full max-w-[200px] mx-auto rounded-lg border-2 transition-all overflow-hidden text-left block",i?"border-primary ring-2 ring-primary/20":"border-transparent hover:border-muted-foreground/30"),children:[(0,t.jsxs)("div",{className:(0,R.cn)(c,"bg-muted relative"),children:["pending"===e.imageStatus&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-muted-foreground",children:(0,t.jsx)("span",{className:"text-xs",children:"Waiting..."})}),"generating"===e.imageStatus&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(d.Loader2,{className:"h-5 w-5 animate-spin text-amber-500"})}),"error"===e.imageStatus&&(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-destructive",children:[(0,t.jsx)(a.AlertCircle,{className:"h-5 w-5 mb-1"}),(0,t.jsx)("span",{className:"text-xs",children:"Failed"})]}),"complete"===e.imageStatus&&u&&(0,t.jsx)(A.default,{src:u,alt:e.title,fill:!0,className:"object-cover",sizes:"256px"}),"complete"===e.imageStatus&&!u&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,t.jsx)(d.Loader2,{className:"h-4 w-4 animate-spin text-muted-foreground"})}),(0,t.jsx)("div",{className:"absolute top-1 left-1 bg-black/60 text-white text-xs px-1.5 py-0.5 rounded",children:n+1}),(0,t.jsx)("div",{className:(0,R.cn)("absolute top-1 right-1 h-2 w-2 rounded-full","complete"===e.imageStatus&&"bg-green-500","generating"===e.imageStatus&&"bg-amber-500 animate-pulse","error"===e.imageStatus&&"bg-red-500","pending"===e.imageStatus&&"bg-muted-foreground/50")})]}),(0,t.jsxs)("div",{className:"p-2 bg-background",children:[(0,t.jsx)("p",{className:"text-xs font-medium truncate",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground capitalize",children:e.slideType})]})]})}var eM=e.i(277814),e_=e.i(783055),eA=e.i(152823),eI=e.i(943111);function eR({params:e}){let b=(0,f.use)(e).id,w=(0,p.useRouter)(),{showSlides:N,isLoading:y}=(0,eA.useFeatureToggles)(),{isMobile:k}=(0,eI.useMobileDetect)(),[L,D]=(0,f.useState)(0),[E,B]=(0,f.useState)(!1),[T,P]=(0,f.useState)(0),[M,_]=(0,f.useState)(!1),[A,I]=(0,f.useState)(!1),R=(0,r.useQuery)(s.api.presentations.get,{presentationId:b}),O=(0,r.useQuery)(s.api.presentations.getSlides,{presentationId:b}),z=(0,r.useMutation)(s.api.presentations.retryGeneration),F=(0,f.useCallback)(()=>{O&&(P(1),D(e=>Math.min(e+1,O.length-1)))},[O]),$=(0,f.useCallback)(()=>{P(-1),D(e=>Math.max(e-1,0))},[]),U=(0,f.useCallback)(e=>{!O||e<0||e>=O.length||(P(e>L?1:-1),D(e))},[O,L]),G=(0,f.useCallback)(()=>{document.documentElement.requestFullscreen({navigationUI:"hide"}).then(()=>{requestAnimationFrame(()=>{_(!0)})}).catch(e=>{console.error("Fullscreen failed:",e),_(!0)})},[]),H=(0,f.useCallback)(async()=>{I(!0);try{await z({presentationId:b})}catch(e){console.error("Retry failed:",e)}finally{I(!1)}},[z,b]);if((0,f.useEffect)(()=>{if(!O||E)return;let e=e=>{if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))switch(e.key){case"ArrowRight":F();break;case"ArrowLeft":$();break;default:e.key>="1"&&e.key<="9"&&U(Number.parseInt(e.key,10)-1)}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[O,E,F,$,U]),y)return(0,t.jsx)(j.FeatureLoadingScreen,{});if(!N)return(0,t.jsx)(v.DisabledFeaturePage,{featureName:"Slides",settingKey:"showSlides"});if(!R||!O)return(0,t.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,t.jsx)(d.Loader2,{className:"h-8 w-8 animate-spin text-muted-foreground"})});let X=O[L],Q=R.totalSlides>0?R.generatedSlideCount/R.totalSlides*100:0,q="slides_generating"===R.status,K="slides_complete"===R.status,Y="design_generating"===R.status||"design_complete"===R.status||"outline_complete"===R.status||"error"===R.status||"slides_generating"===R.status&&O.every(e=>"pending"===e.imageStatus||"error"===e.imageStatus),Z=()=>{switch(R.status){case"outline_complete":return"Design pending";case"design_generating":return"Generating design...";case"design_complete":return"Design ready";case"slides_generating":return`Generating ${R.generatedSlideCount}/${R.totalSlides}`;case"slides_complete":return"Complete";case"error":return"Error";default:return R.status}},W=e=>{switch(R.status){case"outline_complete":default:return(0,t.jsx)(c.Clock,{className:e});case"design_generating":return(0,t.jsx)(h.Palette,{className:`${e} animate-pulse`});case"design_complete":return(0,t.jsx)(h.Palette,{className:e});case"slides_generating":return(0,t.jsx)(d.Loader2,{className:`${e} animate-spin`});case"slides_complete":return(0,t.jsx)(i.CheckCircle,{className:`${e} text-green-500`});case"error":return(0,t.jsx)(a.AlertCircle,{className:`${e} text-destructive`})}},J=()=>{let e=R.imageModel||"google:gemini-3-pro-image-preview";return e.includes("gemini-3")?"Gemini 3":e.includes("gemini-2.5")||e.includes("gemini-2-5")?"Gemini 2.5":e.includes("gemini-2")?"Gemini 2":e.replace(/^google:/,"").replace(/-/g," ")};return k?(0,t.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,t.jsxs)("header",{className:"border-b p-3 flex items-center gap-2 shrink-0",children:[(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:()=>w.push("/slides"),children:(0,t.jsx)(n.ArrowLeft,{className:"h-4 w-4"})}),(0,t.jsx)(g.Presentation,{className:"h-4 w-4 text-primary shrink-0"}),(0,t.jsx)("span",{className:"font-medium truncate flex-1",children:R.title}),(0,t.jsx)(ef,{slides:O,modelName:J()}),(0,t.jsx)(ex.TooltipProvider,{children:(0,t.jsxs)(ex.Tooltip,{children:[(0,t.jsx)(ex.TooltipTrigger,{className:"shrink-0",children:W("h-4 w-4")}),(0,t.jsx)(ex.TooltipContent,{side:"bottom",children:(0,t.jsx)("p",{children:Z()})})]})}),Y&&(0,t.jsx)(C.Button,{size:"icon",variant:"outline",className:"shrink-0",onClick:H,disabled:A,children:(0,t.jsx)(x.RefreshCw,{className:`h-4 w-4 ${A?"animate-spin":""}`})}),K&&(0,t.jsx)(C.Button,{size:"icon",className:"shrink-0",onClick:G,children:(0,t.jsx)(m.Play,{className:"h-4 w-4"})})]}),q&&(0,t.jsx)("div",{className:"px-3 py-2 border-b shrink-0",children:(0,t.jsx)(eM.Progress,{value:Q,className:"h-1.5"})}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center p-4 bg-muted/30 overflow-hidden",children:X&&(0,t.jsx)(eB,{slide:X,direction:T,onZoom:()=>B(!0),aspectRatio:R.aspectRatio||"16:9"})}),(0,t.jsxs)("div",{className:"border-t p-3 flex items-center justify-between shrink-0 bg-background",children:[(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:$,disabled:0===L,children:(0,t.jsx)(l.ChevronLeft,{className:"h-5 w-5"})}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[L+1," / ",O.length]}),(0,t.jsx)(C.Button,{variant:"ghost",size:"icon",onClick:F,disabled:L===O.length-1,children:(0,t.jsx)(o.ChevronRight,{className:"h-5 w-5"})})]}),(0,t.jsx)(eS,{open:E,onClose:()=>B(!1),slide:X})]}):(0,t.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,t.jsxs)("header",{className:"border-b px-4 py-3 flex items-center justify-between shrink-0 bg-background",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(C.Button,{variant:"ghost",size:"sm",onClick:()=>w.push("/slides"),children:[(0,t.jsx)(n.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Back"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(g.Presentation,{className:"h-5 w-5 text-primary"}),(0,t.jsx)("h1",{className:"font-semibold",children:R.title})]}),q&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Generating ",R.generatedSlideCount,"/",R.totalSlides," slides..."]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(ef,{slides:O,modelName:J()}),(0,t.jsx)(ex.TooltipProvider,{children:(0,t.jsxs)(ex.Tooltip,{children:[(0,t.jsx)(ex.TooltipTrigger,{children:W("h-4 w-4")}),(0,t.jsx)(ex.TooltipContent,{side:"bottom",children:(0,t.jsx)("p",{children:Z()})})]})}),Y&&(0,t.jsxs)(C.Button,{variant:"outline",size:"sm",onClick:H,disabled:A,children:[(0,t.jsx)(x.RefreshCw,{className:`h-4 w-4 mr-2 ${A?"animate-spin":""}`}),"Retry"]}),(0,t.jsxs)(C.Button,{variant:"outline",size:"sm",onClick:()=>w.push(`/slides/${b}/outline`),children:[(0,t.jsx)(u.FileEdit,{className:"h-4 w-4 mr-2"}),"Edit Outline"]}),(0,t.jsx)(S,{presentationId:b,aspectRatio:R?.aspectRatio}),(0,t.jsxs)(C.Button,{size:"sm",onClick:G,disabled:!K,children:[(0,t.jsx)(m.Play,{className:"h-4 w-4 mr-2"}),"Present"]})]})]}),q&&(0,t.jsx)("div",{className:"px-4 py-2 border-b shrink-0",children:(0,t.jsx)(eM.Progress,{value:Q,className:"h-2"})}),(0,t.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,t.jsx)("aside",{className:"w-72 shrink-0 border-r bg-muted/30",children:(0,t.jsx)(e_.ScrollArea,{className:"h-full",children:(0,t.jsx)("div",{className:"p-4 space-y-2",children:O.map((e,s)=>(0,t.jsx)(eP,{slide:e,index:s,isActive:s===L,onClick:()=>U(s),aspectRatio:R.aspectRatio||"16:9"},e._id))})})}),(0,t.jsx)("main",{className:"flex-1 flex items-center justify-center bg-muted/20 p-8 overflow-hidden",children:X&&(0,t.jsx)(eB,{slide:X,direction:T,onZoom:()=>B(!0),aspectRatio:R.aspectRatio||"16:9"})}),(0,t.jsx)("aside",{className:"w-80 shrink-0 border-l bg-background",children:(0,t.jsx)(e_.ScrollArea,{className:"h-full",children:X&&(0,t.jsx)(ek,{slide:X,slideNumber:L+1,totalSlides:O.length})})})]}),(0,t.jsx)(eS,{open:E,onClose:()=>B(!1),slide:X}),M&&(0,t.jsx)(em,{slides:O,initialSlideIndex:L,onExit:()=>_(!1),presentationId:b})]})}e.s(["default",()=>eR],128203)}]);