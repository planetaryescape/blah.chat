(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,8780,(e,t,n)=>{var r={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ấ:"A",Ắ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",Æ:"AE",Ầ:"A",Ằ:"A",Ȃ:"A",Ả:"A",Ạ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ç:"C",Ḉ:"C",È:"E",É:"E",Ê:"E",Ë:"E",Ế:"E",Ḗ:"E",Ề:"E",Ḕ:"E",Ḝ:"E",Ȇ:"E",Ẻ:"E",Ẽ:"E",Ẹ:"E",Ể:"E",Ễ:"E",Ệ:"E",Ì:"I",Í:"I",Î:"I",Ï:"I",Ḯ:"I",Ȋ:"I",Ỉ:"I",Ị:"I",Ð:"D",Ñ:"N",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ố:"O",Ṍ:"O",Ṓ:"O",Ȏ:"O",Ỏ:"O",Ọ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ớ:"O",Ợ:"O",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ủ:"U",Ụ:"U",Ử:"U",Ữ:"U",Ự:"U",Ý:"Y",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ấ:"a",ắ:"a",ẳ:"a",ẵ:"a",ặ:"a",æ:"ae",ầ:"a",ằ:"a",ȃ:"a",ả:"a",ạ:"a",ẩ:"a",ẫ:"a",ậ:"a",ç:"c",ḉ:"c",è:"e",é:"e",ê:"e",ë:"e",ế:"e",ḗ:"e",ề:"e",ḕ:"e",ḝ:"e",ȇ:"e",ẻ:"e",ẽ:"e",ẹ:"e",ể:"e",ễ:"e",ệ:"e",ì:"i",í:"i",î:"i",ï:"i",ḯ:"i",ȋ:"i",ỉ:"i",ị:"i",ð:"d",ñ:"n",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ố:"o",ṍ:"o",ṓ:"o",ȏ:"o",ỏ:"o",ọ:"o",ổ:"o",ỗ:"o",ộ:"o",ờ:"o",ở:"o",ỡ:"o",ớ:"o",ợ:"o",ù:"u",ú:"u",û:"u",ü:"u",ủ:"u",ụ:"u",ử:"u",ữ:"u",ự:"u",ý:"y",ÿ:"y",Ā:"A",ā:"a",Ă:"A",ă:"a",Ą:"A",ą:"a",Ć:"C",ć:"c",Ĉ:"C",ĉ:"c",Ċ:"C",ċ:"c",Č:"C",č:"c",C̆:"C",c̆:"c",Ď:"D",ď:"d",Đ:"D",đ:"d",Ē:"E",ē:"e",Ĕ:"E",ĕ:"e",Ė:"E",ė:"e",Ę:"E",ę:"e",Ě:"E",ě:"e",Ĝ:"G",Ǵ:"G",ĝ:"g",ǵ:"g",Ğ:"G",ğ:"g",Ġ:"G",ġ:"g",Ģ:"G",ģ:"g",Ĥ:"H",ĥ:"h",Ħ:"H",ħ:"h",Ḫ:"H",ḫ:"h",Ĩ:"I",ĩ:"i",Ī:"I",ī:"i",Ĭ:"I",ĭ:"i",Į:"I",į:"i",İ:"I",ı:"i",Ĳ:"IJ",ĳ:"ij",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",Ḱ:"K",ḱ:"k",K̆:"K",k̆:"k",Ĺ:"L",ĺ:"l",Ļ:"L",ļ:"l",Ľ:"L",ľ:"l",Ŀ:"L",ŀ:"l",Ł:"l",ł:"l",Ḿ:"M",ḿ:"m",M̆:"M",m̆:"m",Ń:"N",ń:"n",Ņ:"N",ņ:"n",Ň:"N",ň:"n",ŉ:"n",N̆:"N",n̆:"n",Ō:"O",ō:"o",Ŏ:"O",ŏ:"o",Ő:"O",ő:"o",Œ:"OE",œ:"oe",P̆:"P",p̆:"p",Ŕ:"R",ŕ:"r",Ŗ:"R",ŗ:"r",Ř:"R",ř:"r",R̆:"R",r̆:"r",Ȓ:"R",ȓ:"r",Ś:"S",ś:"s",Ŝ:"S",ŝ:"s",Ş:"S",Ș:"S",ș:"s",ş:"s",Š:"S",š:"s",Ţ:"T",ţ:"t",ț:"t",Ț:"T",Ť:"T",ť:"t",Ŧ:"T",ŧ:"t",T̆:"T",t̆:"t",Ũ:"U",ũ:"u",Ū:"U",ū:"u",Ŭ:"U",ŭ:"u",Ů:"U",ů:"u",Ű:"U",ű:"u",Ų:"U",ų:"u",Ȗ:"U",ȗ:"u",V̆:"V",v̆:"v",Ŵ:"W",ŵ:"w",Ẃ:"W",ẃ:"w",X̆:"X",x̆:"x",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Y̆:"Y",y̆:"y",Ź:"Z",ź:"z",Ż:"Z",ż:"z",Ž:"Z",ž:"z",ſ:"s",ƒ:"f",Ơ:"O",ơ:"o",Ư:"U",ư:"u",Ǎ:"A",ǎ:"a",Ǐ:"I",ǐ:"i",Ǒ:"O",ǒ:"o",Ǔ:"U",ǔ:"u",Ǖ:"U",ǖ:"u",Ǘ:"U",ǘ:"u",Ǚ:"U",ǚ:"u",Ǜ:"U",ǜ:"u",Ứ:"U",ứ:"u",Ṹ:"U",ṹ:"u",Ǻ:"A",ǻ:"a",Ǽ:"AE",ǽ:"ae",Ǿ:"O",ǿ:"o",Þ:"TH",þ:"th",Ṕ:"P",ṕ:"p",Ṥ:"S",ṥ:"s",X́:"X",x́:"x",Ѓ:"Г",ѓ:"г",Ќ:"К",ќ:"к",A̋:"A",a̋:"a",E̋:"E",e̋:"e",I̋:"I",i̋:"i",Ǹ:"N",ǹ:"n",Ồ:"O",ồ:"o",Ṑ:"O",ṑ:"o",Ừ:"U",ừ:"u",Ẁ:"W",ẁ:"w",Ỳ:"Y",ỳ:"y",Ȁ:"A",ȁ:"a",Ȅ:"E",ȅ:"e",Ȉ:"I",ȉ:"i",Ȍ:"O",ȍ:"o",Ȑ:"R",ȑ:"r",Ȕ:"U",ȕ:"u",B̌:"B",b̌:"b",Č̣:"C",č̣:"c",Ê̌:"E",ê̌:"e",F̌:"F",f̌:"f",Ǧ:"G",ǧ:"g",Ȟ:"H",ȟ:"h",J̌:"J",ǰ:"j",Ǩ:"K",ǩ:"k",M̌:"M",m̌:"m",P̌:"P",p̌:"p",Q̌:"Q",q̌:"q",Ř̩:"R",ř̩:"r",Ṧ:"S",ṧ:"s",V̌:"V",v̌:"v",W̌:"W",w̌:"w",X̌:"X",x̌:"x",Y̌:"Y",y̌:"y",A̧:"A",a̧:"a",B̧:"B",b̧:"b",Ḑ:"D",ḑ:"d",Ȩ:"E",ȩ:"e",Ɛ̧:"E",ɛ̧:"e",Ḩ:"H",ḩ:"h",I̧:"I",i̧:"i",Ɨ̧:"I",ɨ̧:"i",M̧:"M",m̧:"m",O̧:"O",o̧:"o",Q̧:"Q",q̧:"q",U̧:"U",u̧:"u",X̧:"X",x̧:"x",Z̧:"Z",z̧:"z",й:"и",Й:"И",ё:"е",Ё:"Е"},o=Object.keys(r).join("|"),i=RegExp(o,"g"),s=RegExp(o,"");function a(e){return r[e]}var l=function(e){return e.replace(i,a)};t.exports=l,t.exports.has=function(e){return!!e.match(s)},t.exports.remove=l},709764,e=>{"use strict";var t=e.i(379492);e.i(977101);var n=e.i(260449),r=e.i(966685),o=e.i(381379),i=e.i(760087),s=e.i(985612),a=e.i(79721),l=e.i(430387),c=e.i(384078),d=e.i(283164),u=e.i(568210),h=e.i(727630),m=e.i(186996),p=e.i(2138),f=e.i(134092),g=e.i(794805),x=e.i(8780);let v={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0},b=(e,t)=>String(e.rankedValue).localeCompare(String(t.rankedValue));function w(e,t,n={}){let{keys:r,threshold:o=v.MATCHES,baseSort:i=b,sorter:s=e=>e.sort((e,t)=>(function(e,t,n){let{rank:r,keyIndex:o}=e,{rank:i,keyIndex:s}=t;return r!==i?r>i?-1:1:o===s?n(e,t):o<s?-1:1})(e,t,i))}=n;return s(e.reduce(function(e,i,s){var a,l,c,d;let u=(a=i,l=r,c=t,d=n,l?(function(e,t){let n=[];for(let o=0,i=t.length;o<i;o++){var r;let i=t[o],s="string"==typeof(r=i)?k:{...k,...r},a=function(e,t){let n;if("object"==typeof t&&(t=t.key),"function"==typeof t)n=t(e);else if(null==e)n=null;else if(Object.hasOwnProperty.call(e,t))n=e[t];else{if(t.includes("."))return function(e,t){let n=e.split("."),r=[t];for(let e=0,t=n.length;e<t;e++){let t=n[e],o=[];for(let e=0,n=r.length;e<n;e++){let n=r[e];if(null!=n)if(Object.hasOwnProperty.call(n,t)){let e=n[t];null!=e&&o.push(e)}else"*"===t&&(o=o.concat(n))}r=o}return Array.isArray(r[0])?[].concat(...r):r}(t,e);n=null}return null==n?[]:Array.isArray(n)?n:[String(n)]}(e,i);for(let e=0,t=a.length;e<t;e++)n.push({itemValue:a[e],attributes:s})}return n})(a,l).reduce(({rank:e,rankedValue:t,keyIndex:n,keyThreshold:r},{itemValue:o,attributes:i},s)=>{let a=y(o,c,d),l=t,{minRanking:u,maxRanking:h,threshold:m}=i;return a<u&&a>=v.MATCHES?a=u:a>h&&(a=h),a>e&&(e=a,n=s,r=m,l=o),{rankedValue:l,rank:e,keyIndex:n,keyThreshold:r}},{rankedValue:a,rank:v.NO_MATCH,keyIndex:-1,keyThreshold:d.threshold}):{rankedValue:a,rank:y(a,c,d),keyIndex:-1,keyThreshold:d.threshold}),{rank:h,keyThreshold:m=o}=u;return h>=m&&e.push({...u,item:i,index:s}),e},[])).map(({item:e})=>e)}function y(e,t,n){if(e=j(e,n),(t=j(t,n)).length>e.length)return v.NO_MATCH;if(e===t)return v.CASE_SENSITIVE_EQUAL;let r=function*(e,t){let n=-1;for(;(n=e.indexOf(t,n+1))>-1;)yield n;return -1}(e=e.toLowerCase(),t=t.toLowerCase()),o=r.next(),i=o.value;if(e.length===t.length&&0===i)return v.EQUAL;if(0===i)return v.STARTS_WITH;let s=o;for(;!s.done;){if(s.value>0&&" "===e[s.value-1])return v.WORD_STARTS_WITH;s=r.next()}return i>0?v.CONTAINS:1===t.length?v.NO_MATCH:(function(e){let t="",n=" ";for(let r=0;r<e.length;r++){let o=e.charAt(r),i=" "===o||"-"===o;" "!==n&&"-"!==n||i||(t+=o),n=o}return t})(e).includes(t)?v.ACRONYM:function(e,t){var n;let r,o=0,i=0;function s(e,t,n){for(let r=n,i=t.length;r<i;r++)if(t[r]===e)return o+=1,r+1;return -1}let a=s(t[0],e,0);if(a<0)return v.NO_MATCH;i=a;for(let n=1,r=t.length;n<r;n++)if(!((i=s(t[n],e,i))>-1))return v.NO_MATCH;return n=i-a,r=o/t.length,v.MATCHES+1/n*r}(e,t)}function j(e,{keepDiacritics:t}){return e=`${e}`,t||(e=(0,x.default)(e)),e}w.rankings=v;let k={maxRanking:1/0,minRanking:-1/0};var N=e.i(968291),S=e.i(152088);function C({heading:e,actions:n,className:r}){return 0===n.length?null:(0,t.jsx)(u.Command.Group,{heading:e,className:(0,S.cn)("px-2 pb-2 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider",r),children:n.map(e=>(0,t.jsxs)(u.Command.Item,{value:e.id,onSelect:e.onSelect,className:(0,S.cn)("flex items-center gap-2 px-3 py-2.5 rounded-md cursor-pointer text-sm text-muted-foreground aria-selected:bg-primary/10 aria-selected:text-primary transition-colors",e.destructive&&"text-destructive aria-selected:text-destructive"),"aria-keyshortcuts":e.shortcut,children:[(0,t.jsx)(e.icon,{className:"h-4 w-4"}),(0,t.jsx)("span",{children:e.label}),e.shortcut&&(0,t.jsx)("kbd",{className:"ml-auto pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-background/50 px-1.5 font-mono text-[10px] font-medium text-muted-foreground opacity-100",children:e.shortcut})]},e.id))})}function E({heading:e,conversations:n,icon:r,onSelect:o,className:i}){return 0===n.length?null:(0,t.jsx)(u.Command.Group,{heading:e,className:`px-2 pb-2 text-xs font-medium text-muted-foreground/70 uppercase tracking-wider mt-2 ${i||""}`,children:n.map(e=>(0,t.jsxs)(u.Command.Item,{value:e._id,onSelect:()=>o(`/chat/${e._id}`),className:"flex items-center gap-2 px-3 py-2.5 rounded-md cursor-pointer text-sm text-muted-foreground aria-selected:bg-primary/10 aria-selected:text-primary transition-colors",children:[(0,t.jsx)(r,{className:"h-4 w-4 opacity-70"}),(0,t.jsx)("span",{className:"truncate",children:e.title})]},e._id))})}var A=e.i(547608),T=e.i(893631),_=e.i(152823),M=e.i(190508),O=e.i(851278),I=e.i(62551),D=e.i(278894),P=e.i(927998),R=e.i(755430);let L=(0,R.default)("file-plus",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]]);var B=e.i(462957);let z=(0,R.default)("folder-kanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),U=(0,R.default)("laptop",[["path",{d:"M18 5a2 2 0 0 1 2 2v8.526a2 2 0 0 0 .212.897l1.068 2.127a1 1 0 0 1-.9 1.45H3.62a1 1 0 0 1-.9-1.45l1.068-2.127A2 2 0 0 0 4 15.526V7a2 2 0 0 1 2-2z",key:"1pdavp"}],["path",{d:"M20.054 15.987H3.946",key:"14rxg9"}]]);var $=e.i(148595),F=e.i(809888),H=e.i(202227),W=e.i(982663),G=e.i(346596),K=e.i(357245),V=e.i(466075),q=e.i(126312),Q=e.i(352047),Y=e.i(299805);function X(){let[e,n]=(0,c.useState)(!1),[r,i]=(0,c.useState)(""),[s,x]=(0,c.useState)([]),[v,b]=(0,c.useState)(!1),[y,j]=(0,c.useState)(!1),[k,S]=(0,c.useState)(!1),R=(0,l.useRouter)(),X=(0,l.usePathname)(),{setTheme:J}=(0,N.useTheme)();(0,c.useRef)(null);let Z=(0,h.useQuery)(d.api.conversations.list,{}),ee=(0,c.useMemo)(()=>Z?.filter(e=>!0!==e.isPresentation),[Z]),et=(0,h.useAction)(d.api.conversations.hybridSearch.hybridSearch),{startNewChat:en}=(0,M.useNewChat)(),er=(0,_.useFeatureToggles)(),eo=X?.startsWith("/chat/")?X.split("/")[2]:null,ei=(0,h.useQuery)(d.api.conversations.get,eo?{conversationId:eo}:"skip"),es=(0,T.useConversationActions)(eo,"command_palette");(0,c.useEffect)(()=>{let e=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),n(e=>!e))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[]),(0,c.useEffect)(()=>{e||(i(""),x([]))},[e]),(0,c.useEffect)(()=>{if(!r.trim())return void x([]);let e=setTimeout(async()=>{b(!0);try{let e=await et({query:r,limit:20,includeArchived:!1});x(e.filter(e=>!0!==e.isPresentation))}catch(e){console.error("Search failed:",e),x([])}finally{b(!1)}},300);return()=>clearTimeout(e)},[r,et]);let ea=()=>{en(),n(!1)},el=e=>{R.push(e),n(!1)},ec=e=>{J(e),n(!1)},ed=(0,c.useMemo)(()=>{let e;return e={handleNewChat:ea,handleNavigate:el,handleTheme:ec,conversationId:eo,conversation:ei,onRename:()=>{j(!0),n(!1)},onDelete:()=>{S(!0),n(!1)},onArchive:async()=>{await es.handleArchive(),n(!1)},onTogglePin:async()=>{await es.handleTogglePin(ei?.pinned||!1),n(!1)},onToggleStar:async()=>{await es.handleToggleStar(ei?.starred||!1),n(!1)},showNotes:er.showNotes,showTemplates:er.showTemplates,showProjects:er.showProjects,showBookmarks:er.showBookmarks,onAutoRename:async()=>{await es.handleAutoRename(),n(!1)}},[{id:"new-chat",label:"New Chat",keywords:["create","start","conversation"],icon:$.MessageSquarePlus,onSelect:e.handleNewChat,group:"actions",shortcut:"⌘⇧O"},{id:"search",label:"Search",keywords:["find","messages","go to","navigate"],icon:a.Search,onSelect:()=>e.handleNavigate("/search"),group:"navigation"},...!1!==e.showNotes?[{id:"notes",label:"Notes",keywords:["notes","notebook","go to","navigate"],icon:H.NotebookPen,onSelect:()=>e.handleNavigate("/notes"),group:"navigation"}]:[],{id:"memories",label:"Memories",keywords:["memories","brain","ai","go to","navigate"],icon:I.Brain,onSelect:()=>e.handleNavigate("/memories"),group:"navigation"},...!1!==e.showProjects?[{id:"projects",label:"Projects",keywords:["projects","folders","organize","go to","navigate"],icon:z,onSelect:()=>e.handleNavigate("/projects"),group:"navigation"}]:[],...!1!==e.showTemplates?[{id:"templates",label:"Templates",keywords:["templates","prompts","go to","navigate"],icon:B.FileText,onSelect:()=>e.handleNavigate("/templates"),group:"navigation"},{id:"create-template",label:"New Template",keywords:["create","template","new","prompt"],icon:L,onSelect:()=>e.handleNavigate("/templates?action=new"),group:"actions"}]:[],...!1!==e.showBookmarks?[{id:"bookmarks",label:"Bookmarks",keywords:["bookmarks","saved","favorites","go to","navigate"],icon:O.Bookmark,onSelect:()=>e.handleNavigate("/bookmarks"),group:"navigation"}]:[],{id:"shortcuts",label:"Shortcuts",keywords:["shortcuts","keyboard","hotkeys","go to","navigate"],icon:o.Keyboard,onSelect:()=>e.handleNavigate("/shortcuts"),group:"navigation"},{id:"settings",label:"Settings",keywords:["settings","preferences","config","go to","navigate"],icon:W.Settings,onSelect:()=>e.handleNavigate("/settings"),group:"navigation",shortcut:"⌘,"},{id:"export",label:"Export Data",keywords:["download","backup"],icon:D.Download,onSelect:()=>window.open("/api/export?format=json","_blank"),group:"actions"},...e.conversationId&&e.conversation?[{id:"conv-rename",label:"Rename conversation",keywords:["rename","title","edit"],icon:P.Edit,onSelect:e.onRename||(()=>{}),group:"conversation"},{id:"conv-pin",label:e.conversation.pinned?"Unpin conversation":"Pin conversation",keywords:["pin","unpin","sticky"],icon:g.Pin,onSelect:e.onTogglePin||(()=>{}),group:"conversation"},{id:"conv-star",label:e.conversation.starred?"Unstar conversation":"Star conversation",keywords:["star","unstar","favorite"],icon:K.Star,onSelect:e.onToggleStar||(()=>{}),group:"conversation"},{id:"conv-archive",label:"Archive conversation",keywords:["archive","hide"],icon:m.Archive,onSelect:e.onArchive||(()=>{}),group:"conversation"},{id:"conv-auto-rename",label:"Auto-rename conversation",keywords:["auto","rename","generate","title"],icon:G.Sparkles,onSelect:e.onAutoRename||(()=>{}),group:"conversation"},{id:"conv-delete",label:"Delete conversation",keywords:["delete","remove","trash"],icon:q.Trash2,onSelect:e.onDelete||(()=>{}),group:"conversation",destructive:!0}]:[],{id:"theme-light",label:"Light",keywords:["theme","bright"],icon:V.Sun,onSelect:()=>e.handleTheme("light"),group:"theme"},{id:"theme-dark",label:"Dark",keywords:["theme","night"],icon:F.Moon,onSelect:()=>e.handleTheme("dark"),group:"theme"},{id:"theme-system",label:"System",keywords:["theme","auto"],icon:U,onSelect:()=>e.handleTheme("system"),group:"theme"}]},[eo,ei,es,er.showNotes,er.showTemplates,er.showProjects,er.showBookmarks]),eu=(0,c.useMemo)(()=>r.trim()?w(ed,r,{keys:["label","keywords"],threshold:w.rankings.CONTAINS}):ed,[r,ed]),eh=(0,c.useMemo)(()=>r.trim()?{pinned:[],recent:s,archived:[]}:ee?{pinned:ee.filter(e=>e.pinned&&!e.archived),recent:ee.filter(e=>!e.pinned&&!e.archived),archived:ee.filter(e=>e.archived)}:{pinned:[],recent:[],archived:[]},[ee,r,s]),em=(0,c.useMemo)(()=>({actions:eu.filter(e=>"actions"===e.group),navigation:eu.filter(e=>"navigation"===e.group),conversation:eu.filter(e=>"conversation"===e.group),theme:eu.filter(e=>"theme"===e.group)}),[eu]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.Dialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(A.DialogContent,{className:"p-0 gap-0 max-w-2xl overflow-hidden bg-transparent border-0 shadow-2xl",children:[(0,t.jsx)(A.DialogTitle,{className:"sr-only",children:"Command Menu"}),(0,t.jsx)("div",{className:"surface-glass-strong rounded-xl border border-border/40 overflow-hidden",children:(0,t.jsxs)(u.Command,{className:"bg-transparent",shouldFilter:!1,children:[(0,t.jsxs)("div",{className:"flex items-center border-b border-border/40 px-3",children:[v?(0,t.jsx)(p.Loader2,{className:"mr-2 h-4 w-4 shrink-0 opacity-50 animate-spin"}):(0,t.jsx)(a.Search,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,t.jsx)(u.Command.Input,{value:r,onValueChange:i,placeholder:"Type a command or search...",className:"flex h-12 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50"})]}),(0,t.jsxs)(u.Command.List,{className:"max-h-[400px] overflow-y-auto p-2",children:[(0,t.jsx)(u.Command.Empty,{className:"py-6 text-center text-sm text-muted-foreground",children:r?"No conversations found":"No results found."}),(0,t.jsx)(C,{heading:"Actions",actions:em.actions}),(0,t.jsx)(C,{heading:"Navigation",actions:em.navigation,className:"mt-2"}),(0,t.jsx)(E,{heading:"Pinned",conversations:eh.pinned,icon:g.Pin,onSelect:el}),(0,t.jsx)(E,{heading:r.trim()?"Search Results":"Recent Conversations",conversations:eh.recent,icon:f.MessageSquare,onSelect:el}),(0,t.jsx)(E,{heading:"Archived",conversations:eh.archived,icon:m.Archive,onSelect:el}),(0,t.jsx)(C,{heading:"Conversation",actions:em.conversation,className:"mt-2"}),(0,t.jsx)(C,{heading:"Theme",actions:em.theme,className:"mt-2"})]})]})})]})}),ei&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y.RenameDialog,{conversation:ei,open:y,onOpenChange:j}),(0,t.jsx)(Q.DeleteConversationDialog,{open:k,onOpenChange:S,onConfirm:es.handleDelete,conversationTitle:ei.title})]})]})}let J=(0,R.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var Z=e.i(799126),ee=e.i(985902),et=e.i(173554),en=e.i(680707),er=e.i(632555),eo=e.i(873964);function ei({open:e,onOpenChange:n}){let[o,i]=(0,c.useState)(!0),[s,u]=(0,c.useState)(!0),[m,p]=(0,c.useState)("30"),[f,g]=(0,c.useState)(!1),x=(0,h.useMutation)(d.api.conversations.create),v=(0,l.useRouter)(),b=async()=>{g(!0);try{let e=await x({model:eo.DEFAULT_MODEL_ID,isIncognito:!0,incognitoSettings:{enableReadTools:o,applyCustomInstructions:s,inactivityTimeoutMinutes:"none"===m?void 0:Number(m)}});v.push(`/chat/${e}`),n(!1),Z.toast.success("Incognito chat started"),i(!0),u(!0),p("30")}catch(e){console.error("Failed to create incognito chat:",e),Z.toast.error("Failed to create incognito chat")}finally{g(!1)}};return(0,t.jsx)(A.Dialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(A.DialogContent,{className:"sm:max-w-md",children:[(0,t.jsxs)(A.DialogHeader,{children:[(0,t.jsxs)(A.DialogTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(r.Ghost,{className:"size-5 text-violet-400"}),"New Incognito Chat"]}),(0,t.jsx)(A.DialogDescription,{children:"Ephemeral conversation. No memories saved. Auto-deletes."})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)(et.Label,{htmlFor:"read-tools",className:"flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(a.Search,{className:"size-4 text-muted-foreground"}),"Search your data"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Access notes, files, and tasks"})]}),(0,t.jsx)(er.Switch,{id:"read-tools",checked:o,onCheckedChange:i})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)(et.Label,{htmlFor:"custom-instructions",className:"flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(G.Sparkles,{className:"size-4 text-muted-foreground"}),"Custom instructions"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Apply your personalization settings"})]}),(0,t.jsx)(er.Switch,{id:"custom-instructions",checked:s,onCheckedChange:u})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsxs)(et.Label,{className:"flex items-center gap-2 text-sm font-medium",children:[(0,t.jsx)(J,{className:"size-4 text-muted-foreground"}),"Auto-delete after"]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Inactivity timeout"})]}),(0,t.jsxs)(en.Select,{value:m,onValueChange:p,children:[(0,t.jsx)(en.SelectTrigger,{className:"w-28",children:(0,t.jsx)(en.SelectValue,{})}),(0,t.jsxs)(en.SelectContent,{children:[(0,t.jsx)(en.SelectItem,{value:"15",children:"15 min"}),(0,t.jsx)(en.SelectItem,{value:"30",children:"30 min"}),(0,t.jsx)(en.SelectItem,{value:"60",children:"1 hour"}),(0,t.jsx)(en.SelectItem,{value:"none",children:"Manual"})]})]})]})]}),(0,t.jsxs)(A.DialogFooter,{children:[(0,t.jsx)(ee.Button,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),(0,t.jsxs)(ee.Button,{onClick:b,disabled:f,children:[(0,t.jsx)(r.Ghost,{className:"size-4 mr-2"}),f?"Starting...":"Start"]})]})]})})}var es=e.i(813038),ea=e.i(403950),el=e.i(736436),ec=e.i(662122),ed=e.i(807017),eu=e.i(310165),eh=e.i(856511);function em({open:e,onOpenChange:n,selectedText:r,onSaveAsNote:o}){let i=(0,h.useAction)(d.api.generation.summarizeSelection),[s,a]=(0,c.useState)(""),[l,u]=(0,c.useState)(!1),[m,f]=(0,c.useState)(null);(0,c.useEffect)(()=>{e&&r&&(async()=>{if(r.length>1e4)return f(`Selection too long. Please select less than ${1e4.toLocaleString()} characters.`);u(!0),f(null),a("");try{let e=await i({text:r});a(e.summary)}catch(e){console.error("Failed to generate summary:",e),f(e instanceof Error?e.message:"Failed to generate summary")}finally{u(!1)}})()},[e,r,i]);let g=()=>{n(!1),x()},x=()=>{window.getSelection()?.removeAllRanges()};return(0,t.jsx)(A.Dialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(A.DialogContent,{className:"w-80 sm:max-w-md",onEscapeKeyDown:g,onInteractOutside:g,showCloseButton:!1,children:[(0,t.jsx)(A.DialogTitle,{className:"sr-only",children:"Text Summary"}),l&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3 py-4",children:[(0,t.jsx)(p.Loader2,{className:"h-6 w-6 animate-spin text-primary"}),(0,t.jsx)(A.DialogDescription,{className:"text-sm text-muted-foreground",children:"Generating summary..."})]}),m&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)(eh.Alert,{variant:"destructive",children:[(0,t.jsx)(eu.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(eh.AlertDescription,{children:m})]}),(0,t.jsx)(ee.Button,{size:"sm",onClick:()=>{f(null),u(!0),f(null),a(""),(async()=>{try{let e=await i({text:r});a(e.summary)}catch(e){console.error("Failed to generate summary:",e),f(e instanceof Error?e.message:"Failed to generate summary")}finally{u(!1)}})()},className:"w-full",children:"Try Again"})]}),!l&&!m&&s&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(A.DialogDescription,{className:"text-sm text-muted-foreground select-text",children:s}),(0,t.jsxs)(A.DialogFooter,{className:"flex-row gap-2 sm:gap-2",children:[(0,t.jsx)(ee.Button,{size:"sm",onClick:()=>{o(s)},children:"Save as Note"}),(0,t.jsx)(ee.Button,{size:"sm",variant:"ghost",onClick:g,children:"Dismiss"})]})]})]})})}var ep=e.i(943111);let ef=(0,c.createContext)(null),eg={text:"",rect:null,mousePosition:null,messageId:"",messageRole:"user",isActive:!1};function ex({children:e}){let[n,r]=(0,c.useState)(eg),{isMobile:o}=(0,ep.useMobileDetect)(),i=(0,c.useRef)(0),s=(0,c.useRef)({x:0,y:0}),a=(0,c.useCallback)(()=>{r(eg),window.getSelection()?.removeAllRanges()},[]),l=(0,c.useCallback)(e=>{if(o)return void a();let t=e.target;"INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.closest("[contenteditable]")||(s.current={x:e.clientX,y:e.clientY},setTimeout(()=>{let e=window.getSelection(),t=e?.toString().trim();if(!t||!e||0===e.rangeCount||t.length<10)return void a();let n=e.getRangeAt(0),o=n.getBoundingClientRect(),l=n.commonAncestorContainer;l.nodeType===Node.TEXT_NODE&&(l=l.parentElement);let c=l.closest(".chat-message");if(!c)return void a();let d=c.getAttribute("data-message-id"),u=c.getAttribute("data-message-role");d&&u?(i.current=Date.now(),r({text:t,rect:o,mousePosition:s.current,messageId:d,messageRole:u,isActive:!0})):a()},150))},[o,a]);return(0,c.useEffect)(()=>{document.addEventListener("mouseup",l);let e=e=>{if(!n.isActive)return;let t=Date.now()-i.current,r=e.target;r.closest(".selection-context-menu")||r.closest(".summarize-popover")||t<100||a()};document.addEventListener("mousedown",e);let t=e=>{let t=e.target;n.isActive&&t.closest(".chat-message-list")&&a()};return window.addEventListener("scroll",t,!0),()=>{document.removeEventListener("mouseup",l),document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t,!0)}},[l,n.isActive,a]),(0,t.jsx)(ef.Provider,{value:{selection:n,clearSelection:a},children:e})}function ev(){let{selection:e,clearSelection:n}=function(){let e=(0,c.useContext)(ef);if(!e)throw Error("useSelection must be used within a SelectionProvider");return e}(),[r,o]=(0,c.useState)({top:0,left:0}),[i,s]=(0,c.useState)(0),l=(0,c.useRef)(null),[u,m]=(0,c.useState)(!1),[p,f]=(0,c.useState)(!1),[g,x]=(0,c.useState)(!1),[v,b]=(0,c.useState)(""),[w,y]=(0,c.useState)(""),[j,k]=(0,c.useState)({top:0,left:0}),[N,S]=(0,c.useState)(null);(0,h.useMutation)(d.api.snippets.createSnippet);let C=(0,h.useAction)(d.api.memories.createMemoryFromSelection);(0,c.useEffect)(()=>{m(!0)},[]),(0,c.useEffect)(()=>{let t,n;if(!e.isActive||!e.rect)return;let r=e.rect,i=e.mousePosition;i?(t=i.y+window.scrollY+8,(n=i.x+window.scrollX+8)+240>window.innerWidth-10&&(n=i.x+window.scrollX-240-8),t+280>window.scrollY+window.innerHeight-10&&(t=i.y+window.scrollY-280-8),n<10&&(n=10),t<window.scrollY+10&&(t=window.scrollY+10)):(t=r.bottom+window.scrollY+8,n=r.right+window.scrollX-240,t+280>window.scrollY+window.innerHeight-10&&(t=r.top+window.scrollY-280-8),n<10&&(n=r.left+window.scrollX),n+240>window.innerWidth-10&&(n=window.innerWidth-240-10)),o({top:t,left:n}),s(0)},[e.isActive,e.rect,e.mousePosition]),(0,c.useEffect)(()=>{e.isActive&&p&&(f(!1),S(null),b(""),y(""))},[e.isActive,p]);let E=async()=>{try{Z.toast.info("Adding to memory..."),await C({content:e.text,sourceMessageId:e.messageId}),Z.toast.success("Added to memory"),n()}catch(e){console.error("Failed to add to memory:",e),Z.toast.error("Failed to add to memory")}},A=[{id:"quote",label:"Quote",icon:el.Quote,shortcut:"Q",action:()=>{window.dispatchEvent(new CustomEvent("quote-selection",{detail:e.text})),n()}},{id:"search",label:"Search Google",icon:a.Search,shortcut:"S",action:()=>{let t=encodeURIComponent(e.text);window.open(`https://www.google.com/search?q=${t}`,"_blank"),n()}},{id:"summarize",label:"Summarize",icon:G.Sparkles,shortcut:"M",action:()=>{if(!e.rect)return;let t=e.mousePosition,r=e.rect;t?k({top:t.y,left:t.x}):k({top:r.bottom+window.scrollY,left:r.left+window.scrollX}),y(e.text),S(e.messageId),b(""),f(!0),n()},disabled:"user"===e.messageRole},{id:"memory",label:"Add to Memory",icon:I.Brain,shortcut:"A",action:E}].filter(e=>!e.disabled);if((0,c.useEffect)(()=>{if(!e.isActive)return;let t=e=>{if("Escape"===e.key){e.preventDefault(),n();return}if("ArrowDown"===e.key){e.preventDefault(),s(e=>e<A.length-1?e+1:0);return}if("ArrowUp"===e.key){e.preventDefault(),s(e=>e>0?e-1:A.length-1);return}if("Enter"===e.key){e.preventDefault(),A[i]?.action();return}let t=e.key.toUpperCase(),r=A.find(e=>e.shortcut?.toUpperCase()===t);r&&(e.preventDefault(),r.action())};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e.isActive,i,A,n]),!u||!e.isActive&&!p&&!g)return null;let T=(0,t.jsx)(es.AnimatePresence,{children:e.isActive&&(0,t.jsx)(ea.motion.div,{ref:l,className:"selection-context-menu fixed z-50",style:{top:`${r.top}px`,left:`${r.left}px`},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95},transition:{duration:.15,ease:"easeOut"},role:"menu","aria-label":"Text selection actions",children:(0,t.jsxs)("div",{className:"bg-zinc-900/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden min-w-[240px]",children:[(0,t.jsx)("div",{className:"p-2 space-y-0.5",children:A.map((e,n)=>{let r=e.icon,o=n===i;return(0,t.jsxs)("button",{type:"button",onClick:e.action,onMouseEnter:()=>s(n),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all duration-150 cursor-pointer ${o?"bg-white/10 ring-1 ring-white/20":"hover:bg-white/5"}`,role:"menuitem","aria-current":o?"true":void 0,children:[(0,t.jsx)(r,{className:`w-4 h-4 ${o?"text-primary":"text-white/60"}`}),(0,t.jsx)("span",{className:`flex-1 text-left text-sm font-medium ${o?"text-white":"text-white/80"}`,children:e.label}),e.shortcut&&(0,t.jsx)("kbd",{className:`px-1.5 py-0.5 text-[10px] font-mono rounded ${o?"bg-white/20 text-white":"bg-white/10 text-white/50"}`,children:e.shortcut})]},e.id)})}),(0,t.jsx)("div",{className:"px-3 py-2 border-t border-white/5 bg-black/20",children:(0,t.jsx)("p",{className:"text-[10px] text-white/40 font-medium",children:"↑↓ Navigate • Enter Select • Esc Close"})})]})})});return(0,t.jsxs)(t.Fragment,{children:[(0,ec.createPortal)(T,document.body),u&&p&&(0,t.jsx)(em,{open:p,onOpenChange:e=>{f(e),e||g||(S(null),b(""),y(""))},selectedText:w,position:j,onSaveAsNote:e=>{b(e),x(!0),setTimeout(()=>{f(!1)},0)}}),u&&N&&(0,t.jsx)(ed.CreateNoteDialog,{open:g,onOpenChange:e=>{x(e),e||(S(null),b(""),y(""))},initialContent:v,sourceMessageId:N,sourceConversationId:void 0,sourceSelectionText:w})]})}var eb=e.i(882017),ew=e.i(127297);function ey(){return(0,ew.useKeyboardShortcuts)(),null}let ej=(0,R.default)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var ek=e.i(715455);function eN(){let[e,n]=(0,c.useState)(0);return((0,c.useEffect)(()=>{let e=()=>{n(ek.messageQueue.getCount())};return e(),window.addEventListener("queue-updated",e),()=>{window.removeEventListener("queue-updated",e)}},[]),0===e)?null:(0,t.jsx)("div",{className:"fixed bottom-20 right-4 z-50",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 text-yellow-900 dark:text-yellow-200 px-4 py-2 rounded-lg shadow-lg backdrop-blur-sm",children:[(0,t.jsx)(ej,{className:"w-4 h-4 shrink-0"}),(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e," message",e>1?"s":""," queued"]}),navigator.onLine&&(0,t.jsx)(p.Loader2,{className:"w-4 h-4 animate-spin shrink-0"})]})})}var eS=e.i(975620);let eC=(0,R.default)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);var eE=e.i(328299),eA=e.i(337837);function eT(){let e=(0,l.useRouter)(),n=(0,h.useQuery)(d.api.notifications.getUnreadCount),r=(0,h.useQuery)(d.api.notifications.list,{limit:10}),o=(0,h.useMutation)(d.api.notifications.markRead),i=(0,h.useMutation)(d.api.notifications.markAllRead),s=(0,h.useMutation)(d.api.notifications.dismiss),a=async t=>{t.read||await o({notificationId:t._id}),t.data?.conversationId&&e.push(`/chat/${t.data.conversationId}`)};return(0,t.jsxs)(eA.Popover,{children:[(0,t.jsx)(eA.PopoverTrigger,{asChild:!0,children:(0,t.jsxs)(ee.Button,{variant:"ghost",size:"icon",className:"relative h-8 w-8",children:[(0,t.jsx)(eC,{className:"h-4 w-4"}),(n??0)>0&&(0,t.jsx)("span",{className:"absolute -top-0.5 -right-0.5 h-4 w-4 rounded-full bg-red-500 text-[10px] font-medium text-white flex items-center justify-center",children:n>9?"9+":n})]})}),(0,t.jsxs)(eA.PopoverContent,{align:"end",className:"w-80 p-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 border-b",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"Notifications"}),(n??0)>0&&(0,t.jsx)(ee.Button,{variant:"ghost",size:"sm",onClick:()=>i(),className:"text-xs h-7",children:"Mark all read"})]}),(0,t.jsx)("div",{className:"max-h-80 overflow-y-auto",children:r&&0!==r.length?r.map(e=>(0,t.jsxs)("div",{className:(0,S.cn)("group flex items-start gap-3 px-4 py-3 hover:bg-muted/50 cursor-pointer border-b last:border-0 transition-colors",!e.read&&"bg-primary/5"),onClick:()=>a(e),children:[(0,t.jsx)("div",{className:"mt-1.5 flex-shrink-0",children:e.read?(0,t.jsx)("div",{className:"h-2 w-2"}):(0,t.jsx)("div",{className:"h-2 w-2 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-tight",children:e.title}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 line-clamp-2",children:e.message}),(0,t.jsx)("p",{className:"text-[10px] text-muted-foreground/70 mt-1",children:(0,eS.formatDistanceToNow)(e.createdAt,{addSuffix:!0})})]}),(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 shrink-0 opacity-0 group-hover:opacity-100 hover:opacity-100 transition-opacity",onClick:t=>{t.stopPropagation(),s({notificationId:e._id})},children:(0,t.jsx)(eE.X,{className:"h-3 w-3"})})]},e._id)):(0,t.jsx)("div",{className:"p-4 text-center text-muted-foreground text-sm",children:"No notifications"})})]})]})}var e_={attributes:!0,characterData:!0,subtree:!0,childList:!0};let eM=function(e,t,n=e_){(0,c.useEffect)(()=>{if(e.current){let r=new MutationObserver(t);return r.observe(e.current,n),()=>{r.disconnect()}}},[t,n])};var eO=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,r){return e[0]===t&&(n=r,!0)}),n}function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}(),eI="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,eD=e.g.Math===Math?e.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),eP="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(eD):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},eR=["top","right","bottom","left","width","height","size","weight"],eL="undefined"!=typeof MutationObserver,eB=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function i(){n&&(n=!1,e()),r&&a()}function s(){eP(i)}function a(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);o=e}return a}(this.refresh.bind(this),0)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},e.prototype.connect_=function(){eI&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),eL?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){eI&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;eR.some(function(e){return!!~n.indexOf(e)})&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ez=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},eU=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||eD},e$=eG(0,0,0,0);function eF(e){return parseFloat(e)||0}function eH(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(t,n){return t+eF(e["border-"+n+"-width"])},0)}var eW="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof eU(e).SVGGraphicsElement}:function(e){return e instanceof eU(e).SVGElement&&"function"==typeof e.getBBox};function eG(e,t,n,r){return{x:e,y:t,width:n,height:r}}var eK=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=eG(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=function(e){if(!eI)return e$;if(eW(e)){var t;return eG(0,0,(t=e.getBBox()).width,t.height)}return function(e){var t,n=e.clientWidth,r=e.clientHeight;if(!n&&!r)return e$;var o=eU(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=eF(i)}return t}(o),s=i.left+i.right,a=i.top+i.bottom,l=eF(o.width),c=eF(o.height);if("border-box"===o.boxSizing&&(Math.round(l+s)!==n&&(l-=eH(o,"left","right")+s),Math.round(c+a)!==r&&(c-=eH(o,"top","bottom")+a)),(t=e)!==eU(t).document.documentElement){var d=Math.round(l+s)-n,u=Math.round(c+a)-r;1!==Math.abs(d)&&(l-=d),1!==Math.abs(u)&&(c-=u)}return eG(i.left,i.top,l,c)}(e)}(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),eV=function(e,t){var n,r,o,i,s,a=(n=t.x,r=t.y,o=t.width,i=t.height,ez(s=Object.create(("undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object).prototype),{x:n,y:r,width:o,height:i,top:r,right:n+o,bottom:i+r,left:n}),s);ez(this,{target:e,contentRect:a})},eq=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new eO,"function"!=typeof e)throw TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof eU(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new eK(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof eU(e).Element))throw TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new eV(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),eQ="undefined"!=typeof WeakMap?new WeakMap:new eO,eY=function e(t){if(!(this instanceof e))throw TypeError("Cannot call a class as a function.");if(!arguments.length)throw TypeError("1 argument required, but only 0 present.");var n=new eq(t,eB.getInstance(),this);eQ.set(this,n)};["observe","unobserve","disconnect"].forEach(function(e){eY.prototype[e]=function(){var t;return(t=eQ.get(this))[e].apply(t,arguments)}});var eX=void 0!==eD.ResizeObserver?eD.ResizeObserver:eY,eJ=({mutationObservables:e,resizeObservables:t,refresh:n})=>{let[r,o]=(0,c.useState)(0);function i(t){for(let r of Array.from(t))if(e){if(!r.attributes)continue;e.find(e=>r.matches(e))&&n(!0)}}function s(e){for(let n of Array.from(e))if(t){if(!n.attributes)continue;t.find(e=>n.matches(e))&&o(r+1)}}return eM((0,c.useRef)(document.documentElement||document.body),e=>{for(let t of e)0!==t.addedNodes.length&&(i(t.addedNodes),s(t.addedNodes)),0!==t.removedNodes.length&&(i(t.removedNodes),s(t.removedNodes))},{childList:!0,subtree:!0}),(0,c.useEffect)(()=>{if(!t)return;let e=new eX(()=>{n()});for(let n of t){let t=document.querySelector(n);t&&e.observe(t)}return()=>{e.disconnect()}},[t,r]),null};function eZ(e){let t=e0;return e&&(t=e.getBoundingClientRect()),t}var e0={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0};function e1(){return{w:Math.max(document.documentElement.clientWidth,window.innerWidth||0),h:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}function e2(e=10){return Array.isArray(e)?1===e.length?[e[0],e[0],e[0],e[0]]:2===e.length?[e[1],e[0],e[1],e[0]]:3===e.length?[e[0],e[1],e[2],e[1]]:e.length>3?[e[0],e[1],e[2],e[3]]:[10,10]:[e,e,e,e]}var e4={maskWrapper:()=>({opacity:.7,left:0,top:0,position:"fixed",zIndex:99999,pointerEvents:"none",color:"#000"}),svgWrapper:({windowWidth:e,windowHeight:t,wpt:n,wpl:r})=>({width:e,height:t,left:Number(r),top:Number(n),position:"fixed"}),maskArea:({x:e,y:t,width:n,height:r})=>({x:e,y:t,width:n,height:r,fill:"black",rx:0}),maskRect:({windowWidth:e,windowHeight:t,maskID:n})=>({x:0,y:0,width:e,height:t,fill:"currentColor",mask:`url(#${n})`}),clickArea:({windowWidth:e,windowHeight:t,clipID:n})=>({x:0,y:0,width:e,height:t,fill:"currentcolor",pointerEvents:"auto",clipPath:`url(#${n})`}),highlightedArea:({x:e,y:t,width:n,height:r})=>({x:e,y:t,width:n,height:r,pointerEvents:"auto",fill:"transparent",display:"none"})},e5=({padding:e=10,wrapperPadding:t=0,onClick:n,onClickHighlighted:r,styles:o={},sizes:i,className:s,highlightedAreaClassName:a,maskId:l,clipId:d})=>{var u,h,m,p;let f=l||e8("mask__"),g=d||e8("clip__"),x=(e,t)=>{let n=e4[e](t),r=o[e];return r?r(n,t):n},[v,b,w,y]=e2(e),[j,k,N,S]=e2(t),{w:C,h:E}=e1(),A=(u=(null==i?void 0:i.width)+y+b)<0?0:u,T=(h=(null==i?void 0:i.height)+v+w)<0?0:h,_=(m=(null==i?void 0:i.top)-v-j)<0?0:m,M=(p=(null==i?void 0:i.left)-y-S)<0?0:p,O=C-S-k,I=E-j-N,D=x("maskArea",{x:M,y:_,width:A,height:T}),P=x("highlightedArea",{x:M,y:_,width:A,height:T});return c.default.createElement("div",{style:x("maskWrapper",{}),onClick:n,className:s},c.default.createElement("svg",{width:O,height:I,xmlns:"http://www.w3.org/2000/svg",style:x("svgWrapper",{windowWidth:O,windowHeight:I,wpt:j,wpl:S})},c.default.createElement("defs",null,c.default.createElement("mask",{id:f},c.default.createElement("rect",{x:0,y:0,width:O,height:I,fill:"white"}),c.default.createElement("rect",{style:D,rx:D.rx?1:void 0})),c.default.createElement("clipPath",{id:g},c.default.createElement("polygon",{points:`0 0, 0 ${I}, ${M} ${I}, ${M} ${_}, ${M+A} ${_}, ${M+A} ${_+T}, ${M} ${_+T}, ${M} ${I}, ${O} ${I}, ${O} 0`}))),c.default.createElement("rect",{style:x("maskRect",{windowWidth:O,windowHeight:I,maskID:f})}),c.default.createElement("rect",{style:x("clickArea",{windowWidth:O,windowHeight:I,top:_,left:M,width:A,height:T,clipID:g})}),c.default.createElement("rect",{style:P,className:a,onClick:r,rx:P.rx?1:void 0})))};function e8(e){return e+Math.random().toString(36).substring(2,16)}var e3=Object.defineProperty,e7=Object.getOwnPropertySymbols,e6=Object.prototype.hasOwnProperty,e9=Object.prototype.propertyIsEnumerable,te=(e,t,n)=>t in e?e3(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tt=(e,t)=>{for(var n in t||(t={}))e6.call(t,n)&&te(e,n,t[n]);if(e7)for(var n of e7(t))e9.call(t,n)&&te(e,n,t[n]);return e},tn={popover:()=>({position:"fixed",maxWidth:353,backgroundColor:"#fff",padding:"24px 30px",boxShadow:"0 0.5em 3em rgba(0, 0, 0, 0.3)",color:"inherit",zIndex:1e5,transition:"transform 0.3s",top:0,left:0})},tr=e=>{var{children:t,position:n="bottom",padding:r=10,styles:o={},sizes:i,refresher:s}=e,a=((e,t)=>{var n={};for(var r in e)e6.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&e7)for(var r of e7(e))0>t.indexOf(r)&&e9.call(e,r)&&(n[r]=e[r]);return n})(e,["children","position","padding","styles","sizes","refresher"]);let l=(0,c.useRef)(null),d=(0,c.useRef)(""),u=(0,c.useRef)(""),h=(0,c.useRef)(""),{w:m,h:p}=e1(),f=(e,t)=>{let n=tn[e](t),r=o[e];return r?r(n,t):n},g=function(e,t){let[n,r]=(0,c.useState)(e0),o=(0,c.useCallback)(()=>{(null==e?void 0:e.current)&&r(eZ(null==e?void 0:e.current))},[null==e?void 0:e.current]);return(0,c.useEffect)(()=>(o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)),[null==e?void 0:e.current,t]),n}(l,s),{width:x,height:v}=g,[b,w,y,j]=e2(r),k=(null==i?void 0:i.left)-j,N=(null==i?void 0:i.top)-b,S=(null==i?void 0:i.right)+w,C=(null==i?void 0:i.bottom)+y,E=n&&"function"==typeof n?n({width:x,height:v,windowWidth:m,windowHeight:p,top:N,left:k,right:S,bottom:C,x:i.x,y:i.y},g):n,A={left:k,right:m-S,top:N,bottom:p-C},T=(e,t,n)=>{switch(e){case"top":return A.top>v+y;case"right":return!t&&A.right>x+j;case"bottom":return!n&&A.bottom>v+b;case"left":return A.left>x+w;default:return!1}},_=(e=>{if(Array.isArray(e)){let t=e[0]>m,n=e[1]>p;return d.current="custom",[t?m/2-x/2:e[0],n?p/2-v/2:e[1]]}let t=k+x>m,n=C+v>p,r=t?Math.min(k,m-x):Math.max(k,0),o=n?v>A.bottom?Math.max(C-v,0):Math.max(N,0):N;n&&v>A.bottom?u.current="bottom":u.current="top",t?h.current="left":h.current="right";let i={top:[r-j,N-v-y],right:[S+j,o-b],bottom:[r-j,C+b],left:[k-x-w,o-b],center:[m/2-x/2,p/2-v/2]};if("center"===e||T(e,t,n)&&!t&&!n)return d.current=e,i[e];let s=function(e,t=[]){return Object.keys(e).map(t=>({position:t,value:e[t]})).sort((e,t)=>t.value-e.value).sort((e,n)=>{let r,o;return r=e.position,o=n.position,t.includes(r)?1:t.includes(o)?-1:0}).filter(e=>e.value>0).map(e=>e.position)}(A,n?["right","left"]:t?["top","bottom"]:[]);for(let e=0;e<s.length;e++)if(T(s[e],t,n))return d.current=s[e],i[s[e]];return d.current="center",i.center})(E);return c.default.createElement("div",tt({className:"reactour__popover",style:tt({transform:`translate(${Math.round(_[0])}px, ${Math.round(_[1])}px)`},f("popover",{position:d.current,verticalAlign:u.current,horizontalAlign:h.current,helperRect:g,targetRect:i})),ref:l},a),t)},to=Object.defineProperty,ti=Object.defineProperties,ts=Object.getOwnPropertyDescriptors,ta=Object.getOwnPropertySymbols,tl=Object.prototype.hasOwnProperty,tc=Object.prototype.propertyIsEnumerable,td=(e,t,n)=>t in e?to(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tu=(e,t)=>{for(var n in t||(t={}))tl.call(t,n)&&td(e,n,t[n]);if(ta)for(var n of ta(t))tc.call(t,n)&&td(e,n,t[n]);return e},th=(e,t)=>{var n={};for(var r in e)tl.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&ta)for(var r of ta(e))0>t.indexOf(r)&&tc.call(e,r)&&(n[r]=e[r]);return n},tm={bottom:0,height:0,left:0,right:0,top:0,width:0,windowWidth:0,windowHeight:0,x:0,y:0};function tp(e,t=[],n=!0){let r=!1,{w:o,h:i}=e1();if(!t)return ti(tu({},eZ(e)),ts({windowWidth:o,windowHeight:i,hasHighligtedElems:!1}));let s=eZ(e),a={bottom:0,height:0,left:o,right:0,top:i,width:0};for(let o of t){let t=document.querySelector(o);if(!t||"none"===t.style.display||"hidden"===t.style.visibility)continue;let i=eZ(t);r=!0,n||!e?(i.top<a.top&&(a.top=i.top),i.right>a.right&&(a.right=i.right),i.bottom>a.bottom&&(a.bottom=i.bottom),i.left<a.left&&(a.left=i.left),a.width=a.right-a.left,a.height=a.bottom-a.top):(i.top<s.top&&(s.top=i.top),i.right>s.right&&(s.right=i.right),i.bottom>s.bottom&&(s.bottom=i.bottom),i.left<s.left&&(s.left=i.left),s.width=s.right-s.left,s.height=s.bottom-s.top)}let l=(!!n||!e)&&a.width>0&&a.height>0;return{left:(l?a:s).left,top:(l?a:s).top,right:(l?a:s).right,bottom:(l?a:s).bottom,width:(l?a:s).width,height:(l?a:s).height,windowWidth:o,windowHeight:i,hasHighligtedElems:r,x:s.x,y:s.y}}var tf=({disableKeyboardNavigation:e,setCurrentStep:t,currentStep:n,setIsOpen:r,stepsLength:o,disable:i,rtl:s,clickProps:a,keyboardHandler:l})=>{function d(c){let d,u,h;function m(){t(Math.min(n+1,o-1))}function p(){t(Math.max(n-1,0))}c.stopPropagation(),!0!==e&&!i&&(e&&(d=e.includes("esc"),u=e.includes("right"),h=e.includes("left")),l&&"function"==typeof l?l(c,a,{isEscDisabled:d,isRightDisabled:u,isLeftDisabled:h}):(27!==c.keyCode||d||(c.preventDefault(),r(!1)),39!==c.keyCode||u||(c.preventDefault(),s?p():m()),37!==c.keyCode||h||(c.preventDefault(),s?m():p())))}return(0,c.useEffect)(()=>(window.addEventListener("keydown",d,!1),()=>{window.removeEventListener("keydown",d)}),[i,t,n]),null},tg={badge:()=>({position:"absolute",fontFamily:"monospace",background:"var(--reactour-accent,#007aff)",height:"1.875em",lineHeight:2,paddingLeft:"0.8125em",paddingRight:"0.8125em",fontSize:"1em",borderRadius:"1.625em",color:"white",textAlign:"center",boxShadow:"0 0.25em 0.5em rgba(0, 0, 0, 0.3)",top:"-0.8125em",left:"-0.8125em"}),controls:()=>({display:"flex",marginTop:24,alignItems:"center",justifyContent:"space-between"}),navigation:()=>({counterReset:"dot",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap"}),button:({disabled:e})=>({display:"block",padding:0,border:0,background:"none",cursor:e?"not-allowed":"pointer"}),arrow:({disabled:e})=>({color:e?"#caccce":"#646464",width:16,height:12,flex:"0 0 16px"}),dot:({current:e,disabled:t,showNumber:n})=>({counterIncrement:"dot",width:8,height:8,border:e?"0":"1px solid #caccce",borderRadius:"100%",padding:0,display:"block",margin:4,transition:"opacity 0.3s, transform 0.3s",cursor:t?"not-allowed":"pointer",transform:`scale(${e?1.25:1})`,color:e?"var(--reactour-accent, #007aff)":"#caccce",background:e?"var(--reactour-accent, #007aff)":"none"}),close:({disabled:e})=>({position:"absolute",top:22,right:22,width:9,height:9,"--rt-close-btn":e?"#caccce":"#5e5e5e","--rt-close-btn-disabled":e?"#caccce":"#000"}),svg:()=>({display:"block"})};function tx(e){return(t,n)=>{let r=tg[t](n),o=e[t];return o?o(r,n):r}}var tv=({styles:e={},inverted:t=!1,disabled:n})=>{let r=tx(e);return c.default.createElement("svg",{viewBox:"0 0 18.4 14.4",style:r("arrow",{inverted:t,disabled:n})},c.default.createElement("path",{d:t?"M17 7.2H1M10.8 1L17 7.2l-6.2 6.2":"M1.4 7.2h16M7.6 1L1.4 7.2l6.2 6.2",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeMiterlimit:"10"}))},tb={Badge:({styles:e={},children:t})=>{let n=tx(e);return c.default.createElement("span",{style:n("badge",{})},t)},Close:e=>{var{styles:t={},onClick:n,disabled:r}=e,o=th(e,["styles","onClick","disabled"]);let i=tx(t);return c.default.createElement("button",tu({className:"reactour__close-button",style:tu(tu({},i("button",{})),i("close",{disabled:r})),onClick:n},o),c.default.createElement("svg",{viewBox:"0 0 9.1 9.1","aria-hidden":!0,role:"presentation",style:tu({},i("svg",{}))},c.default.createElement("path",{fill:"currentColor",d:"M5.9 4.5l2.8-2.8c.4-.4.4-1 0-1.4-.4-.4-1-.4-1.4 0L4.5 3.1 1.7.3C1.3-.1.7-.1.3.3c-.4.4-.4 1 0 1.4l2.8 2.8L.3 7.4c-.4.4-.4 1 0 1.4.2.2.4.3.7.3s.5-.1.7-.3L4.5 6l2.8 2.8c.3.2.5.3.8.3s.5-.1.7-.3c.4-.4.4-1 0-1.4L5.9 4.5z"})))},Content:({content:e,setCurrentStep:t,transition:n,isHighlightingObserved:r,currentStep:o,setIsOpen:i})=>"function"==typeof e?e({setCurrentStep:t,transition:n,isHighlightingObserved:r,currentStep:o,setIsOpen:i}):e,Navigation:({styles:e={},steps:t,setCurrentStep:n,currentStep:r,setIsOpen:o,nextButton:i,prevButton:s,disableDots:a,hideDots:l,hideButtons:d,disableAll:u,rtl:h,Arrow:m=tv})=>{let p=t.length,f=tx(e),g=({onClick:t,kind:o="next",children:i,hideArrow:s})=>c.default.createElement("button",{style:f("button",{kind:o,disabled:u||("next"===o?p-1===r:0===r)}),onClick:function(){u||(t&&"function"==typeof t?t():"next"===o?n(Math.min(r+1,p-1)):n(Math.max(r-1,0)))},"aria-label":`Go to ${o} step`},s?null:c.default.createElement(m,{styles:e,inverted:h?"prev"===o:"next"===o,disabled:u||("next"===o?p-1===r:0===r)}),i);return c.default.createElement("div",{style:f("controls",{}),dir:h?"rtl":"ltr"},d?null:s&&"function"==typeof s?s({Button:g,setCurrentStep:n,currentStep:r,stepsLength:p,setIsOpen:o,steps:t}):c.default.createElement(g,{kind:"prev"}),l?null:c.default.createElement("div",{style:f("navigation",{})},Array.from({length:p},(e,t)=>t).map(e=>{var o;return c.default.createElement("button",{style:f("dot",{current:e===r,disabled:a||u}),onClick:()=>{a||u||n(e)},key:`navigation_dot_${e}`,"aria-label":(null==(o=t[e])?void 0:o.navDotAriaLabel)||`Go to step ${e+1}`})})),d?null:i&&"function"==typeof i?i({Button:g,setCurrentStep:n,currentStep:r,stepsLength:p,setIsOpen:o,steps:t}):c.default.createElement(g,null))},Arrow:tv},tw=({styles:e,components:t={},badgeContent:n,accessibilityOptions:r,disabledActions:o,onClickClose:i,steps:s,setCurrentStep:a,currentStep:l,transition:d,isHighlightingObserved:u,setIsOpen:h,nextButton:m,prevButton:p,disableDotsNavigation:f,rtl:g,showPrevNextButtons:x=!0,showCloseButton:v=!0,showNavigation:b=!0,showBadge:w=!0,showDots:y=!0,meta:j,setMeta:k,setSteps:N})=>{let S=s[l],{Badge:C,Close:E,Content:A,Navigation:T,Arrow:_}=tu(tu({},tb),t),M=n&&"function"==typeof n?n({currentStep:l,totalSteps:s.length,transition:d}):l+1;return c.default.createElement(c.default.Fragment,null,w?c.default.createElement(C,{styles:e},M):null,v?c.default.createElement(E,{styles:e,"aria-label":null==r?void 0:r.closeButtonAriaLabel,disabled:o,onClick:function(){o||(i&&"function"==typeof i?i({setCurrentStep:a,setIsOpen:h,currentStep:l,steps:s,meta:j,setMeta:k,setSteps:N}):h(!1))}}):null,c.default.createElement(A,{content:null==S?void 0:S.content,setCurrentStep:a,currentStep:l,transition:d,isHighlightingObserved:u,setIsOpen:h}),b?c.default.createElement(T,{setCurrentStep:a,currentStep:l,setIsOpen:h,steps:s,styles:e,"aria-hidden":!(null==r?void 0:r.showNavigationScreenReaders),nextButton:m,prevButton:p,disableDots:f,hideButtons:!x,hideDots:!y,disableAll:o,rtl:g,Arrow:_}):null)},ty=e=>{var t,n,{currentStep:r,setCurrentStep:o,setIsOpen:i,steps:s=[],setSteps:a,styles:l={},scrollSmooth:d,afterOpen:u,beforeClose:h,padding:m=10,position:p,onClickMask:f,onClickHighlighted:g,keyboardHandler:x,className:v="reactour__popover",maskClassName:b="reactour__mask",highlightedMaskClassName:w,clipId:y,maskId:j,disableInteraction:k,disableKeyboardNavigation:N,inViewThreshold:S,disabledActions:C,setDisabledActions:E,disableWhenSelectorFalsy:A,rtl:T,accessibilityOptions:_={closeButtonAriaLabel:"Close Tour",showNavigationScreenReaders:!0},ContentComponent:M,Wrapper:O,meta:I,setMeta:D,onTransition:P=()=>"center"}=e,R=th(e,["currentStep","setCurrentStep","setIsOpen","steps","setSteps","styles","scrollSmooth","afterOpen","beforeClose","padding","position","onClickMask","onClickHighlighted","keyboardHandler","className","maskClassName","highlightedMaskClassName","clipId","maskId","disableInteraction","disableKeyboardNavigation","inViewThreshold","disabledActions","setDisabledActions","disableWhenSelectorFalsy","rtl","accessibilityOptions","ContentComponent","Wrapper","meta","setMeta","onTransition"]);let L=s[r],B=tu(tu({},l),null==L?void 0:L.styles),{sizes:z,transition:U,observableRefresher:$,isHighlightingObserved:F,target:H}=function(e,t={block:"center",behavior:"smooth",inViewThreshold:0}){let[n,r]=(0,c.useState)(!1),[o,i]=(0,c.useState)(!1),[s,a]=(0,c.useState)(!1),[l,d]=(0,c.useState)(null),[u,h]=(0,c.useState)(tm),m=(null==e?void 0:e.selector)instanceof Element?null==e?void 0:e.selector:document.querySelector(null==e?void 0:e.selector),p=(0,c.useCallback)(()=>{let t=tp(m,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem),{hasHighligtedElems:n}=t,r=th(t,["hasHighligtedElems"]);Object.entries(u).some(([e,t])=>r[e]!==t)&&h(r)},[m,null==e?void 0:e.highlightedSelectors,u]);(0,c.useEffect)(()=>(p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)),[m,null==e?void 0:e.highlightedSelectors,l]),(0,c.useEffect)(()=>{!function({top:e,right:t,bottom:n,left:r,threshold:o}){let{w:i,h:s}=e1(),{thresholdX:a,thresholdY:l}="object"==typeof o&&null!==o?{thresholdX:o.x||0,thresholdY:o.y||0}:{thresholdX:o||0,thresholdY:o||0};return e<0&&n-e>s||e>=0+l&&r>=0+a&&n<=s-l&&t<=i-a}(ti(tu({},u),ts({threshold:t.inViewThreshold})))&&m&&(r(!0),new Promise(e=>{if(!(m instanceof Element))throw TypeError("Argument 1 must be an Element");let n=0,r=null,o=Object.assign({behavior:"smooth"},t);m.scrollIntoView(o),requestAnimationFrame(function t(){let o=null==m?void 0:m.getBoundingClientRect().top;if(o===r){if(n++>2)return e(null)}else n=0,r=o;requestAnimationFrame(t)})}).then(()=>{o||d(Date.now())}).finally(()=>{r(!1)}))},[u]);let f=(0,c.useCallback)(()=>{i(!0);let t=tp(m,null==e?void 0:e.highlightedSelectors,null==e?void 0:e.bypassElem),{hasHighligtedElems:n}=t,r=th(t,["hasHighligtedElems"]);a(n),h(r),i(!1)},[m,null==e?void 0:e.highlightedSelectors,u]);return{sizes:u,transition:n,target:m,observableRefresher:f,isHighlightingObserved:s}}(L,{block:"center",behavior:d?"smooth":"auto",inViewThreshold:S});(0,c.useEffect)(()=>(u&&"function"==typeof u&&u(H),()=>{h&&"function"==typeof h&&h(H)}),[]);let{maskPadding:W,popoverPadding:G,wrapperPadding:K}="object"==typeof(t=null!=(n=null==L?void 0:L.padding)?n:m)&&null!==t?{maskPadding:t.mask,popoverPadding:t.popover,wrapperPadding:t.wrapper}:{maskPadding:t,popoverPadding:t,wrapperPadding:0},V={setCurrentStep:o,setIsOpen:i,currentStep:r,setSteps:a,steps:s,setMeta:D,meta:I},q="boolean"==typeof(null==L?void 0:L.stepInteraction)?!(null==L?void 0:L.stepInteraction):!!k&&("boolean"==typeof k?k:k(V));(0,c.useEffect)(()=>((null==L?void 0:L.action)&&"function"==typeof(null==L?void 0:L.action)&&(null==L||L.action(H)),(null==L?void 0:L.disableActions)!==void 0&&E(null==L?void 0:L.disableActions),()=>{(null==L?void 0:L.actionAfter)&&"function"==typeof(null==L?void 0:L.actionAfter)&&(null==L||L.actionAfter(H))}),[L]);let Q=U?P:(null==L?void 0:L.position)?null==L?void 0:L.position:p,Y=O||c.default.Fragment;return L?c.default.createElement(Y,null,c.default.createElement(eJ,{mutationObservables:null==L?void 0:L.mutationObservables,resizeObservables:null==L?void 0:L.resizeObservables,refresh:$}),c.default.createElement(tf,{setCurrentStep:o,currentStep:r,setIsOpen:i,stepsLength:s.length,disableKeyboardNavigation:N,disable:C,rtl:T,clickProps:V,keyboardHandler:x}),(!A||H)&&c.default.createElement(e5,{sizes:U?tj:z,onClick:function(){C||(f&&"function"==typeof f?f(V):i(!1))},styles:tu({highlightedArea:e=>ti(tu({},e),ts({display:q?"block":"none"}))},B),padding:U?0:W,highlightedAreaClassName:w,className:b,onClickHighlighted:e=>{e.preventDefault(),e.stopPropagation(),g&&g(e,V)},wrapperPadding:K,clipId:y,maskId:j}),(!A||H)&&c.default.createElement(tr,{sizes:z,styles:B,position:Q,padding:G,"aria-labelledby":null==_?void 0:_.ariaLabelledBy,className:v,refresher:r},M?c.default.createElement(M,tu({styles:B,setCurrentStep:o,currentStep:r,setIsOpen:i,steps:s,accessibilityOptions:_,disabledActions:C,transition:U,isHighlightingObserved:F,rtl:T},R)):c.default.createElement(tw,tu({styles:B,setCurrentStep:o,currentStep:r,setIsOpen:i,steps:s,setSteps:a,accessibilityOptions:_,disabledActions:C,transition:U,isHighlightingObserved:F,rtl:T,meta:I,setMeta:D},R)))):null},tj={bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0},tk=c.default.createContext({isOpen:!1,setIsOpen:()=>!1,currentStep:0,setCurrentStep:()=>0,steps:[],setSteps:()=>[],setMeta:()=>"",disabledActions:!1,setDisabledActions:()=>!1,components:{}}),tN=e=>{var{children:t,defaultOpen:n=!1,startAt:r=0,steps:o,setCurrentStep:i,currentStep:s}=e,a=th(e,["children","defaultOpen","startAt","steps","setCurrentStep","currentStep"]);let[l,d]=(0,c.useState)(n),[u,h]=(0,c.useState)(r),[m,p]=(0,c.useState)(o),[f,g]=(0,c.useState)(""),[x,v]=(0,c.useState)(!1),b=tu({isOpen:l,setIsOpen:d,currentStep:s||u,setCurrentStep:i&&"function"==typeof i?i:h,steps:m,setSteps:p,disabledActions:x,setDisabledActions:v,meta:f,setMeta:g},a);return c.default.createElement(tk.Provider,{value:b},t,l?c.default.createElement(ty,tu({},b)):null)};function tS({onComplete:e}){let{setIsOpen:t,setCurrentStep:n,isOpen:r}=(0,c.useContext)(tk),o=(0,c.useRef)(!1);return(0,c.useEffect)(()=>{if(o.current||window.innerWidth<768)return;let e=setTimeout(()=>{n(0),t(!0),o.current=!0},1500);return()=>clearTimeout(e)},[t,n]),(0,c.useEffect)(()=>{o.current&&!r&&e()},[r,e]),null}function tC({children:e}){return(0,t.jsx)("kbd",{className:"px-1.5 py-0.5 text-xs font-semibold rounded bg-black/10 dark:bg-white/10 border border-current/20",children:e})}let tE=[{selector:'[data-tour="sidebar"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Command Bar"}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:["Navigate anywhere with ",(0,t.jsx)(tC,{children:"Ctrl+K"}),". Search conversations semantically, change themes, open settings, jump to templates — everything's a keystroke away."]})]}),position:"right"},{selector:'[data-tour="input"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Built for Speed"}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:[(0,t.jsx)(tC,{children:"Alt+N"})," starts a new chat, ",(0,t.jsx)(tC,{children:"Cmd+J"})," switches models instantly, ",(0,t.jsx)(tC,{children:"Cmd+;"})," applies a template. No clicking required."]})]}),position:"top"},{selector:'[data-tour="model-selector"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"blah Remembers"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Important details are remembered across all your chats. Ask blah to recall something from a past conversation, or tell it to remember (or forget) specific facts."})]}),position:"bottom"},{selector:'[data-tour="comparison"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Built-in Tools"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Need to run code? Search the web? blah has built-in tools for Python, JavaScript, web search, and more — just ask."})]}),position:"bottom"},{selector:'[data-tour="projects"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"Projects"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Group related conversations, notes, tasks, and files together. Perfect for keeping context organized across longer efforts."})]}),position:"right"},{selector:'[data-tour="feedback"]',content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"font-semibold",children:"We're Listening"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"Found a bug? Have an idea? The feedback button is always here. We read every message."})]}),position:"bottom"},{selector:"body",content:(0,t.jsxs)("div",{className:"space-y-2 text-center",children:[(0,t.jsx)("p",{className:"font-semibold",children:"You're Ready"}),(0,t.jsx)("p",{className:"text-sm opacity-80",children:"That's the highlights. Explore the sidebar, try the shortcuts, and make blah work the way you think."})]}),position:"center"}];function tA({children:e}){let{isDarkMode:n,isLoaded:r}=function(){let[e,t]=(0,c.useState)(!1),[n,r]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let e=()=>{t(document.documentElement.classList.contains("dark")),r(!0)};e();let n=new MutationObserver(t=>{t.forEach(t=>{"class"===t.attributeName&&e()})});return n.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{n.disconnect()}},[]),{isDarkMode:e,isLoaded:n}}(),o=(0,h.useQuery)(d.api.onboarding.getOnboardingState),i=(0,h.useMutation)(d.api.onboarding.initializeOnboarding),s=(0,h.useMutation)(d.api.onboarding.completeTour),a=(0,c.useRef)(!1);(0,c.useEffect)(()=>{void 0!==o&&null===o&&i()},[o,i]);let l=(0,c.useCallback)(()=>{a.current||(a.current=!0,s({skipped:!1}))},[s]);return o&&(o.tourCompleted||o.tourSkipped)||void 0===o?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsxs)(tN,{steps:tE,styles:r?{popover:e=>({...e,backgroundColor:n?"#1f1f1f":"#ffffff",color:n?"#e5e5e5":"#1f1f1f",borderRadius:"0.5rem",padding:"1rem",fontSize:"0.875rem",border:n?"1px solid #333":"1px solid #e5e7eb",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.4)"}),maskArea:e=>({...e,rx:8}),badge:e=>({...e,backgroundColor:"#e4a853",color:"#ffffff"}),controls:e=>({...e,marginTop:"1rem"}),close:e=>({...e,color:n?"#a1a1aa":"#71717a","&:hover":{color:n?"#e5e5e5":"#1f1f1f"}})}:{},padding:{mask:8,popover:[8,12]},showBadge:!0,showCloseButton:!0,showDots:!0,showNavigation:!0,disableDotsNavigation:!1,scrollSmooth:!0,inViewThreshold:100,disableFocusLock:!0,onClickMask:()=>{},children:[(0,t.jsx)(tS,{onComplete:l}),e]})}function tT({children:e}){return(0,t.jsx)(tA,{children:e})}var t_=e.i(662043),tM=e.i(324354),tO=e.i(755003),tI=e.i(239149),tD=e.i(755589),tP=e.i(265118),tR=e.i(505196),tL=e.i(642689),tB=e.i(390073),tz=e.i(583993);function tU({value:e,onChange:n}){let r=(0,h.useQuery)(d.api.projects.list);if(!r||0===r.length)return null;let o=null!==e;return(0,t.jsx)("div",{className:"w-full min-w-0",children:(0,t.jsxs)(en.Select,{value:e||"all",onValueChange:e=>{"all"===e?n(null):n(e)},children:[(0,t.jsx)(en.SelectTrigger,{className:`w-full min-w-0 px-2.5 transition-all duration-200 ${o?"border-primary bg-primary/5 text-primary shadow-sm ring-1 ring-primary/20":""}`,children:(0,t.jsxs)("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[(0,t.jsx)(tz.FolderOpen,{className:`w-4 h-4 shrink-0 transition-colors ${o?"text-primary":""}`}),(0,t.jsx)("div",{className:"truncate min-w-0",children:(0,t.jsx)(en.SelectValue,{placeholder:"All projects"})})]})}),(0,t.jsxs)(en.SelectContent,{children:[(0,t.jsx)(en.SelectItem,{value:"all",children:"All projects"}),(0,t.jsx)(en.SelectItem,{value:"none",children:"Unassigned"}),r?.map(e=>(0,t.jsx)(en.SelectItem,{value:e._id,children:(0,t.jsx)("span",{className:"truncate",title:e.name,children:e.name})},e._id))]})]})})}var t$=e.i(628876),tF=e.i(760911);function tH({children:e,href:n,...r}){let o=(0,l.useRouter)(),i=String(n);return(0,t.jsx)(tF.default,{href:n,prefetch:!1,onMouseEnter:()=>o.prefetch(i),onFocus:()=>o.prefetch(i),...r,children:e})}var tW=e.i(876581),tG=e.i(497847),tK=e.i(24079),tV=e.i(776012),tq=e.i(465986);function tQ({selectedCount:e,onClearSelection:n,onDelete:r,onArchive:o,onPin:i,onUnpin:s,onStar:a,onUnstar:l,onAutoRename:d,className:u}){let[h,m]=(0,c.useState)(!1),p=async()=>{m(!0);try{await d()}finally{m(!1)}};return(0,t.jsxs)("div",{className:(0,S.cn)("flex flex-col gap-2 rounded-lg border bg-background/95 p-2 shadow-sm backdrop-blur supports-[backdrop-filter]:bg-background/60","animate-in slide-in-from-top-2 fade-in-0 duration-200",u),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"text-xs font-medium text-muted-foreground pl-1",children:[e," selected"]}),(0,t.jsxs)(ee.Button,{variant:"ghost",size:"icon",className:"h-6 w-6 hover:bg-muted -mr-1",onClick:n,children:[(0,t.jsx)(eE.X,{className:"h-3 w-3"}),(0,t.jsx)("span",{className:"sr-only",children:"Cancel"})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-primary/10 hover:text-primary",onClick:i,children:(0,t.jsx)(g.Pin,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(tq.TooltipContent,{children:"Pin/Unpin all"})]}),(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-yellow-500/10 hover:text-yellow-500",onClick:a,children:(0,t.jsx)(K.Star,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(tq.TooltipContent,{children:"Star/Unstar all"})]}),(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-muted",onClick:p,disabled:h,children:(0,t.jsx)(P.Edit,{className:(0,S.cn)("h-3.5 w-3.5",h&&"animate-spin")})})}),(0,t.jsx)(tq.TooltipContent,{children:"Auto-rename"})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-1 border-l pl-1",children:(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-destructive/10 hover:text-destructive",onClick:r,children:(0,t.jsx)(q.Trash2,{className:"h-3.5 w-3.5"})})}),(0,t.jsx)(tq.TooltipContent,{children:"Delete selected"})]})})]})]})}var tY=e.i(49275);function tX({open:e,onOpenChange:n,onConfirm:r,count:o}){return(0,t.jsx)(tY.AlertDialog,{open:e,onOpenChange:n,children:(0,t.jsxs)(tY.AlertDialogContent,{children:[(0,t.jsxs)(tY.AlertDialogHeader,{children:[(0,t.jsx)(tY.AlertDialogTitle,{children:"Are you absolutely sure?"}),(0,t.jsxs)(tY.AlertDialogDescription,{children:["This will permanently delete ",o," conversation",1!==o&&"s",". This action cannot be undone."]})]}),(0,t.jsxs)(tY.AlertDialogFooter,{children:[(0,t.jsx)(tY.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(tY.AlertDialogAction,{onClick:r,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})}var tJ=e.i(788410),tZ=e.i(589666),t0=e.i(770720),t1=e.i(907347);function t2({projectId:e,onClick:n,onKeyDown:r,collapsed:o}){let i=(0,h.useQuery)(d.api.projects.get,{id:e});return i?o?void 0:(0,t.jsxs)(t1.Badge,{variant:"secondary",className:(0,S.cn)("text-xs cursor-pointer transition-all duration-200","max-w-[220px] min-w-0"),onClick:e=>{n&&(e.stopPropagation(),n())},onKeyDown:e=>{r&&(e.stopPropagation(),r(e))},tabIndex:n?0:-1,role:n?"button":void 0,title:i.name,children:[(0,t.jsx)(tz.FolderOpen,{className:(0,S.cn)("w-3 h-3 shrink-0",!o&&"mr-1")}),!o&&(0,t.jsx)("span",{className:"truncate min-w-0 flex-1",children:i.name})]}):(0,t.jsxs)(t1.Badge,{variant:"secondary",className:"text-xs",children:[(0,t.jsx)(tz.FolderOpen,{className:"w-3 h-3 mr-1"}),"Deleted project"]})}var t4=e.i(493843),t5=e.i(132705);e.i(834687);var t8=e.i(641269);function t3({conversationId:e}){return(0,t8.useQuery)(d.api.conversations.get,{conversationId:e}),(0,t8.usePaginatedQuery)(d.api.messages.listPaginated,{conversationId:e},{initialNumItems:50}),null}function t7({conversation:e,selectedId:n,onClearSelection:o,isSelectionMode:i=!1,isSelectedById:s=!1,onToggleSelection:a}){let u=(0,l.useRouter)(),p=(0,l.usePathname)(),[f,x]=(0,c.useState)(!1),[v,b]=(0,c.useState)(!1),[w,y]=(0,c.useState)(!1),[j,k]=(0,tR.useQueryState)("project"),N=(0,_.useFeatureToggles)(),C=(0,h.useMutation)(d.api.conversations.deleteConversation),E=(0,h.useMutation)(d.api.conversations.togglePin),A=(0,h.useMutation)(d.api.conversations.toggleStar),T=(0,h.useMutation)(d.api.conversations.archive),M=(0,h.useAction)(d.api.conversations.actions.bulkAutoRename),O=p===`/chat/${e._id}`,I=n===e._id,D=async()=>{await C({conversationId:e._id}),O&&u.push("/")},R=async t=>{t?.stopPropagation();try{await E({conversationId:e._id})}catch(t){let e=t instanceof Error?t.message:"Failed to pin conversation";Z.toast.error(e)}},L=async t=>{t?.stopPropagation();try{Z.toast.loading("Generating title...",{id:"auto-rename"});let t=await M({conversationIds:[e._id]});if(t[0]?.success)Z.toast.success("Conversation renamed",{id:"auto-rename"});else throw Error(t[0]?.error||"Failed to generate title")}catch(t){let e=t instanceof Error?t.message:"Failed to auto-rename";Z.toast.error(e,{id:"auto-rename"})}},B=(0,c.useCallback)(()=>{e.projectId&&k(e.projectId)},[e.projectId,k]),z=(0,c.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),B())},[B]),U=function({conversation:e,onShowRename:n,onShowDelete:r,onToggleSelection:o,onPin:i,onStar:s,onArchive:a,onAutoRename:l}){let c=!e.pinned&&0===e.messageCount;return[{id:"rename",icon:(0,t.jsx)(P.Edit,{className:"w-4 h-4 mr-2"}),label:"Rename",onClick:n},{id:"auto-rename",icon:(0,t.jsx)(G.Sparkles,{className:"w-4 h-4 mr-2"}),label:"Auto-rename",onClick:l},{id:"separator-1",icon:null,label:"",onClick:()=>{},separator:!0},...o?[{id:"select",icon:(0,t.jsx)("span",{className:"w-4 h-4 mr-2 border border-current rounded-sm"}),label:"Select",onClick:o}]:[],{id:"pin",icon:(0,t.jsx)(g.Pin,{className:"w-4 h-4 mr-2"}),label:e.pinned?"Unpin":c?"Cannot pin empty":"Pin",onClick:i,disabled:c},{id:"star",icon:(0,t.jsx)(K.Star,{className:"w-4 h-4 mr-2"}),label:e.starred?"Unstar":"Star",onClick:s},{id:"archive",icon:(0,t.jsx)(m.Archive,{className:"w-4 h-4 mr-2"}),label:"Archive",onClick:a},{id:"separator-2",icon:null,label:"",onClick:()=>{},separator:!0},{id:"delete",icon:(0,t.jsx)(q.Trash2,{className:"w-4 h-4 mr-2"}),label:"Delete",onClick:r,destructive:!0}]}({conversation:e,onShowRename:()=>x(!0),onShowDelete:()=>b(!0),onToggleSelection:a?()=>a(e._id):void 0,onPin:()=>R(),onStar:()=>A({conversationId:e._id}),onArchive:()=>T({conversationId:e._id}),onAutoRename:()=>L()});return(0,t.jsxs)(t.Fragment,{children:[w&&(0,t.jsx)(t3,{conversationId:e._id}),(0,t.jsxs)(t5.ContextMenu,{children:[(0,t.jsx)(t5.ContextMenuTrigger,{asChild:!0,children:(0,t.jsxs)("div",{className:(0,S.cn)("group/item relative flex items-center gap-1 px-2.5 py-1.5 rounded-md cursor-pointer transition-all duration-200","hover:bg-sidebar-accent/50 hover:shadow-none",O&&!i?"bg-sidebar-accent text-sidebar-accent-foreground font-medium shadow-sm ring-1 ring-sidebar-border/50":"text-sidebar-foreground/80 hover:text-sidebar-foreground hover:bg-sidebar-accent/50",I&&!i&&"bg-primary/10 ring-1 ring-primary",s&&"bg-primary/5 ring-1 ring-primary/20"),onClick:t=>{if(i)t.preventDefault(),a?.(e._id);else{let t=j&&"none"!==j?`?project=${j}`:"";u.push(`/chat/${e._id}${t}`)}},onKeyDown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),i?a?.(e._id):u.push(`/chat/${e._id}`))},onMouseEnter:()=>{o?.(),y(!0),u.prefetch(`/chat/${e._id}`)},onFocus:()=>{y(!0),u.prefetch(`/chat/${e._id}`)},"data-list-id":e._id,role:"option","aria-selected":I,tabIndex:-1,children:[(i||s)&&(0,t.jsx)("div",{className:"shrink-0 animate-in fade-in zoom-in duration-200",children:(0,t.jsx)(t4.Checkbox,{checked:s,onCheckedChange:()=>a?.(e._id),onClick:e=>e.stopPropagation(),className:"h-4 w-4 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground"})}),!i&&e.parentConversationId&&e.parentMessageId&&(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",className:"shrink-0 text-muted-foreground/60 hover:text-primary hover:bg-primary/10 rounded-md !h-[15px] !w-[15px] !p-2 !min-h-[15px] !min-w-[15px]",onClick:t=>{t.stopPropagation(),u.push(`/chat/${e.parentConversationId}?messageId=${e.parentMessageId}#message-${e.parentMessageId}`)},"aria-label":"Go to parent conversation",children:(0,t.jsx)(tJ.GitBranch,{className:"!h-[15px] !w-[15px]"})})}),(0,t.jsx)(tq.TooltipContent,{side:"right",children:(0,t.jsx)("p",{children:"Branched conversation - click to go to source"})})]}),!i&&e.isCollaborative&&(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"shrink-0 h-5 w-5 min-w-0 min-h-0 p-0.5 flex items-center justify-center text-blue-500",children:(0,t.jsx)(t0.Users,{className:"h-3 w-3"})})}),(0,t.jsx)(tq.TooltipContent,{side:"right",children:(0,t.jsx)("p",{children:"Collaborative conversation"})})]}),!i&&e.isIncognito&&(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)("div",{className:"shrink-0 h-5 w-5 min-w-0 min-h-0 p-0.5 flex items-center justify-center text-violet-400",children:(0,t.jsx)(r.Ghost,{className:"h-3 w-3"})})}),(0,t.jsx)(tq.TooltipContent,{side:"right",children:(0,t.jsx)("p",{children:"Incognito - ephemeral, no memories"})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col gap-1 min-w-0",children:[(0,t.jsx)("p",{className:(0,S.cn)("text-sm truncate",s&&"text-primary font-medium"),children:e.title||"New conversation"}),N.showProjects&&e.projectId&&(0,t.jsx)(t2,{projectId:e.projectId,onClick:B,onKeyDown:z,collapsed:j===e.projectId})]}),(e.starred||e.pinned)&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[e.starred&&(0,t.jsx)(K.Star,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),e.pinned&&(0,t.jsx)(g.Pin,{className:"w-3 h-3 text-primary"})]}),!i&&(0,t.jsxs)("div",{className:"absolute top-2 bottom-2 sm:top-[2.5px] sm:bottom-[2.5px] right-2 flex items-center gap-0 opacity-0 group-hover/item:opacity-100 transition-opacity bg-linear-to-l from-sidebar-accent via-sidebar-accent/80 to-transparent pl-8 pr-1",children:[void 0!==e.messageCount&&e.messageCount>0&&(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{onClick:R,variant:"ghost",className:"h-6 w-6 p-0 rounded-md cursor-pointer",disabled:!e.pinned&&0===e.messageCount,"aria-label":e.pinned?"Unpin":"Pin conversation",children:(0,t.jsx)(g.Pin,{className:(0,S.cn)("w-2.5 h-2.5",e.pinned&&"text-primary fill-primary")})})}),(0,t.jsx)(tq.TooltipContent,{children:(0,t.jsx)("p",{children:e.pinned?"Unpin":0===e.messageCount?"Cannot pin empty":"Pin"})})]}),(0,t.jsxs)(t$.DropdownMenu,{children:[(0,t.jsxs)(tq.Tooltip,{children:[(0,t.jsx)(tq.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(t$.DropdownMenuTrigger,{asChild:!0,onClick:e=>e.stopPropagation(),children:(0,t.jsx)(ee.Button,{variant:"ghost",className:"h-6 w-6 rounded-md cursor-pointer","aria-label":"Options",children:(0,t.jsx)(tZ.MoreVertical,{className:"w-2.5 h-2.5"})})})}),(0,t.jsx)(tq.TooltipContent,{children:(0,t.jsx)("p",{children:"Options"})})]}),(0,t.jsx)(t$.DropdownMenuContent,{align:"end",children:U.map(e=>e.separator?(0,t.jsx)(t$.DropdownMenuSeparator,{},e.id):(0,t.jsxs)(t$.DropdownMenuItem,{onClick:t=>{t.stopPropagation(),e.onClick()},disabled:e.disabled,className:e.destructive?"text-destructive":"",children:[e.icon,e.label]},e.id))})]})]})]})}),(0,t.jsx)(t5.ContextMenuContent,{children:U.map(e=>e.separator?(0,t.jsx)(t5.ContextMenuSeparator,{},e.id):(0,t.jsxs)(t5.ContextMenuItem,{onClick:e.onClick,disabled:e.disabled,className:e.destructive?"text-destructive":"",children:[e.icon,e.label]},e.id))})]}),(0,t.jsx)(Y.RenameDialog,{conversation:e,open:f,onOpenChange:x}),(0,t.jsx)(Q.DeleteConversationDialog,{open:v,onOpenChange:b,onConfirm:D,conversationTitle:e.title})]})}function t6({conversations:e,selectedId:n=null,onClearSelection:r,selectedIds:o=[],onToggleSelection:i}){if(0===e.length)return(0,t.jsx)("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"No conversations yet"});let s=o&&o.length>0;return(0,t.jsx)("div",{role:"listbox","aria-label":"Conversations","aria-activedescendant":n?`conv-${n}`:void 0,tabIndex:0,children:e.map(e=>(0,t.jsx)(t7,{conversation:e,selectedId:n,onClearSelection:r,isSelectionMode:s,isSelectedById:o?.includes(e._id),onToggleSelection:i},e._id))})}var t9=e.i(890042);function ne(){return(0,t.jsxs)("div",{className:"space-y-2 px-0 pb-1",children:[(0,t.jsx)(t9.Skeleton,{className:"h-8 w-full mb-4"}),Array.from({length:8}).map((e,n)=>(0,t.jsxs)("div",{className:(0,S.cn)("flex items-center gap-1 rounded-md px-0 py-0","hover:bg-accent/10 transition-colors"),children:[(0,t.jsx)("div",{className:"flex-1 space-y-2 min-w-0",children:(0,t.jsx)(t9.Skeleton,{className:"h-4 w-full"})}),(0,t.jsx)(t9.Skeleton,{className:"h-4 w-4 rounded shrink-0"})]},n))]})}let nt=[{icon:a.Search,label:"Search",href:"/search",featureKey:null},{icon:H.NotebookPen,label:"Notes",href:"/notes",featureKey:"showNotes"},{icon:z,label:"Projects",href:"/projects",featureKey:"showProjects"},{icon:tO.CheckSquare,label:"Tasks",href:"/tasks",featureKey:null},{icon:tD.Presentation,label:"Slides",href:"/slides",featureKey:"showSlides"},{icon:tI.Mic,label:"Smart Assistant",href:"/assistant",featureKey:null},{icon:B.FileText,label:"Templates",href:"/templates",featureKey:"showTemplates"},{icon:O.Bookmark,label:"Bookmarks",href:"/bookmarks",featureKey:"showBookmarks"},{icon:W.Settings,label:"Settings",href:"/settings",featureKey:null}];function nn(){let[e,n]=(0,tR.useQueryState)("project"),o=(0,h.useQuery)(d.api.conversations.list,{projectId:e||void 0}),a=(0,c.useMemo)(()=>o?.filter(e=>!0!==e.isPresentation),[o]),u=(0,h.useMutation)(d.api.conversations.bulkDelete),m=(0,h.useMutation)(d.api.conversations.bulkArchive),p=(0,h.useMutation)(d.api.conversations.bulkPin),f=(0,h.useMutation)(d.api.conversations.bulkUnpin),g=(0,h.useMutation)(d.api.conversations.bulkStar),x=(0,h.useMutation)(d.api.conversations.bulkUnstar),v=(0,h.useAction)(d.api.conversations.actions.bulkAutoRename),b=(0,l.useRouter)(),w=(0,l.usePathname)(),{isMobile:y}=(0,tK.useSidebar)(),{setFilteredConversations:j}=(0,tV.useConversationContext)(),{startNewChat:k}=(0,M.useNewChat)(),{isLoaded:N}=(0,tM.useAuth)(),C=(0,h.useQuery)(d.api.users.getUserPreferencesByCategory,{category:"advanced"}),E=(0,h.useQuery)(d.api.admin.isCurrentUserAdmin),A=(0,c.useMemo)(()=>{let e=void 0===C,t=null===C;return e||t?{showNotes:!1,showTemplates:!1,showProjects:!1,showBookmarks:!1,showSlides:!1,isLoading:!0}:{showNotes:C.showNotes??!0,showTemplates:C.showTemplates??!0,showProjects:C.showProjects??!0,showBookmarks:C.showBookmarks??!0,showSlides:C.showSlides??!1,isLoading:!1}},[C]),[T,_]=(0,c.useState)([]),[O,I]=(0,c.useState)(!1),[D,P]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e=()=>P(!0);return window.addEventListener("open-new-incognito-dialog",e),()=>window.removeEventListener("open-new-incognito-dialog",e)},[]),(0,c.useEffect)(()=>{j(a)},[a,j]);let{selectedId:R,clearSelection:L}=function({items:e,onSelect:t,enabled:n=!0,loop:r=!1,scrollIntoView:o=!0,getItemId:i}){let[s,a]=(0,c.useState)(null),l=(0,c.useRef)(void 0),d=(0,c.useCallback)(()=>{a(null)},[]),u=(0,c.useCallback)(c=>{if(!n||0===e.length)return;let u=c.target;if("INPUT"===u.tagName||"TEXTAREA"===u.tagName||"true"===u.getAttribute("contenteditable"))return;let h=s?e.findIndex(e=>i(e)===s):-1,m=h;switch(c.key){case"ArrowDown":c.preventDefault(),m=h>=e.length-1?r?0:h:h+1;break;case"ArrowUp":c.preventDefault(),m=h<=0?r?e.length-1:0:h-1;break;case"PageDown":c.preventDefault(),m=Math.min(h+10,e.length-1);break;case"PageUp":c.preventDefault(),m=Math.max(h-10,0);break;case"Home":c.preventDefault(),m=0;break;case"End":c.preventDefault(),m=e.length-1;break;case"Enter":h>=0&&(c.preventDefault(),t(e[h]));return;case"Escape":c.preventDefault(),d();return;default:return}let p=e[m];if(p){let e=i(p);a(e),o&&(clearTimeout(l.current),l.current=setTimeout(()=>{let t=document.querySelector(`[data-list-id="${e}"]`);t?.scrollIntoView({block:"nearest",behavior:"smooth"})},50))}},[e,s,n,r,t,d,o,i]);return(0,c.useEffect)(()=>{if(n)return window.addEventListener("keydown",u),()=>{window.removeEventListener("keydown",u),clearTimeout(l.current)}},[u,n]),{selectedId:s,setSelectedId:a,clearSelection:d}}({items:a||[],onSelect:e=>{b.push(`/chat/${e._id}`),L()},enabled:!0,loop:!0,getItemId:e=>e._id}),B=nt.filter(e=>(!y||"/shortcuts"!==e.href)&&(!e.featureKey||!A.isLoading&&A[e.featureKey])),z=y?B.slice(0,3):B,U=y?B.slice(3):[],$=(0,c.useCallback)(e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},[]),F=(0,c.useCallback)(()=>{_([])},[]),H=async()=>{try{await u({conversationIds:T}),Z.toast.success(`Deleted ${T.length} conversations`),_([]),I(!1)}catch(e){Z.toast.error("Failed to delete conversations")}},W=async()=>{try{await m({conversationIds:T}),Z.toast.success(`Archived ${T.length} conversations`),_([])}catch(e){Z.toast.error("Failed to archive conversations")}},G=async()=>{let e=a?.filter(e=>T.includes(e._id))||[],t=e.length>0&&e.every(e=>e.pinned);try{t?(await f({conversationIds:T}),Z.toast.success(`Unpinned ${T.length} conversations`)):(await p({conversationIds:T}),Z.toast.success(`Pinned ${T.length} conversations`)),_([])}catch(e){Z.toast.error("Failed to update pin status")}},K=async()=>{let e=a?.filter(e=>T.includes(e._id))||[],t=e.length>0&&e.every(e=>e.starred);try{t?(await x({conversationIds:T}),Z.toast.success(`Unstarred ${T.length} conversations`)):(await g({conversationIds:T}),Z.toast.success(`Starred ${T.length} conversations`)),_([])}catch(e){Z.toast.error("Failed to update star status")}},V=async()=>{try{Z.toast.info("Generating titles...");let e=(await v({conversationIds:T})).filter(e=>e.success).length;Z.toast.success(`Renamed ${e} conversations`),_([])}catch(e){Z.toast.error("Failed to rename conversations")}};return(0,t.jsxs)(tK.Sidebar,{collapsible:"icon","data-tour":"sidebar",role:"navigation","aria-label":"Main navigation and conversations",children:[(0,t.jsxs)(tK.SidebarHeader,{className:"pt-6 px-1.5 group-data-[collapsible=icon]:px-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between px-2 group-data-[collapsible=icon]:px-0 group-data-[collapsible=icon]:justify-center",children:[(0,t.jsx)(tH,{href:"/app",className:"hidden group-data-[collapsible=icon]:hidden sm:block hover:opacity-80 transition-opacity",children:(0,t.jsx)(tL.Logo,{size:"md"})}),(0,t.jsx)(tH,{href:"/app",className:"group-data-[collapsible=icon]:block hidden hover:opacity-80 transition-opacity",children:(0,t.jsx)(tL.Logo,{size:"sm",showText:!1})}),(0,t.jsx)("div",{className:"sm:hidden",children:(0,t.jsx)(tH,{href:"/app",className:"hover:opacity-80 transition-opacity",children:(0,t.jsx)(tL.Logo,{size:"sm"})})})]}),(0,t.jsxs)("div",{className:"mt-4 group-data-[collapsible=icon]:hidden flex gap-2",children:[(0,t.jsxs)(ee.Button,{onClick:()=>{k()},className:"flex-1 px-2.5 py-2.5 bg-sidebar-accent hover:bg-sidebar-accent/80 text-sidebar-foreground border border-sidebar-border shadow-sm transition-all duration-200 justify-between h-9 cursor-pointer","data-tour":"new-chat",children:[(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"New Chat"]}),(0,t.jsx)("div",{className:"hidden sm:flex",children:(0,t.jsx)(tG.ShortcutBadge,{keys:["Alt","N"]})})]}),(0,t.jsx)(ee.Button,{onClick:()=>P(!0),variant:"ghost",size:"icon",className:"h-9 w-9 shrink-0 border border-sidebar-border text-violet-400/70 hover:text-violet-400 hover:bg-violet-500/10",title:"New Incognito Chat (Shift+Alt+N)",children:(0,t.jsx)(r.Ghost,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)(tK.SidebarContent,{className:"flex flex-col gap-0",children:[(0,t.jsxs)(tK.SidebarGroup,{className:"group-data-[collapsible=icon]:hidden shrink-0",children:[(0,t.jsx)(tK.SidebarGroupLabel,{children:"Conversations"}),A.showProjects&&(0,t.jsx)(tU,{value:e,onChange:n})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-hidden",children:(0,t.jsx)(tK.SidebarGroup,{className:"group-data-[collapsible=icon]:hidden h-full pt-0",children:(0,t.jsx)(tK.SidebarGroupContent,{className:"h-full overflow-y-auto",children:void 0===a?(0,t.jsx)(ne,{}):(0,t.jsxs)(t.Fragment,{children:[T.length>0?(0,t.jsx)("div",{className:"px-2 pb-2 sticky top-0 bg-sidebar z-10",children:(0,t.jsx)(tQ,{selectedCount:T.length,onClearSelection:F,onDelete:()=>I(!0),onArchive:W,onPin:G,onUnpin:()=>{},onStar:K,onUnstar:()=>{},onAutoRename:V,className:"w-full border shadow-sm"})}):(0,t.jsx)(t.Fragment,{}),(0,t.jsx)(t6,{conversations:a||[],selectedId:R,onClearSelection:L,selectedIds:T,onToggleSelection:$}),(0,t.jsxs)("div",{className:"mt-2",children:[(0,t.jsx)("div",{className:"px-2 pb-2 text-[10px] text-muted-foreground hidden sm:block",children:"Tip: Right-click to select"}),(0,t.jsx)("kbd",{className:"hidden sm:inline-flex px-2 text-[9px] opacity-60",children:"⌘1,⌘2... to jump to conversations"})]})]})})})})]}),(0,t.jsx)("div",{className:"px-2 py-1",children:(0,t.jsx)(tW.Separator,{})}),(0,t.jsxs)(tK.SidebarFooter,{className:"pb-4",children:[(0,t.jsxs)(tK.SidebarMenu,{children:[z.map(e=>{let n=w===e.href||w.startsWith(`${e.href}/`);return(0,t.jsx)(tK.SidebarMenuItem,{children:(0,t.jsx)(tK.SidebarMenuButton,{asChild:!0,tooltip:e.label,isActive:n,className:"p-2.5",..."/projects"===e.href&&{"data-tour":"projects"},children:(0,t.jsxs)(tH,{href:e.href,children:[(0,t.jsx)(e.icon,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:e.label})]})})},e.href)}),y&&U.length>0&&(0,t.jsx)(tK.SidebarMenuItem,{children:(0,t.jsxs)(t$.DropdownMenu,{children:[(0,t.jsx)(t$.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(tK.SidebarMenuButton,{tooltip:"More",children:[(0,t.jsx)(i.MoreHorizontal,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"More"})]})}),(0,t.jsx)(t$.DropdownMenuContent,{side:"right",align:"end",className:"w-48 bg-sidebar border-sidebar-border",children:U.map(e=>{let n=w===e.href||w.startsWith(`${e.href}/`);return(0,t.jsx)(t$.DropdownMenuItem,{asChild:!0,children:(0,t.jsxs)(tH,{href:e.href,className:(0,S.cn)("flex items-center gap-2 cursor-pointer",n&&"bg-sidebar-accent text-sidebar-accent-foreground font-medium"),children:[(0,t.jsx)(e.icon,{className:"w-4 h-4 text-muted-foreground"}),(0,t.jsx)("span",{children:e.label})]})},e.href)})})]})}),E&&(0,t.jsx)(tK.SidebarMenuItem,{children:(0,t.jsx)(tK.SidebarMenuButton,{asChild:!0,tooltip:"Admin Dashboard",isActive:w.startsWith("/admin"),children:(0,t.jsxs)(tH,{href:"/admin/feedback",className:"text-amber-500 hover:text-amber-400",children:[(0,t.jsx)(tP.Shield,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Admin Dashboard"})]})})})]}),(0,t.jsx)("div",{className:"px-2 pt-2 group-data-[collapsible=icon]:hidden min-h-10",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[N&&(0,t.jsx)(t_.UserButton,{afterSignOutUrl:"/sign-in"}),(0,t.jsx)(tB.ThemeSwitcher,{})]})}),(0,t.jsx)("div",{className:"hidden group-data-[collapsible=icon]:flex justify-center pt-2",children:N&&(0,t.jsx)(t_.UserButton,{afterSignOutUrl:"/sign-in"})})]}),(0,t.jsx)(tX,{open:O,onOpenChange:I,onConfirm:H,count:T.length}),(0,t.jsx)(ei,{open:D,onOpenChange:P})]})}var nr=e.i(650430);function no(){let{open:e}=(0,tK.useSidebar)(),n=(0,l.useRouter)(),{startNewChat:d}=(0,M.useNewChat)(),[u,h]=(0,c.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("header",{className:"flex h-14 shrink-0 items-center gap-2 border-b px-4 transition-all duration-300 ease-in-out",children:[(0,t.jsx)(tK.SidebarTrigger,{}),!e&&(0,t.jsxs)("div",{className:"flex items-center gap-1 animate-in fade-in slide-in-from-left-2 duration-300",children:[(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",onClick:()=>{d()},className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"New Chat",children:(0,t.jsx)(s.Plus,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",onClick:()=>h(!0),className:"hidden sm:inline-flex h-8 w-8 text-violet-400/70 hover:text-violet-400 hover:bg-violet-500/10","aria-label":"New Incognito Chat",title:"New Incognito Chat (Shift+Alt+N)",children:(0,t.jsx)(r.Ghost,{className:"h-4 w-4","aria-hidden":"true"})}),(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",onClick:()=>n.push("/search"),className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"Search conversations",children:(0,t.jsx)(a.Search,{className:"h-4 w-4","aria-hidden":"true"})})]}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-1",children:[(0,t.jsx)(eT,{}),(0,t.jsx)(eb.FeedbackButton,{}),(0,t.jsxs)(t$.DropdownMenu,{children:[(0,t.jsx)(t$.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(ee.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":"More options",children:(0,t.jsx)(i.MoreHorizontal,{className:"h-4 w-4","aria-hidden":"true"})})}),(0,t.jsxs)(t$.DropdownMenuContent,{align:"end",children:[(0,t.jsxs)(t$.DropdownMenuItem,{onClick:()=>n.push("/shortcuts"),children:[(0,t.jsx)(o.Keyboard,{className:"h-4 w-4 mr-2"}),"Keyboard Shortcuts"]}),(0,t.jsxs)(t$.DropdownMenuItem,{onClick:()=>h(!0),className:"sm:hidden",children:[(0,t.jsx)(r.Ghost,{className:"h-4 w-4 mr-2 text-violet-400"}),"New Incognito Chat"]})]})]})]})]}),(0,t.jsx)(ei,{open:u,onOpenChange:h})]})}function ni({children:e}){let{isAuthenticated:r,isLoading:o}=(0,n.useConvexAuth)(),i=(0,l.usePathname)().startsWith("/admin");return(0,t.jsx)(ex,{children:(0,t.jsx)(tV.ConversationProvider,{children:(0,t.jsxs)(nr.CanvasProvider,{children:[(0,t.jsx)(ey,{}),(0,t.jsx)("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[9999] focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:outline-none focus:ring-2 focus:ring-ring focus:shadow-lg",children:"Skip to main content"}),o||r?(0,t.jsx)(tK.SidebarProvider,{children:(0,t.jsxs)(tT,{children:[i?(0,t.jsx)("div",{className:"flex w-full h-[100dvh] overflow-hidden",children:e}):(0,t.jsxs)("div",{className:"flex w-full h-[100dvh] overflow-hidden",children:[(0,t.jsx)(c.Suspense,{fallback:null,children:(0,t.jsx)(nn,{})}),(0,t.jsxs)("main",{id:"main-content",className:"flex-1 flex flex-col min-w-0 overflow-x-hidden overflow-y-hidden","aria-label":"Chat interface",children:[(0,t.jsx)(no,{}),e]})]}),(0,t.jsx)(X,{}),(0,t.jsx)(ev,{}),(0,t.jsx)(eN,{})]})}):e]})})})}e.s(["default",()=>ni],709764)}]);