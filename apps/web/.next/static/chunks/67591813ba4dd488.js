(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,543621,e=>{"use strict";let t=(0,e.i(755430).default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],543621)},95261,e=>{"use strict";let t=(0,e.i(755430).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["Filter",()=>t],95261)},761625,e=>{"use strict";let t=(0,e.i(755430).default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["ArrowDown",()=>t],761625)},485664,e=>{"use strict";var t=e.i(379492),s=e.i(543621),r=e.i(134092),a=e.i(186996),l=e.i(755003),i=e.i(328299),c=e.i(985902),n=e.i(680707);function d({selectedCount:e,totalCount:s,onSelectAll:r,onClearSelection:d,onBulkStatusChange:o,onBulkArchive:x}){return 0===e?null:(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-primary/10 border-b",children:[(0,t.jsxs)("span",{className:"text-sm font-medium",children:[e," selected"]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:e===s?d:r,className:"h-7 text-xs",children:e===s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.X,{className:"h-3 w-3 mr-1"}),"Clear"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.CheckSquare,{className:"h-3 w-3 mr-1"}),"Select All"]})}),(0,t.jsxs)(n.Select,{onValueChange:o,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-32 h-7 text-xs",children:(0,t.jsx)(n.SelectValue,{placeholder:"Set Status"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"new",children:"New"}),(0,t.jsx)(n.SelectItem,{value:"in-progress",children:"In Progress"}),(0,t.jsx)(n.SelectItem,{value:"resolved",children:"Resolved"}),(0,t.jsx)(n.SelectItem,{value:"closed",children:"Closed"}),(0,t.jsx)(n.SelectItem,{value:"wont-fix",children:"Won't Fix"})]})]}),(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:x,className:"h-7 text-xs text-destructive hover:text-destructive",children:[(0,t.jsx)(a.Archive,{className:"h-3 w-3 mr-1"}),"Archive"]})]})}var o=e.i(95261);function x({hasFilters:e}){return(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-64 text-muted-foreground",children:e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Filter,{className:"h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:"No feedback matches your filters"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.MessageSquare,{className:"h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:"No feedback yet"})]})})}var u=e.i(975620),h=e.i(346596),m=e.i(907347),g=e.i(761776),p=e.i(798783),b=e.i(754622),j=e.i(909630);let v={bug:["new","triaging","in-progress","resolved","verified","closed","wont-fix","duplicate","cannot-reproduce"],feature:["submitted","under-review","planned","in-progress","shipped","declined","maybe-later"],praise:["received","acknowledged","shared"],other:["new","reviewed","actioned","closed"]},f={new:"New",triaging:"Triaging","in-progress":"In Progress",resolved:"Resolved",verified:"Verified",closed:"Closed","wont-fix":"Won't Fix",duplicate:"Duplicate","cannot-reproduce":"Cannot Reproduce",submitted:"Submitted","under-review":"Under Review",planned:"Planned",shipped:"Shipped",declined:"Declined","maybe-later":"Maybe Later",received:"Received",acknowledged:"Acknowledged",shared:"Shared",reviewed:"Reviewed",actioned:"Actioned"},y={new:"bg-blue-500/10 text-blue-500 border-blue-500/20",triaging:"bg-orange-500/10 text-orange-500 border-orange-500/20","in-progress":"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",resolved:"bg-green-500/10 text-green-500 border-green-500/20",verified:"bg-emerald-500/10 text-emerald-500 border-emerald-500/20",closed:"bg-gray-500/10 text-gray-500 border-gray-500/20","wont-fix":"bg-gray-500/10 text-gray-500 border-gray-500/20",duplicate:"bg-purple-500/10 text-purple-500 border-purple-500/20","cannot-reproduce":"bg-gray-500/10 text-gray-500 border-gray-500/20",submitted:"bg-blue-500/10 text-blue-500 border-blue-500/20","under-review":"bg-orange-500/10 text-orange-500 border-orange-500/20",planned:"bg-indigo-500/10 text-indigo-500 border-indigo-500/20",shipped:"bg-green-500/10 text-green-500 border-green-500/20",declined:"bg-red-500/10 text-red-500 border-red-500/20","maybe-later":"bg-gray-500/10 text-gray-500 border-gray-500/20",received:"bg-pink-500/10 text-pink-500 border-pink-500/20",acknowledged:"bg-pink-500/10 text-pink-500 border-pink-500/20",shared:"bg-green-500/10 text-green-500 border-green-500/20",reviewed:"bg-blue-500/10 text-blue-500 border-blue-500/20",actioned:"bg-green-500/10 text-green-500 border-green-500/20"},w={bug:{label:"Bug",icon:(0,t.jsx)(g.Bug,{className:"h-3 w-3"}),color:"bg-red-500/10 text-red-500"},feature:{label:"Feature",icon:(0,t.jsx)(b.Lightbulb,{className:"h-3 w-3"}),color:"bg-purple-500/10 text-purple-500"},praise:{label:"Praise",icon:(0,t.jsx)(p.Heart,{className:"h-3 w-3"}),color:"bg-pink-500/10 text-pink-500"},other:{label:"Other",icon:(0,t.jsx)(j.MessageCircle,{className:"h-3 w-3"}),color:"bg-gray-500/10 text-gray-500"}},N={critical:{label:"Critical",color:"bg-red-500/10 text-red-500 border-red-500"},high:{label:"High",color:"bg-orange-500/10 text-orange-500 border-orange-500"},medium:{label:"Medium",color:"bg-yellow-500/10 text-yellow-500 border-yellow-500"},low:{label:"Low",color:"bg-green-500/10 text-green-500 border-green-500"},none:{label:"None",color:"bg-gray-500/10 text-gray-500 border-gray-500"}};var S=e.i(152088);function k({feedback:e,onAcceptTriage:s}){let r=e.aiTriage;return r?(0,t.jsxs)("div",{className:"bg-muted/30 border rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(h.Sparkles,{className:"h-4 w-4 text-violet-500 fill-violet-500/10"}),(0,t.jsx)("h3",{className:"font-medium text-sm",children:"AI Triage Suggestion"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground ml-auto",children:(0,u.formatDistanceToNow)(new Date(r.createdAt),{addSuffix:!0})})]}),(0,t.jsxs)("div",{className:"grid gap-3 text-sm",children:[r.suggestedPriority&&r.suggestedPriority!==e.priority&&(0,t.jsxs)("div",{className:"flex items-center justify-between bg-background p-2 rounded border",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-muted-foreground",children:"Priority:"}),(0,t.jsx)(m.Badge,{variant:"outline",className:N[r.suggestedPriority]?.color,children:N[r.suggestedPriority]?.label})]}),(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",className:"h-6 text-xs hover:bg-violet-100 hover:text-violet-700 dark:hover:bg-violet-900/30 dark:hover:text-violet-300",onClick:()=>s({acceptPriority:!0}),children:"Accept"})]}),r.suggestedTags&&r.suggestedTags.length>0&&(0,t.jsxs)("div",{className:"flex items-start justify-between bg-background p-2 rounded border",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("span",{className:"text-muted-foreground block mb-1 text-xs",children:"Suggested Tags:"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:r.suggestedTags.map(s=>{let r=e.tags?.includes(s);return(0,t.jsx)(m.Badge,{variant:r?"secondary":"outline",className:(0,S.cn)("text-[10px]",r&&"opacity-50"),children:s},s)})})]}),(0,t.jsx)(c.Button,{size:"sm",variant:"secondary",className:"h-6 text-xs mt-1 shrink-0 ml-2 hover:bg-violet-100 hover:text-violet-700 dark:hover:bg-violet-900/30 dark:hover:text-violet-300",onClick:()=>s({acceptTags:!0}),children:"Add Tags"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[r.sentiment&&(0,t.jsxs)("div",{className:"bg-background p-2 rounded border",children:[(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground block uppercase tracking-wider",children:"Sentiment"}),(0,t.jsx)("span",{className:"capitalize",children:r.sentiment})]}),r.category&&(0,t.jsxs)("div",{className:"bg-background p-2 rounded border",children:[(0,t.jsx)("span",{className:"text-[10px] text-muted-foreground block uppercase tracking-wider",children:"Category"}),(0,t.jsx)("span",{className:"capitalize",children:r.category})]})]}),r.triageNotes&&(0,t.jsx)("div",{className:"bg-background p-2 rounded border text-muted-foreground text-xs leading-relaxed",children:r.triageNotes.split(" | ").map((e,s)=>(0,t.jsx)("p",{className:"mb-1 last:mb-0",children:e},s))})]})]}):null}function C({feedback:e,onStatusChange:s,onPriorityChange:r,onAcceptTriage:a}){let l=e.feedbackType,i=v[l]||[];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(k,{feedback:e,onAcceptTriage:a}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold",children:e.userName}),e.feedbackType&&(0,t.jsxs)(m.Badge,{variant:"outline",className:(0,S.cn)("gap-1",w[l]?.color),children:[w[l]?.icon,w[l]?.label]})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.userEmail}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted"," ",(0,u.formatDistanceToNow)(new Date(e.createdAt),{addSuffix:!0})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Select,{value:e.priority||"none",onValueChange:r,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-28",children:(0,t.jsx)(n.SelectValue,{placeholder:"Priority"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"critical",children:"ğŸ”´ Critical"}),(0,t.jsx)(n.SelectItem,{value:"high",children:"ğŸŸ  High"}),(0,t.jsx)(n.SelectItem,{value:"medium",children:"ğŸŸ¡ Medium"}),(0,t.jsx)(n.SelectItem,{value:"low",children:"ğŸŸ¢ Low"}),(0,t.jsx)(n.SelectItem,{value:"none",children:"âšª None"})]})]}),(0,t.jsxs)(n.Select,{value:e.status,onValueChange:s,children:[(0,t.jsx)(n.SelectTrigger,{className:"w-40",children:(0,t.jsx)(n.SelectValue,{})}),(0,t.jsx)(n.SelectContent,{children:i.map(e=>(0,t.jsx)(n.SelectItem,{value:e,children:f[e]||e},e))})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Page"}),(0,t.jsx)("a",{href:e.page,className:"text-sm text-primary hover:underline",children:e.page})]}),e.userSuggestedUrgency&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"User Suggested Urgency"}),(0,t.jsx)(m.Badge,{variant:"outline",children:e.userSuggestedUrgency})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Feedback"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.description})]}),e.whatTheyDid&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they were trying to do"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.whatTheyDid})]}),e.whatTheySaw&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they saw"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.whatTheySaw})]}),e.whatTheyExpected&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-1",children:"What they expected"}),(0,t.jsx)("p",{className:"whitespace-pre-wrap",children:e.whatTheyExpected})]}),e.tags&&e.tags.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Tags"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:e.tags.map(e=>(0,t.jsx)(m.Badge,{variant:"secondary",children:e},e))})]}),e.screenshotUrl?(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Screenshot"}),(0,t.jsx)("a",{href:e.screenshotUrl,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)("img",{src:e.screenshotUrl,alt:"Feedback screenshot",className:"max-w-full rounded-lg border shadow-sm hover:shadow-md transition-shadow cursor-pointer"})})]}):null]})}var A=e.i(761625);let T=(0,e.i(755430).default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);var I=e.i(79721),F=e.i(384078),B=e.i(610012);function P({statusFilter:e,setStatusFilter:s,typeFilter:r,setTypeFilter:a,priorityFilter:l,setPriorityFilter:d,searchParam:o,setSearchParam:x,sortBy:u,setSortBy:h,sortOrder:m,toggleSortOrder:y,counts:w,hasActiveFilters:N,clearFilters:S}){let k=(0,F.useMemo)(()=>r?v[r]||[]:[...new Set(Object.values(v).flat())],[r]);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(I.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,t.jsx)(B.Input,{placeholder:"Search feedback... (press / to focus)",value:o,onChange:e=>x(e.target.value),className:"pl-8 h-9","data-search-input":!0})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,t.jsxs)(n.Select,{value:r||"all",onValueChange:e=>a("all"===e?null:e),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[120px] h-8 text-xs",children:(0,t.jsx)(n.SelectValue,{placeholder:"Type"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Types"}),(0,t.jsx)(n.SelectItem,{value:"bug",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(g.Bug,{className:"h-3 w-3"})," Bug"," ",w?.type_bug?`(${w.type_bug})`:""]})}),(0,t.jsx)(n.SelectItem,{value:"feature",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(b.Lightbulb,{className:"h-3 w-3"})," Feature"," ",w?.type_feature?`(${w.type_feature})`:""]})}),(0,t.jsx)(n.SelectItem,{value:"praise",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(p.Heart,{className:"h-3 w-3"})," Praise"," ",w?.type_praise?`(${w.type_praise})`:""]})}),(0,t.jsx)(n.SelectItem,{value:"other",children:(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(j.MessageCircle,{className:"h-3 w-3"})," Other"," ",w?.type_other?`(${w.type_other})`:""]})})]})]}),(0,t.jsxs)(n.Select,{value:e||"all",onValueChange:e=>s("all"===e?null:e),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[140px] h-8 text-xs",children:(0,t.jsx)(n.SelectValue,{placeholder:"Status"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Statuses"}),k.map(e=>(0,t.jsxs)(n.SelectItem,{value:e,children:[f[e]||e," ",w?.[e]?`(${w[e]})`:""]},e))]})]}),(0,t.jsxs)(n.Select,{value:l||"all",onValueChange:e=>d("all"===e?null:e),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[120px] h-8 text-xs",children:(0,t.jsx)(n.SelectValue,{placeholder:"Priority"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"all",children:"All Priorities"}),(0,t.jsx)(n.SelectItem,{value:"critical",children:"ğŸ”´ Critical"}),(0,t.jsx)(n.SelectItem,{value:"high",children:"ğŸŸ  High"}),(0,t.jsx)(n.SelectItem,{value:"medium",children:"ğŸŸ¡ Medium"}),(0,t.jsx)(n.SelectItem,{value:"low",children:"ğŸŸ¢ Low"}),(0,t.jsx)(n.SelectItem,{value:"none",children:"âšª None"})]})]}),(0,t.jsxs)(n.Select,{value:u,onValueChange:e=>h(e),children:[(0,t.jsx)(n.SelectTrigger,{className:"w-[110px] h-8 text-xs",children:(0,t.jsx)(n.SelectValue,{placeholder:"Sort by"})}),(0,t.jsxs)(n.SelectContent,{children:[(0,t.jsx)(n.SelectItem,{value:"createdAt",children:"Date"}),(0,t.jsx)(n.SelectItem,{value:"priority",children:"Priority"}),(0,t.jsx)(n.SelectItem,{value:"updatedAt",children:"Updated"})]})]}),(0,t.jsx)(c.Button,{variant:"ghost",size:"sm",onClick:y,className:"h-8 px-2",title:"desc"===m?"Newest first":"Oldest first",children:"desc"===m?(0,t.jsx)(A.ArrowDown,{className:"h-4 w-4"}):(0,t.jsx)(T,{className:"h-4 w-4"})}),N&&(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:S,className:"h-8 px-2 text-xs",children:[(0,t.jsx)(i.X,{className:"h-3 w-3 mr-1"}),"Clear"]})]})]})}var M=e.i(493843);function D({items:e,selectedId:s,onSelect:r,selectedIds:a,onToggleSelection:l,isSelectionMode:i}){return(0,t.jsx)("div",{className:"divide-y",children:e.map(e=>(0,t.jsxs)("div",{className:(0,S.cn)("flex items-start gap-2 p-4 hover:bg-muted/50 transition-colors cursor-pointer",s===e._id&&"bg-muted",a.has(e._id)&&"bg-primary/5"),children:[(0,t.jsx)(M.Checkbox,{checked:a.has(e._id),onCheckedChange:()=>l(e._id),onClick:e=>e.stopPropagation(),className:"mt-1 shrink-0"}),(0,t.jsxs)("button",{onClick:()=>r(e._id),className:"flex-1 text-left min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,t.jsx)("span",{className:"font-medium truncate block",children:e.userName}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground whitespace-nowrap shrink-0",children:(0,u.formatDistanceToNow)(new Date(e.createdAt),{addSuffix:!0})})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground line-clamp-2 mt-1",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[(0,t.jsxs)(m.Badge,{variant:"outline",className:(0,S.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border-0",w[e.feedbackType].color),children:[w[e.feedbackType].icon,(0,t.jsx)("span",{className:"ml-1",children:w[e.feedbackType].label})]}),(0,t.jsx)(m.Badge,{variant:"outline",className:(0,S.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border",y[e.status]),children:f[e.status]||e.status}),"none"!==e.priority&&(0,t.jsx)(m.Badge,{variant:"outline",className:(0,S.cn)("text-[10px] px-1.5 py-0 h-5 font-normal border",N[e.priority]?.color),children:N[e.priority]?.label})]})]})]},e._id))})}var _=e.i(890042);function V(){return(0,t.jsx)("div",{className:"space-y-2 p-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{className:"p-3 border rounded-lg space-y-2",children:[(0,t.jsx)(_.Skeleton,{className:"h-4 w-3/4"}),(0,t.jsx)(_.Skeleton,{className:"h-3 w-1/2"})]},s))})}var z=e.i(283164);e.i(977101);var U=e.i(727630),L=e.i(505196),O=e.i(799126),E=e.i(480494),Q=e.i(943111);function q(){let{state:e,actions:a}=function(){let[e,t]=(0,F.useState)(null),[s,r]=(0,F.useState)("list"),{isMobile:a}=(0,Q.useMobileDetect)(),[l,i]=(0,L.useQueryState)("status",L.parseAsString),[c,n]=(0,L.useQueryState)("type",L.parseAsString),[d,o]=(0,L.useQueryState)("priority",L.parseAsString),[x,u]=(0,L.useQueryState)("q",L.parseAsString.withDefault("")),[h,m]=(0,L.useQueryState)("sort",L.parseAsString.withDefault("createdAt")),[g,p]=(0,L.useQueryState)("order",L.parseAsString.withDefault("desc")),[b]=(0,E.useDebounceValue)(x,300),[j,v]=(0,F.useState)(-1),[f,y]=(0,F.useState)(new Set),w=f.size>0,N=!!(l||c||d||x),S=(0,U.useQuery)(z.api.feedback.listFeedback,{status:l||void 0,feedbackType:c||void 0,priority:d||void 0,searchQuery:b||void 0,sortBy:h||"createdAt",sortOrder:g||"desc"}),k=(0,U.useQuery)(z.api.feedback.getFeedbackCounts,{}),C=(0,U.useQuery)(z.api.feedback.getFeedback,e?{feedbackId:e}:"skip"),A=(0,U.useMutation)(z.api.feedback.updateFeedbackStatus),T=(0,U.useMutation)(z.api.feedback.updateFeedbackPriority),I=(0,U.useMutation)(z.api.feedback.bulkUpdateStatus),B=(0,U.useMutation)(z.api.feedback.archiveFeedback),P=(0,U.useMutation)(z.api.feedback.triage.acceptTriageSuggestion),M=async t=>{e&&await A({feedbackId:e,status:t})},D=async t=>{e&&await T({feedbackId:e,priority:t})},_=()=>{y(new Set)},V=async e=>{if(0!==f.size)try{await I({feedbackIds:Array.from(f),status:e}),O.toast.success(`Updated ${f.size} items`),_()}catch(e){O.toast.error("Failed to update status")}},q=async()=>{if(0!==f.size)try{if(!confirm("Are you sure you want to archive these items?"))return;for(let e of f)await B({feedbackId:e});O.toast.success(`Archived ${f.size} items`),_()}catch(e){O.toast.error("Failed to archive items")}},H=async t=>{if(e)try{await P({feedbackId:e,...t}),O.toast.success("Applied AI suggestion")}catch(e){O.toast.error("Failed to apply suggestion")}},R=(0,F.useCallback)(()=>{p("desc"===g?"asc":"desc")},[g,p]);return(0,F.useEffect)(()=>{let e=e=>{if(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement)return;let s=S||[];switch(e.key){case"j":case"ArrowDown":e.preventDefault(),v(e=>{let r=e+1;return r<s.length?(t(s[r]._id),r):e});break;case"k":case"ArrowUp":e.preventDefault(),v(e=>{let r=e-1;return r>=0?(t(s[r]._id),r):e});break;case"Escape":t(null),v(-1);break;case"/":e.preventDefault(),document.querySelector("[data-search-input]")?.focus()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[S]),(0,F.useEffect)(()=>{if(e&&S){let t=S.findIndex(t=>t._id===e);-1!==t&&v(t)}},[e,S]),{state:{selectedId:e,setSelectedId:t,mobileView:s,setMobileView:r,isMobile:a,statusFilter:l,typeFilter:c,priorityFilter:d,searchParam:x,sortBy:h,sortOrder:g,feedbackList:S,feedbackCounts:k,selectedFeedback:C,selectedIds:f,isSelectionMode:w,hasActiveFilters:N},actions:{setStatusFilter:i,setTypeFilter:n,setPriorityFilter:o,setSearchParam:u,setSortBy:m,toggleSortOrder:R,clearFilters:()=>{i(null),n(null),o(null),u("")},handleStatusChange:M,handlePriorityChange:D,handleSelect:e=>{t(e),a&&r("detail")},toggleItemSelection:e=>{y(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},selectAll:()=>{S&&y(new Set(S.map(e=>e._id)))},clearSelection:_,handleBulkStatusChange:V,handleBulkArchive:q,handleAcceptTriage:H}}}(),{selectedId:l,mobileView:i,isMobile:n,statusFilter:o,typeFilter:u,priorityFilter:h,searchParam:g,sortBy:p,sortOrder:b,feedbackList:j,feedbackCounts:v,selectedFeedback:f,selectedIds:y,hasActiveFilters:w,isSelectionMode:N}=e,{setStatusFilter:S,setTypeFilter:k,setPriorityFilter:A,setSearchParam:T,setSortBy:I,toggleSortOrder:B,clearFilters:M,handleStatusChange:_,handlePriorityChange:q,handleSelect:H,toggleItemSelection:R,selectAll:$,clearSelection:W,handleBulkStatusChange:K,handleBulkArchive:X,handleAcceptTriage:G}=a;return n?"detail"===i&&f?(0,t.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,t.jsx)("div",{className:"border-b p-2",children:(0,t.jsxs)(c.Button,{variant:"ghost",size:"sm",onClick:()=>e.setMobileView("list"),className:"gap-2",children:[(0,t.jsx)(s.ChevronLeft,{className:"h-4 w-4"}),"Back to Feedback"]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto p-4",children:(0,t.jsx)(C,{feedback:f,onStatusChange:_,onPriorityChange:q,onAcceptTriage:G})})]}):(0,t.jsxs)("div",{className:"flex flex-col h-[100dvh]",children:[(0,t.jsxs)("div",{className:"p-4 border-b space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Feedback"}),v&&(0,t.jsxs)(m.Badge,{variant:"secondary",children:[v.total," total"]})]}),(0,t.jsx)(P,{statusFilter:o,setStatusFilter:S,typeFilter:u,setTypeFilter:k,priorityFilter:h,setPriorityFilter:A,searchParam:g,setSearchParam:T,sortBy:p,setSortBy:I,sortOrder:b,toggleSortOrder:B,counts:v,hasActiveFilters:w,clearFilters:M})]}),(0,t.jsx)(d,{selectedCount:y.size,totalCount:j?.length||0,onSelectAll:$,onClearSelection:W,onBulkStatusChange:K,onBulkArchive:X}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:void 0===j?(0,t.jsx)(V,{}):0===j.length?(0,t.jsx)(x,{hasFilters:w}):(0,t.jsx)(D,{items:j,selectedId:l,onSelect:H,selectedIds:y,onToggleSelection:R,isSelectionMode:N})})]}):(0,t.jsxs)("div",{className:"flex h-screen",children:[(0,t.jsxs)("aside",{className:"w-96 border-r bg-muted/10 flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Feedback"}),v&&(0,t.jsxs)(m.Badge,{variant:"secondary",children:[v.total," total"]})]}),(0,t.jsx)(P,{statusFilter:o,setStatusFilter:S,typeFilter:u,setTypeFilter:k,priorityFilter:h,setPriorityFilter:A,searchParam:g,setSearchParam:T,sortBy:p,setSortBy:I,sortOrder:b,toggleSortOrder:B,counts:v,hasActiveFilters:w,clearFilters:M})]}),(0,t.jsx)(d,{selectedCount:y.size,totalCount:j?.length||0,onSelectAll:$,onClearSelection:W,onBulkStatusChange:K,onBulkArchive:X}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:void 0===j?(0,t.jsx)(V,{}):0===j.length?(0,t.jsx)(x,{hasFilters:w}):(0,t.jsx)(D,{items:j,selectedId:l,onSelect:e.setSelectedId,selectedIds:y,onToggleSelection:R,isSelectionMode:N})})]}),(0,t.jsx)("main",{className:"flex-1 overflow-auto p-6",children:f?(0,t.jsx)(C,{feedback:f,onStatusChange:_,onPriorityChange:q,onAcceptTriage:G}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-muted-foreground",children:[(0,t.jsx)(r.MessageSquare,{className:"h-12 w-12 mb-4"}),(0,t.jsx)("p",{children:"Select a feedback item to view details"})]})})]})}e.s(["default",()=>q],485664)}]);