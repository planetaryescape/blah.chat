(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,141477,e=>{"use strict";var t=e.i(142676);e.s(["ChevronDown",()=>t.default])},804143,e=>{"use strict";let t=(0,e.i(755430).default)("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);e.s(["List",()=>t],804143)},560532,e=>{"use strict";let t=(0,e.i(755430).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],560532)},982087,e=>{"use strict";var t=e.i(919528),r=e.i(98810),a=e.i(915092),n=e.i(195325),s=e.i(650496),i=e.i(982579);function o(e,t){let r=(0,i.toDate)(e,t?.in);return r.setHours(0,0,0,0),r}function l(e,t){let a=(0,r.getDefaultOptions)(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,s=(0,i.toDate)(e,t?.in),o=s.getDay();return s.setDate(s.getDate()-(7*(o<n)+o-n)),s.setHours(0,0,0,0),s}function c(e,t){return l(e,{...t,weekStartsOn:1})}var d=e.i(134955);function u(e,t){let r=(0,i.toDate)(e,t?.in),a=r.getFullYear(),n=(0,d.constructFrom)(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);let s=c(n),o=(0,d.constructFrom)(r,0);o.setFullYear(a,0,4),o.setHours(0,0,0,0);let l=c(o);return r.getTime()>=s.getTime()?a+1:r.getTime()>=l.getTime()?a:a-1}function m(e,t){let a=(0,i.toDate)(e,t?.in),n=a.getFullYear(),s=(0,r.getDefaultOptions)(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=(0,d.constructFrom)(t?.in||e,0);c.setFullYear(n+1,0,o),c.setHours(0,0,0,0);let u=l(c,t),m=(0,d.constructFrom)(t?.in||e,0);m.setFullYear(n,0,o),m.setHours(0,0,0,0);let h=l(m,t);return+a>=+u?n+1:+a>=+h?n:n-1}function h(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let g={y(e,t){let r=e.getFullYear(),a=r>0?r:1-r;return h("yy"===t?a%100:a,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):h(r+1,2)},d:(e,t)=>h(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>h(e.getHours()%12||12,t.length),H:(e,t)=>h(e.getHours(),t.length),m:(e,t)=>h(e.getMinutes(),t.length),s:(e,t)=>h(e.getSeconds(),t.length),S(e,t){let r=t.length;return h(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},x={G:function(e,t,r){let a=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return g.y(e,t)},Y:function(e,t,r,a){let n=m(e,a),s=n>0?n:1-n;return"YY"===t?h(s%100,2):"Yo"===t?r.ordinalNumber(s,{unit:"year"}):h(s,t.length)},R:function(e,t){return h(u(e),t.length)},u:function(e,t){return h(e.getFullYear(),t.length)},Q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return h(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){let a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return h(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){let a=e.getMonth();switch(t){case"M":case"MM":return g.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){let a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return h(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,a,n){let o,c,u,g,x,p=Math.round((l(o=(0,i.toDate)(e,n?.in),n)-(c=(0,r.getDefaultOptions)(),u=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,g=m(o,n),(x=(0,d.constructFrom)(n?.in||o,0)).setFullYear(g,0,u),x.setHours(0,0,0,0),l(x,n)))/s.millisecondsInWeek)+1;return"wo"===t?a.ordinalNumber(p,{unit:"week"}):h(p,t.length)},I:function(e,t,r){let a,n,o,l=Math.round((c(a=(0,i.toDate)(e,void 0))-(n=u(a,void 0),(o=(0,d.constructFrom)(a,0)).setFullYear(n,0,4),o.setHours(0,0,0,0),c(o)))/s.millisecondsInWeek)+1;return"Io"===t?r.ordinalNumber(l,{unit:"week"}):h(l,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):g.d(e,t)},D:function(e,t,r){let l,c,d=function(e,t,r){let[i,l]=(0,n.normalizeDates)(void 0,e,t),c=o(i),d=o(l);return Math.round((c-(0,a.getTimezoneOffsetInMilliseconds)(c)-(d-(0,a.getTimezoneOffsetInMilliseconds)(d)))/s.millisecondsInDay)}(l=(0,i.toDate)(e,void 0),((c=(0,i.toDate)(l,void 0)).setFullYear(c.getFullYear(),0,1),c.setHours(0,0,0,0),c))+1;return"Do"===t?r.ordinalNumber(d,{unit:"dayOfYear"}):h(d,t.length)},E:function(e,t,r){let a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){let n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return h(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){let n=e.getDay(),s=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return h(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){let a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return h(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){let a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){let a,n=e.getHours();switch(a=12===n?"noon":0===n?"midnight":n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){let a,n=e.getHours();switch(a=n>=17?"evening":n>=12?"afternoon":n>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return g.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):g.H(e,t)},K:function(e,t,r){let a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):h(a,t.length)},k:function(e,t,r){let a=e.getHours();return(0===a&&(a=24),"ko"===t)?r.ordinalNumber(a,{unit:"hour"}):h(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):g.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):g.s(e,t)},S:function(e,t){return g.S(e,t)},X:function(e,t,r){let a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return f(a);case"XXXX":case"XX":return y(a);default:return y(a,":")}},x:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"x":return f(a);case"xxxx":case"xx":return y(a);default:return y(a,":")}},O:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+p(a,":");default:return"GMT"+y(a,":")}},z:function(e,t,r){let a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+p(a,":");default:return"GMT"+y(a,":")}},t:function(e,t,r){return h(Math.trunc(e/1e3),t.length)},T:function(e,t,r){return h(+e,t.length)}};function p(e,t=""){let r=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),s=a%60;return 0===s?r+String(n):r+String(n)+t+h(s,2)}function f(e,t){return e%60==0?(e>0?"-":"+")+h(Math.abs(e)/60,2):y(e,t)}function y(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+h(Math.trunc(r/60),2)+t+h(r%60,2)}let w=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},j=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},b={p:j,P:(e,t)=>{let r,a=e.match(/(P+)(p+)?/)||[],n=a[1],s=a[2];if(!s)return w(e,t);switch(n){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",w(n,t)).replace("{{time}}",j(s,t))}},v=/^D+$/,k=/^Y+$/,N=["D","DD","YY","YYYY"],M=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,D=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,S=/^'([^]*?)'?$/,C=/''/g,T=/[a-zA-Z]/;function P(e,a,n){let s=(0,r.getDefaultOptions)(),o=n?.locale??s.locale??t.defaultLocale,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=(0,i.toDate)(e,n?.in);if(!(d instanceof Date||"object"==typeof d&&"[object Date]"===Object.prototype.toString.call(d))&&"number"!=typeof d||isNaN(+(0,i.toDate)(d)))throw RangeError("Invalid time value");let u=a.match(D).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,b[t])(e,o.formatLong):e}).join("").match(M).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(S))?t[1].replace(C,"'"):r}}if(x[t])return{isToken:!0,value:e};if(t.match(T))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});o.localize.preprocessor&&(u=o.localize.preprocessor(d,u));let m={firstWeekContainsDate:l,weekStartsOn:c,locale:o};return u.map(t=>{if(!t.isToken)return t.value;let r=t.value;return(!n?.useAdditionalWeekYearTokens&&k.test(r)||!n?.useAdditionalDayOfYearTokens&&v.test(r))&&function(e,t,r){var a,n,s;let i,o=(a=e,n=t,s=r,i="Y"===a[0]?"years":"days of the month",`Use \`${a.toLowerCase()}\` instead of \`${a}\` (in \`${n}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(o),N.includes(e))throw RangeError(o)}(r,a,String(e)),(0,x[r[0]])(d,r,o.localize,m)}).join("")}e.s(["format",()=>P],982087)},824550,e=>{"use strict";var t=e.i(379492),r=e.i(283164);e.i(977101);var a=e.i(727630),n=e.i(505196),s=e.i(384078),i=e.i(152088),o=e.i(982087),l=e.i(202227),c=e.i(357245),d=e.i(466075),u=e.i(126312),m=e.i(328299),h=e.i(799126),g=e.i(49275),x=e.i(985902),p=e.i(610012),f=e.i(783055),y=e.i(680707),w=e.i(541247);function j({taskId:e,onClose:n}){let j=(0,a.useQuery)(r.api.tasks.get,{id:e}),b=(0,a.useMutation)(r.api.tasks.update),v=(0,a.useMutation)(r.api.tasks.deleteTask),k=(0,a.useQuery)(r.api.projects.list),[N,M]=(0,s.useState)(""),[D,S]=(0,s.useState)(""),[C,T]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j&&(M(j.title||""),S(j.description||""))},[j]);let P=async t=>{T(!0);try{await b({id:e,...t})}catch(e){h.toast.error("Failed to update task")}finally{T(!1)}},I=async()=>{try{await v({id:e}),h.toast.success("Task deleted"),n()}catch(e){h.toast.error("Failed to delete task")}},O=e=>{P({status:e})};if(!j)return(0,t.jsx)("div",{className:"w-[360px] border-l bg-card flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse text-muted-foreground",children:"Loading..."})});let A="completed"===j.status,H="urgent"===j.urgency||"high"===j.urgency,F=j.deadline&&(0,o.format)(new Date(j.deadline),"yyyy-MM-dd")===(0,o.format)(new Date,"yyyy-MM-dd");return(0,t.jsxs)("div",{className:"w-[360px] border-l bg-card flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm text-muted-foreground",children:"Task Details"}),(0,t.jsx)(x.Button,{variant:"ghost",size:"icon",onClick:n,className:"h-8 w-8",children:(0,t.jsx)(m.X,{className:"h-4 w-4"})})]}),(0,t.jsx)(f.ScrollArea,{className:"flex-1",children:(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:(0,i.cn)("flex items-center justify-center h-5 w-5 rounded-full border cursor-pointer mt-1 shrink-0 transition-colors",A?"bg-primary border-primary":"border-primary/50 hover:bg-primary/10"),onClick:()=>O(A?"in_progress":"completed"),children:A&&(0,t.jsx)("div",{className:"h-3 w-3 rounded-full bg-background"})}),(0,t.jsx)(p.Input,{value:N,onChange:e=>M(e.target.value),onBlur:()=>{N!==j?.title&&P({title:N})},className:(0,i.cn)("border-none bg-transparent px-0 text-lg font-medium focus-visible:ring-0 shadow-none h-auto",A&&"line-through text-muted-foreground"),placeholder:"Task title"})]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsxs)("button",{onClick:()=>{let e=new Date;e.setHours(23,59,59,999),P({deadline:j?.deadline&&(0,o.format)(new Date(j.deadline),"yyyy-MM-dd")===(0,o.format)(e,"yyyy-MM-dd")?void 0:e.getTime()})},className:(0,i.cn)("w-full flex items-center gap-3 p-3 rounded-md hover:bg-secondary/50 transition-colors text-sm",F&&"text-primary"),children:[(0,t.jsx)(d.Sun,{className:(0,i.cn)("h-4 w-4",F&&"fill-primary")}),(0,t.jsx)("span",{children:F?"Added to My Day":"Add to My Day"})]}),(0,t.jsxs)("button",{onClick:()=>{P({urgency:j?.urgency==="urgent"?"low":"urgent"})},className:(0,i.cn)("w-full flex items-center gap-3 p-3 rounded-md hover:bg-secondary/50 transition-colors text-sm",H&&"text-primary"),children:[(0,t.jsx)(c.Star,{className:(0,i.cn)("h-4 w-4",H&&"fill-primary")}),(0,t.jsx)("span",{children:H?"Marked as Important":"Mark as Important"})]})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,t.jsxs)(y.Select,{value:j.status,onValueChange:O,children:[(0,t.jsx)(y.SelectTrigger,{className:"w-full",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"suggested",children:"Suggested"}),(0,t.jsx)(y.SelectItem,{value:"confirmed",children:"Confirmed"}),(0,t.jsx)(y.SelectItem,{value:"in_progress",children:"In Progress"}),(0,t.jsx)(y.SelectItem,{value:"completed",children:"Completed"}),(0,t.jsx)(y.SelectItem,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Priority"}),(0,t.jsxs)(y.Select,{value:j.urgency||"medium",onValueChange:e=>{P({urgency:e})},children:[(0,t.jsx)(y.SelectTrigger,{className:"w-full",children:(0,t.jsx)(y.SelectValue,{})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"urgent",children:"Urgent"}),(0,t.jsx)(y.SelectItem,{value:"high",children:"High"}),(0,t.jsx)(y.SelectItem,{value:"medium",children:"Medium"}),(0,t.jsx)(y.SelectItem,{value:"low",children:"Low"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Project"}),(0,t.jsxs)(y.Select,{value:j.projectId||"none",onValueChange:e=>{P({projectId:"none"===e?void 0:e})},children:[(0,t.jsx)(y.SelectTrigger,{className:"w-full",children:(0,t.jsx)(y.SelectValue,{placeholder:"No project"})}),(0,t.jsxs)(y.SelectContent,{children:[(0,t.jsx)(y.SelectItem,{value:"none",children:"No project"}),k?.map(e=>(0,t.jsx)(y.SelectItem,{value:e._id,children:e.name},e._id))]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Due Date"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("input",{type:"date",value:j.deadline?(0,o.format)(new Date(j.deadline),"yyyy-MM-dd"):"",onChange:e=>{if(e.target.value){let t=new Date(e.target.value);t.setHours(23,59,59,999),P({deadline:t.getTime()})}},className:"w-full px-3 py-2 text-sm rounded-md bg-secondary/50 border-none focus:ring-1 focus:ring-primary"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{let e=new Date;e.setHours(23,59,59,999),P({deadline:e.getTime()})},className:"flex-1 flex items-center justify-center gap-1.5 p-2 text-xs rounded-md bg-secondary/50 hover:bg-secondary transition-colors",children:[(0,t.jsx)(d.Sun,{className:"h-3 w-3"}),"Set Today"]}),j.deadline&&(0,t.jsxs)("button",{onClick:()=>P({deadline:void 0}),className:"flex-1 flex items-center justify-center gap-1.5 p-2 text-xs rounded-md bg-secondary/50 hover:bg-destructive/20 text-destructive transition-colors",children:[(0,t.jsx)(m.X,{className:"h-3 w-3"}),"Clear"]})]})]})]}),(0,t.jsx)("div",{className:"h-px bg-border"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("label",{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider flex items-center gap-2",children:[(0,t.jsx)(l.NotebookPen,{className:"h-3 w-3"}),"Description"]}),(0,t.jsx)(w.Textarea,{value:D,onChange:e=>S(e.target.value),onBlur:()=>{D!==j?.description&&P({description:D})},placeholder:"Add description...",className:"min-h-[120px] resize-none bg-secondary/30 border-none focus-visible:ring-1"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground space-y-1 pt-4",children:[j.createdAt&&(0,t.jsxs)("p",{children:["Created"," ",(0,o.format)(new Date(j.createdAt),"MMM d, yyyy 'at' h:mm a")]}),j.updatedAt&&j.updatedAt!==j.createdAt&&(0,t.jsxs)("p",{children:["Updated"," ",(0,o.format)(new Date(j.updatedAt),"MMM d, yyyy 'at' h:mm a")]})]})]})}),(0,t.jsx)("div",{className:"p-4 border-t",children:(0,t.jsxs)(g.AlertDialog,{children:[(0,t.jsx)(g.AlertDialogTrigger,{asChild:!0,children:(0,t.jsxs)(x.Button,{variant:"ghost",size:"sm",className:"w-full text-destructive hover:text-destructive hover:bg-destructive/10",children:[(0,t.jsx)(u.Trash2,{className:"h-4 w-4 mr-2"}),"Delete Task"]})}),(0,t.jsxs)(g.AlertDialogContent,{children:[(0,t.jsxs)(g.AlertDialogHeader,{children:[(0,t.jsx)(g.AlertDialogTitle,{children:"Delete Task"}),(0,t.jsx)(g.AlertDialogDescription,{children:"Are you sure you want to delete this task? This action cannot be undone."})]}),(0,t.jsxs)(g.AlertDialogFooter,{children:[(0,t.jsx)(g.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(g.AlertDialogAction,{onClick:I,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})]})})]})}var b=e.i(985612),v=e.i(560532),k=e.i(132705);function N({task:e,onClick:n,isSelected:s}){let l=(0,a.useMutation)(r.api.tasks.update),m=(0,a.useMutation)(r.api.tasks.deleteTask),g=async()=>{try{await m({id:e._id}),h.toast.success("Task deleted")}catch(e){h.toast.error("Failed to delete task")}},x=(0,a.useQuery)(r.api.projects.get,e.projectId?{id:e.projectId}:"skip"),p=async t=>{t.stopPropagation();try{await l({id:e._id,status:"completed"===e.status?"in_progress":"completed"})}catch(e){h.toast.error("Failed to update task")}},f=async t=>{t.stopPropagation();let r="urgent"===e.urgency?"low":"urgent";try{await l({id:e._id,urgency:r})}catch(e){h.toast.error("Failed to update importance")}},y="completed"===e.status,w="urgent"===e.urgency||"high"===e.urgency,j=void 0!==e.deadline&&new Date(e.deadline)<new Date,b=new Date;b.setHours(0,0,0,0);let N=new Date(b);N.setDate(N.getDate()+1);let M=e.deadline&&new Date(e.deadline)>=b&&new Date(e.deadline)<N;return(0,t.jsxs)(k.ContextMenu,{children:[(0,t.jsx)(k.ContextMenuTrigger,{children:(0,t.jsxs)("div",{className:(0,i.cn)("group flex items-start gap-3 p-3 rounded-md hover:bg-secondary/50 cursor-pointer transition-colors bg-card mb-1 border-none shadow-sm",y&&"bg-transparent hover:bg-secondary/30 opacity-75",s&&"bg-secondary/80 dark:bg-secondary/60"),onClick:n,children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-5 w-5 rounded-full border border-primary/50 hover:bg-primary/10 cursor-pointer transition-colors mt-0.5 shrink-0",onClick:p,children:y&&(0,t.jsx)("div",{className:"h-3 w-3 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("span",{className:(0,i.cn)("text-sm font-medium truncate block",y&&"text-muted-foreground line-through"),children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[M&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-primary",children:[(0,t.jsx)(d.Sun,{className:"h-3 w-3 fill-current"}),(0,t.jsx)("span",{className:"font-medium",children:"My Day"})]}),!y&&"in_progress"===e.status&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-primary",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary animate-pulse"}),(0,t.jsx)("span",{children:"In Progress"})]}),!y&&"suggested"===e.status&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-muted-foreground"}),(0,t.jsx)("span",{children:"Suggested"})]}),!y&&"confirmed"===e.status&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-primary",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-primary"}),(0,t.jsx)("span",{children:"Confirmed"})]}),"urgent"===e.urgency&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-destructive font-medium",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-destructive"}),(0,t.jsx)("span",{children:"Urgent"})]}),"high"===e.urgency&&(0,t.jsxs)("span",{className:"flex items-center gap-1 text-orange-500",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-orange-500"}),(0,t.jsx)("span",{children:"High"})]}),e.projectId&&(0,t.jsxs)("span",{className:"flex items-center gap-1 max-w-[120px]",children:[(0,t.jsx)("div",{className:"h-1.5 w-1.5 rounded-full bg-muted-foreground/50 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:x?.name||"Project"})]}),e.tags?.map(e=>(0,t.jsx)("span",{className:"px-1.5 py-0.5 rounded-md bg-secondary text-secondary-foreground text-[10px]",children:e},e)),e.deadline&&(0,t.jsxs)("span",{className:(0,i.cn)("flex items-center gap-1",j&&!y&&"text-destructive font-medium"),children:[(0,t.jsx)(v.Calendar,{className:"h-3 w-3"}),(0,o.format)(new Date(e.deadline),"MMM d")]})]})]}),(0,t.jsx)("button",{onClick:f,className:(0,i.cn)("p-1 hover:bg-secondary rounded-full transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",w&&"opacity-100"),children:(0,t.jsx)(c.Star,{className:(0,i.cn)("h-4 w-4",w?"fill-primary text-primary":"text-muted-foreground")})})]})}),(0,t.jsx)(k.ContextMenuContent,{children:(0,t.jsxs)(k.ContextMenuItem,{onClick:g,className:"text-destructive focus:text-destructive",children:[(0,t.jsx)(u.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})})]})}function M({title:e,tasks:n,view:i,projectId:o,selectedTaskId:l,onTaskSelect:c}){let[d,u]=(0,s.useState)(""),m=(0,a.useMutation)(r.api.tasks.create),g=async e=>{if(e.preventDefault(),d.trim())try{await m({title:d.trim(),status:"in_progress",projectId:o||void 0,urgency:"important"===i?"urgent":"medium",deadline:"today"===i?Date.now():void 0,sourceType:"manual"}),u("")}catch(e){h.toast.error("Failed to create task")}},y=new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"});return(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-full bg-background",children:[(0,t.jsx)("header",{className:"flex-none z-10 bg-background/80 backdrop-blur-md border-b border-border/40 shadow-sm",children:(0,t.jsx)("div",{className:"p-6 pb-4",children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:e}),"today"===i&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:y})]})})}),(0,t.jsx)(f.ScrollArea,{className:"flex-1 px-6",children:(0,t.jsxs)("div",{className:"space-y-1 pb-4",children:[n.filter(e=>"completed"!==e.status).map(e=>(0,t.jsx)(N,{task:e,onClick:()=>c?.(e._id),isSelected:l===e._id},e._id)),n.some(e=>"completed"===e.status)&&(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-3 px-2",children:"Completed"}),(0,t.jsx)("div",{className:"opacity-70",children:n.filter(e=>"completed"===e.status).map(e=>(0,t.jsx)(N,{task:e,onClick:()=>c?.(e._id),isSelected:l===e._id},e._id))})]})]})}),(0,t.jsx)("div",{className:"p-6 pt-2",children:(0,t.jsxs)("form",{onSubmit:g,className:"flex items-center gap-2 bg-secondary/80 p-3 rounded-md hover:bg-secondary transition-colors group focus-within:bg-background focus-within:ring-1 focus-within:ring-primary focus-within:shadow-lg",children:[(0,t.jsx)(b.Plus,{className:"h-5 w-5 text-muted-foreground group-focus-within:text-primary"}),(0,t.jsx)(p.Input,{value:d,onChange:e=>u(e.target.value),placeholder:"Add a task",className:"border-none bg-transparent shadow-none focus-visible:ring-0 px-2 h-auto py-1 text-base placeholder:text-muted-foreground/70"}),d&&(0,t.jsx)(x.Button,{size:"sm",type:"submit",variant:"ghost",children:"Add"})]})})]})}var D=e.i(755430);let S=(0,D.default)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var C=e.i(141477),T=e.i(359548);let P=(0,D.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);var I=e.i(804143);function O({currentView:e,onViewChange:n,projectFilter:o,onProjectFilterChange:l}){let u=(0,a.useQuery)(r.api.projects.list),[m,h]=(0,s.useState)(!0),g=[{id:"today",label:"My Day",icon:d.Sun},{id:"important",label:"Important",icon:c.Star},{id:"upcoming",label:"Planned",icon:S},{id:"all",label:"Tasks",icon:P},{id:"completed",label:"Completed",icon:I.List}];return(0,t.jsxs)("div",{className:"w-[280px] bg-muted/30 h-full flex flex-col border-r border-border/40",children:[(0,t.jsx)("div",{className:"p-4",children:g.map(r=>(0,t.jsxs)(x.Button,{variant:"ghost",className:(0,i.cn)("w-full justify-start mb-1 text-sm font-normal",e===r.id?"bg-secondary text-primary font-medium":"text-muted-foreground hover:bg-secondary/50 hover:text-foreground"),onClick:()=>{n(r.id),l(null)},children:[(0,t.jsx)(r.icon,{className:(0,i.cn)("mr-3 h-4 w-4",e===r.id?"text-primary":"text-muted-foreground group-hover:text-foreground")}),r.label]},r.id))}),(0,t.jsx)("div",{className:"px-4 py-2",children:(0,t.jsx)("div",{className:"h-[1px] bg-border"})}),(0,t.jsx)(f.ScrollArea,{className:"flex-1",children:(0,t.jsxs)("div",{className:"p-4 pt-0",children:[(0,t.jsxs)(x.Button,{variant:"ghost",className:"w-full justify-between mb-1 hover:bg-transparent px-2",onClick:()=>h(!m),children:[(0,t.jsx)("span",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:"Projects"}),m?(0,t.jsx)(C.ChevronDown,{className:"h-3 w-3 text-muted-foreground"}):(0,t.jsx)(T.ChevronRight,{className:"h-3 w-3 text-muted-foreground"})]}),m&&(0,t.jsxs)("div",{className:"space-y-1 mt-1",children:[u?.map(e=>(0,t.jsxs)(x.Button,{variant:"ghost",className:(0,i.cn)("w-full justify-start font-normal pl-2",o===e._id?"bg-secondary text-primary":"text-muted-foreground hover:bg-secondary/50"),onClick:()=>{l(e._id),n("project"),n("all")},children:[(0,t.jsx)(I.List,{className:"mr-3 h-4 w-4"}),(0,t.jsx)("span",{className:"truncate",children:e.name}),(0,t.jsx)("span",{className:"ml-auto text-xs text-muted-foreground"})]},e._id)),(0,t.jsxs)(x.Button,{variant:"ghost",className:"w-full justify-start text-muted-foreground hover:text-primary pl-2",children:[(0,t.jsx)(b.Plus,{className:"mr-3 h-4 w-4"}),"New Project"]})]})]})})]})}function A({initialProjectId:e,hideSidebar:o=!1}){let[l,c]=(0,s.useState)("all"),[d,u]=(0,s.useState)(e||null),[m,h]=(0,n.useQueryState)("task",n.parseAsString.withDefault("")),g=(0,s.useMemo)(()=>m||null,[m]),x=(0,s.useCallback)(e=>{h(e||"")},[h]),p=(0,a.useQuery)(r.api.tasks.list,"all"===l?{projectId:d||void 0}:"skip"),f=(0,a.useQuery)(r.api.tasks.getToday,"today"===l?{}:"skip"),y=(0,a.useQuery)(r.api.tasks.getUpcoming,"upcoming"===l?{days:7}:"skip"),w=(0,a.useQuery)(r.api.tasks.list,"completed"===l?{status:"completed",projectId:d||void 0}:"skip"),b=(0,a.useQuery)(r.api.tasks.list,"important"===l?{urgency:"urgent"}:"skip"),{tasks:v,title:k}=(0,s.useMemo)(()=>{switch(l){case"today":return{tasks:f||[],title:"My Day"};case"upcoming":return{tasks:y||[],title:"Planned"};case"important":return{tasks:b||[],title:"Important"};case"completed":return{tasks:w||[],title:"Completed"};default:return{tasks:p||[],title:d?"Project Tasks":"Tasks"}}},[l,p,f,y,w,b,d]),N=(0,a.useQuery)(r.api.projects.get,d?{id:d}:"skip"),D=d&&N?N.name:k,S=(0,s.useMemo)(()=>!!g&&!!v&&v.some(e=>e._id===g),[g,v]);return(0,s.useEffect)(()=>{g&&v&&v.length>0&&!S&&h(null)},[g,v,S,h]),(0,t.jsx)("div",{className:"flex h-[calc(100vh-4rem)] overflow-hidden",children:(0,t.jsxs)("main",{className:(0,i.cn)("flex w-full h-full overflow-hidden bg-background",!o&&"rounded-tl-xl border-t border-l shadow-2xl"),children:[!o&&(0,t.jsx)(O,{currentView:l,onViewChange:e=>c(e),projectFilter:d,onProjectFilterChange:u}),(0,t.jsx)(M,{title:D,tasks:v,view:l,projectId:d,selectedTaskId:g,onTaskSelect:x}),g&&(0,t.jsx)(j,{taskId:g,onClose:()=>x(null)})]})})}e.s(["TasksDashboard",()=>A],824550)},233306,e=>{"use strict";var t=e.i(379492),r=e.i(384078),a=e.i(824550);function n(){return(0,t.jsx)("div",{className:"h-full w-full flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse text-muted-foreground",children:"Loading tasks..."})})}function s({params:e}){let{id:s}=(0,r.use)(e);return(0,t.jsx)("div",{className:"h-full w-full",children:(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(n,{}),children:(0,t.jsx)(a.TasksDashboard,{initialProjectId:s,hideSidebar:!0})})})}e.s(["default",()=>s])}]);