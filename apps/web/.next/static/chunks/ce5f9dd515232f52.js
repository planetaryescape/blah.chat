(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,264036,e=>{"use strict";var t=e.i(379492),r=e.i(152088);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...n})}function a({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...n})}function s({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...n})}function i({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...n})}function o({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...n})}e.s(["Card",()=>n,"CardContent",()=>o,"CardDescription",()=>i,"CardHeader",()=>a,"CardTitle",()=>s])},497439,e=>{"use strict";let t=(0,e.i(755430).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>t],497439)},829164,e=>{"use strict";var t=e.i(379492),r=e.i(152088);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,r.cn)("w-full caption-bottom text-sm",e),...n})})}function a({className:e,...n}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,r.cn)("[&_tr]:border-b",e),...n})}function s({className:e,...n}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,r.cn)("[&_tr:last-child]:border-0",e),...n})}function i({className:e,...n}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,r.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...n})}function o({className:e,...n}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,r.cn)("text-muted-foreground h-10 px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}function l({className:e,...n}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,r.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...n})}e.s(["Table",()=>n,"TableBody",()=>s,"TableCell",()=>l,"TableHead",()=>o,"TableHeader",()=>a,"TableRow",()=>i])},982087,e=>{"use strict";var t=e.i(919528),r=e.i(98810),n=e.i(915092),a=e.i(195325),s=e.i(650496),i=e.i(982579);function o(e,t){let r=(0,i.toDate)(e,t?.in);return r.setHours(0,0,0,0),r}function l(e,t){let n=(0,r.getDefaultOptions)(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=(0,i.toDate)(e,t?.in),o=s.getDay();return s.setDate(s.getDate()-(7*(o<a)+o-a)),s.setHours(0,0,0,0),s}function c(e,t){return l(e,{...t,weekStartsOn:1})}var d=e.i(134955);function u(e,t){let r=(0,i.toDate)(e,t?.in),n=r.getFullYear(),a=(0,d.constructFrom)(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);let s=c(a),o=(0,d.constructFrom)(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);let l=c(o);return r.getTime()>=s.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function m(e,t){let n=(0,i.toDate)(e,t?.in),a=n.getFullYear(),s=(0,r.getDefaultOptions)(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=(0,d.constructFrom)(t?.in||e,0);c.setFullYear(a+1,0,o),c.setHours(0,0,0,0);let u=l(c,t),m=(0,d.constructFrom)(t?.in||e,0);m.setFullYear(a,0,o),m.setHours(0,0,0,0);let h=l(m,t);return+n>=+u?a+1:+n>=+h?a:a-1}function h(e,t){let r=Math.abs(e).toString().padStart(t,"0");return(e<0?"-":"")+r}let x={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return h("yy"===t?n%100:n,t.length)},M(e,t){let r=e.getMonth();return"M"===t?String(r+1):h(r+1,2)},d:(e,t)=>h(e.getDate(),t.length),a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>h(e.getHours()%12||12,t.length),H:(e,t)=>h(e.getHours(),t.length),m:(e,t)=>h(e.getMinutes(),t.length),s:(e,t)=>h(e.getSeconds(),t.length),S(e,t){let r=t.length;return h(Math.trunc(e.getMilliseconds()*Math.pow(10,r-3)),t.length)}},f={G:function(e,t,r){let n=+(e.getFullYear()>0);switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){let t=e.getFullYear();return r.ordinalNumber(t>0?t:1-t,{unit:"year"})}return x.y(e,t)},Y:function(e,t,r,n){let a=m(e,n),s=a>0?a:1-a;return"YY"===t?h(s%100,2):"Yo"===t?r.ordinalNumber(s,{unit:"year"}):h(s,t.length)},R:function(e,t){return h(u(e),t.length)},u:function(e,t){return h(e.getFullYear(),t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return h(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return h(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return x.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return h(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){let o,c,u,x,f,g=Math.round((l(o=(0,i.toDate)(e,a?.in),a)-(c=(0,r.getDefaultOptions)(),u=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??c.firstWeekContainsDate??c.locale?.options?.firstWeekContainsDate??1,x=m(o,a),(f=(0,d.constructFrom)(a?.in||o,0)).setFullYear(x,0,u),f.setHours(0,0,0,0),l(f,a)))/s.millisecondsInWeek)+1;return"wo"===t?n.ordinalNumber(g,{unit:"week"}):h(g,t.length)},I:function(e,t,r){let n,a,o,l=Math.round((c(n=(0,i.toDate)(e,void 0))-(a=u(n,void 0),(o=(0,d.constructFrom)(n,0)).setFullYear(a,0,4),o.setHours(0,0,0,0),c(o)))/s.millisecondsInWeek)+1;return"Io"===t?r.ordinalNumber(l,{unit:"week"}):h(l,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):x.d(e,t)},D:function(e,t,r){let l,c,d=function(e,t,r){let[i,l]=(0,a.normalizeDates)(void 0,e,t),c=o(i),d=o(l);return Math.round((c-(0,n.getTimezoneOffsetInMilliseconds)(c)-(d-(0,n.getTimezoneOffsetInMilliseconds)(d)))/s.millisecondsInDay)}(l=(0,i.toDate)(e,void 0),((c=(0,i.toDate)(l,void 0)).setFullYear(c.getFullYear(),0,1),c.setHours(0,0,0,0),c))+1;return"Do"===t?r.ordinalNumber(d,{unit:"dayOfYear"}):h(d,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){let a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return h(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){let a=e.getDay(),s=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return h(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){let n=e.getDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return h(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){let n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){let n,a=e.getHours();switch(n=12===a?"noon":0===a?"midnight":a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){let n,a=e.getHours();switch(n=a>=17?"evening":a>=12?"afternoon":a>=4?"morning":"night",t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return x.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):x.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):h(n,t.length)},k:function(e,t,r){let n=e.getHours();return(0===n&&(n=24),"ko"===t)?r.ordinalNumber(n,{unit:"hour"}):h(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):x.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):x.s(e,t)},S:function(e,t){return x.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return p(n);case"XXXX":case"XX":return b(n);default:return b(n,":")}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return p(n);case"xxxx":case"xx":return b(n);default:return b(n,":")}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+g(n,":");default:return"GMT"+b(n,":")}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+g(n,":");default:return"GMT"+b(n,":")}},t:function(e,t,r){return h(Math.trunc(e/1e3),t.length)},T:function(e,t,r){return h(+e,t.length)}};function g(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),s=n%60;return 0===s?r+String(a):r+String(a)+t+h(s,2)}function p(e,t){return e%60==0?(e>0?"-":"+")+h(Math.abs(e)/60,2):b(e,t)}function b(e,t=""){let r=Math.abs(e);return(e>0?"-":"+")+h(Math.trunc(r/60),2)+t+h(r%60,2)}let j=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},w=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},y={p:w,P:(e,t)=>{let r,n=e.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return j(e,t);switch(a){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",j(a,t)).replace("{{time}}",w(s,t))}},v=/^D+$/,N=/^Y+$/,T=["D","DD","YY","YYYY"],k=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,C=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,D=/^'([^]*?)'?$/,M=/''/g,P=/[a-zA-Z]/;function S(e,n,a){let s=(0,r.getDefaultOptions)(),o=a?.locale??s.locale??t.defaultLocale,l=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,d=(0,i.toDate)(e,a?.in);if(!(d instanceof Date||"object"==typeof d&&"[object Date]"===Object.prototype.toString.call(d))&&"number"!=typeof d||isNaN(+(0,i.toDate)(d)))throw RangeError("Invalid time value");let u=n.match(C).map(e=>{let t=e[0];return"p"===t||"P"===t?(0,y[t])(e,o.formatLong):e}).join("").match(k).map(e=>{if("''"===e)return{isToken:!1,value:"'"};let t=e[0];if("'"===t){var r;let t;return{isToken:!1,value:(t=(r=e).match(D))?t[1].replace(M,"'"):r}}if(f[t])return{isToken:!0,value:e};if(t.match(P))throw RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});o.localize.preprocessor&&(u=o.localize.preprocessor(d,u));let m={firstWeekContainsDate:l,weekStartsOn:c,locale:o};return u.map(t=>{if(!t.isToken)return t.value;let r=t.value;return(!a?.useAdditionalWeekYearTokens&&N.test(r)||!a?.useAdditionalDayOfYearTokens&&v.test(r))&&function(e,t,r){var n,a,s;let i,o=(n=e,a=t,s=r,i="Y"===n[0]?"years":"days of the month",`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${a}\`) for formatting ${i} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`);if(console.warn(o),T.includes(e))throw RangeError(o)}(r,n,String(e)),(0,f[r[0]])(d,r,o.localize,m)}).join("")}e.s(["format",()=>S],982087)},419574,e=>{"use strict";let t=(0,e.i(755430).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["default",()=>t])},681599,e=>{"use strict";var t=e.i(419574);e.s(["ImageIcon",()=>t.default])},150187,e=>{"use strict";var t=e.i(346624);e.s(["ChevronUp",()=>t.default])},87056,e=>{"use strict";var t=e.i(371057);e.s(["CheckCircle2",()=>t.default])},593830,e=>{"use strict";let t=(0,e.i(755430).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>t],593830)},141477,e=>{"use strict";var t=e.i(142676);e.s(["ChevronDown",()=>t.default])},357746,(e,t,r)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},462376,(e,t,r)=>{"use strict";var n=e.r(357746);function a(){}function s(){}s.resetWarningCache=a,t.exports=function(){function e(e,t,r,a,s,i){if(i!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:a};return r.PropTypes=r,r}},259414,(e,t,r)=>{t.exports=e.r(462376)()},987803,e=>{"use strict";var t=e.i(379492),r=e.i(283164);e.i(977101);var n=e.i(727630),a=e.i(982087),s=e.i(310165),i=e.i(87056),o=e.i(462957),l=e.i(681599),c=e.i(2138);let d=(0,e.i(755430).default)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);var u=e.i(985612),m=e.i(593830),h=e.i(760911),x=e.i(505196),f=e.i(384078),g=e.i(690558),p=e.i(799126),b=e.i(497439),j=e.i(278894),w=e.i(328299),y=e.i(985902),v=e.i(141477),N=e.i(150187),T=e.i(152088);function k({chunk:e,isHighlighted:r}){let[n,a]=(0,f.useState)(!1),s=(0,f.useRef)(null);(0,f.useEffect)(()=>{r&&s.current&&(a(!0),setTimeout(()=>{s.current?.scrollIntoView({behavior:"smooth",block:"center"})},100))},[r]);let i=e.content.length>200,l=n?e.content:e.content.slice(0,200)+(i?"...":""),c=void 0!==e.startPage?e.startPage===e.endPage?`Page ${e.startPage}`:`Pages ${e.startPage}-${e.endPage}`:null;return(0,t.jsxs)("div",{ref:s,id:`chunk-${e._id}`,className:(0,T.cn)("border rounded-lg p-3 transition-all duration-300",r?"ring-2 ring-primary bg-primary/5 border-primary/50 chunk-highlight":"border-border/50 bg-muted/30 hover:bg-muted/50"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(o.FileText,{className:"h-3 w-3"}),(0,t.jsxs)("span",{className:"font-medium",children:["Chunk ",e.chunkIndex+1]}),c&&(0,t.jsx)("span",{className:"bg-muted px-1.5 py-0.5 rounded text-[10px]",children:c}),e.section&&(0,t.jsx)("span",{className:"text-[10px] truncate max-w-[100px]",children:e.section})]}),(0,t.jsxs)("span",{className:"text-[10px] text-muted-foreground",children:[e.tokenCount," tokens"]})]}),(0,t.jsx)("div",{className:(0,T.cn)("text-sm font-mono bg-background/50 rounded p-2 whitespace-pre-wrap break-words",!n&&"line-clamp-4"),children:l}),i&&(0,t.jsx)("button",{type:"button",onClick:()=>a(!n),className:"mt-2 text-xs text-primary hover:underline flex items-center gap-1",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.ChevronUp,{className:"h-3 w-3"}),"Show less"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.ChevronDown,{className:"h-3 w-3"}),"Show more (",e.content.length-200," more chars)"]})})]})}function C({fileId:e,highlightChunkId:a,onClose:l}){var d;let u=(0,n.useQuery)(r.api.files.getFileWithChunks,{fileId:e});return void 0===u?(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,t.jsx)(c.Loader2,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):null===u?(0,t.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 text-muted-foreground",children:[(0,t.jsx)(s.AlertCircle,{className:"h-8 w-8"}),(0,t.jsx)("p",{children:"File not found"}),(0,t.jsx)(y.Button,{variant:"ghost",size:"sm",onClick:l,children:"Close"})]}):(0,t.jsxs)("div",{className:"flex flex-col h-full border-l bg-background",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,t.jsx)(o.FileText,{className:"h-5 w-5 text-muted-foreground shrink-0"}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("h2",{className:"font-medium truncate",children:u.name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(d=u.size)<1024?`${d} B`:d<1048576?`${(d/1024).toFixed(1)} KB`:`${(d/1048576).toFixed(1)} MB`," • ",u.mimeType]})]})]}),(0,t.jsx)(y.Button,{variant:"ghost",size:"icon",onClick:l,children:(0,t.jsx)(w.X,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"p-4 border-b bg-muted/30",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"Status"}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5 mt-0.5",children:[(e=>{switch(e){case"completed":return(0,t.jsx)(i.CheckCircle2,{className:"h-4 w-4 text-green-500"});case"processing":return(0,t.jsx)(c.Loader2,{className:"h-4 w-4 animate-spin text-blue-500"});case"failed":return(0,t.jsx)(s.AlertCircle,{className:"h-4 w-4 text-red-500"});default:return(0,t.jsx)(b.Clock,{className:"h-4 w-4 text-muted-foreground"})}})(u.embeddingStatus||"pending"),(0,t.jsx)("span",{children:(e=>{switch(e){case"completed":return"Indexed";case"processing":return"Processing...";case"failed":return"Failed";default:return"Pending"}})(u.embeddingStatus||"pending")})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"Chunks"}),(0,t.jsx)("p",{className:"mt-0.5",children:u.chunks?.length||0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-muted-foreground text-xs",children:"Added"}),(0,t.jsx)("p",{className:"mt-0.5",children:new Date(u.createdAt).toLocaleDateString()})]}),u.url&&(0,t.jsx)("div",{children:(0,t.jsxs)("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-primary hover:underline text-xs mt-0.5",children:[(0,t.jsx)(j.Download,{className:"h-3 w-3"}),"Download"]})})]}),u.embeddingError&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-red-500/10 border border-red-500/20 rounded text-xs text-red-500",children:u.embeddingError})]}),(0,t.jsx)("div",{className:"flex-1 min-h-0 overflow-auto",children:(0,t.jsx)("div",{className:"p-4 space-y-3",children:u.chunks&&u.chunks.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:["Content Chunks (",u.chunks.length,")"]}),u.chunks.map(e=>(0,t.jsx)(k,{chunk:e,isHighlighted:a===e._id},e._id))]}):(0,t.jsxs)("div",{className:"text-center text-muted-foreground py-8",children:[(0,t.jsx)(o.FileText,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"No content chunks available"}),(0,t.jsx)("p",{className:"text-xs mt-1",children:"pending"===u.embeddingStatus?"File is waiting to be processed":"processing"===u.embeddingStatus?"File is being processed...":"This file type may not support text extraction"})]})})})]})}var D=e.i(49275),M=e.i(264036),P=e.i(829164),S=e.i(465986);function F({status:e,chunkCount:r}){if(!e)return(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{children:(0,t.jsx)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-muted text-muted-foreground",children:"—"})}),(0,t.jsx)(S.TooltipContent,{children:"Not processed"})]});switch(e){case"pending":return(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-yellow-500/10 text-yellow-600 dark:text-yellow-400",children:[(0,t.jsx)(c.Loader2,{className:"w-2.5 h-2.5"}),"Pending"]})}),(0,t.jsx)(S.TooltipContent,{children:"Waiting to be processed"})]});case"processing":return(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-blue-500/10 text-blue-600 dark:text-blue-400",children:[(0,t.jsx)(c.Loader2,{className:"w-2.5 h-2.5 animate-spin"}),"Processing"]})}),(0,t.jsx)(S.TooltipContent,{children:"Extracting text and generating embeddings"})]});case"completed":return(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-green-500/10 text-green-600 dark:text-green-400",children:[(0,t.jsx)(i.CheckCircle2,{className:"w-2.5 h-2.5"}),"Ready"]})}),(0,t.jsx)(S.TooltipContent,{children:r?`${r} chunks indexed`:"Indexed and searchable"})]});case"failed":return(0,t.jsxs)(S.Tooltip,{children:[(0,t.jsx)(S.TooltipTrigger,{children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-[10px] font-medium bg-red-500/10 text-red-600 dark:text-red-400",children:[(0,t.jsx)(s.AlertCircle,{className:"w-2.5 h-2.5"}),"Failed"]})}),(0,t.jsx)(S.TooltipContent,{children:"Processing failed - file may not be searchable"})]})}}function H({params:e}){let{id:s}=(0,f.use)(e),[i,b]=(0,x.useQueryState)("file",x.parseAsString.withDefault("")),[j,w]=(0,x.useQueryState)("chunk",x.parseAsString.withDefault("")),v=(0,f.useMemo)(()=>i||null,[i]),N=(0,f.useMemo)(()=>j||null,[j]),k=(0,f.useCallback)(e=>{b(e||""),e||w("")},[b,w]),S=(0,n.useQuery)(r.api.projects.getProjectResources,{projectId:s}),H=(0,n.useQuery)(r.api.projects.getProjectAttachments,{projectId:s,paginationOpts:{numItems:50,cursor:null}}),O=(0,n.useMutation)(r.api.files.generateUploadUrl),I=(0,n.useMutation)(r.api.files.saveFile),B=(0,n.useMutation)(r.api.projects.addFileToProject);(0,n.useMutation)(r.api.files.deleteFile);let E=(0,n.useMutation)(r.api.projects.removeFileFromProject),[Y,z]=(0,f.useState)(!1),[A,L]=(0,f.useState)(null),q=(0,f.useCallback)(async e=>{z(!0);try{for(let t of e){let e=await O(),r=await fetch(e,{method:"POST",headers:{"Content-Type":t.type},body:t}),{storageId:n}=await r.json(),a=await I({storageId:n,name:t.name,mimeType:t.type,size:t.size});await B({projectId:s,fileId:a})}p.toast.success("Files uploaded to project context")}catch(e){console.error(e),p.toast.error("Failed to upload files")}finally{z(!1)}},[O,I,B,s]),{getRootProps:_,getInputProps:R,isDragActive:W}=(0,g.useDropzone)({onDrop:q}),$=e=>{if(0===e)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**t).toFixed(1))} ${["B","KB","MB","GB","TB"][t]}`},Q=e=>e.startsWith("image/")?(0,t.jsx)(l.ImageIcon,{className:"w-4 h-4 text-blue-500"}):e.startsWith("audio/")?(0,t.jsx)(d,{className:"w-4 h-4 text-purple-500"}):(0,t.jsx)(o.FileText,{className:"w-4 h-4 text-gray-500"}),G=S?.files||[],U=H?.page||[],X=(0,f.useMemo)(()=>!!v&&!!G.length&&G.some(e=>e._id===v),[v,G]);return(0,f.useEffect)(()=>{v&&G.length>0&&!X&&(b(null),w(null))},[v,G,X,b,w]),(0,t.jsxs)("div",{className:"h-full flex",children:[(0,t.jsxs)("div",{className:(0,T.cn)("flex-1 flex flex-col space-y-8 p-6 overflow-y-auto transition-all",v&&"max-w-[60%]"),children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold tracking-tight",children:"Files"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage project context and view attachments from conversations."})]}),(0,t.jsxs)(M.Card,{children:[(0,t.jsxs)(M.CardHeader,{className:"flex flex-row items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(M.CardTitle,{className:"text-lg",children:"Project Context"}),(0,t.jsx)(M.CardDescription,{children:"Files uploaded here are available as context for all project conversations."})]}),(0,t.jsxs)("div",{..._(),children:[(0,t.jsx)("input",{...R()}),(0,t.jsxs)(y.Button,{disabled:Y,size:"sm",children:[Y?(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin mr-2"}):(0,t.jsx)(u.Plus,{className:"w-4 h-4 mr-2"}),"Add File"]})]})]}),(0,t.jsxs)(M.CardContent,{children:[Y&&(0,t.jsxs)("div",{className:"flex items-center justify-center p-8 border-2 border-dashed rounded-lg mb-4",children:[(0,t.jsx)(c.Loader2,{className:"w-6 h-6 animate-spin text-muted-foreground"}),(0,t.jsx)("span",{className:"ml-2 text-sm text-muted-foreground",children:"Uploading..."})]}),0!==G.length||Y?(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P.Table,{children:[(0,t.jsx)(P.TableHeader,{children:(0,t.jsxs)(P.TableRow,{children:[(0,t.jsx)(P.TableHead,{className:"w-[35%]",children:"Name"}),(0,t.jsx)(P.TableHead,{children:"Type"}),(0,t.jsx)(P.TableHead,{children:"Size"}),(0,t.jsx)(P.TableHead,{children:"Status"}),(0,t.jsx)(P.TableHead,{children:"Added"}),(0,t.jsx)(P.TableHead,{className:"text-right",children:"Actions"})]})}),(0,t.jsx)(P.TableBody,{children:G.map(e=>(0,t.jsxs)(P.TableRow,{className:(0,T.cn)("cursor-pointer hover:bg-muted/50 transition-colors",v===e._id&&"bg-primary/10 hover:bg-primary/15"),onClick:()=>k(e._id),children:[(0,t.jsxs)(P.TableCell,{className:"font-medium flex items-center gap-2",children:[Q(e.mimeType),e.name]}),(0,t.jsx)(P.TableCell,{className:"text-muted-foreground text-xs",children:e.mimeType}),(0,t.jsx)(P.TableCell,{className:"text-xs font-mono",children:$(e.size)}),(0,t.jsx)(P.TableCell,{children:(0,t.jsx)(F,{status:e.embeddingStatus,chunkCount:e.chunkCount})}),(0,t.jsx)(P.TableCell,{className:"text-muted-foreground text-xs",children:(0,a.format)(e.createdAt,"MMM d, yyyy")}),(0,t.jsx)(P.TableCell,{className:"text-right",children:(0,t.jsxs)(y.Button,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 text-destructive",onClick:t=>{t.stopPropagation(),L({id:e._id,name:e.name})},children:[(0,t.jsx)("span",{className:"sr-only",children:"Remove"}),"×"]})})]},e._id))})]})}):(0,t.jsxs)("div",{..._(),className:`flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg cursor-pointer transition-colors ${W?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[(0,t.jsx)("input",{...R()}),(0,t.jsx)(m.Upload,{className:"w-8 h-8 text-muted-foreground mb-4"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:"Drag & drop context files here, or click to select"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"PDF, TXT, MD, Images (Max 10MB)"})]})]})]}),(0,t.jsxs)(M.Card,{children:[(0,t.jsxs)(M.CardHeader,{children:[(0,t.jsx)(M.CardTitle,{className:"text-lg",children:"Conversation Attachments"}),(0,t.jsx)(M.CardDescription,{children:"Files attached to conversations linked to this project."})]}),(0,t.jsx)(M.CardContent,{children:0===U.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground italic text-sm",children:"No attachments found in linked conversations."}):(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(P.Table,{children:[(0,t.jsx)(P.TableHeader,{children:(0,t.jsxs)(P.TableRow,{children:[(0,t.jsx)(P.TableHead,{className:"w-[40%]",children:"Name"}),(0,t.jsx)(P.TableHead,{children:"Type"}),(0,t.jsx)(P.TableHead,{children:"Size"}),(0,t.jsx)(P.TableHead,{children:"Conversation"}),(0,t.jsx)(P.TableHead,{children:"Date"})]})}),(0,t.jsx)(P.TableBody,{children:U.map(e=>(0,t.jsxs)(P.TableRow,{children:[(0,t.jsxs)(P.TableCell,{className:"font-medium flex items-center gap-2",children:[Q(e.mimeType),e.name]}),(0,t.jsx)(P.TableCell,{className:"text-muted-foreground text-xs",children:e.mimeType}),(0,t.jsx)(P.TableCell,{className:"text-xs font-mono",children:$(e.size)}),(0,t.jsx)(P.TableCell,{children:e.conversationId&&(0,t.jsx)(h.default,{href:`/chat/${e.conversationId}`,className:"text-xs text-primary hover:underline",children:"View Chat"})}),(0,t.jsx)(P.TableCell,{className:"text-muted-foreground text-xs",children:(0,a.format)(e.createdAt,"MMM d, yyyy")})]},e._id))})]})})})]})]}),v&&(0,t.jsx)("div",{className:"w-[40%] min-w-[350px] h-full overflow-hidden",children:(0,t.jsx)(C,{fileId:v,highlightChunkId:N,onClose:()=>k(null)})}),(0,t.jsx)(D.AlertDialog,{open:!!A,onOpenChange:e=>!e&&L(null),children:(0,t.jsxs)(D.AlertDialogContent,{children:[(0,t.jsxs)(D.AlertDialogHeader,{children:[(0,t.jsx)(D.AlertDialogTitle,{children:"Remove file from project?"}),(0,t.jsxs)(D.AlertDialogDescription,{children:["This will remove"," ",(0,t.jsx)("span",{className:"font-medium",children:A?.name})," from the project context. The file will no longer be available for AI conversations in this project."]})]}),(0,t.jsxs)(D.AlertDialogFooter,{children:[(0,t.jsx)(D.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(D.AlertDialogAction,{className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",onClick:async()=>{A&&(await E({projectId:s,fileId:A.id}),p.toast.success("File removed from project"),L(null))},children:"Remove"})]})]})})]})}e.s(["default",()=>H],987803)}]);