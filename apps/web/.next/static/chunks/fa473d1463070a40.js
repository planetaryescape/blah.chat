(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,879992,e=>{"use strict";let t;var s=e.i(384078);let l=e=>{let t,s=new Set,l=(e,l)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=l?l:"object"!=typeof i||null===i)?i:Object.assign({},t,i),s.forEach(s=>s(t,e))}},i=()=>t,r={setState:l,getState:i,getInitialState:()=>a,subscribe:e=>(s.add(e),()=>s.delete(e))},a=t=e(l,i,r);return r},i=e=>{let t=e?l(e):l,i=e=>(function(e,t=e=>e){let l=s.default.useSyncExternalStore(e.subscribe,s.default.useCallback(()=>t(e.getState()),[e,t]),s.default.useCallback(()=>t(e.getInitialState()),[e,t]));return s.default.useDebugValue(l),l})(t,e);return Object.assign(i,t),i},r=(t=(e,t)=>({pendingTemplateText:null,pendingTemplateName:null,setTemplateText:(t,s)=>{e({pendingTemplateText:t,pendingTemplateName:s||null})},consumeTemplateText:()=>{let{pendingTemplateText:s,pendingTemplateName:l}=t();return s?(e({pendingTemplateText:null,pendingTemplateName:null}),{text:s,name:l||"Template"}):null},clear:()=>{e({pendingTemplateText:null,pendingTemplateName:null})}}))?i(t):i;e.s(["useTemplateStore",0,r],879992)},897885,e=>{"use strict";var t=e.i(379492),s=e.i(890042),l=e.i(152088);function i({chatWidth:e="standard"}){let i=(0,l.cn)("relative rounded-[2rem] rounded-tr-sm","px-5 py-3 sm:px-6 sm:py-4 text-sm sm:text-base leading-relaxed","bg-primary/5","border border-primary/10"),r=(0,l.cn)("relative rounded-[2rem] rounded-tl-sm","px-5 py-3 sm:px-6 sm:py-4 text-sm sm:text-base leading-relaxed","bg-muted/30 border border-border/30");return(0,t.jsx)("div",{className:"flex-1 w-full min-w-0 relative flex flex-col overflow-hidden",children:(0,t.jsx)("div",{className:"flex-1 w-full min-w-0 overflow-y-auto relative",style:{contain:"layout style paint",contentVisibility:"auto"},children:(0,t.jsx)("div",{className:(0,l.cn)("grid gap-4 p-4 transition-all duration-300 ease-out","narrow"===e&&"grid-cols-[1fr_min(42rem,100%)_1fr]","standard"===e&&"grid-cols-[1fr_min(56rem,100%)_1fr]","wide"===e&&"grid-cols-[1fr_min(72rem,100%)_1fr]","full"===e&&"grid-cols-[1fr_min(95%,100%)_1fr]",!e&&"grid-cols-[1fr_min(56rem,100%)_1fr]"),children:[{isUser:!0,lines:[{width:"w-24"},{width:"w-40"}]},{isUser:!1,lines:[{width:"w-48"},{width:"w-72 sm:w-96"},{width:"w-56"}]},{isUser:!0,lines:[{width:"w-32"}]},{isUser:!1,lines:[{width:"w-64"},{width:"w-80 sm:w-[400px]"}]}].map((e,a)=>(0,t.jsx)("div",{className:(0,l.cn)("col-start-2 flex w-full mb-10",e.isUser?"justify-end":"justify-start"),children:(0,t.jsx)("div",{className:e.isUser?"relative group ml-auto max-w-[90%] sm:max-w-[75%]":"relative group mr-auto max-w-[95%] sm:max-w-[85%]",children:(0,t.jsx)("div",{className:e.isUser?i:r,children:(0,t.jsx)("div",{className:"space-y-2",children:e.lines.map((i,r)=>(0,t.jsx)(s.Skeleton,{className:(0,l.cn)("h-4",i.width,e.isUser&&"ml-auto")},r))})})})},a))})})})}e.s(["MessageListSkeleton",()=>i])},552037,e=>{"use strict";var t=e.i(379492),s=e.i(283164);e.i(977101);var l=e.i(161606),i=e.i(260449),r=e.i(727630),a=e.i(430387),n=e.i(384078),d=e.i(897885),u=e.i(190508),m=e.i(370787),c=e.i(696057),o=e.i(879992);function p(){let e=(0,a.useRouter)(),p=(0,a.useSearchParams)(),{isAuthenticated:f,isLoading:x}=(0,i.useConvexAuth)(),{startNewChat:g}=(0,u.useNewChat)(),{newChatModel:h}=(0,m.useNewChatModel)(),w=(0,n.useRef)(!1),b=(0,o.useTemplateStore)(e=>e.consumeTemplateText),T=(0,r.useMutation)(s.api.conversations.create),j="template"===p.get("from");return(0,n.useEffect)(()=>{x||f||e.push("/sign-in")},[x,f,e]),(0,n.useEffect)(()=>{x||!f||!j||w.current||(w.current=!0,(async()=>{let t=b();if(!t)return g();try{let s=await T({model:h,title:t.name||"New Chat"});c.analytics.track("template_used",{templateId:"from-store",templateName:t.name,conversationId:s}),sessionStorage.setItem("pending-template-text",t.text),e.replace(`/chat/${s}?insertTemplate=true`)}catch(e){console.error("Failed to create chat with template:",e),g()}})())},[x,f,j,b,T,h,e,g]),(0,n.useEffect)(()=>{x||!f||j||w.current||(w.current=!0,g())},[f,x,j,g]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Authenticated,{children:(0,t.jsx)(d.MessageListSkeleton,{})}),(0,t.jsx)(l.Unauthenticated,{children:(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Redirecting to sign in..."})})})]})}function f(){return(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)(d.MessageListSkeleton,{}),children:(0,t.jsx)(p,{})})}e.s(["default",()=>f])}]);